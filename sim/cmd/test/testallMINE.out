>> #First display the versions
>> 
>> #of the flowsheet
>> about /
Version = (78, 'V1.1.7.9')
>> 
>> #Of the ThermoAdmin (which requests the version of each provider)
>> about $

Provider VirtualMaterials:
   Version = 4.0000 (ServicePack 0)
   Build = 41222
   Extension SDK Version = 1.0000
   UserDatabasePath = 
   Default Flash Version = 0
   DBPath = C:\Program Files\SeaPP\SeaPkg
   LicensePath = C:\Program Files\Common Files\VMGLicense
   PkgPath = C:\Program Files\SeaPP\SeaPkg
   PrfPath = C:\Program Files\SeaPP\SeaPkg
>> 
>> 
>> 
>> # run all test files
>> read simpleflash.tst
Processing simpleflash.tst
>> # Simple flash test
>> units SI
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + PROPANE n-BUTANE ISOBUTANE n-PENTANE
PROPANE n-BUTANE ISOBUTANE n-PENTANE 
>> 
>> flash = Flash.SimpleFlash()
>> cd flash.In
/flash.In
>> Fraction = .25 .25 .25 .25
>> T = 0 C
>> P = 101.325
>> MoleFlow = 10
>> cd ..
/flash
>> # dump the results
>> Vap   # Vapour stream
Port: /flash.Vap + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 7.03863746929 = kgmole/h
MassFlow           = 390.340586478 = kg/h
VolumeFlow         = 152.74718327 = m3/hr
StdLiqVolumeFlow   = 0.694019964827 = m3/hr
H                  = 14667.0947179 = kJ/kmol
Energy             = 28676.7673464 = W
MolecularWeight    = 55.4568392222 = 
ZFactor            = 0.96821014504 = 
PROPANE            = 0.327247873804 = 
n-BUTANE           = 0.258206401152 = 
ISOBUTANE          = 0.277319993329 = 
n-PENTANE          = 0.137225731715 = 

>> Liq0  # Liquid stream
Port: /flash.Liq0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 2.96136253071 = kgmole/h
MassFlow           = 190.881413522 = kg/h
VolumeFlow         = 0.296058588147 = m3/hr
StdLiqVolumeFlow   = 0.317665169306 = m3/hr
H                  = -7203.64629113 = kJ/kmol
Energy             = -5925.72450306 = W
MolecularWeight    = 64.4572934055 = 
ZFactor            = 0.00446037221991 = 
PROPANE            = 0.0663954013251 = 
n-BUTANE           = 0.230494828973 = 
ISOBUTANE          = 0.185065184788 = 
n-PENTANE          = 0.518044584914 = 

>> In
Port: /flash.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.703863746929 = 
T                  = 0.0 * C
P                  = 101.325 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 581.222 = kg/h
VolumeFlow         = 153.043241858 = m3/hr
StdLiqVolumeFlow   = 1.01168513413 = m3/hr
H                  = 8190.37542361 = kJ/kmol
Energy             = 22751.0428434 = W
MolecularWeight    = 58.1222 = 
ZFactor            = 0.68280889842 = 
PROPANE            = 0.25 * 
n-BUTANE           = 0.25 * 
ISOBUTANE          = 0.25 * 
n-PENTANE          = 0.25 * 

>> 
>> cd /
/
>> 
>> #Add a test here to make sure that estimates do not back propagate values
>> s = Stream.Stream_Material()
>> s.Out -> flash.In
>> 
>> #We should have values in s.Out as passed (backpropagated)
>> s.Out
Port: /s.Out + sim.solver.Ports.Port_Material
Connected to: /flash.In
VapFrac            = 0.703863746929 | 
T                  = 0.0 | C
P                  = 101.325 | kPa
MoleFlow           = 10.0 | kgmole/h
MassFlow           = 581.222 | kg/h
VolumeFlow         = 153.043241858 | m3/hr
StdLiqVolumeFlow   = 1.01168513413 | m3/hr
H                  = 8190.37542361 | kJ/kmol
Energy             = 22751.0428434 | W
MolecularWeight    = 58.1222 | 
ZFactor            = 0.68280889842 | 
PROPANE            = 0.25 | 
n-BUTANE           = 0.25 | 
ISOBUTANE          = 0.25 | 
n-PENTANE          = 0.25 | 

>> flash.In
Port: /flash.In + sim.solver.Ports.Port_Material
Connected to: /s.Out
VapFrac            = 0.703863746929 = 
T                  = 0.0 * C
P                  = 101.325 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 581.222 = kg/h
VolumeFlow         = 153.043241858 = m3/hr
StdLiqVolumeFlow   = 1.01168513413 = m3/hr
H                  = 8190.37542361 = kJ/kmol
Energy             = 22751.0428434 = W
MolecularWeight    = 58.1222 = 
ZFactor            = 0.68280889842 = 
PROPANE            = 0.25 * 
n-BUTANE           = 0.25 * 
ISOBUTANE          = 0.25 * 
n-PENTANE          = 0.25 * 

>> 
>> #Now estimate one of the values in flash.In
>> flash.In.T ~= 0 C
Changed state of port /flash.In to 1 (0=Normal port; 1=Recycle port)
>> 
>> #Nothing should be in s.Out
>> s.Out
Port: /s.Out + sim.solver.Ports.Port_Material
Connected to: /flash.In
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = None
n-BUTANE           = None
ISOBUTANE          = None
n-PENTANE          = None

>> 
>> #Disconnect and reconnect
>> s.Out ->
>> s.Out
Port: /s.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = None
n-BUTANE           = None
ISOBUTANE          = None
n-PENTANE          = None

>> s.Out -> flash.In
>> s.Out
Port: /s.Out + sim.solver.Ports.Port_Material
Connected to: /flash.In
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = None
n-BUTANE           = None
ISOBUTANE          = None
n-PENTANE          = None

>> 
>> 
>> #Now re specify the value
>> flash.In.State = 0 #Make it a normal port
Changed state of port /flash.In to 0 (0=Normal port; 1=Recycle port)
>> flash.In.T = 0 C
>> s.Out
Port: /s.Out + sim.solver.Ports.Port_Material
Connected to: /flash.In
VapFrac            = 0.703863746929 | 
T                  = 0.0 | C
P                  = 101.325 | kPa
MoleFlow           = 10.0 | kgmole/h
MassFlow           = 581.222 | kg/h
VolumeFlow         = 153.043241858 | m3/hr
StdLiqVolumeFlow   = 1.01168513413 | m3/hr
H                  = 8190.37542361 | kJ/kmol
Energy             = 22751.0428434 | W
MolecularWeight    = 58.1222 | 
ZFactor            = 0.68280889842 | 
PROPANE            = 0.25 | 
n-BUTANE           = 0.25 | 
ISOBUTANE          = 0.25 | 
n-PENTANE          = 0.25 | 

>> 
>> #Now estimate P and Fraction
>> flash.In.P ~= 101.325 kPa
Changed state of port /flash.In to 1 (0=Normal port; 1=Recycle port)
>> flash.In.Fraction ~= .25 .25 .25 .25
>> s.Out
Port: /s.Out + sim.solver.Ports.Port_Material
Connected to: /flash.In
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = None
n-BUTANE           = None
ISOBUTANE          = None
n-PENTANE          = None

>> 
>> #Un estimate only P
>> flash.In.P = 101.325 kPa
>> s.Out
Port: /s.Out + sim.solver.Ports.Port_Material
Connected to: /flash.In
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = None
n-BUTANE           = None
ISOBUTANE          = None
n-PENTANE          = None

>> 
>> #Remove composition altogether
>> flash.In.Fraction = 
>> flash.In.State = 0
Changed state of port /flash.In to 0 (0=Normal port; 1=Recycle port)
>> s.Out
Port: /s.Out + sim.solver.Ports.Port_Material
Connected to: /flash.In
VapFrac            = None
T                  = 0.0 | C
P                  = 101.325 | kPa
MoleFlow           = 10.0 | kgmole/h
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = None
n-BUTANE           = None
ISOBUTANE          = None
n-PENTANE          = None

>> 
>> #Make it solve again
>> flash.In.Fraction = .25 .25 .25 .25
>> flash.In
Port: /flash.In + sim.solver.Ports.Port_Material
Connected to: /s.Out
VapFrac            = 0.703863746929 = 
T                  = 0.0 * C
P                  = 101.325 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 581.222 = kg/h
VolumeFlow         = 153.043241858 = m3/hr
StdLiqVolumeFlow   = 1.01168513413 = m3/hr
H                  = 8190.37542361 = kJ/kmol
Energy             = 22751.0428434 = W
MolecularWeight    = 58.1222 = 
ZFactor            = 0.68280889842 = 
PROPANE            = 0.25 * 
n-BUTANE           = 0.25 * 
ISOBUTANE          = 0.25 * 
n-PENTANE          = 0.25 * 

>> 
>> 
>> #Test copy and paste
>> copy /flash /s
Copied /flash /s to the clipboard
>> paste /
Pasting /flash /s
Pasted /flash /s as /flashClone /sClone
>> /flashClone.In
Port: /flashClone.In + sim.solver.Ports.Port_Material
Connected to: /sClone.Out
VapFrac            = 0.703863746929 = 
T                  = 0.0 * C
P                  = 101.325 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 581.222 = kg/h
VolumeFlow         = 153.043241858 = m3/hr
StdLiqVolumeFlow   = 1.01168513413 = m3/hr
H                  = 8190.37542361 = kJ/kmol
Energy             = 22751.0428434 = W
MolecularWeight    = 58.1222 = 
ZFactor            = 0.68280889842 = 
PROPANE            = 0.25 * 
n-BUTANE           = 0.25 * 
ISOBUTANE          = 0.25 * 
n-PENTANE          = 0.25 * 

>> /sClone.Out
Port: /sClone.Out + sim.solver.Ports.Port_Material
Connected to: /flashClone.In
VapFrac            = 0.703863746929 | 
T                  = 0.0 | C
P                  = 101.325 | kPa
MoleFlow           = 10.0 | kgmole/h
MassFlow           = 581.222 | kg/h
VolumeFlow         = 153.043241858 | m3/hr
StdLiqVolumeFlow   = 1.01168513413 | m3/hr
H                  = 8190.37542361 | kJ/kmol
Energy             = 22751.0428434 | W
MolecularWeight    = 58.1222 | 
ZFactor            = 0.68280889842 | 
PROPANE            = 0.25 | 
n-BUTANE           = 0.25 | 
ISOBUTANE          = 0.25 | 
n-PENTANE          = 0.25 | 

>> 
>> clear
>> read twophaseflash.tst
Processing twophaseflash.tst
>> # Two phase flash test
>> units SI
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + PROPANE n-BUTANE ISOBUTANE n-PENTANE WATER
PROPANE n-BUTANE ISOBUTANE n-PENTANE WATER 
>> 
>> flash = Flash.SimpleFlash()
>> flash.LiquidPhases = 2  # set the number of phases parameter
>> cd flash.In
/flash.In
>> Fraction = .2 .2 .2 .2 .2
>> T = 0
>> P = 101.325
>> MoleFlow = 10
>> cd ..
/flash
>> # dump the results
>> Vap   # Vapour stream
Port: /flash.Vap + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 5.70579227949 = kgmole/h
MassFlow           = 315.455568805 = kg/h
VolumeFlow         = 123.847516297 = m3/hr
StdLiqVolumeFlow   = 0.560217189803 = m3/hr
H                  = 14645.6638992 = kJ/kmol
Energy             = 23212.5322233 = W
MolecularWeight    = 55.2869002853 = 
ZFactor            = 0.968403521484 = 
PROPANE            = 0.323755165504 = 
n-BUTANE           = 0.257009892165 = 
ISOBUTANE          = 0.275543887304 = 
n-PENTANE          = 0.137971564066 = 
WATER              = 0.0057194909609 = 

>> Liq0  # Liquid stream
Port: /flash.Liq0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 2.32713021533 = kgmole/h
MassFlow           = 150.115139157 = kg/h
VolumeFlow         = 0.232776197377 = m3/hr
StdLiqVolumeFlow   = 0.249724587861 = m3/hr
H                  = -7209.00516208 = kJ/kmol
Energy             = -4660.08159309 = W
MolecularWeight    = 64.5065489539 = 
ZFactor            = 0.00446275350613 = 
PROPANE            = 0.0656260123366 = 
n-BUTANE           = 0.229275928788 = 
ISOBUTANE          = 0.183833208964 = 
n-PENTANE          = 0.521140977403 = 
WATER              = 0.000123872508087 = 

>> Liq1  # Water stream
Port: /flash.Liq1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 1.96707750518 = kgmole/h
MassFlow           = 35.4374520375 = kg/h
VolumeFlow         = 0.0411980695202 = m3/hr
StdLiqVolumeFlow   = 0.0354710544432 = m3/hr
H                  = -36400.9901294 = kJ/kmol
Energy             = -19889.880236 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.000934416308796 = 
PROPANE            = 1.46527735732e-015 = 
n-BUTANE           = 7.57534202165e-018 = 
ISOBUTANE          = 2.66313701146e-018 = 
n-PENTANE          = 5.34513346855e-021 = 
WATER              = 1.0 = 

>> In    
Port: /flash.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.570579227949 = 
T                  = 0.0 * C
P                  = 101.325 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 501.00816 = kg/h
VolumeFlow         = 124.121490564 = m3/hr
StdLiqVolumeFlow   = 0.845412832108 = m3/hr
H                  = -481.474658082 = kJ/kmol
Energy             = -1337.42960578 = W
MolecularWeight    = 50.100816 = 
ZFactor            = 0.553773281415 = 
PROPANE            = 0.2 * 
n-BUTANE           = 0.2 * 
ISOBUTANE          = 0.2 * 
n-PENTANE          = 0.2 * 
WATER              = 0.2 * 

>> 
>> 
>> #Test copy and paste
>> copy /flash
Copied /flash to the clipboard
>> paste /
Pasting /flash
Pasted /flash as /flashClone
>> /flashClone.In
Port: /flashClone.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.570579227949 = 
T                  = 0.0 * C
P                  = 101.325 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 501.00816 = kg/h
VolumeFlow         = 124.121490564 = m3/hr
StdLiqVolumeFlow   = 0.845412832108 = m3/hr
H                  = -481.474658082 = kJ/kmol
Energy             = -1337.42960578 = W
MolecularWeight    = 50.100816 = 
ZFactor            = 0.553773281415 = 
PROPANE            = 0.2 * 
n-BUTANE           = 0.2 * 
ISOBUTANE          = 0.2 * 
n-PENTANE          = 0.2 * 
WATER              = 0.2 * 

>> /flashClone.Vap
Port: /flashClone.Vap + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 5.70579227949 = kgmole/h
MassFlow           = 315.455568805 = kg/h
VolumeFlow         = 123.847516297 = m3/hr
StdLiqVolumeFlow   = 0.560217189803 = m3/hr
H                  = 14645.6638992 = kJ/kmol
Energy             = 23212.5322233 = W
MolecularWeight    = 55.2869002853 = 
ZFactor            = 0.968403521484 = 
PROPANE            = 0.323755165504 = 
n-BUTANE           = 0.257009892165 = 
ISOBUTANE          = 0.275543887304 = 
n-PENTANE          = 0.137971564066 = 
WATER              = 0.0057194909609 = 

>> 
>> clear
>> read mixandflash.tst
Processing mixandflash.tst
>> units SI
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + PROPANE n-BUTANE ISOBUTANE n-PENTANE
PROPANE n-BUTANE ISOBUTANE n-PENTANE 
>> 
>> flash = Flash.MixAndFlash()
>> flash.In0.T = 460.15 K
>> cd flash.In0
/flash.myMixer.In0
>> Fraction = .5 .5 0 0
>> P = 700.325
>> MoleFlow = 10
>> cd ..
/flash.myMixer
>> cd In1
/flash.myMixer.In1
>> T = 200.15 K
>> P = 700.325
>> MoleFlow = 10
>> Fraction = 0 0 .5 .5
>> cd /flash
/flash
>> # The vapour and liq outlet ports should now be known
>> Vap
Port: /flash.myFlash.Vap + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 55.7559777382 = C
P                  = 700.325 = kPa
MoleFlow           = 7.5535374712 = kgmole/h
MassFlow           = 409.502677155 = kg/h
VolumeFlow         = 25.4232745432 = m3/hr
StdLiqVolumeFlow   = 0.735426513095 = m3/hr
H                  = 18755.9703139 = kJ/kmol
Energy             = 39353.8679375 = W
MolecularWeight    = 54.2133640981 = 
ZFactor            = 0.861943047038 = 
PROPANE            = 0.393059342619 = 
n-BUTANE           = 0.231112525897 = 
ISOBUTANE          = 0.261442271776 = 
n-PENTANE          = 0.114385859708 = 

>> Liq0
Port: /flash.myFlash.Liq0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 55.7559777382 = C
P                  = 700.325 = kPa
MoleFlow           = 12.4464625288 = kgmole/h
MassFlow           = 752.941322845 = kg/h
VolumeFlow         = 1.35435168229 = m3/hr
StdLiqVolumeFlow   = 1.28794375517 = m3/hr
H                  = 1509.93894161 = kJ/kmol
Energy             = 5220.38846042 = W
MolecularWeight    = 60.4944032172 = 
ZFactor            = 0.0278665360367 = 
PROPANE            = 0.163179820967 = 
n-BUTANE           = 0.261462473216 = 
ISOBUTANE          = 0.243055888096 = 
n-PENTANE          = 0.332301817721 = 

>> # As well as the inlets
>> In1
Port: /flash.myMixer.In1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = -73.0 * C
P                  = 700.325 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 651.3549 = kg/h
VolumeFlow         = 0.918494086673 = m3/hr
StdLiqVolumeFlow   = 1.06954866327 = m3/hr
H                  = -16933.8683313 = kJ/kmol
Energy             = -47038.5231426 = W
MolecularWeight    = 65.13549 = 
ZFactor            = 0.0386536053472 = 
PROPANE            = 0.0 * 
n-BUTANE           = 0.0 * 
ISOBUTANE          = 0.5 * 
n-PENTANE          = 0.5 * 

>> In0
Port: /flash.myMixer.In0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 187.0 * C
P                  = 700.325 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 511.0891 = kg/h
VolumeFlow         = 52.3032594469 = m3/hr
StdLiqVolumeFlow   = 0.953821605 = m3/hr
H                  = 32980.6006617 = kJ/kmol
Energy             = 91612.7796158 = W
MolecularWeight    = 51.1089099987 = 
ZFactor            = 0.957411337068 = 
PROPANE            = 0.5 * 
n-BUTANE           = 0.5 * 
ISOBUTANE          = 0.0 * 
n-PENTANE          = 0.0 * 

>> 
>> #Test copy and paste
>> copy /flash
Copied /flash to the clipboard
>> paste /
Pasting /flash
Pasted /flash as /flashClone
>> /flashClone.In0
Port: /flashClone.myMixer.In0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = 187.0 * C
P                  = 700.325 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = 0.5 * 
n-BUTANE           = 0.5 * 
ISOBUTANE          = 0.0 * 
n-PENTANE          = 0.0 * 

>> /flashClone.Vap
Port: /flashClone.myFlash.Vap + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = None
n-BUTANE           = None
ISOBUTANE          = None
n-PENTANE          = None

>> 
>> clear
>> read liqliq.tst
Processing liqliq.tst
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + n-HEPTANE BENZENE
n-HEPTANE BENZENE 
>> # Components with names in them can be entered by using underscores instead
>> thermo + TRIETHYLENE_GLYCOL
TRIETHYLENE GLYCOL 
>> thermo
Name: thermo
PropPkg: VirtualMaterials.Peng-Robinson
Using:
n-HEPTANE
BENZENE
TRIETHYLENE GLYCOL
>> units SI
>> 
>> lle = LiqLiqExt.LiqLiqEx()
>> lle
Operation: lle = sim.unitop.LiqLiqExt.LiqLiqEx
Port: Feed = sim.solver.Ports.Port_Material (/lle.Stage0.innerMixer.In0)
Port: Solvent = sim.solver.Ports.Port_Material (/lle.Stage4.innerMixer.In1)
Port: Extract = sim.solver.Ports.Port_Material (/lle.Stage0.innerFlash.Liq1)
Port: Raffinate = sim.solver.Ports.Port_Material (/lle.Stage4.innerFlash.Liq0)
Child: Stage0 = sim.unitop.LiqLiqExt.LLStage
Child: Stage1 = sim.unitop.LiqLiqExt.LLStage
Child: Stage2 = sim.unitop.LiqLiqExt.LLStage
Child: Stage3 = sim.unitop.LiqLiqExt.LLStage
Child: Stage4 = sim.unitop.LiqLiqExt.LLStage
Parameter: MaxError = 0.0001
Parameter: Ignored = None
Parameter: Reset = 0
Parameter: MaxNumIterations = 40
Parameter: NumberStages = 5
Parameter: MaxControllerIter = 20
Parameter: LiquidPhases = 2
Parameter: MaxRecycleStep = 0.05
>> cd lle.Feed
/lle.Stage0.innerMixer.In0
>> Fraction = .5 .5 0.
>> T = 0
>> P = 101.325
>> MoleFlow = 10
>> cd /lle.Solvent
/lle.Stage4.innerMixer.In1
>> Fraction = 0 0 1
>> T = 0
>> P = 101.325
>> MoleFlow = 10
Changed state of port /lle.Stage0.In1 to 1 (0=Normal port; 1=Recycle port)
Changed state of port /lle.Stage1.In1 to 1 (0=Normal port; 1=Recycle port)
Changed state of port /lle.Stage2.In1 to 1 (0=Normal port; 1=Recycle port)
Changed state of port /lle.Stage3.In1 to 1 (0=Normal port; 1=Recycle port)
Iteration 1 -> max Error 0.206438 in /lle.Stage0.innerMixer.In1.H
Iteration 2 -> max Error 0.036014 in /lle.Stage3.innerMixer.In1.H
Iteration 3 -> max Error 0.016157 in /lle.Stage2.innerMixer.In1.H
Iteration 4 -> max Error 0.007693 in /lle.Stage2.innerMixer.In1.H
Iteration 5 -> max Error 0.005847 in /lle.Stage1.innerMixer.In1.H
Iteration 6 -> max Error 0.004390 in /lle.Stage0.innerMixer.In1.H
Iteration 7 -> max Error 0.002848 in /lle.Stage0.innerMixer.In1.H
Iteration 8 -> max Error 0.001166 in /lle.Stage0.innerMixer.In1.H
Iteration 9 -> max Error 0.000908 in /lle.Stage0.innerMixer.In1.H
Iteration 10 -> max Error 0.000022 in /lle.Stage0.innerMixer.In1.Fraction.TRIETHYLENE GLYCOL
>> .
Port: /lle.Stage4.innerMixer.In1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 * C
P                  = 101.325 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 1501.7296 = kg/h
VolumeFlow         = 1.44339128259 = m3/hr
StdLiqVolumeFlow   = 1.33027857783 = m3/hr
H                  = -59408.5039495 = kJ/kmol
Energy             = -165023.622082 = W
MolecularWeight    = 150.17296 = 
ZFactor            = 0.00643975127351 = 
n-HEPTANE          = 0.0 * 
BENZENE            = 0.0 * 
TRIETHYLENE GLYCOL = 1.0 * 

>> cd /lle
/lle
>> 
>> Extract
Port: /lle.Stage0.innerFlash.Liq1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 15.1801709727 = kgmole/h
MassFlow           = 1912.81940102 = kg/h
VolumeFlow         = 1.92454682102 = m3/hr
StdLiqVolumeFlow   = 1.83626020952 = m3/hr
H                  = -47662.3573989 = kJ/kmol
Energy             = -200978.537299 = W
MolecularWeight    = 126.007763975 = 
ZFactor            = 0.00565635753373 = 
n-HEPTANE          = 0.0667003301534 = 
BENZENE            = 0.289089490885 = 
TRIETHYLENE GLYCOL = 0.644210178962 = 

>> Raffinate
Port: /lle.Stage4.innerFlash.Liq0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 4.81901994954 = kgmole/h
MassFlow           = 480.416802915 = kg/h
VolumeFlow         = 0.664336955719 = m3/hr
StdLiqVolumeFlow   = 0.662493955214 = m3/hr
H                  = -15234.1904328 = kJ/kmol
Energy             = -20392.741003 = W
MolecularWeight    = 99.6918062066 = 
ZFactor            = 0.00615056062497 = 
n-HEPTANE          = 0.827428282221 = 
BENZENE            = 0.126749605807 = 
TRIETHYLENE GLYCOL = 0.0458221119726 = 

>> Feed
Port: /lle.Stage0.innerMixer.In0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 * C
P                  = 101.325 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 891.5689 = kg/h
VolumeFlow         = 1.15874255385 = m3/hr
StdLiqVolumeFlow   = 1.16855024703 = m3/hr
H                  = -18564.702313 = kJ/kmol
Energy             = -51568.6175362 = W
MolecularWeight    = 89.15689 = 
ZFactor            = 0.00516977892746 = 
n-HEPTANE          = 0.5 * 
BENZENE            = 0.5 * 
TRIETHYLENE GLYCOL = 0.0 * 

>> Solvent
Port: /lle.Stage4.innerMixer.In1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 * C
P                  = 101.325 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 1501.7296 = kg/h
VolumeFlow         = 1.44339128259 = m3/hr
StdLiqVolumeFlow   = 1.33027857783 = m3/hr
H                  = -59408.5039495 = kJ/kmol
Energy             = -165023.622082 = W
MolecularWeight    = 150.17296 = 
ZFactor            = 0.00643975127351 = 
n-HEPTANE          = 0.0 * 
BENZENE            = 0.0 * 
TRIETHYLENE GLYCOL = 1.0 * 

>> 
>> cd /
/
>> 
>> #Test copy and paste
>> copy /lle
Copied /lle to the clipboard
>> paste /
Pasting /lle
Pasted /lle as /lleClone
Iteration 1 -> max Error 0.000022 in /lleClone.Stage0.innerMixer.In1.Fraction.TRIETHYLENE GLYCOL
>> /lleClone.Extract
Port: /lleClone.Stage0.innerFlash.Liq1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 15.1801704057 = kgmole/h
MassFlow           = 1912.81934449 = kg/h
VolumeFlow         = 1.92454677452 = m3/hr
StdLiqVolumeFlow   = 1.83626015371 = m3/hr
H                  = -47662.35539 = kJ/kmol
Energy             = -200978.521322 = W
MolecularWeight    = 126.007764957 = 
ZFactor            = 0.00565635735814 = 
n-HEPTANE          = 0.0667003355888 = 
BENZENE            = 0.289089473481 = 
TRIETHYLENE GLYCOL = 0.64421019093 = 

>> /lleClone.Raffinate
Port: /lleClone.Stage4.innerFlash.Liq0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 4.81901972365 = kgmole/h
MassFlow           = 480.416780007 = kg/h
VolumeFlow         = 0.664336923342 = m3/hr
StdLiqVolumeFlow   = 0.662493922924 = m3/hr
H                  = -15234.1904946 = kJ/kmol
Energy             = -20392.7401299 = W
MolecularWeight    = 99.6918061257 = 
ZFactor            = 0.00615056061163 = 
n-HEPTANE          = 0.827428277425 = 
BENZENE            = 0.126749610255 = 
TRIETHYLENE GLYCOL = 0.0458221123209 = 

>> 
>> clear
>> read flowsheet1.tst
Processing flowsheet1.tst
>> # A simple flowsheet
>> units SI
>> 
>> # set up thermo
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + PROPANE ISOBUTANE n-BUTANE n-PENTANE
PROPANE ISOBUTANE n-BUTANE n-PENTANE 
>> 
>> # Add a couple of streams
>> stream1 = Stream.Stream_Material()
>> stream2 = Stream.Stream_Material()
>> 
>> # Make the stream1 In port current to save typing
>> cd stream1.In
/stream1.In
>> Fraction  # print fractions to figure out order
PROPANE                     = None
ISOBUTANE                   = None
n-BUTANE                    = None
n-PENTANE                   = None

>> Fraction = .5 0 0 .5  # assign mole fractions
>> T = 187
>> P = 715
>> MoleFlow = 3000
>> 
>> # Make the other stream In port current
>> cd /stream2.In
/stream2.In
>> Fraction = 0 .5 .5 0
>> T = -73
>> P = 715
>> MoleFlow = 3000
>> cd /  # return to top level flowsheet
/
>> 
>> # now mix the streams
>> mixer = Mixer.Mixer()   # add a mixer op
>> stream1.Out -> mixer.In0 # connect the streams to it
>> stream2.Out -> mixer.In1
>> mixer.Out  # have a look at the combined outlet
Port: /mixer.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.505736430406 = 
T                  = 59.4244265341 = C
P                  = 715.0 = kPa
MoleFlow           = 6000.0 = kgmole/h
MassFlow           = 348733.198277 = kg/h
VolumeFlow         = 10411.1704041 = m3/hr
StdLiqVolumeFlow   = 607.01108048 = m3/hr
H                  = 10808.0720365 = kJ/kmol
Energy             = 18013453.3941 = W
MolecularWeight    = 58.1222011154 = 
ZFactor            = 0.448678338954 = 
PROPANE            = 0.25 = 
ISOBUTANE          = 0.25 = 
n-BUTANE           = 0.25 = 
n-PENTANE          = 0.25 = 

>> 
>> # add a flash drum
>> flash = Flash.SimpleFlash()
>> mixer.Out -> flash.In
>> 
>> # have a look at the flash outlets
>> flash.Vap
Port: /flash.Vap + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 59.4244265341 = C
P                  = 715.0 = kPa
MoleFlow           = 3034.41858244 = kgmole/h
MassFlow           = 166990.186721 = kg/h
VolumeFlow         = 10083.1476805 = m3/hr
StdLiqVolumeFlow   = 297.885911548 = m3/hr
H                  = 19341.746112 = kJ/kmol
Energy             = 16303042.7275 = W
MolecularWeight    = 55.0320208582 = 
ZFactor            = 0.859226054437 = 
PROPANE            = 0.356077911458 = 
ISOBUTANE          = 0.265793393486 = 
n-BUTANE           = 0.242359593145 = 
n-PENTANE          = 0.13576910191 = 

>> flash.Liq0
Port: /flash.Liq0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 59.4244265341 = C
P                  = 715.0 = kPa
MoleFlow           = 2965.58141756 = kgmole/h
MassFlow           = 181743.019971 = kg/h
VolumeFlow         = 328.022723582 = m3/hr
StdLiqVolumeFlow   = 309.125175428 = m3/hr
H                  = 2076.31541592 = kJ/kmol
Energy             = 1710411.78179 = W
MolecularWeight    = 61.2841107294 = 
ZFactor            = 0.0286009775768 = 
PROPANE            = 0.141459727413 = 
ISOBUTANE          = 0.233839998257 = 
n-BUTANE           = 0.257817761787 = 
n-PENTANE          = 0.366882512543 = 

>> 
>> #Test copy and paste
>> #The whole thing
>> copy /stream1 /stream2 /mixer /flash
Copied /stream1 /stream2 /mixer /flash to the clipboard
>> paste /
Pasting /stream1 /stream2 /mixer /flash
Pasted /stream1 /stream2 /mixer /flash as /stream1Clone /stream2Clone /mixerClone /flashClone
>> /stream2Clone.In
Port: /stream2Clone.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = -73.0 * C
P                  = 715.0 * kPa
MoleFlow           = 3000.0 * kgmole/h
MassFlow           = 174366.6 = kg/h
VolumeFlow         = 249.166460511 = m3/hr
StdLiqVolumeFlow   = 304.45512 = m3/hr
H                  = -15486.448638 = kJ/kmol
Energy             = -12905373.865 = W
MolecularWeight    = 58.1222 = 
ZFactor            = 0.0356852204205 = 
PROPANE            = 0.0 * 
ISOBUTANE          = 0.5 * 
n-BUTANE           = 0.5 * 
n-PENTANE          = 0.0 * 

>> /mixerClone.Out0
None
>> /flashClone.Vap
Port: /flashClone.Vap + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 59.4244265341 = C
P                  = 715.0 = kPa
MoleFlow           = 3034.41858244 = kgmole/h
MassFlow           = 166990.186721 = kg/h
VolumeFlow         = 10083.1476805 = m3/hr
StdLiqVolumeFlow   = 297.885911548 = m3/hr
H                  = 19341.746112 = kJ/kmol
Energy             = 16303042.7275 = W
MolecularWeight    = 55.0320208582 = 
ZFactor            = 0.859226054437 = 
PROPANE            = 0.356077911458 = 
ISOBUTANE          = 0.265793393486 = 
n-BUTANE           = 0.242359593145 = 
n-PENTANE          = 0.13576910191 = 

>> 
>> 
>> #copy part of it
>> copy  /stream2 /mixer /flash
Copied /stream2 /mixer /flash to the clipboard
>> paste /
Pasting /stream2 /mixer /flash
Pasted /stream2 /mixer /flash as /stream2Clone_1 /mixerClone_1 /flashClone_1
>> /stream2Clone_1.In
Port: /stream2Clone_1.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = -73.0 * C
P                  = 715.0 * kPa
MoleFlow           = 3000.0 * kgmole/h
MassFlow           = 174366.6 = kg/h
VolumeFlow         = 249.166460511 = m3/hr
StdLiqVolumeFlow   = 304.45512 = m3/hr
H                  = -15486.448638 = kJ/kmol
Energy             = -12905373.865 = W
MolecularWeight    = 58.1222 = 
ZFactor            = 0.0356852204205 = 
PROPANE            = 0.0 * 
ISOBUTANE          = 0.5 * 
n-BUTANE           = 0.5 * 
n-PENTANE          = 0.0 * 

>> /mixerClone_1.Out0
None
>> /flashClone_1.Vap
Port: /flashClone_1.Vap + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = None
P                  = None
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = None
ISOBUTANE          = None
n-BUTANE           = None
n-PENTANE          = None

>> 
>> 
>> #copy part of it again but
>> copy  /stream2 /flash
Copied /stream2 /flash to the clipboard
>> paste /
Pasting /stream2 /flash
Pasted /stream2 /flash as /stream2Clone_2 /flashClone_2
>> /stream2Clone_2.In
Port: /stream2Clone_2.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = -73.0 * C
P                  = 715.0 * kPa
MoleFlow           = 3000.0 * kgmole/h
MassFlow           = 174366.6 = kg/h
VolumeFlow         = 249.166460511 = m3/hr
StdLiqVolumeFlow   = 304.45512 = m3/hr
H                  = -15486.448638 = kJ/kmol
Energy             = -12905373.865 = W
MolecularWeight    = 58.1222 = 
ZFactor            = 0.0356852204205 = 
PROPANE            = 0.0 * 
ISOBUTANE          = 0.5 * 
n-BUTANE           = 0.5 * 
n-PENTANE          = 0.0 * 

>> /flashClone_2.Vap
Port: /flashClone_2.Vap + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = None
P                  = None
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = None
ISOBUTANE          = None
n-BUTANE           = None
n-PENTANE          = None

>> 
>> 
>> #Now copy the whole flowsheet
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
>> 
>> 
>> #Now copy into a subflowsheet
>> cd /
/
>> sub = Flowsheet.SubFlowsheet()
>> copy /stream1 /stream2 /mixer /flash
Copied /stream1 /stream2 /mixer /flash to the clipboard
>> paste /sub
Pasting /stream1 /stream2 /mixer /flash
Pasted /stream1 /stream2 /mixer /flash as /sub.stream1 /sub.stream2 /sub.mixer /sub.flash
>> 
>> #Now clone the subflowsheet
>> copy /sub
Copied /sub to the clipboard
>> paste /
Pasting /sub
Pasted /sub as /subClone
>> 
>> #Now test cut and paste
>> sub2 = Flowsheet.SubFlowsheet()
>> cut /stream1Clone /stream2Clone /mixerClone /flashClone
Copied /stream1Clone /stream2Clone /mixerClone /flashClone to the clipboard
>> paste sub2
Pasting /stream1Clone /stream2Clone /mixerClone /flashClone
Pasted /stream1Clone /stream2Clone /mixerClone /flashClone as /sub2.stream1Clone /sub2.stream2Clone /sub2.mixerClone /sub2.flashClone
>> 
>> 
>> 
>> clear
>> read flowsheet2.tst
Processing flowsheet2.tst
>> # A few additions to flowsheet1
>> units SI
>> 
>> # set up thermo
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + PROPANE n-BUTANE ISOBUTANE n-PENTANE
PROPANE n-BUTANE ISOBUTANE n-PENTANE 
>> 
>> # Add a couple of streams
>> stream1 = Stream.Stream_Material()
>> stream2 = Stream.Stream_Material()
>> 
>> # Make the stream1 In port current to save typing
>> cd stream1.In
/stream1.In
>> Fraction = .5 0 0 .5  # assign mole fractions
>> T = 187
>> P = 715
>> MoleFlow = 3000
>> 
>> # Make the other stream In port current
>> cd /stream2.In
/stream2.In
>> Fraction = 0 .5 .5 0
>> T = -73
>> P = 715
>> MoleFlow = 3000
>> cd /  # return to top level flowsheet
/
>> 
>> # now mix the streams
>> mixer = Mixer.Mixer()   # add a mixer op
>> stream1.Out -> mixer.In0 # connect the streams to it
>> stream2.Out -> mixer.In1
>> mixer.Out  # have a look at the combined outlet
Port: /mixer.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.505736430406 = 
T                  = 59.4244265341 = C
P                  = 715.0 = kPa
MoleFlow           = 6000.0 = kgmole/h
MassFlow           = 348733.198277 = kg/h
VolumeFlow         = 10411.1704041 = m3/hr
StdLiqVolumeFlow   = 607.01108048 = m3/hr
H                  = 10808.0720365 = kJ/kmol
Energy             = 18013453.3941 = W
MolecularWeight    = 58.1222011154 = 
ZFactor            = 0.448678338954 = 
PROPANE            = 0.25 = 
n-BUTANE           = 0.25 = 
ISOBUTANE          = 0.25 = 
n-PENTANE          = 0.25 = 

>> 
>> # add a flash drum
>> flash = Flash.SimpleFlash()
>> mixer.Out -> flash.In
>> 
>> # have a look at the flash outlets
>> flash.Vap
Port: /flash.Vap + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 59.4244265341 = C
P                  = 715.0 = kPa
MoleFlow           = 3034.41858244 = kgmole/h
MassFlow           = 166990.186721 = kg/h
VolumeFlow         = 10083.1476805 = m3/hr
StdLiqVolumeFlow   = 297.885911548 = m3/hr
H                  = 19341.746112 = kJ/kmol
Energy             = 16303042.7275 = W
MolecularWeight    = 55.0320208582 = 
ZFactor            = 0.859226054437 = 
PROPANE            = 0.356077911458 = 
n-BUTANE           = 0.242359593145 = 
ISOBUTANE          = 0.265793393486 = 
n-PENTANE          = 0.13576910191 = 

>> flash.Liq0
Port: /flash.Liq0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 59.4244265341 = C
P                  = 715.0 = kPa
MoleFlow           = 2965.58141756 = kgmole/h
MassFlow           = 181743.019971 = kg/h
VolumeFlow         = 328.022723582 = m3/hr
StdLiqVolumeFlow   = 309.125175428 = m3/hr
H                  = 2076.31541592 = kJ/kmol
Energy             = 1710411.78179 = W
MolecularWeight    = 61.2841107294 = 
ZFactor            = 0.0286009775768 = 
PROPANE            = 0.141459727413 = 
n-BUTANE           = 0.257817761787 = 
ISOBUTANE          = 0.233839998257 = 
n-PENTANE          = 0.366882512543 = 

>> # now lets add a couple of components
>> thermo + n-HEXANE n-DODECANE
n-HEXANE n-DODECANE 
>> # pretty much everything will have been forgotten
>> stream1.Out
Port: /stream1.Out + sim.solver.Ports.Port_Material
Connected to: /mixer.In0
VapFrac            = 1.0 = 
T                  = 187.0 = C
P                  = 715.0 = kPa
MoleFlow           = 3000.0 = kgmole/h
MassFlow           = 174366.6 = kg/h
VolumeFlow         = 15152.4055891 = m3/hr
StdLiqVolumeFlow   = 302.55596048 = m3/hr
H                  = 37102.5927109 = kJ/kmol
Energy             = 30918827.2591 = W
MolecularWeight    = 58.1221994258 = 
ZFactor            = 0.943922971918 = 
PROPANE            = 0.5 = 
n-BUTANE           = 0.0 = 
ISOBUTANE          = 0.0 = 
n-PENTANE          = 0.5 = 
n-HEXANE           = 0.0 = 
n-DODECANE         = 0.0 = 

>> # let's delete a component
>> thermo - n-Pentane
>> stream1.In.Fraction
PROPANE                     = 0.5 * 
n-BUTANE                    = 0.0 * 
ISOBUTANE                   = 0.0 * 
n-PENTANE                   = 0.5 * 
n-HEXANE                    = 0.0 * 
n-DODECANE                  = 0.0 * 

>> stream1.In.Fraction.n-Hexane = .25
Could not assign .25
>> # Whoops, caps count, even in components - try again
>> stream1.In.Fraction.n-HEXANE = .25
Mole fractions of /stream1.In sums to 1.250000, not 1
Mole fractions of /stream1.In sums to 1.250000, not 1
Mole fractions of /mixer.In0 sums to 1.250000, not 1
Mole fractions of /mixer.In0 sums to 1.250000, not 1
Mole fractions of /mixer.Out sums to 1.125000, not 1
Mole fractions of /mixer.In0 sums to 1.250000, not 1
Mole fractions of /mixer.Out sums to 1.125000, not 1
Mole fractions of /flash.In sums to 1.125000, not 1
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/mixer.Out.MassFlow: 367435 Vs 365565
/flash.In.MassFlow: 367435 Vs 365565

ConsistencyError: /mixer.Out - MassFlow 367435.306667 vs 365565.096
>> stream1.In.Fraction.n-DODECANE = .25
Mole fractions of /stream1.In sums to 1.500000, not 1
Mole fractions of /stream1.In sums to 1.500000, not 1
Mole fractions of /mixer.In0 sums to 1.500000, not 1
Mole fractions of /mixer.In0 sums to 1.500000, not 1
Mole fractions of /mixer.Out sums to 1.250000, not 1
Mole fractions of /mixer.In0 sums to 1.500000, not 1
Mole fractions of /mixer.Out sums to 1.250000, not 1
Mole fractions of /flash.In sums to 1.250000, not 1
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/mixer.Out.MassFlow: 432893 Vs 418866
/flash.In.MassFlow: 432893 Vs 418866

ConsistencyError: /mixer.Out - MassFlow 432892.68 vs 418866.1
>> # Whoops again - the composition is not normalized when
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/mixer.Out.MassFlow: 432893 Vs 418866
/flash.In.MassFlow: 432893 Vs 418866

>> # individual component fractions are specified
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/mixer.Out.MassFlow: 432893 Vs 418866
/flash.In.MassFlow: 432893 Vs 418866

>> stream1.In.Fraction = .25 0 0 .25 .25 .25
>> 
>> # stream1 should now be known
>> stream1.Out
Port: /stream1.Out + sim.solver.Ports.Port_Material
Connected to: /mixer.In0
VapFrac            = 0.709983068193 = 
T                  = 187.0 = C
P                  = 715.0 = kPa
MoleFlow           = 3000.0 = kgmole/h
MassFlow           = 279565.95 = kg/h
VolumeFlow         = 10567.6848122 = m3/hr
StdLiqVolumeFlow   = 418.328719436 = m3/hr
H                  = 47764.0506087 = kJ/kmol
Energy             = 39803375.5072 = W
MolecularWeight    = 93.18865 = 
ZFactor            = 0.658316621447 = 
PROPANE            = 0.25 = 
n-BUTANE           = 0.0 = 
ISOBUTANE          = 0.0 = 
n-PENTANE          = 0.25 = 
n-HEXANE           = 0.25 = 
n-DODECANE         = 0.25 = 

>> 
>> # Now fix stream2 as well
>> stream2.In.Fraction = 0 .25 .25 0 .3 .2
>> 
>> # Now everything should be known again
>> flash.Vap
Port: /flash.Vap + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 93.7994978783 = C
P                  = 715.0 = kPa
MoleFlow           = 783.184419108 = kgmole/h
MassFlow           = 44985.8377333 = kg/h
VolumeFlow         = 2963.38360682 = m3/hr
StdLiqVolumeFlow   = 78.793412892 = m3/hr
H                  = 24101.9950039 = kJ/kmol
Energy             = 5243418.59903 = W
MolecularWeight    = 57.4396484861 = 
ZFactor            = 0.886733645452 = 
PROPANE            = 0.364171568376 = 
n-BUTANE           = 0.196736145578 = 
ISOBUTANE          = 0.234542942663 = 
n-PENTANE          = 0.100176022612 = 
n-HEXANE           = 0.103275385506 = 
n-DODECANE         = 0.00109793526548 = 

>> flash.Liq0
Port: /flash.Liq0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 93.7994978783 = C
P                  = 715.0 = kPa
MoleFlow           = 5216.81558089 = kgmole/h
MassFlow           = 501522.140267 = kg/h
VolumeFlow         = 853.054291933 = m3/hr
StdLiqVolumeFlow   = 744.263483114 = m3/hr
H                  = 11387.4194956 = kJ/kmol
Energy             = 16501685.4029 = W
MolecularWeight    = 96.1356851685 = 
ZFactor            = 0.0383213270571 = 
PROPANE            = 0.0890939107506 = 
n-BUTANE           = 0.11423047391 = 
ISOBUTANE          = 0.108554656172 = 
n-PENTANE          = 0.128726747095 = 
n-HEXANE           = 0.300780486269 = 
n-DODECANE         = 0.258613725804 = 

>> 
>> clear
>> read molebal.tst
Processing molebal.tst
>> # tests multivariable balance solution
>> units SI
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + PROPANE n-BUTANE
PROPANE n-BUTANE 
>> balance = Balance.BalanceOp()
>> balance
Operation: balance = sim.unitop.Balance.BalanceOp
Parameter: Ignored = None
Parameter: NumberStreamsOutMat = 0
Parameter: NumberStreamsInEne = 0
Parameter: NumberStreamsInMat = 0
Parameter: NumberStreamsOutEne = 0
Parameter: BalanceType = 6
>> 
>> # set number of balance streams
>> balance.NumberStreamsInMat = 2
>> balance.NumberStreamsOutMat = 2
>> 
>> # make it a mole balance (not that it matters in this case)
>> balance.BalanceType = 2
>> 
>> # set compositions
>> cd balance
/balance
>> In0.Fraction
PROPANE                     = None
n-BUTANE                    = None

>> In0.Fraction = .3 .7
>> In1.Fraction = .4 .6
>> Out0.Fraction = .6 .4
>> Out1.Fraction = .8 .2
>> 
>> # give two flows - other two should be calculated
>> In0.MoleFlow = 1000
>> Out0.MoleFlow = 1500
>> 
>> # and they are
>> In1.MoleFlow
/balance.In1.MoleFlow= -500.0 = kgmole/h
>> Out1.MoleFlow
/balance.Out1.MoleFlow= -1000.0 = kgmole/h
>> 
>> #now test copy and paste
>> copy /balance
Copied /balance to the clipboard
>> paste /
Pasting /balance
Pasted /balance as /balanceClone
>> 
>> cd /balanceClone
/balanceClone
>> In1.MoleFlow
/balanceClone.In1.MoleFlow= -500.0 = kgmole/h
>> Out1.MoleFlow
/balanceClone.Out1.MoleFlow= -1000.0 = kgmole/h
>> 
>> cut /balance
Copied /balance to the clipboard
>> /
Operation: / = sim.solver.Flowsheet.Flowsheet
Thermo: Peng-Robinson
Child: balanceClone = sim.unitop.Balance.BalanceOp
Parameter: MaxError = 0.0001
Parameter: Ignored = None
Parameter: MaxRecycleStep = 0.05
Parameter: MaxNumIterations = 20
Parameter: MaxControllerIter = 20
>> paste /
Pasting /balance
Pasted /balance as /balance
>> 
>> clear
>> read heater.tst
Processing heater.tst
>> # Simple heater test
>> units SI
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + PROPANE n-BUTANE ISOBUTANE n-PENTANE
PROPANE n-BUTANE ISOBUTANE n-PENTANE 
>> heater = Heater.Heater()
>> heater
Operation: heater = sim.unitop.Heater.Heater
Port: In = sim.solver.Ports.Port_Material
Port: Out = sim.solver.Ports.Port_Material
Port: InQ = sim.solver.Ports.Port_Energy
Port: DeltaP = sim.solver.Ports.Port_Signal
Parameter: Ignored = None
Parameter: NumberSegments = 1
>> cd heater
/heater
>> In.Fraction
PROPANE                     = None
n-BUTANE                    = None
ISOBUTANE                   = None
n-PENTANE                   = None

>> In.Fraction = .25 .25 .25 .25
>> In.P = 101.325
>> In.H = -7200
>> In.T
/heater.In.T= -16.8256453172 = C
>> In.MoleFlow = 10
>> InQ.Energy = 1000000
>> DeltaP
Port: /heater.DeltaP + sim.solver.Ports.Port_Signal
Connected to: None
DP   = None

>> DeltaP.DP = 0
>> In
Port: /heater.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.06935770054 = 
T                  = -16.8256453172 = C
P                  = 101.325 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 581.222 = kg/h
VolumeFlow         = 14.9801812132 = m3/hr
StdLiqVolumeFlow   = 1.01168513413 = m3/hr
H                  = -7200.0 * kJ/kmol
Energy             = -20000.0 = W
MolecularWeight    = 58.1222050264 = 
ZFactor            = 0.0712218769665 = 
PROPANE            = 0.25 * 
n-BUTANE           = 0.25 * 
ISOBUTANE          = 0.25 * 
n-PENTANE          = 0.25 * 

>> Out
Port: /heater.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 1542.83932304 = C
P                  = 101.325 = kPa
MoleFlow           = 10.0 = kgmole/h
MassFlow           = 581.222 = kg/h
VolumeFlow         = 1490.79056689 = m3/hr
StdLiqVolumeFlow   = 1.01168513413 = m3/hr
H                  = 352800.0 = kJ/kmol
Energy             = 980000.0 = W
MolecularWeight    = 58.1221999084 = 
ZFactor            = 1.00043658651 = 
PROPANE            = 0.25 = 
n-BUTANE           = 0.25 = 
ISOBUTANE          = 0.25 = 
n-PENTANE          = 0.25 = 

>> InQ
Port: /heater.InQ + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 1000000.0 * W

>> 
>> #Test the profiles
>> cd /
/
>> heater.T
Calculating profile in heater. Segment 0. Properties ['T', 'MolecularWeight']
Calculating profile in heater. Segment 1. Properties ['T', 'MolecularWeight']
Done calculating profile in heater
[  256.32435468  1815.98932304]
>> heater.P
[ 101.325  101.325]
>> heater.Viscosity
Calculating profile in heater. Segment 0. Properties ['Viscosity']
Calculating profile in heater. Segment 1. Properties ['Viscosity']
Done calculating profile in heater
[ 2.75155018e-004  3.48398463e-005]
>> heater.L_Cp
Calculating profile in heater. Segment 0. Properties ['Cp']
Calculating profile in heater. Segment 1. Properties ['Cp']
Done calculating profile in heater
[ 126.55752208  297.22332392]
>> heater.V_Cp
[  76.97547354  297.2233235 ]
>> heater.Cp
[ 123.11862521  297.2233235 ]
>> heater.VapFrac
[ 0.0693577  1.       ]
>> heater.NumberSegments = 10
>> heater.DeltaP.DP = 10.0
>> heater.In.H =
>> heater.In.VapFrac = 0.75
>> heater.T
Calculating profile in heater. Segment 0. Properties ['T', 'MolecularWeight']
Calculating profile in heater. Segment 1. Properties ['T', 'MolecularWeight']
Calculating profile in heater. Segment 2. Properties ['T', 'MolecularWeight']
Calculating profile in heater. Segment 3. Properties ['T', 'MolecularWeight']
Calculating profile in heater. Segment 4. Properties ['T', 'MolecularWeight']
Calculating profile in heater. Segment 5. Properties ['T', 'MolecularWeight']
Calculating profile in heater. Segment 6. Properties ['T', 'MolecularWeight']
Calculating profile in heater. Segment 7. Properties ['T', 'MolecularWeight']
Calculating profile in heater. Segment 8. Properties ['T', 'MolecularWeight']
Calculating profile in heater. Segment 9. Properties ['T', 'MolecularWeight']
Calculating profile in heater. Segment 10. Properties ['T', 'MolecularWeight']
Done calculating profile in heater
[  274.48253392   517.22426047   726.47975489   902.12648833  1060.90160803
       1209.76329754  1352.1042517   1489.47009654  1622.19256316
       1749.74165289  1871.0804398 ]
>> heater.P
[ 101.325  100.325   99.325   98.325   97.325   96.325   95.325   94.325
        93.325   92.325   91.325]
>> heater.Viscosity
Calculating profile in heater. Segment 0. Properties ['Viscosity']
Calculating profile in heater. Segment 1. Properties ['Viscosity']
Calculating profile in heater. Segment 2. Properties ['Viscosity']
Calculating profile in heater. Segment 3. Properties ['Viscosity']
Calculating profile in heater. Segment 4. Properties ['Viscosity']
Calculating profile in heater. Segment 5. Properties ['Viscosity']
Calculating profile in heater. Segment 6. Properties ['Viscosity']
Calculating profile in heater. Segment 7. Properties ['Viscosity']
Calculating profile in heater. Segment 8. Properties ['Viscosity']
Calculating profile in heater. Segment 9. Properties ['Viscosity']
Calculating profile in heater. Segment 10. Properties ['Viscosity']
Done calculating profile in heater
[ 2.67679402e-005  1.32220504e-005  1.76800978e-005  2.10222825e-005
       2.37955821e-005  2.62213769e-005  2.84084258e-005  3.04137526e-005
       3.22657561e-005  3.39756966e-005  3.55456715e-005]
>> heater.L_Cp
Calculating profile in heater. Segment 0. Properties ['Cp']
Calculating profile in heater. Segment 1. Properties ['Cp']
Calculating profile in heater. Segment 2. Properties ['Cp']
Calculating profile in heater. Segment 3. Properties ['Cp']
Calculating profile in heater. Segment 4. Properties ['Cp']
Calculating profile in heater. Segment 5. Properties ['Cp']
Calculating profile in heater. Segment 6. Properties ['Cp']
Calculating profile in heater. Segment 7. Properties ['Cp']
Calculating profile in heater. Segment 8. Properties ['Cp']
Calculating profile in heater. Segment 9. Properties ['Cp']
Calculating profile in heater. Segment 10. Properties ['Cp']
Done calculating profile in heater
[ 143.43109126  151.12669404  191.33378118  217.40382217  235.22361902
       247.89894084  257.67548774  266.52560405  276.32896248  288.83510625
       305.48753412]
>> heater.V_Cp
[  90.5552729   151.12669316  191.33378118  217.40382217  235.22361902
       247.89894085  257.67548774  266.52560381  276.3289618   288.83510565
       305.48753369]
>> heater.Cp
[ 103.77422749  151.12669316  191.33378118  217.40382217  235.22361902
       247.89894085  257.67548774  266.52560381  276.3289618   288.83510565
       305.48753369]
>> heater.VapFrac
[ 0.75  1.    1.    1.    1.    1.    1.    1.    1.    1.    1.  ]
>> heater.MassVapFrac
[ 0.72086632  1.          1.          1.          1.          1.        
       1.          1.          1.          1.          1.        ]
>> heater.InQ.Energy = None
>> heater.In.VapFrac = 0.0
>> heater.Out.VapFrac = 1.0
>> heater.VapFrac
Calculating profile in heater. Segment 0. Properties ['MolecularWeight']
Calculating profile in heater. Segment 1. Properties ['MolecularWeight']
Calculating profile in heater. Segment 2. Properties ['MolecularWeight']
Calculating profile in heater. Segment 3. Properties ['MolecularWeight']
Calculating profile in heater. Segment 4. Properties ['MolecularWeight']
Calculating profile in heater. Segment 5. Properties ['MolecularWeight']
Calculating profile in heater. Segment 6. Properties ['MolecularWeight']
Calculating profile in heater. Segment 7. Properties ['MolecularWeight']
Calculating profile in heater. Segment 8. Properties ['MolecularWeight']
Calculating profile in heater. Segment 9. Properties ['MolecularWeight']
Calculating profile in heater. Segment 10. Properties ['MolecularWeight']
Done calculating profile in heater
[ 6.74090343e-009  1.10368205e-001  2.17941607e-001  3.23211482e-001
       4.26442923e-001  5.27596486e-001  6.26447671e-001  7.22822335e-001
       8.16842086e-001  9.09002816e-001  9.99999992e-001]
>> heater.MassVapFrac
[ 5.72609330e-009  9.54400056e-002  1.91981185e-001  2.89923597e-001
       3.89170251e-001  4.89380865e-001  5.90202569e-001  6.91467902e-001
       7.93295638e-001  8.96022446e-001  9.99999991e-001]
>> 
>> 
>> copy /heater
Copied /heater to the clipboard
>> paste /
Pasting /heater
>> 1
None

Pasted /heater as /heaterClone
>> /heaterClone.T
Calculating profile in heaterClone. Segment 0. Properties ['T', 'MolecularWeight']
Calculating profile in heaterClone. Segment 1. Properties ['T', 'MolecularWeight']
Calculating profile in heaterClone. Segment 2. Properties ['T', 'MolecularWeight']
Calculating profile in heaterClone. Segment 3. Properties ['T', 'MolecularWeight']
Calculating profile in heaterClone. Segment 4. Properties ['T', 'MolecularWeight']
Calculating profile in heaterClone. Segment 5. Properties ['T', 'MolecularWeight']
Calculating profile in heaterClone. Segment 6. Properties ['T', 'MolecularWeight']
Calculating profile in heaterClone. Segment 7. Properties ['T', 'MolecularWeight']
Calculating profile in heaterClone. Segment 8. Properties ['T', 'MolecularWeight']
Calculating profile in heaterClone. Segment 9. Properties ['T', 'MolecularWeight']
Calculating profile in heaterClone. Segment 10. Properties ['T', 'MolecularWeight']
Done calculating profile in heaterClone
[ 254.62494898  257.09579412  259.61325382  262.09570301  264.52599035
       266.93721836  269.37450329  271.85351761  274.3343431   276.73104425
       278.95299006]
>> /heaterClone.In
Port: /heaterClone.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 * 
T                  = -18.525061719 = C
P                  = 101.325 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 581.222 = kg/h
VolumeFlow         = 0.900759887633 = m3/hr
StdLiqVolumeFlow   = 1.01168513413 = m3/hr
H                  = -8761.84390449 = kJ/kmol
Energy             = -24338.4552903 = W
MolecularWeight    = 58.1222 = 
ZFactor            = 0.00431116179366 = 
PROPANE            = 0.25 * 
n-BUTANE           = 0.25 * 
ISOBUTANE          = 0.25 * 
n-PENTANE          = 0.25 * 

>> 
>> clear
>> read heatex.tst
Processing heatex.tst
>> # Heat exchanger test
>> units SI
>> 
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + PROPANE ISOBUTANE n-BUTANE n-PENTANE
PROPANE ISOBUTANE n-BUTANE n-PENTANE 
>> # lets have some streams for this test
>> hotInlet = Stream.Stream_Material()
>> coldInlet = Stream.Stream_Material()
>> hotOutlet = Stream.Stream_Material()
>> coldOutlet = Stream.Stream_Material()
>> cd hotInlet.In
/hotInlet.In
>> Fraction = .25 .25 .25 .25
>> T = 375 K
>> P = 500
>> MoleFlow = 800
>> cd /coldInlet.In
/coldInlet.In
>> Fraction
PROPANE                     = None
ISOBUTANE                   = None
n-BUTANE                    = None
n-PENTANE                   = None

>> Fraction = .95 0 .05 0
>> VapFrac = 0
>> P = 300
>> T
/coldInlet.In.T= -12.9544049497 = C
>> MoleFlow = 1000
>> cd /
/
>> exch = Heater.HeatExchanger()
>> exch
Operation: exch = sim.unitop.Heater.HeatExchanger
Port: InH = sim.solver.Ports.Port_Material (/exch.HotSide.In)
Port: InC = sim.solver.Ports.Port_Material (/exch.ColdSide.In)
Port: OutH = sim.solver.Ports.Port_Material (/exch.HotSide.Out)
Port: OutC = sim.solver.Ports.Port_Material (/exch.ColdSide.Out)
Port: DeltaTHI = sim.solver.Ports.Port_Signal
Port: UA = sim.solver.Ports.Port_Signal
Port: DeltaPH = sim.solver.Ports.Port_Signal (/exch.HotSide.DeltaP)
Port: DeltaPC = sim.solver.Ports.Port_Signal (/exch.ColdSide.DeltaP)
Port: DeltaTHO = sim.solver.Ports.Port_Signal
Child: ColdSide = sim.unitop.Heater.Heater
Child: HotSide = sim.unitop.Heater.Cooler
Parameter: Ignored = None
Parameter: IsCounterCurrent = 1
>> cd exch
/exch
>> DeltaPC = 10
>> DeltaPH = 50
>> DeltaTHO = 5 K
>> cd /
/
>> coldInlet.Out -> exch.InC
>> exch.OutC -> coldOutlet.In
>> hotInlet.Out -> exch.InH
>> exch.OutH.T
/exch.HotSide.Out.T= -7.95440494965 = C
>> exch.OutH -> hotOutlet.In
>> # results
>> coldInlet
Operation: coldInlet = sim.unitop.Stream.Stream_Material
Port: In = sim.solver.Ports.Port_Material
Port: Out = sim.solver.Ports.Port_Material
Parameter: Ignored = None
>> coldInlet.Out
Port: /coldInlet.Out + sim.solver.Ports.Port_Material
Connected to: /exch.ColdSide.In
VapFrac            = 0.0 = 
T                  = -12.9544049497 = C
P                  = 300.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 44796.949 = kg/h
VolumeFlow         = 76.6189166179 = m3/hr
StdLiqVolumeFlow   = 88.20921765 = m3/hr
H                  = -5722.58913318 = kJ/kmol
Energy             = -1589608.09255 = W
MolecularWeight    = 44.796949 = 
ZFactor            = 0.0106249508482 = 
PROPANE            = 0.95 = 
ISOBUTANE          = 0.0 = 
n-BUTANE           = 0.05 = 
n-PENTANE          = 0.0 = 

>> coldOutlet.Out
Port: /coldOutlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 96.3917583631 = C
P                  = 290.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 44796.949 = kg/h
VolumeFlow         = 10308.5110551 = m3/hr
StdLiqVolumeFlow   = 88.20921765 = m3/hr
H                  = 20699.0775332 = kJ/kmol
Energy             = 5749743.75922 = W
MolecularWeight    = 44.796949 = 
ZFactor            = 0.972971291192 = 
PROPANE            = 0.95 = 
ISOBUTANE          = 0.0 = 
n-BUTANE           = 0.05 = 
n-PENTANE          = 0.0 = 

>> hotInlet.Out
Port: /hotInlet.Out + sim.solver.Ports.Port_Material
Connected to: /exch.HotSide.In
VapFrac            = 1.0 = 
T                  = 101.85 = C
P                  = 500.0 = kPa
MoleFlow           = 800.0 = kgmole/h
MassFlow           = 46497.76 = kg/h
VolumeFlow         = 4621.7032397 = m3/hr
StdLiqVolumeFlow   = 80.9348107307 = m3/hr
H                  = 25622.5577946 = kJ/kmol
Energy             = 5693901.73213 = W
MolecularWeight    = 58.1222 = 
ZFactor            = 0.926446646456 = 
PROPANE            = 0.25 = 
ISOBUTANE          = 0.25 = 
n-BUTANE           = 0.25 = 
n-PENTANE          = 0.25 = 

>> hotOutlet.Out
Port: /hotOutlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = -7.95440494965 = C
P                  = 450.0 = kPa
MoleFlow           = 800.0 = kgmole/h
MassFlow           = 46497.76 = kg/h
VolumeFlow         = 73.3406854475 = m3/hr
StdLiqVolumeFlow   = 80.9348107307 = m3/hr
H                  = -7404.52553838 = kJ/kmol
Energy             = -1645450.11964 = W
MolecularWeight    = 58.1222 = 
ZFactor            = 0.0187098710088 = 
PROPANE            = 0.25 = 
ISOBUTANE          = 0.25 = 
n-BUTANE           = 0.25 = 
n-PENTANE          = 0.25 = 

>> exch.ColdSide.InQ
Port: /exch.ColdSide.InQ + sim.solver.Ports.Port_Energy
Connected to: /exch.HotSide.OutQ
Energy   = 7339351.85177 | W

>> 
>> cd /
/
>> copy /exch /hotInlet /coldInlet /hotOutlet /coldOutlet
Copied /exch /hotInlet /coldInlet /hotOutlet /coldOutlet to the clipboard
>> sub = Flowsheet.SubFlowsheet()
>> paste /sub
Pasting /exch /hotInlet /coldInlet /hotOutlet /coldOutlet
Pasted /exch /hotInlet /coldInlet /hotOutlet /coldOutlet as /sub.exch /sub.hotInlet /sub.coldInlet /sub.hotOutlet /sub.coldOutlet
>> cd /sub
/sub
>> 
>> coldInlet
Operation: coldInlet = sim.unitop.Stream.Stream_Material
Port: In = sim.solver.Ports.Port_Material
Port: Out = sim.solver.Ports.Port_Material
Parameter: Ignored = None
>> coldInlet.Out
Port: /sub.coldInlet.Out + sim.solver.Ports.Port_Material
Connected to: /sub.exch.ColdSide.In
VapFrac            = 0.0 = 
T                  = -12.9544049497 = C
P                  = 300.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 44796.949 = kg/h
VolumeFlow         = 76.6189166179 = m3/hr
StdLiqVolumeFlow   = 88.20921765 = m3/hr
H                  = -5722.58913318 = kJ/kmol
Energy             = -1589608.09255 = W
MolecularWeight    = 44.796949 = 
ZFactor            = 0.0106249508482 = 
PROPANE            = 0.95 = 
ISOBUTANE          = 0.0 = 
n-BUTANE           = 0.05 = 
n-PENTANE          = 0.0 = 

>> coldOutlet.Out
Port: /sub.coldOutlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 96.3917583631 = C
P                  = 290.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 44796.949 = kg/h
VolumeFlow         = 10308.5110551 = m3/hr
StdLiqVolumeFlow   = 88.20921765 = m3/hr
H                  = 20699.0775332 = kJ/kmol
Energy             = 5749743.75922 = W
MolecularWeight    = 44.796949 = 
ZFactor            = 0.972971291192 = 
PROPANE            = 0.95 = 
ISOBUTANE          = 0.0 = 
n-BUTANE           = 0.05 = 
n-PENTANE          = 0.0 = 

>> hotInlet.Out
Port: /sub.hotInlet.Out + sim.solver.Ports.Port_Material
Connected to: /sub.exch.HotSide.In
VapFrac            = 1.0 = 
T                  = 101.85 = C
P                  = 500.0 = kPa
MoleFlow           = 800.0 = kgmole/h
MassFlow           = 46497.76 = kg/h
VolumeFlow         = 4621.7032397 = m3/hr
StdLiqVolumeFlow   = 80.9348107307 = m3/hr
H                  = 25622.5577946 = kJ/kmol
Energy             = 5693901.73213 = W
MolecularWeight    = 58.1222 = 
ZFactor            = 0.926446646456 = 
PROPANE            = 0.25 = 
ISOBUTANE          = 0.25 = 
n-BUTANE           = 0.25 = 
n-PENTANE          = 0.25 = 

>> hotOutlet.Out
Port: /sub.hotOutlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = -7.95440494965 = C
P                  = 450.0 = kPa
MoleFlow           = 800.0 = kgmole/h
MassFlow           = 46497.76 = kg/h
VolumeFlow         = 73.3406854475 = m3/hr
StdLiqVolumeFlow   = 80.9348107307 = m3/hr
H                  = -7404.52553838 = kJ/kmol
Energy             = -1645450.11964 = W
MolecularWeight    = 58.1222 = 
ZFactor            = 0.0187098710088 = 
PROPANE            = 0.25 = 
ISOBUTANE          = 0.25 = 
n-BUTANE           = 0.25 = 
n-PENTANE          = 0.25 = 

>> exch.ColdSide.InQ
Port: /sub.exch.ColdSide.InQ + sim.solver.Ports.Port_Energy
Connected to: /sub.exch.HotSide.OutQ
Energy   = 7339351.85177 | W

>> 
>> clear
>> read recycle.tst
Processing recycle.tst
>> # A simple recycle test
>> 
>> # set up thermo - the name can be anything, I just use
>> # 'thermo' for convenience.  Essentially the rhs causes
>> # a thermo package to be created and assigned to the unit op
>> # owning the name thermo - in the case the base flowsheet
>> 
>> # Also note that for now spaces are needed around the operators (= + etc)
>> # A further also is that case is always significant
>> 
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + PROPANE ISOBUTANE n-BUTANE n-NONANE
PROPANE ISOBUTANE n-BUTANE n-NONANE 
>> units SI
>> 
>> # Add a stream
>> # for now creating a unit op requires module.class(), but this
>> # will be stream lined in the future
>> stream = Stream.Stream_Material()
>> 
>> # Make the stream In port current to save typing
>> # You can use cd (named because it is similar to change directory in
>> # Unix and DOS) to sub objects in this case first to the unit op stream
>> # and then to its port In.  This is just a typing convenience as everything
>> # could be done from the top level with full names i.e. stream.In.T = 360.15
>> cd stream.In
/stream.In
>> 
>> # Mole fractions can be enter indivually (Fraction.PROPANE = .25) or all
>> # together as below.
>> Fraction = .25 .25 .25 .25
>> T = 360.15 K
>> P = 715
>> MoleFlow = 3000
>> 
>> # Now create a recycle stream
>> cd /  # return to top level - only place a slash is used
/
>> recycle = Stream.Stream_Material()
>> cd recycle.In
/recycle.In
>> 
>> # Estimate the values in the stream
>> # Estimates use the ~= operator in place of the normal = which
>> # fixes values
>> T ~= 460.15 K
Changed state of port /recycle.In to 1 (0=Normal port; 1=Recycle port)
>> P ~= 715
>> MoleFlow ~= 300
>> Fraction      # any object without an operator displays itself - here to get order
PROPANE                     = None
ISOBUTANE                   = None
n-BUTANE                    = None
n-NONANE                    = None

>> Fraction ~= 0 .5 0 .5
>> .             # a dot represents the current obj for display purposes
Port: /recycle.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.737242116748 = 
T                  = 187.0 ~ C
P                  = 715.0 ~ kPa
MoleFlow           = 300.0 ~ kgmole/h
MassFlow           = 27956.595 = kg/h
VolumeFlow         = 1062.0667756 = m3/hr
StdLiqVolumeFlow   = 41.5562476611 = m3/hr
H                  = 47870.3007595 = kJ/kmol
Energy             = 3989191.72996 = W
MolecularWeight    = 93.18865 = 
ZFactor            = 0.661617207452 = 
PROPANE            = 0.0 ~ 
ISOBUTANE          = 0.5 ~ 
n-BUTANE           = 0.0 ~ 
n-NONANE           = 0.5 ~ 

>> 
>> # add a mixer to combine the first stream with the recycle
>> cd /
/
>> mixer = Mixer.Mixer()
>> 
>> # ports are connected with the -> operator.  They would be disconnected
>> # by having an empty rhs.  Similarly "stream.In.T =" would remove any value
>> # for the stream In port Temperature
>> stream.Out -> mixer.In0
>> recycle.Out -> mixer.In1
>> mixer.Out
Port: /mixer.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.58907832016 = 
T                  = 99.4948061721 = C
P                  = 715.0 = kPa
MoleFlow           = 3300.0 = kgmole/h
MassFlow           = 244402.935 = kg/h
VolumeFlow         = 7820.60762642 = m3/hr
StdLiqVolumeFlow   = 392.410726716 = m3/hr
H                  = 18802.39837 = kJ/kmol
Energy             = 17235531.8392 = W
MolecularWeight    = 74.0614973713 = 
ZFactor            = 0.546899006687 = 
PROPANE            = 0.227272727273 = 
ISOBUTANE          = 0.272727272727 = 
n-BUTANE           = 0.227272727273 = 
n-NONANE           = 0.272727272727 = 

>> 
>> # add a separator
>> flash = Flash.SimpleFlash()
>> mixer.Out -> flash.In
>> 
>> # split the liquid from the flash
>> splitter = Split.Splitter()
>> flash.Liq0 -> splitter.In
>> 
>> # set the flow in one of the splitter outlets
>> splitter.Out1.MoleFlow = 200
>> 
>> # close the recycle
>> splitter.Out1 -> recycle.In
Iteration 1 -> max Error 0.875052 in /recycle.In.T
Iteration 2 -> max Error 0.318538 in /recycle.In.H
Iteration 3 -> max Error 0.191301 in /recycle.In.H
Iteration 4 -> max Error 0.063527 in /recycle.In.H
Iteration 5 -> max Error 0.000357 in /recycle.In.H
Iteration 6 -> max Error 0.000005 in /recycle.In.T
>> 
>> # All done - check some streams
>> recycle.Out
Port: /recycle.Out + sim.solver.Ports.Port_Material
Connected to: /mixer.In1
VapFrac            = 5.31867570916e-007 = 
T                  = 87.0005666294 = C
P                  = 715.0 = kPa
MoleFlow           = 200.0 = kgmole/h
MassFlow           = 19031.8594412 = kg/h
VolumeFlow         = 31.5847949223 = m3/hr
StdLiqVolumeFlow   = 28.3502461052 = m3/hr
H                  = 8263.11408441 = kJ/kmol
Energy             = 459061.893579 = W
MolecularWeight    = 95.159297206 = 
ZFactor            = 0.037708530926 = 
PROPANE            = 0.0981248423098 = 
ISOBUTANE          = 0.162696075607 = 
n-BUTANE           = 0.191455358173 = 
n-NONANE           = 0.54772372391 = 

>> splitter.Liq0
None
>> #splitter.Liq0.Out
>> splitter.Out0
Port: /splitter.Out0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 87.0000477822 = C
P                  = 715.0 = kPa
MoleFlow           = 1321.35290988 = kgmole/h
MassFlow           = 125738.63608 = kg/h
VolumeFlow         = 208.670111386 = m3/hr
StdLiqVolumeFlow   = 187.30299142 = m3/hr
H                  = 8262.96420505 = kJ/kmol
Energy             = 3032858.83238 = W
MolecularWeight    = 95.159010995 = 
ZFactor            = 0.0377080084348 = 
PROPANE            = 0.098125052075 = 
ISOBUTANE          = 0.162698057396 = 
n-BUTANE           = 0.191457205646 = 
n-NONANE           = 0.547719684883 = 

>> flash.In
Port: /flash.In + sim.solver.Ports.Port_Material
Connected to: /mixer.Out
VapFrac            = 0.524577215662 | 
T                  = 87.0000477822 | C
P                  = 715.0 | kPa
MoleFlow           = 3200.0 | kgmole/h
MassFlow           = 235478.199441 | kg/h
VolumeFlow         = 6533.48517564 | m3/hr
StdLiqVolumeFlow   = 379.204725161 | m3/hr
H                  = 15418.5772531 | kJ/kmol
Energy             = 13705402.0028 | W
MolecularWeight    = 73.5869347536 | 
ZFactor            = 0.487514014526 | 
PROPANE            = 0.240507802644 | 
ISOBUTANE          = 0.244543504725 | 
n-BUTANE           = 0.246340959886 | 
n-NONANE           = 0.268607732744 | 

>> 
>> 
>> #Copy and paste the recycle
>> sub = Flowsheet.SubFlowsheet()
>> innerflowsh = Flowsheet.Flowsheet()
>> copy /stream /recycle /mixer /flash /splitter
Copied /stream /recycle /mixer /flash /splitter to the clipboard
>> paste /sub
Pasting /stream /recycle /mixer /flash /splitter
Pasted /stream /recycle /mixer /flash /splitter as /sub.stream /sub.recycle /sub.mixer /sub.flash /sub.splitter
Iteration 1 -> max Error 0.000005 in /sub.recycle.In.T
>> copy /stream /recycle /mixer /flash /splitter
Copied /stream /recycle /mixer /flash /splitter to the clipboard
>> paste /innerflowsh
Pasting /stream /recycle /mixer /flash /splitter
Pasted /stream /recycle /mixer /flash /splitter as /innerflowsh.stream /innerflowsh.recycle /innerflowsh.mixer /innerflowsh.flash /innerflowsh.splitter
Iteration 1 -> max Error 0.000005 in /innerflowsh.recycle.In.T
>> 
>> 
>> 
>> #Now lets test flags for unconverged recycles that are not being re-solved
>> /MaxNumIterations = 4
Iteration 1 -> max Error 0.000005 in /innerflowsh.recycle.In.T
Iteration 1 -> max Error 0.000005 in /sub.recycle.In.T
>> /recycle.In.T ~= -87
Iteration 1 -> max Error 3.253016 in /recycle.In.H
Iteration 2 -> max Error 0.162728 in /recycle.In.H
Iteration 3 -> max Error 0.045111 in /recycle.In.H
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236

Maximum 4 iterations exceeded in solving flowsheet /
>> 
>> 
>> #Add a second recycle
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236

>> #The "annoying" flag regarding the previously unconverged recycle will keep on coming until 
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236

>> #it is resolved.
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236

>> c = Stream.Stream_Material()
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236

>> cd c
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236

/c
>> cd /
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236

/
>> split = Split.Splitter()
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236

>> cd split
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236

/split
>> cd /split.In.Fraction
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236

/split.In.Fraction
>> /split.In.Fraction = 1 1 1 1
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236

>> /split.In.Fraction ~= 1 1 1 1
Changed state of port /split.In to 1 (0=Normal port; 1=Recycle port)
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236

>> cd /split.In
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236

/split.In
>> T ~= 100
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236

>> P = 100
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236

>> MoleFlow ~= 100
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236

>> cd /split
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236

/split
>> /split.FlowFraction1.Fraction = .4
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236

>> /split.Out0 -> /c.In
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236

>> /split.In -> /c.Out
Iteration 1 -> max Error 0.040000 in /split.In.MoleFlow
Iteration 2 -> max Error 0.197500 in /split.In.Energy
Iteration 3 -> max Error 0.118500 in /split.In.Energy
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236
/split.In.MoleFlow: 21.6 Vs 36

Maximum 4 iterations exceeded in solving flowsheet /
>> 
>> 
>> #Only resolve split.
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236
/split.In.MoleFlow: 21.6 Vs 36

>> #It sould still flag the other recycle as unconverged
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236
/split.In.MoleFlow: 21.6 Vs 36

>> /split.Ignored = 1
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236
/split.In.MoleFlow: 21.6 Vs 36

>> /split.Ignored = None
Iteration 1 -> max Error 0.118500 in /split.In.Energy
Iteration 2 -> max Error 0.071100 in /split.In.Energy
Iteration 3 -> max Error 0.042660 in /split.In.Energy
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236
/split.In.MoleFlow: 7.776 Vs 12.96

Maximum 4 iterations exceeded in solving flowsheet /
>> 
>> #Only resolve recycle
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236
/split.In.MoleFlow: 7.776 Vs 12.96

>> #It should still flag the other recycle as unconverged
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236
/split.In.MoleFlow: 7.776 Vs 12.96

>> /recycle.Ignored = 1
Iteration 1 -> max Error 0.000000 in 
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236
/split.In.MoleFlow: 7.776 Vs 12.96

>> /recycle.Ignored = None
Iteration 1 -> max Error 0.045111 in /recycle.In.H
Iteration 2 -> max Error 0.004405 in /recycle.In.H
Iteration 3 -> max Error 0.000425 in /recycle.In.H
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 360.148 Vs 360.133
/split.In.MoleFlow: 7.776 Vs 12.96

Maximum 4 iterations exceeded in solving flowsheet /
>> 
>> 
>> #Do it again. Now this should have been converged and is not flagged anymore
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 360.148 Vs 360.133
/split.In.MoleFlow: 7.776 Vs 12.96

>> #It should still flag the other recycle as unconverged
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 360.148 Vs 360.133
/split.In.MoleFlow: 7.776 Vs 12.96

>> /recycle.Ignored = 1
Iteration 1 -> max Error 0.000000 in 
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 360.148 Vs 360.133
/split.In.MoleFlow: 7.776 Vs 12.96

>> /recycle.Ignored = None
Iteration 1 -> max Error 0.000425 in /recycle.In.H
Iteration 2 -> max Error 0.000015 in /recycle.In.T
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/split.In.MoleFlow: 7.776 Vs 12.96

>> 
>> 
>> #Unconverge the recycle again
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/split.In.MoleFlow: 7.776 Vs 12.96

>> /recycle.In.T ~= -87
Iteration 1 -> max Error 3.252982 in /recycle.In.H
Iteration 2 -> max Error 0.162729 in /recycle.In.H
Iteration 3 -> max Error 0.045112 in /recycle.In.H
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236
/split.In.MoleFlow: 7.776 Vs 12.96

Maximum 4 iterations exceeded in solving flowsheet /
>> 
>> 
>> #Delete /recycle. Nothing should break
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/recycle.In.T: 359.97 Vs 358.236
/split.In.MoleFlow: 7.776 Vs 12.96

>> delete /recycle
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/split.In.MoleFlow: 7.776 Vs 12.96

>> 
>> #Disconnect the other recycle. the unconv message sould go away
The following recycle ports in flowsheet / have not been converged (only lists one per unit operation):
/split.In.MoleFlow: 7.776 Vs 12.96

>> /split.In ->
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> clear
>> read recycle2.tst
Processing recycle2.tst
>> # A recycle test with information flowing both ways
>> # through the recycle
>> 
>> units SI
>> # set up thermo
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + PROPANE n-BUTANE ISOBUTANE n-NONANE
PROPANE n-BUTANE ISOBUTANE n-NONANE 
>> 
>> # Add a stream
>> stream = Stream.Stream_Material()
>> 
>> # Make the stream In port current to save typing
>> cd stream.In
/stream.In
>> Fraction = .25 .25 .25 .25
>> T = 360.15 K
>> P = 715
>> # Note that flow is not known for the feed stream
>> 
>> # Now create a recycle stream 
>> cd /
/
>> recycle = Stream.Stream_Material()
>> 
>> # add a mixer to combine the first stream with the recycle
>> cd /
/
>> mixer = Mixer.Mixer()
>> stream.Out -> mixer.In0
>> recycle.Out ->mixer.In1
Unknown operator ->mixer.In1
>> recycle.Out -> mixer.In1
>> mixer.Out
Port: /mixer.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow is invalid
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = None
n-BUTANE           = None
ISOBUTANE          = None
n-NONANE           = None

>> 
>> # add a separator
>> flash = Flash.SimpleFlash()
>> mixer.Out -> flash.In
>> 
>> # instead of estimating the recycle stream, I will estimate
>> # the inlet port of the flash for everything but flow
>> # I will just use the same values as the feed stream
>> cd flash.In
/flash.In
>> # Note use of ~= to mean estimate
>> Fraction ~= .25 .25 .25 .25
Changed state of port /flash.In to 1 (0=Normal port; 1=Recycle port)
>> T ~= 360.15 K
>> cd /
/
>> 
>> # fix the flow of the vapour from the flash
>> flash.Vap.MoleFlow = 1652.682
>> 
>> # split the liquid from the flash
>> splitter = Split.Splitter()
>> flash.Liq0 -> splitter.In
>> 
>> # set the flow in one of the splitter outlets
>> splitter.Out1.MoleFlow = 200
>> splitter.Out1.P = 715
>> 
>> # close the recycle
>> splitter.Out1 -> recycle.In
>> 
>> # still needs balance to figure out flow
>> balance = Balance.BalanceOp()
>> # just need a mole balance
>> balance.BalanceType = 2
>> 
>> #set number of balance streams
>> balance.NumberStreamsInMat = 2
>> balance.NumberStreamsOutMat = 1
>> 
>> # connect the dangling ends of the streams to the balance
>> stream.In -> balance.Out0
>> flash.Vap -> balance.In1
>> splitter.Out0 -> balance.In0
Iteration 1 -> max Error 1.037129 in /balance.In0.MoleFlow
Iteration 2 -> max Error 1.326783 in /balance.In0.MoleFlow
Iteration 3 -> max Error 1.298624 in /balance.In0.MoleFlow
Iteration 4 -> max Error 0.000000 in /flash.In.Fraction.n-NONANE
>> 
>> # All done - check some streams
>> recycle.Out
Port: /recycle.Out + sim.solver.Ports.Port_Material
Connected to: /mixer.In1
VapFrac            = 0.0 = 
T                  = 86.9999902621 = C
P                  = 715.0 = kPa
MoleFlow           = 200.0 = kgmole/h
MassFlow           = 19031.7955908 = kg/h
VolumeFlow         = 31.5843008364 = m3/hr
StdLiqVolumeFlow   = 28.3501769893 = m3/hr
H                  = 8262.94849568 = kJ/kmol
Energy             = 459052.694205 = W
MolecularWeight    = 95.1589779538 = 
ZFactor            = 0.0377080013916 = 
PROPANE            = 0.0981251116379 = 
n-BUTANE           = 0.191457419253 = 
ISOBUTANE          = 0.162698243436 = 
n-NONANE           = 0.547719225673 = 

>> splitter.Liq0
None
>> splitter.Liq0.Out
There is no object named Out
>> splitter.Out0
Port: /splitter.Out0 + sim.solver.Ports.Port_Material
Connected to: /balance.In0
VapFrac            = 0.0 = 
T                  = 86.9999902621 = C
P                  = 715.0 = kPa
MoleFlow           = 1300.91150473 = kgmole/h
MassFlow           = 123793.409198 = kg/h
VolumeFlow         = 205.441901634 = m3/hr
StdLiqVolumeFlow   = 184.405357032 = m3/hr
H                  = 8262.94849568 = kJ/kmol
Energy             = 2985934.65583 = W
MolecularWeight    = 95.1589779538 = 
ZFactor            = 0.0377080013916 = 
PROPANE            = 0.0981251116379 = 
n-BUTANE           = 0.191457419253 = 
ISOBUTANE          = 0.162698243436 = 
n-NONANE           = 0.547719225673 = 

>> flash.In
Port: /flash.In + sim.solver.Ports.Port_Material
Connected to: /mixer.Out
VapFrac            = 0.524063103733 = 
T                  = 86.9999902621 ~ C
P                  = 715.0 = kPa
MoleFlow           = 3153.59350473 = kgmole/h
MassFlow           = 232129.898506 = kg/h
VolumeFlow         = 6432.91280854 = m3/hr
StdLiqVolumeFlow   = 373.77727701 = m3/hr
H                  = 15411.5512771 = kJ/kmol
Energy             = 13500491.1125 = W
MolecularWeight    = 73.6080595541 = 
ZFactor            = 0.487073156069 = 
PROPANE            = 0.240368274121 ~ 
n-BUTANE           = 0.246287298721 ~ 
ISOBUTANE          = 0.244463425794 ~ 
n-NONANE           = 0.268881001364 ~ 

>> stream.Out
Port: /stream.Out + sim.solver.Ports.Port_Material
Connected to: /mixer.In0
VapFrac            = 0.559549106862 = 
T                  = 87.0 = C
P                  = 715.0 = kPa
MoleFlow           = 2953.59260288 = kgmole/h
MassFlow           = 213098.102915 = kg/h
VolumeFlow         = 6401.32177262 = m3/hr
StdLiqVolumeFlow   = 345.427064675 = m3/hr
H                  = 15895.608131 = kJ/kmol
Energy             = 13041430.7206 = W
MolecularWeight    = 72.14878 = 
ZFactor            = 0.517501123895 = 
PROPANE            = 0.25 = 
n-BUTANE           = 0.25 = 
ISOBUTANE          = 0.25 = 
n-NONANE           = 0.25 = 

>> 
>> # reset the temperature
>> stream.In.T = 400 K
Iteration 1 -> max Error 8.628594 in /flash.In.Energy
Iteration 2 -> max Error 0.659886 in /balance.In0.Fraction.n-NONANE
Iteration 3 -> max Error 0.741494 in /balance.In0.Fraction.n-NONANE
Iteration 4 -> max Error 0.746425 in /balance.In0.Fraction.n-NONANE
Iteration 5 -> max Error 0.000003 in /flash.In.Fraction.n-NONANE
>> 
>> # check streams again
>> recycle.Out
Port: /recycle.Out + sim.solver.Ports.Port_Material
Connected to: /mixer.In1
VapFrac            = 0.0 = 
T                  = 126.85015491 = C
P                  = 715.0 = kPa
MoleFlow           = 200.0 = kgmole/h
MassFlow           = 21947.8134875 = kg/h
VolumeFlow         = 37.3279475975 = m3/hr
StdLiqVolumeFlow   = 31.4935794308 = m3/hr
H                  = 20283.2928168 = kJ/kmol
Energy             = 1126849.60093 = W
MolecularWeight    = 109.739067438 = 
ZFactor            = 0.040125421402 = 
PROPANE            = 0.0544347951266 = 
n-BUTANE           = 0.108012553545 = 
ISOBUTANE          = 0.0906791947016 = 
n-NONANE           = 0.746873456627 = 

>> splitter.Liq0
None
>> splitter.Liq0.Out
There is no object named Out
>> splitter.Out0
Port: /splitter.Out0 + sim.solver.Ports.Port_Material
Connected to: /balance.In0
VapFrac            = 0.0 = 
T                  = 126.85015491 = C
P                  = 715.0 = kPa
MoleFlow           = 585.091163268 = kgmole/h
MassFlow           = 64207.358623 = kg/h
VolumeFlow         = 109.201261411 = m3/hr
StdLiqVolumeFlow   = 92.1330751233 = m3/hr
H                  = 20283.2928168 = kJ/kmol
Energy             = 3296548.71919 = W
MolecularWeight    = 109.739067438 = 
ZFactor            = 0.040125421402 = 
PROPANE            = 0.0544347951266 = 
n-BUTANE           = 0.108012553545 = 
ISOBUTANE          = 0.0906791947016 = 
n-NONANE           = 0.746873456627 = 

>> flash.In
Port: /flash.In + sim.solver.Ports.Port_Material
Connected to: /mixer.Out
VapFrac            = 0.677947409095 = 
T                  = 126.85015491 ~ C
P                  = 715.0 = kPa
MoleFlow           = 2437.77316327 = kgmole/h
MassFlow           = 183400.931917 = kg/h
VolumeFlow         = 7144.24964056 = m3/hr
StdLiqVolumeFlow   = 293.205047308 = m3/hr
H                  = 25909.7535519 = kJ/kmol
Energy             = 17545028.2988 = W
MolecularWeight    = 75.2329768332 = 
ZFactor            = 0.630055519186 = 
PROPANE            = 0.233954444393 ~ 
n-BUTANE           = 0.238350206798 ~ 
ISOBUTANE          = 0.236927997624 ~ 
n-NONANE           = 0.290767351184 ~ 

>> stream.Out
Port: /stream.Out + sim.solver.Ports.Port_Material
Connected to: /mixer.In0
VapFrac            = 0.738542590709 = 
T                  = 126.85 = C
P                  = 715.0 = kPa
MoleFlow           = 2237.78029828 = kgmole/h
MassFlow           = 161453.118429 = kg/h
VolumeFlow         = 7106.97695845 = m3/hr
StdLiqVolumeFlow   = 261.711746932 = m3/hr
H                  = 26412.6116978 = kJ/kmol
Energy             = 16418228.3566 = W
MolecularWeight    = 72.14878 = 
ZFactor            = 0.68278366116 = 
PROPANE            = 0.25 = 
n-BUTANE           = 0.25 = 
ISOBUTANE          = 0.25 = 
n-NONANE           = 0.25 = 

>> 
>> #Copy the whole flowsheet
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
Iteration 1 -> max Error 0.000003 in /RootClone.flash.In.Fraction.n-NONANE
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone_1
Iteration 1 -> max Error 0.000003 in /RootClone_1.RootClone.flash.In.Fraction.n-NONANE
Iteration 1 -> max Error 0.000003 in /RootClone_1.flash.In.Fraction.n-NONANE
>> 
>> /flash.In.State = 0
Changed state of port /flash.In to 0 (0=Normal port; 1=Recycle port)
>> /flash.In
Port: /flash.In + sim.solver.Ports.Port_Material
Connected to: /mixer.Out
VapFrac            = 0.677947409095 = 
T                  = 126.85015491 * C
P                  = 715.0 = kPa
MoleFlow           = 2437.77316327 = kgmole/h
MassFlow           = 183400.931917 = kg/h
VolumeFlow         = 7144.24964056 = m3/hr
StdLiqVolumeFlow   = 293.205047308 = m3/hr
H                  = 25909.7535519 = kJ/kmol
Energy             = 17545028.2988 = W
MolecularWeight    = 75.2329768332 = 
ZFactor            = 0.630055519186 = 
PROPANE            = 0.233954444393 * 
n-BUTANE           = 0.238350206798 * 
ISOBUTANE          = 0.236927997624 * 
n-NONANE           = 0.290767351184 * 

>> /flash.In.State = 1
Changed state of port /flash.In to 1 (0=Normal port; 1=Recycle port)
>> /flash.In
Port: /flash.In + sim.solver.Ports.Port_Material
Connected to: /mixer.Out
VapFrac            = 0.677947409095 = 
T                  = 126.85015491 ~ C
P                  = 715.0 = kPa
MoleFlow           = 2437.77316327 = kgmole/h
MassFlow           = 183400.931917 = kg/h
VolumeFlow         = 7144.24964056 = m3/hr
StdLiqVolumeFlow   = 293.205047308 = m3/hr
H                  = 25909.7535519 = kJ/kmol
Energy             = 17545028.2988 = W
MolecularWeight    = 75.2329768332 = 
ZFactor            = 0.630055519186 = 
PROPANE            = 0.233954444393 ~ 
n-BUTANE           = 0.238350206798 ~ 
ISOBUTANE          = 0.236927997624 ~ 
n-NONANE           = 0.290767351184 ~ 

>> 
>> 
>> 
>> clear
>> read turboexp.tst
Processing turboexp.tst
>> # turboexpander test (from old Hysim manual)
>> units Field
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + Nitrogen Carbon_Dioxide Methane Ethane PROPANE
Nitrogen Carbon Dioxide Methane Ethane PROPANE 
>> thermo + ISOBUTANE n-BUTANE ISOPENTANE n-PENTANE n-Hexane
ISOBUTANE n-BUTANE ISOPENTANE n-PENTANE n-Hexane 
>> 
>> # define plant feed
>> feed = Stream.Stream_Material()
>> feed.In.T = 60
>> feed.In.P = 600
>> feed.In.MoleFlow = 100
>> feed.In.Fraction = 1.49 .2 91.22 4.96 1.48 .26 .2 .1 .06 .03
>> 
>> # define feed cooler
>> cooler = Heater.Cooler()
>> feed.Out -> cooler.In
>> cooler.Out.T = -105
>> cooler.DeltaP = 15
>> 
>> # high pressure separator
>> hp-sep = Flash.SimpleFlash()
>> cooler.Out -> hp-sep.In
>> 
>> # turbo expander
>> expander = Compressor.Expander()
>> expander.Efficiency = .75
>> expander.Out.P = 330
>> 
>> hp-sep.Vap -> expander.In
>> 
>> # low pressure separator
>> lp-sep = Flash.SimpleFlash()
>> expander.Out -> lp-sep.In
>> 
>> # valve
>> valve = Valve.Valve()
>> hp-sep.Liq0 -> valve.In
>> valve.Out.P = 335
>> 
>> demeth = Tower.Tower()
>> demeth.Stage_0
Stage_0
>> demeth.Stage_0 + 4  # just six stages`
>> 
>> cd demeth.Stage_0
/demeth.Stage_0
>> 
>> f = Tower.Feed()
>> /lp-sep.Liq0 -> f.Port
>> v = Tower.VapourDraw()
>> v.Port.P = 330
>> #v.Port.MoleFlow = 21.7  # overhead flow spec
>> v.estF = Tower.Estimate('MoleFlow')
>> v.estF.Value = 22
>> #estT = Tower.Estimate('T')
>> #estT.Value = -120
>> 
>> cd ../Stage_1
/demeth.Stage_1
>> f = Tower.Feed()
>> f.Port -> /valve.Out
>> 
>> cd ../Stage_5
/demeth.Stage_5
>> l = Tower.LiquidDraw()
>> l.Port.P = 335
>> reb = Tower.EnergyFeed(1)
>> #reb.Port.Energy = 0.065e6
>> l.Port.Fraction.METHANE = 0.01
>> 
>> estT = Tower.Estimate('T')
>> estT.Value = 0
>> 
>> cd ..
/demeth
>> 
>> /overhead = Stream.Stream_Material()
>> /overhead.In -> Stage_0.v.Port
>> 
>> /bottoms = Stream.Stream_Material()
>> /bottoms.In -> Stage_5.l.Port
>> 
>> TryToSolve = 1  # start calculation - turned off by default
Calculating Jacobian for /demeth
/demeth Inner Error 0.070868
/demeth Inner Error 0.013746
/demeth Inner Error 0.003870
/demeth Inner Error 0.000594
/demeth Inner Error 0.000049
/demeth Iteration 1 Outer Error 0.052323
/demeth Inner Error 0.052180
/demeth Inner Error 0.005461
/demeth Inner Error 0.000890
/demeth Inner Error 0.000165
/demeth Inner Error 0.000021
/demeth Iteration 2 Outer Error 0.010551
/demeth Inner Error 0.038022
/demeth Inner Error 0.009512
/demeth Inner Error 0.000715
/demeth Inner Error 0.000104
/demeth Inner Error 0.000006
/demeth Iteration 3 Outer Error 0.008356
/demeth Inner Error 0.017323
/demeth Inner Error 0.000748
/demeth Inner Error 0.000035
/demeth Iteration 4 Outer Error 0.003563
/demeth Inner Error 0.002591
/demeth Inner Error 0.000589
/demeth Inner Error 0.000041
/demeth Iteration 5 Outer Error 0.001026
/demeth Inner Error 0.000545
/demeth Inner Error 0.000062
/demeth Iteration 6 Outer Error 0.000332
/demeth Inner Error 0.000042
/demeth Iteration 7 Outer Error 0.000098
/demeth Inner Error 0.000010
>> 
>> /overhead.Out
Port: /overhead.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.999999808235 = 
T                  = -135.412785439 = F
P                  = 330.0 = psia
MoleFlow           = 22.2961708989 = lbmole/h
MassFlow           = 367.733245203 = lb/h
VolumeFlow         = 0.047796106323 = ft3/s
StdLiqVolumeFlow   = 0.00539160119702 = ft3/s
H                  = 2072.39952364 = Btu/lbmol
Energy             = 46198.8038069 = Btu/hr
MolecularWeight    = 16.4931120626 = 
ZFactor            = 0.731857415985 = 
NITROGEN           = 0.00562993694494 = 
CARBON DIOXIDE     = 0.00321900221363 = 
METHANE            = 0.970784445473 = 
ETHANE             = 0.0198417861298 = 
PROPANE            = 0.000511106326775 = 
ISOBUTANE          = 1.0364532159e-005 = 
n-BUTANE           = 3.21620612009e-006 = 
ISOPENTANE         = 9.48425346602e-008 = 
n-PENTANE          = 4.64463836102e-008 = 
n-HEXANE           = 8.84194520451e-010 = 

>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 2.9145170578e-006 = 
T                  = 59.4273279 = F
P                  = 335.0 = psia
MoleFlow           = 5.75336556976 = lbmole/h
MassFlow           = 214.271950312 = lb/h
VolumeFlow         = 0.00206128587181 = ft3/s
StdLiqVolumeFlow   = 0.00223025541565 = ft3/s
H                  = -378.331269719 = Btu/lbmol
Energy             = -2176.31206883 = Btu/hr
MolecularWeight    = 37.2428881346 = 
ZFactor            = 0.0775625719559 = 
NITROGEN           = 1.27977704292e-007 = 
CARBON DIOXIDE     = 0.00701890306566 = 
METHANE            = 0.01 = 
ETHANE             = 0.619544367773 = 
PROPANE            = 0.250639403499 = 
ISOBUTANE          = 0.0450541969898 = 
n-BUTANE           = 0.0347208757441 = 
ISOPENTANE         = 0.0173799606027 = 
n-PENTANE          = 0.0104280900107 = 
n-HEXANE           = 0.00521433742528 = 

>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
>> /bottoms.In
Port: /bottoms.In + sim.solver.Ports.Port_Material
Connected to: /demeth.LiquidDraw_5_l
VapFrac            = 2.9145170578e-006 | 
T                  = 59.4273279 | F
P                  = 335.0 | psia
MoleFlow           = 5.75336556976 | lbmole/h
MassFlow           = 214.271950312 | lb/h
VolumeFlow         = 0.00206128587181 | ft3/s
StdLiqVolumeFlow   = 0.00223025541565 | ft3/s
H                  = -378.331269719 | Btu/lbmol
Energy             = -2176.31206883 | Btu/hr
MolecularWeight    = 37.2428881346 | 
ZFactor            = 0.0775625719559 | 
NITROGEN           = 1.27977704292e-007 | 
CARBON DIOXIDE     = 0.00701890306566 | 
METHANE            = 0.01 | 
ETHANE             = 0.619544367773 | 
PROPANE            = 0.250639403499 | 
ISOBUTANE          = 0.0450541969898 | 
n-BUTANE           = 0.0347208757441 | 
ISOPENTANE         = 0.0173799606027 | 
n-PENTANE          = 0.0104280900107 | 
n-HEXANE           = 0.00521433742528 | 

>> /RootClone.bottoms.In
Port: /RootClone.bottoms.In + sim.solver.Ports.Port_Material
Connected to: /RootClone.demeth.LiquidDraw_5_l
VapFrac            = None
T                  = None
P                  = 335.0 | psia
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
NITROGEN           = None
CARBON DIOXIDE     = None
METHANE            = 0.01 | 
ETHANE             = None
PROPANE            = None
ISOBUTANE          = None
n-BUTANE           = None
ISOPENTANE         = None
n-PENTANE          = None
n-HEXANE           = None

>> 
>> clear
>> read deprop.tst
Processing deprop.tst
>> # Depeopanizer test (from old Hysim manual)
>> units Field
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + Methane Ethane PROPANE
Methane Ethane PROPANE 
>> thermo + ISOBUTANE n-BUTANE ISOPENTANE n-PENTANE n-Hexane
ISOBUTANE n-BUTANE ISOPENTANE n-PENTANE n-Hexane 
>> thermo + n-Heptane n-Octane
n-Heptane n-Octane 
>> 
>> deprop = Tower.Tower()
>> deprop.Stage_0 + 18  # twenty stages`
>> 
>> cd deprop.Stage_0
/deprop.Stage_0
>> 
>> v = Tower.VapourDraw()
>> v.Port.P = 200
>> v.Port.Fraction.ISOBUTANE = .01
>> 
>> cond = Tower.EnergyFeed(0)
>> #cond.Port.Energy = 1.667e6
>> 
>> #estReflux = Tower.Estimate('Reflux')
>> #estReflux.Value = .45
>> estT = Tower.Estimate('T')
>> estT.Value = 25
>> 
>> #reflux = Tower.StageSpecification('Reflux')
>> #reflux.Value = .5042
>> 
>> cd ../Stage_9
/deprop.Stage_9
>> f = Tower.Feed()
>> f.Port.T = 50
>> f.Port.P = 480
>> f.Port.MoleFlow = 1000
>> f.Port.Fraction = .1702 .1473 .1132 .1166 .1066 .0963 .0829 .0694 .0558 .0417
>> f.Port
Port: /deprop.Feed_9_f + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0156862063356 = 
T                  = 50.0 * F
P                  = 480.0 * psia
MoleFlow           = 1000.0 * lbmole/h
MassFlow           = 54388.324404 = lb/h
VolumeFlow         = 0.452031963439 = ft3/s
StdLiqVolumeFlow   = 0.438228699383 = ft3/s
H                  = -1484.95388229 = Btu/lbmol
Energy             = -1484704.17098 = Btu/hr
MolecularWeight    = 54.388324404 = 
ZFactor            = 0.142810862978 = 
METHANE            = 0.1702 * 
ETHANE             = 0.1473 * 
PROPANE            = 0.1132 * 
ISOBUTANE          = 0.1166 * 
n-BUTANE           = 0.1066 * 
ISOPENTANE         = 0.0963 * 
n-PENTANE          = 0.0829 * 
n-HEXANE           = 0.0694 * 
n-HEPTANE          = 0.0558 * 
n-OCTANE           = 0.0417 * 

>> 
>> #estT = Tower.Estimate('T')
>> #estT.Value = 100
>> 
>> cd ../Stage_19
/deprop.Stage_19
>> l = Tower.LiquidDraw()
>> l.Port.P = 205
>> l.Port.Fraction.PROPANE = .02
>> 
>> reb = Tower.EnergyFeed(1)
>> #reb.Port.Energy = 8.42e6
>> estT = Tower.Estimate('T')
>> estT.Value = 250
>> 
>> cd ..
/deprop
>> 
>> /overhead = Stream.Stream_Material()
>> /overhead.In -> Stage_0.v.Port
>> 
>> /bottoms = Stream.Stream_Material()
>> /bottoms.In -> Stage_19.l.Port
>> 
>> 
>> 
>> TryToSolve = 1  # start calculation
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 0.481707
/deprop Inner Error 0.372715
/deprop Inner Error 0.331087
/deprop Inner Error 0.168350
/deprop Inner Error 0.154254
/deprop Inner Error 0.037689
/deprop Inner Error 0.011839
/deprop Inner Error 0.005868
/deprop Inner Error 0.001905
/deprop Inner Error 0.001050
/deprop Inner Error 0.000149
/deprop Inner Error 0.000047
/deprop Iteration 1 Outer Error 0.090955
/deprop Inner Error 0.875251
/deprop Inner Error 0.390338
/deprop Inner Error 0.097917
/deprop Inner Error 0.039596
/deprop Inner Error 0.010843
/deprop Inner Error 0.004847
/deprop Inner Error 0.002059
/deprop Inner Error 0.000204
/deprop Inner Error 0.000131
/deprop Inner Error 0.000034
/deprop Iteration 2 Outer Error 0.014684
/deprop Inner Error 0.074377
/deprop Inner Error 0.017044
/deprop Inner Error 0.003788
/deprop Inner Error 0.001370
/deprop Inner Error 0.000421
/deprop Inner Error 0.000152
/deprop Inner Error 0.000037
/deprop Iteration 3 Outer Error 0.001380
/deprop Inner Error 0.010971
/deprop Inner Error 0.003567
/deprop Inner Error 0.000931
/deprop Inner Error 0.000131
/deprop Inner Error 0.000042
/deprop Iteration 4 Outer Error 0.000127
/deprop Inner Error 0.001915
/deprop Inner Error 0.000379
/deprop Inner Error 0.000048
/deprop Iteration 5 Outer Error 0.000022
/deprop Inner Error 0.000175
/deprop Inner Error 0.000024
>> 
>> /overhead.Out
Port: /overhead.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.99999970421 = 
T                  = 25.1360314135 = F
P                  = 200.0 = psia
MoleFlow           = 424.043371005 = lbmole/h
MassFlow           = 11926.0079765 = lb/h
VolumeFlow         = 2.64222815551 = ft3/s
StdLiqVolumeFlow   = 0.137630416355 = ft3/s
H                  = 4083.39717475 = Btu/lbmol
Energy             = 1731246.32608 = Btu/hr
MolecularWeight    = 28.124500445 = 
ZFactor            = 0.862307082303 = 
METHANE            = 0.401374037677 = 
ETHANE             = 0.347360721599 = 
PROPANE            = 0.23978920373 = 
ISOBUTANE          = 0.01 = 
n-BUTANE           = 0.00147545801178 = 
ISOPENTANE         = 3.93182905876e-007 = 
n-PENTANE          = 9.08978294084e-008 = 
n-HEXANE           = 2.11313712315e-013 = 
n-HEPTANE          = 1.21901947785e-017 = 
n-OCTANE           = 5.24651749427e-022 = 

>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.39780146744e-006 = 
T                  = 254.94091086 = F
P                  = 205.0 = psia
MoleFlow           = 575.956628995 = lbmole/h
MassFlow           = 42462.3106319 = lb/h
VolumeFlow         = 0.379477718763 = ft3/s
StdLiqVolumeFlow   = 0.300598257661 = ft3/s
H                  = 6153.47375138 = Btu/lbmol
Energy             = 3543538.0134 = Btu/hr
MolecularWeight    = 73.7248405422 = 
ZFactor            = 0.0634045815128 = 
METHANE            = 5.19714576253e-011 = 
ETHANE             = 6.92527606997e-006 = 
PROPANE            = 0.02 = 
ISOBUTANE          = 0.195083310775 = 
n-BUTANE           = 0.183997086718 = 
ISOPENTANE         = 0.167199800168 = 
n-PENTANE          = 0.143934382004 = 
n-HEXANE           = 0.120495184023 = 
n-HEPTANE          = 0.0968822949348 = 
n-OCTANE           = 0.0724012849244 = 

>> 
>> 
>> #Now lets do some vol flow specs
>> commonproperties + VolumeFlow StdLiqMolarVol
/deprop Inner Error 0.000005
/deprop Iteration 1 Outer Error 0.000003
/deprop Inner Error 0.000019
>> displayproperties + StdLiqMolarVol StdLiqVolumeFlow
>> 
>> TryToSolve = 1 
/deprop Inner Error 0.000004
/deprop Iteration 1 Outer Error 0.000000
/deprop Inner Error 0.000002
>> TryToRestart = 1
/deprop Inner Error 0.000000
/deprop Iteration 1 Outer Error 0.000000
/deprop Inner Error 0.000001
>> 
>> #Delete fractions
>> /deprop.LiquidDraw_19_l.Fraction = None None None None None None None None None None
>> /deprop.LiquidDraw_19_l.StdLiqVolumeFlow = 0.304
/deprop Iteration 1 Outer Error 0.000000
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 0.010548
/deprop Inner Error 0.010471
/deprop Inner Error 0.008965
/deprop Inner Error 0.005575
/deprop Inner Error 0.000464
/deprop Inner Error 0.000026
>> /overhead.Out
Port: /overhead.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.994334413288 = 
T                  = 21.9404931331 = F
P                  = 200.0 = psia
MoleFlow           = 415.302489332 = lbmole/h
MassFlow           = 11539.9129948 = lb/h
VolumeFlow         = 2.56096505519 = ft3/s
StdLiqVolumeFlow   = 0.134228478581 = ft3/s
H                  = 3994.17031184 = Btu/lbmol
Energy             = 1658509.92975 = Btu/hr
MolecularWeight    = 27.78676577 = 
ZFactor            = 0.859039447669 = 
StdLiqMolarVol     = 1.16353594236 = ft3/lbmol
StdLiqVolumeFlow   = 0.134228478581 = ft3/s
METHANE            = 0.409821766793 = 
ETHANE             = 0.354659676985 = 
PROPANE            = 0.223926338277 = 
ISOBUTANE          = 0.01 = 
n-BUTANE           = 0.00159154771863 = 
ISOPENTANE         = 4.54815124175e-007 = 
n-PENTANE          = 1.05496278627e-007 = 
n-HEXANE           = 2.48573588395e-013 = 
n-HEPTANE          = 1.4380816035e-017 = 
n-OCTANE           = 6.19669954257e-022 = 

>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.00196689014506 = 
T                  = 251.099117679 = F
P                  = 205.0 = psia
MoleFlow           = 584.697510668 = lbmole/h
MassFlow           = 42848.4100245 = lb/h
VolumeFlow         = 0.389862763856 = ft3/s
StdLiqVolumeFlow   = 0.304 = ft3/s
H                  = 5952.73941382 = Btu/lbmol
Energy             = 3479966.62388 = Btu/hr
MolecularWeight    = 73.2830382252 = 
ZFactor            = 0.0645127783749 = 
StdLiqMolarVol     = 1.87172618658 = ft3/lbmol
StdLiqVolumeFlow   = 0.304 = ft3/s
METHANE            = 1.16875467953e-010 = 
ETHANE             = 1.5312674373e-005 = 
PROPANE            = 0.0345526257902 = 
ISOBUTANE          = 0.192316415594 = 
n-BUTANE           = 0.181186039512 = 
ISOPENTANE         = 0.164700224231 = 
n-PENTANE          = 0.141782639185 = 
n-HEXANE           = 0.118693852349 = 
n-HEPTANE          = 0.0954339619751 = 
n-OCTANE           = 0.0713189285728 = 

>> 
>> /deprop.LiquidDraw_19_l.StdLiqVolumeFlow =
>> /deprop.VapourDraw_0_v.VolumeFlow = 2.0
/deprop Iteration 1 Outer Error 0.011048
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 0.489300
/deprop Inner Error 0.439164
/deprop Inner Error 0.180911
/deprop Inner Error 0.115456
/deprop Inner Error 0.089330
/deprop Inner Error 0.043677
/deprop Inner Error 0.016419
/deprop Inner Error 0.004771
/deprop Inner Error 0.001252
/deprop Inner Error 0.000458
/deprop Inner Error 0.000097
/deprop Iteration 2 Outer Error 0.146418
/deprop Inner Error 1.154225
/deprop Inner Error 0.610497
/deprop Inner Error 0.310785
/deprop Inner Error 0.194817
/deprop Inner Error 0.143047
/deprop Inner Error 0.059066
/deprop Inner Error 0.027809
/deprop Inner Error 0.022486
/deprop Inner Error 0.011515
/deprop Inner Error 0.008907
/deprop Inner Error 0.001041
/deprop Inner Error 0.000157
/deprop Inner Error 0.000116
/deprop Inner Error 0.000024
/deprop Iteration 3 Outer Error 0.026982
/deprop Inner Error 0.385381
/deprop Inner Error 0.226473
/deprop Inner Error 0.078075
/deprop Inner Error 0.024895
/deprop Inner Error 0.009414
/deprop Inner Error 0.002483
/deprop Inner Error 0.000558
/deprop Inner Error 0.000102
/deprop Inner Error 0.000015
/deprop Iteration 4 Outer Error 0.002542
/deprop Inner Error 0.071142
/deprop Inner Error 0.014164
/deprop Inner Error 0.003470
/deprop Inner Error 0.001434
/deprop Inner Error 0.000166
/deprop Inner Error 0.000016
/deprop Iteration 5 Outer Error 0.000547
/deprop Inner Error 0.003849
/deprop Inner Error 0.002000
/deprop Inner Error 0.000372
/deprop Inner Error 0.000069
/deprop Iteration 6 Outer Error 0.000109
/deprop Inner Error 0.000700
/deprop Inner Error 0.000283
/deprop Inner Error 0.000032
/deprop Iteration 7 Outer Error 0.000057
/deprop Inner Error 0.000115
/deprop Inner Error 0.000024
>> /overhead.Out
Port: /overhead.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.999997211076 = 
T                  = -10.1191183723 = F
P                  = 200.0 = psia
MoleFlow           = 343.069601309 = lbmole/h
MassFlow           = 8365.98028407 = lb/h
VolumeFlow         = 2.0 = ft3/s
StdLiqVolumeFlow   = 0.106109070594 = ft3/s
H                  = 3519.52203328 = Btu/lbmol
Energy             = 1207237.97629 = Btu/hr
MolecularWeight    = 24.3856647518 = 
ZFactor            = 0.870037311562 = 
StdLiqMolarVol     = 1.11344800846 = ft3/lbmol
StdLiqVolumeFlow   = 0.106109070594 = ft3/s
METHANE            = 0.496109238595 = 
ETHANE             = 0.424646999743 = 
PROPANE            = 0.0675647272377 = 
ISOBUTANE          = 0.01 = 
n-BUTANE           = 0.001678829087 = 
ISOPENTANE         = 2.1584736415e-007 = 
n-PENTANE          = 2.97382267486e-008 = 
n-HEXANE           = 1.24156512077e-014 = 
n-HEPTANE          = 1.94062488435e-019 = 
n-OCTANE           = 2.26252205621e-024 = 

>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 223.580550412 = F
P                  = 205.0 = psia
MoleFlow           = 656.930398691 = lbmole/h
MassFlow           = 46022.3445858 = lb/h
VolumeFlow         = 0.399743494757 = ft3/s
StdLiqVolumeFlow   = 0.332119630638 = ft3/s
H                  = 4493.92401327 = Btu/lbmol
Energy             = 2951698.84966 = Btu/hr
MolecularWeight    = 70.0566523904 = 
ZFactor            = 0.0612457335122 = 
StdLiqMolarVol     = 1.82001453984 = ft3/lbmol
StdLiqVolumeFlow   = 0.332119630638 = ft3/s
METHANE            = 1.99304678967e-009 = 
ETHANE             = 0.00246072202494 = 
PROPANE            = 0.137032166792 = 
ISOBUTANE          = 0.172269875196 = 
n-BUTANE           = 0.161393117118 = 
ISOPENTANE         = 0.146590759297 = 
n-PENTANE          = 0.126192957371 = 
n-HEXANE           = 0.105642850656 = 
n-HEPTANE          = 0.0849405052822 = 
n-OCTANE           = 0.06347704427 = 

>> 
>> TryToRestart = 1  #Keep last solution and ramp it up
/deprop Inner Error 0.000005
/deprop Iteration 1 Outer Error 0.000017
/deprop Inner Error 0.000034
>> /deprop.VapourDraw_0_v.VolumeFlow = 2.8
/deprop Iteration 1 Outer Error 0.000005
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 0.814578
/deprop Inner Error 0.814420
/deprop Inner Error 0.813811
/deprop Inner Error 0.813659
/deprop Inner Error 0.813061
/deprop Inner Error 0.812906
/deprop Inner Error 0.812242
/deprop Inner Error 0.812077
/deprop Inner Error 0.811397
/deprop Inner Error 0.811216
/deprop Inner Error 0.810444
/deprop Inner Error 0.810237
/deprop Inner Error 0.809339
/deprop Inner Error 0.809197
/deprop Inner Error 0.808944
/deprop Inner Error 0.808527
/deprop Inner Error 0.807924
/deprop Inner Error 0.807205
/deprop Inner Error 0.806550
/deprop Inner Error 0.805693
/deprop Inner Error 0.804344
/deprop Inner Error 0.802994
/deprop Inner Error 0.801325
/deprop Inner Error 0.799337
/deprop Inner Error 0.797005
/deprop Inner Error 0.796549
/deprop Inner Error 0.795113
/deprop Inner Error 0.785813
/deprop Inner Error 0.780777
/deprop Inner Error 0.721986
/deprop Inner Error 0.612972
/deprop Inner Error 0.372165
/deprop Inner Error 0.242068
/deprop Inner Error 0.162541
/deprop Inner Error 0.157612
/deprop Inner Error 0.049454
/deprop Inner Error 0.025936
/deprop Inner Error 0.005913
/deprop Inner Error 0.002219
/deprop Inner Error 0.000887
/deprop Inner Error 0.000381
/deprop Inner Error 0.000070
>> /overhead.Out
Port: /overhead.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 43.425447325 = F
P                  = 200.0 = psia
MoleFlow           = 425.720013574 = lbmole/h
MassFlow           = 11997.1153534 = lb/h
VolumeFlow         = 2.8 = ft3/s
StdLiqVolumeFlow   = 0.138268179656 = ft3/s
H                  = 4329.08150013 = Btu/lbmol
Energy             = 1842666.71823 = Btu/hr
MolecularWeight    = 28.1807642837 = 
ZFactor            = 0.877109590849 = 
StdLiqMolarVol     = 1.16922434111 = ft3/lbmol
StdLiqVolumeFlow   = 0.138268179656 = ft3/s
METHANE            = 0.399793278617 = 
ETHANE             = 0.346000617208 = 
PROPANE            = 0.243240264947 = 
ISOBUTANE          = 0.01 = 
n-BUTANE           = 0.000965738575507 = 
ISOPENTANE         = 8.4635199924e-008 = 
n-PENTANE          = 1.14690758082e-008 = 
n-HEXANE           = 4.55428431229e-015 = 
n-HEPTANE          = 7.04856922641e-020 = 
n-OCTANE           = 8.1873944396e-025 = 

>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0441028088327 = 
T                  = 257.99172031 = F
P                  = 205.0 = psia
MoleFlow           = 574.279986426 = lbmole/h
MassFlow           = 42391.2089926 = lb/h
VolumeFlow         = 0.566397774365 = ft3/s
StdLiqVolumeFlow   = 0.299960519497 = ft3/s
H                  = 6605.38047355 = Btu/lbmol
Energy             = 3792699.91727 = Btu/hr
MolecularWeight    = 73.8162742819 = 
ZFactor            = 0.0945087149579 = 
StdLiqMolarVol     = 1.8803560237 = ft3/lbmol
StdLiqVolumeFlow   = 0.299960519497 = ft3/s
METHANE            = 7.02945864802e-013 = 
ETHANE             = 1.06663235233e-006 = 
PROPANE            = 0.0167997341594 = 
ISOBUTANE          = 0.195623738566 = 
n-BUTANE           = 0.184907829405 = 
ISOPENTANE         = 0.167688176926 = 
n-PENTANE          = 0.144354665106 = 
n-HEXANE           = 0.120846976458 = 
n-HEPTANE          = 0.0971651482185 = 
n-OCTANE           = 0.0726126645289 = 

>> 
>> 
>> /deprop.VapourDraw_0_v.VolumeFlow = 2.0
/deprop Inner Error 0.815578
/deprop Inner Error 0.796062
/deprop Inner Error 0.764682
/deprop Inner Error 0.715901
/deprop Inner Error 0.667281
/deprop Inner Error 0.423703
/deprop Inner Error 0.180618
/deprop Inner Error 0.111549
/deprop Inner Error 0.073205
/deprop Inner Error 0.054423
/deprop Inner Error 0.037370
/deprop Inner Error 0.010190
/deprop Inner Error 0.007125
/deprop Inner Error 0.001548
/deprop Inner Error 0.000489
/deprop Inner Error 0.000058
/deprop Iteration 1 Outer Error 0.000003
/deprop Inner Error 0.000033
>> cd /
/
>> 
>> #Now lets play with re-naming
>> /deprop.Stage_0.v.NewName = VapDist
Rename port /deprop.VapourDraw_0_v to VapourDraw_0_VapDist.  It is connected to /overhead
>> 
>> #will not be there
>> /deprop.Stage_0.v
None
>> 
>> #Should be there
>> /deprop.Stage_0.VapDist
VapourDraw:VapDist
>> 
>> #Should not allow for repeated names in the same stage
>> /deprop.Stage_0.VapDist.NewName = cond
>> 
>> #Now rename to a name of a stream. It should be able to handle
>> #a name equal to another unit operation
>> /deprop.Stage_0.VapDist.NewName = overhead
Rename port /deprop.VapourDraw_0_VapDist to VapourDraw_0_overhead.  It is connected to /overhead
>> 
>> /deprop
Operation: deprop = sim.unitop.Tower.Tower
Port: Feed_9_f = sim.solver.Ports.Port_Material
Port: VapourDraw_0_overhead = sim.solver.Ports.Port_Material
Port: LiquidDraw_19_l = sim.solver.Ports.Port_Material
Port: EnergyFeed_19_reb = sim.solver.Ports.Port_Energy
Port: EnergyFeed_0_cond = sim.solver.Ports.Port_Energy
Port: Estimate_0_estT = sim.solver.Ports.Port_Signal
Port: Estimate_19_estT = sim.solver.Ports.Port_Signal
Parameter: TryLastConverged = 0
Parameter: Ignored = None
Parameter: TryToSolve = 1
Parameter: MaxInnerError = 0.0001
Parameter: MinInnerStep = 0.0001
Parameter: MaxInnerLoops = 50
Parameter: FreqJacobianMsg = 10
Parameter: TriggerSolve = 0
Parameter: Efficiencies = 1.0
Parameter: MaxOuterError = 0.0001
Parameter: TryToRestart = 1
Parameter: MaxOuterLoops = 20
>> 
>> 
>> copy /deprop /bottoms /overhead
Copied /deprop /bottoms /overhead to the clipboard
>> paste /
Pasting /deprop /bottoms /overhead
Pasted /deprop /bottoms /overhead as /depropClone /bottomsClone /overheadClone
/depropClone Inner Error 0.000005
/depropClone Iteration 1 Outer Error 0.000003
/depropClone Inner Error 0.000013
>> 
>> /bottoms.In
Port: /bottoms.In + sim.solver.Ports.Port_Material
Connected to: /deprop.LiquidDraw_19_l
VapFrac            = 4.22594382858e-007 | 
T                  = 223.579815514 | F
P                  = 205.0 | psia
MoleFlow           = 656.931496952 | lbmole/h
MassFlow           = 46022.3795097 | lb/h
VolumeFlow         = 0.399745462554 | ft3/s
StdLiqVolumeFlow   = 0.332120042284 | ft3/s
H                  = 4493.89036576 | Btu/lbmol
Energy             = 2951681.68394 | Btu/hr
MolecularWeight    = 70.0565884316 | 
ZFactor            = 0.0612459984877 | 
StdLiqMolarVol     = 1.82001375295 | ft3/lbmol
StdLiqVolumeFlow   = 0.332120042284 | ft3/s
METHANE            = 1.9950149706e-009 | 
ETHANE             = 0.00246208278731 | 
PROPANE            = 0.137032345333 | 
ISOBUTANE          = 0.172269515502 | 
n-BUTANE           = 0.161392818279 | 
ISOPENTANE         = 0.146590514233 | 
n-PENTANE          = 0.126192746402 | 
n-HEXANE           = 0.105642674041 | 
n-HEPTANE          = 0.0849403632783 | 
n-OCTANE           = 0.0634769381488 | 

>> /bottomsClone.In
Port: /bottomsClone.In + sim.solver.Ports.Port_Material
Connected to: /depropClone.LiquidDraw_19_l
VapFrac            = 0.0 | 
T                  = 223.580180411 | F
P                  = 205.0 | psia
MoleFlow           = 656.930981766 | lbmole/h
MassFlow           = 46022.363681 | lb/h
VolumeFlow         = 0.399743496381 | ft3/s
StdLiqVolumeFlow   = 0.332119852459 | ft3/s
H                  = 4493.90575852 | Btu/lbmol
Energy             = 2951689.47942 | Btu/hr
MolecularWeight    = 70.0566192773 | 
ZFactor            = 0.0612457125673 | 
StdLiqMolarVol     = 1.82001414002 | ft3/lbmol
StdLiqVolumeFlow   = 0.332119852459 | ft3/s
METHANE            = 1.99421892303e-009 | 
ETHANE             = 0.00246147371224 | 
PROPANE            = 0.13703214299 | 
ISOBUTANE          = 0.172269742835 | 
n-BUTANE           = 0.161392989188 | 
ISOPENTANE         = 0.146590629203 | 
n-PENTANE          = 0.126192845368 | 
n-HEXANE           = 0.10564275689 | 
n-HEPTANE          = 0.0849404298912 | 
n-OCTANE           = 0.0634769879294 | 

>> 
>> 
>> 
>> 
>> 
>> clear
>> read deprop2.tst
Processing deprop2.tst
>> # Depeopanizer test with some changes
>> units Field
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + Methane Ethane PROPANE
Methane Ethane PROPANE 
>> thermo + ISOBUTANE n-BUTANE ISOPENTANE n-PENTANE n-Hexane
ISOBUTANE n-BUTANE ISOPENTANE n-PENTANE n-Hexane 
>> thermo + n-Heptane n-Octane
n-Heptane n-Octane 
>> 
>> deprop = Tower.Tower()
>> deprop.Stage_0 + 18  # twenty stages`
>> 
>> cd deprop.Stage_0
/deprop.Stage_0
>> 
>> v = Tower.VapourDraw()
>> v.Port.P = 200
>> v.Port.Fraction.ISOBUTANE = .01
>> 
>> cond = Tower.EnergyFeed(0)
>> estT = Tower.Estimate('T')
>> estT.Value = 25
>> 
>> cd ../Stage_9
/deprop.Stage_9
>> f = Tower.Feed()
>> f.Port.T = 50
>> f.Port.P = 480
>> f.Port.MoleFlow = 1000
>> f.Port.Fraction = .1702 .1473 .1132 .1166 .1066 .0963 .0829 .0694 .0558 .0417
>> f.Port
Port: /deprop.Feed_9_f + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0156862063356 = 
T                  = 50.0 * F
P                  = 480.0 * psia
MoleFlow           = 1000.0 * lbmole/h
MassFlow           = 54388.324404 = lb/h
VolumeFlow         = 0.452031963439 = ft3/s
StdLiqVolumeFlow   = 0.438228699383 = ft3/s
H                  = -1484.95388229 = Btu/lbmol
Energy             = -1484704.17098 = Btu/hr
MolecularWeight    = 54.388324404 = 
ZFactor            = 0.142810862978 = 
METHANE            = 0.1702 * 
ETHANE             = 0.1473 * 
PROPANE            = 0.1132 * 
ISOBUTANE          = 0.1166 * 
n-BUTANE           = 0.1066 * 
ISOPENTANE         = 0.0963 * 
n-PENTANE          = 0.0829 * 
n-HEXANE           = 0.0694 * 
n-HEPTANE          = 0.0558 * 
n-OCTANE           = 0.0417 * 

>> 
>> cd ../Stage_19
/deprop.Stage_19
>> l = Tower.LiquidDraw()
>> 
>> l.c3flow = Tower.ComponentMoleFlowSpec()
>> l.c3flow + PROPANE 
>> l.c3flow.Port = 12
>> 
>> reb = Tower.EnergyFeed(1)
>> #reb.Port.Energy = 8.42e6
>> estT = Tower.Estimate('T')
>> estT.Value = 250
>> 
>> cd ..
/deprop
>> 
>> /overhead = Stream.Stream_Material()
>> /overhead.In -> Stage_0.v.Port
>> 
>> /bottoms = Stream.Stream_Material()
>> /bottoms.In -> Stage_19.l.Port
>> 
>> 
>> 
>> TryToSolve = 1  # start calculation
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 3.648752
/deprop Inner Error 2.354443
/deprop Inner Error 1.631800
/deprop Inner Error 0.288586
/deprop Inner Error 0.228035
/deprop Inner Error 0.226819
/deprop Inner Error 0.055485
/deprop Inner Error 0.050823
/deprop Inner Error 0.032408
/deprop Inner Error 0.005372
/deprop Inner Error 0.000643
/deprop Inner Error 0.000426
/deprop Inner Error 0.000077
/deprop Iteration 1 Outer Error 0.098492
/deprop Inner Error 3.765973
/deprop Inner Error 3.081533
/deprop Inner Error 0.335246
/deprop Inner Error 0.177847
/deprop Inner Error 0.035545
/deprop Inner Error 0.010798
/deprop Inner Error 0.003008
/deprop Inner Error 0.001296
/deprop Inner Error 0.000374
/deprop Inner Error 0.000100
/deprop Inner Error 0.000029
/deprop Iteration 2 Outer Error 0.016738
/deprop Inner Error 0.372833
/deprop Inner Error 0.038525
/deprop Inner Error 0.009538
/deprop Inner Error 0.006115
/deprop Inner Error 0.001319
/deprop Inner Error 0.000150
/deprop Inner Error 0.000066
/deprop Iteration 3 Outer Error 0.001573
/deprop Inner Error 0.025379
/deprop Inner Error 0.019439
/deprop Inner Error 0.000640
/deprop Inner Error 0.000207
/deprop Inner Error 0.000046
/deprop Iteration 4 Outer Error 0.000142
/deprop Inner Error 0.004867
/deprop Inner Error 0.000890
/deprop Inner Error 0.000048
/deprop Iteration 5 Outer Error 0.000022
/deprop Inner Error 0.000359
/deprop Inner Error 0.000049
>> 
>> /overhead.Out
Port: /overhead.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.999999569916 = 
T                  = 25.0002128764 = F
P                  = 200.0 = psia
MoleFlow           = 423.560687337 = lbmole/h
MassFlow           = 11904.6963657 = lb/h
VolumeFlow         = 2.63868439333 = ft3/s
StdLiqVolumeFlow   = 0.137442625529 = ft3/s
H                  = 4080.8964396 = Btu/lbmol
Energy             = 1728216.63342 = Btu/hr
MolecularWeight    = 28.1062353556 = 
ZFactor            = 0.862373503127 = 
METHANE            = 0.401831437768 = 
ETHANE             = 0.34775686162 = 
PROPANE            = 0.23892695861 = 
ISOBUTANE          = 0.01 = 
n-BUTANE           = 0.00148419729059 = 
ISOPENTANE         = 3.89605566429e-007 = 
n-PENTANE          = 8.97033860726e-008 = 
n-HEXANE           = 1.99493110496e-013 = 
n-HEPTANE          = 1.11604691877e-017 = 
n-OCTANE           = 4.65096570533e-022 = 

>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 252.011370287 = F
P                  = 200.0 = psia
MoleFlow           = 576.439312663 = lbmole/h
MassFlow           = 42483.6272068 = lb/h
VolumeFlow         = 0.377385441662 = ft3/s
StdLiqVolumeFlow   = 0.300786070564 = ft3/s
H                  = 5997.97006932 = Btu/lbmol
Energy             = 3456884.33329 = Btu/hr
MolecularWeight    = 73.7000865027 = 
ZFactor            = 0.0617185723184 = 
METHANE            = 4.42552758858e-011 = 
ETHANE             = 6.70437636966e-006 = 
PROPANE            = 0.0208173400465 = 
ISOBUTANE          = 0.194928352311 = 
n-BUTANE           = 0.183837830015 = 
ISOPENTANE         = 0.167059797732 = 
n-PENTANE          = 0.143813858951 = 
n-HEXANE           = 0.120394286919 = 
n-HEPTANE          = 0.0968011701739 = 
n-OCTANE           = 0.072340659431 = 

>> 
>> cd Stage_19
/deprop.Stage_19
>> delete l.c3flow
>> 
>> c = Tower.InternalLiquidClone()
>> c.Port.T = 255
/deprop Inner Error 0.003334
/deprop Inner Error 0.003333
/deprop Iteration 1 Outer Error 0.000004
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 0.003271
/deprop Inner Error 0.003174
/deprop Inner Error 0.003100
/deprop Inner Error 0.003029
/deprop Inner Error 0.002955
/deprop Inner Error 0.002876
/deprop Inner Error 0.002795
/deprop Inner Error 0.002713
/deprop Inner Error 0.002638
/deprop Inner Error 0.002561
/deprop Inner Error 0.002484
/deprop Inner Error 0.002406
/deprop Inner Error 0.002327
/deprop Inner Error 0.002248
/deprop Inner Error 0.002169
/deprop Inner Error 0.002090
/deprop Inner Error 0.002088
/deprop Inner Error 0.002058
/deprop Inner Error 0.001868
/deprop Inner Error 0.001779
/deprop Inner Error 0.001579
/deprop Inner Error 0.001446
/deprop Inner Error 0.000125
/deprop Inner Error 0.000015
>> 
>> /overhead.Out
Port: /overhead.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 27.1750146789 = F
P                  = 200.0 = psia
MoleFlow           = 429.952101126 = lbmole/h
MassFlow           = 12186.4798989 = lb/h
VolumeFlow         = 2.68898577589 = ft3/s
StdLiqVolumeFlow   = 0.139927387107 = ft3/s
H                  = 4118.99030368 = Btu/lbmol
Energy             = 1770670.72777 = Btu/hr
MolecularWeight    = 28.343808222 = 
ZFactor            = 0.861881644207 = 
METHANE            = 0.395858049175 = 
ETHANE             = 0.342592807076 = 
PROPANE            = 0.250237860797 = 
ISOBUTANE          = 0.01 = 
n-BUTANE           = 0.00131086788872 = 
ISOPENTANE         = 3.07830602713e-007 = 
n-PENTANE          = 7.05126469215e-008 = 
n-HEXANE           = 1.53641211611e-013 = 
n-HEPTANE          = 8.56000496745e-018 = 
n-OCTANE           = 3.56132881532e-022 = 

>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 254.999933211 = F
P                  = 200.0 = psia
MoleFlow           = 570.047898874 = lbmole/h
MassFlow           = 42201.8440349 = lb/h
VolumeFlow         = 0.376028652137 = ft3/s
StdLiqVolumeFlow   = 0.298301310415 = ft3/s
H                  = 6164.38326007 = Btu/lbmol
Energy             = 3513402.80862 = Btu/hr
MolecularWeight    = 74.0321017203 = 
ZFactor            = 0.0619261378646 = 
METHANE            = 1.71454902498e-011 = 
ETHANE             = 2.6362122424e-006 = 
PROPANE            = 0.0098407624697 = 
ISOBUTANE          = 0.197001801817 = 
n-BUTANE           = 0.186013122417 = 
ISOPENTANE         = 0.168932940263 = 
n-PENTANE          = 0.145426322677 = 
n-HEXANE           = 0.121744155425 = 
n-HEPTANE          = 0.0978865111339 = 
n-OCTANE           = 0.0731517475678 = 

>> 
>> c.Port.T = None
>> c.c3spec = Tower.MassFractionSpec()
>> c.c3spec + PROPANE
>> c.c3spec.Port = .02
/deprop Iteration 1 Outer Error 0.011471
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 0.191561
/deprop Inner Error 0.185780
/deprop Inner Error 0.178670
/deprop Inner Error 0.161317
/deprop Inner Error 0.112729
/deprop Inner Error 0.039799
/deprop Inner Error 0.009277
/deprop Inner Error 0.003054
/deprop Inner Error 0.000377
/deprop Inner Error 0.000070
/deprop Iteration 2 Outer Error 0.022219
/deprop Inner Error 0.052603
/deprop Inner Error 0.010309
/deprop Inner Error 0.001580
/deprop Inner Error 0.000196
/deprop Inner Error 0.000049
/deprop Iteration 3 Outer Error 0.003447
/deprop Inner Error 0.021223
/deprop Inner Error 0.004406
/deprop Inner Error 0.000341
/deprop Inner Error 0.000054
/deprop Iteration 4 Outer Error 0.000377
/deprop Inner Error 0.001403
/deprop Inner Error 0.000232
/deprop Inner Error 0.000034
/deprop Iteration 5 Outer Error 0.000075
/deprop Inner Error 0.000147
/deprop Inner Error 0.000016
>> 
>> /overhead.Out
Port: /overhead.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.999987007928 = 
T                  = 22.7988456274 = F
P                  = 200.0 = psia
MoleFlow           = 416.085754717 = lbmole/h
MassFlow           = 11574.3692392 = lb/h
VolumeFlow         = 2.58333429606 = ft3/s
StdLiqVolumeFlow   = 0.134532726316 = ft3/s
H                  = 4040.79064699 = Btu/lbmol
Energy             = 1681032.69435 = Btu/hr
MolecularWeight    = 27.8172686952 = 
ZFactor            = 0.863372908621 = 
METHANE            = 0.409050293206 = 
ETHANE             = 0.35399788299 = 
PROPANE            = 0.225389007672 = 
ISOBUTANE          = 0.01 = 
n-BUTANE           = 0.00156193343159 = 
ISOPENTANE         = 3.98123463537e-007 = 
n-PENTANE          = 8.97641627443e-008 = 
n-HEXANE           = 1.69748291412e-013 = 
n-HEPTANE          = 8.53573351385e-018 = 
n-OCTANE           = 3.17823053867e-022 = 

>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 7.73487622582e-008 = 
T                  = 248.632706092 = F
P                  = 200.0 = psia
MoleFlow           = 583.914245283 = lbmole/h
MassFlow           = 42813.9501864 = lb/h
VolumeFlow         = 0.379035719269 = ft3/s
StdLiqVolumeFlow   = 0.303695953365 = ft3/s
H                  = 5811.82378578 = Btu/lbmol
Energy             = 3393036.02735 = Btu/hr
MolecularWeight    = 73.3223252083 = 
ZFactor            = 0.0614868274413 = 
METHANE            = 5.87866125756e-011 = 
ETHANE             = 1.11723385786e-005 = 
PROPANE            = 0.0332563296663 = 
ISOBUTANE          = 0.192560772554 = 
n-BUTANE           = 0.181448050986 = 
ISOPENTANE         = 0.164921193693 = 
n-PENTANE          = 0.141972838169 = 
n-HEXANE           = 0.118853068855 = 
n-HEPTANE          = 0.095561977552 = 
n-OCTANE           = 0.0714145961275 = 

>> 
>> #Now test TriggerSolve
>> cd /
/
>> deprop.TriggerSolve = 1
/deprop Inner Error 0.000003
/deprop Iteration 1 Outer Error 0.000016
/deprop Inner Error 0.000024
>> deprop.TryToSolve = 0
>> 
>> 
>> #Lets trigger a solve
>> deprop.TriggerSolve = 1
/deprop Inner Error 0.000005
/deprop Iteration 1 Outer Error 0.000003
/deprop Inner Error 0.000005
>> deprop.TriggerSolve
/deprop.TriggerSolve = 0 
>> deprop.TryToSolve
/deprop.TryToSolve = 0 
>> 
>> 
>> #Lets change a spec
>> deprop.Stage_19.c.c3spec.Port = 0.01
>> 
>> #Everything is forgotten. trigger a solve
>> deprop.TriggerSolve = 1
/deprop Iteration 1 Outer Error 0.000000
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 0.009442
/deprop Inner Error 0.009303
/deprop Inner Error 0.008372
/deprop Inner Error 0.007787
/deprop Inner Error 0.006810
/deprop Inner Error 0.005864
/deprop Inner Error 0.000817
/deprop Inner Error 0.000054
>> deprop.Stage_19.c.c3spec.Port = None
>> deprop.TriggerSolve = 1
>> deprop.Stage_19.c.c3spec.Port = 0.02
>> deprop.TryToSolve = 1
/deprop Inner Error 0.009790
/deprop Inner Error 0.009478
/deprop Inner Error 0.009215
/deprop Inner Error 0.008898
/deprop Inner Error 0.008818
/deprop Inner Error 0.008671
/deprop Inner Error 0.007431
/deprop Inner Error 0.004676
/deprop Inner Error 0.000270
/deprop Inner Error 0.000001
/deprop Iteration 1 Outer Error 0.000001
/deprop Inner Error 0.000000
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> clear
>> read column.tst
Processing column.tst
>> # Simple distilation column test
>> units SI
>> $thermo = VirtualMaterials.Advanced_Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + PROPANE n-BUTANE ISOBUTANE n-PENTANE
PROPANE n-BUTANE ISOBUTANE n-PENTANE 
>> 
>> col = Tower.Tower()
>> col.Stage_0 + 20  # twenty two stages`
>> 
>> cd col.Stage_10
/col.Stage_10
>> f = Tower.Feed()
>> f.Port.T = 30
>> f.Port.P = 720
>> f.Port.MoleFlow = 10
>> f.Port.Fraction = .4 .05 .4 .15
>> f.Port
Port: /col.Feed_10_f + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 30.0 * C
P                  = 720.0 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 546.15555 = kg/h
VolumeFlow         = 1.00408235571 = m3/hr
StdLiqVolumeFlow   = 0.97123450098 = m3/hr
H                  = -2007.05063418 = kJ/kmol
Energy             = -5575.14065049 = W
MolecularWeight    = 54.615555 = 
ZFactor            = 0.0276175353897 = 
PROPANE            = 0.4 * 
n-BUTANE           = 0.05 * 
ISOBUTANE          = 0.4 * 
n-PENTANE          = 0.15 * 

>> 
>> cd ../Stage_0
/col.Stage_0
>> l = Tower.LiquidDraw()
>> l.Port.P = 700
>> 
>> l.Port.MoleFlow = 5
>> 
>> cond = Tower.EnergyFeed(0)
>> 
>> reflux = Tower.StageSpecification('Reflux')
>> reflux.Value = 1
>> 
>> cd ../Stage_21
/col.Stage_21
>> l = Tower.LiquidDraw()
>> l.Port.P = 730
>> reb = Tower.EnergyFeed(1)
>> 
>> cd ..
/col
>> TryToSolve = 1  # start calculation
Calculating Jacobian for /col
Calculating disturbance 10 of 22 in jacobian of /col
Calculating disturbance 20 of 22 in jacobian of /col
/col Inner Error 0.145096
/col Inner Error 0.036616
/col Inner Error 0.001649
/col Inner Error 0.000096
/col Iteration 1 Outer Error 0.025857
/col Inner Error 0.062522
/col Inner Error 0.006727
/col Inner Error 0.000786
/col Inner Error 0.000033
/col Iteration 2 Outer Error 0.000346
/col Inner Error 0.006987
/col Inner Error 0.000381
/col Inner Error 0.000020
/col Iteration 3 Outer Error 0.000043
/col Inner Error 0.000539
/col Inner Error 0.000046
>> 
>> # since there was little output here, I will put some profile stuff here
>> L_MassFraction.PROPANE
[ 0.74479633  0.55367009  0.44586851  0.3914691   0.36509135  0.35214338
       0.3450433   0.33954298  0.33226776  0.31901631  0.29443705  0.25298431
       0.20753236  0.16234614  0.1214276   0.08727963  0.06061035  0.04080245
       0.02659081  0.0165741   0.00949733  0.00447942]
>> V_MoleFraction.ISOBUTANE
[ 0.09196678  0.19737178  0.2770967   0.32350991  0.34648284  0.35648106
       0.35994187  0.35997883  0.3575412   0.35187897  0.34041295  0.39258384
       0.45726057  0.53040689  0.60524854  0.67451944  0.73284235  0.77762833
       0.80818778  0.8233881   0.816837    0.76481495]
>> L_MassFlow
[ 234.94805768  239.22676655  242.93752536  245.16861038  246.24298933
       246.58974479  246.39312473  245.52277897  243.44643144  239.18090092
       820.44564446  830.34094275  842.66367108  856.65234693  871.02396308
       884.41971553  895.82798481  904.68746414  910.51545218  911.9072968 
       905.21024111  311.20749232]
>> L_Viscosity
[ 0.00011846  0.0001226   0.000125    0.00012617  0.00012667  0.00012686
       0.00012693  0.00012704  0.00012735  0.00012814  0.00012985  0.00013068
       0.00013155  0.00013238  0.00013305  0.00013353  0.00013382  0.00013396
       0.00013397  0.00013391  0.00013388  0.00013397]
>> L_StdVolFraction.PROPANE
[ 0.77116612  0.58880419  0.48146985  0.42600227  0.398773    0.38533531
       0.37799904  0.37245255  0.36534009  0.35252894  0.32858657  0.28408583
       0.23464647  0.18481523  0.13909437  0.10049839  0.07007355  0.04731643
       0.0309083   0.01931135  0.01111466  0.00529986]
>> V_StdVolFraction.PROPANE
[ 0.89250315  0.77116612  0.68038107  0.62693986  0.59920233  0.58557445
       0.57891829  0.57545391  0.573174    0.57074496  0.56679091  0.50868816
       0.43800817  0.35973506  0.28128244  0.20985192  0.15007706  0.10336169
       0.06868843  0.04385439  0.02640396  0.01411093]
>> L_VolumeFlow
[ 0.45145359  0.4573098   0.46361195  0.46765486  0.46964418  0.47025604
       0.46975722  0.46776984  0.46301879  0.45316026  1.54276632  1.5624939 
       1.58749106  1.61636299  1.64649241  1.6749488   1.69943983  1.71859314
       1.73114777  1.73360529  1.71669167  0.58597319]
>> L_StdLiqVolumeFlow
[ 0.44981938  0.44592996  0.44597347  0.44660868  0.44690621  0.44671696
       0.44584942  0.44370294  0.43890549  0.42906325  1.45736785  1.46580837
       1.47741594  1.49171394  1.50735197  1.52261087  1.5360099   1.54649848
       1.55281773  1.55147413  1.53331533  0.52141512]
>> V_StdLiqVolumeFlow
[ 8.61280360e-042  8.99638760e-001  8.95749345e-001  8.95792854e-001
       8.96428057e-001  8.96725591e-001  8.96536342e-001  8.95668804e-001
       8.93522323e-001  8.88724866e-001  8.78882632e-001  9.35952730e-001
       9.44393246e-001  9.56000822e-001  9.70298824e-001  9.85936849e-001
       1.00119575e+000  1.01459478e+000  1.02508336e+000  1.03140261e+000
       1.03005901e+000  1.01190021e+000]
>> 
>> 
>> #Now lets test efficiencies
>> Efficiencies
/col.Efficiencies = 1.0 
>> 
>> #Make sure it works for zero flow in vap
>> /col.Stage_0.v = Tower.VapourDraw()
>> /col.Stage_0.v.Port.MoleFlow = 0.0
/col Inner Error 0.000003
/col Iteration 1 Outer Error 0.000004
/col Inner Error 0.000015
>> 
>> Efficiencies = 0.9
/col Inner Error 0.025366
/col Inner Error 0.002536
/col Inner Error 0.000252
/col Inner Error 0.000036
/col Iteration 1 Outer Error 0.000236
/col Inner Error 0.006465
/col Inner Error 0.000768
/col Inner Error 0.000058
/col Iteration 2 Outer Error 0.000018
/col Inner Error 0.000235
/col Inner Error 0.000034
>> V_MoleFraction.PROPANE
[ 0.90295724  0.79076576  0.71087867  0.66044356  0.63245034  0.61786714
       0.61040057  0.60643347  0.60398196  0.60185512  0.59927453  0.54774209
       0.4844101   0.41244984  0.33693515  0.26386878  0.19838006  0.14348234
       0.09990161  0.06668668  0.0420207   0.02388424]
>> 
>> 
>> 
>> Efficiencies = 0.5
/col Inner Error 0.155585
/col Inner Error 0.112707
/col Inner Error 0.038274
/col Inner Error 0.008110
/col Inner Error 0.002383
/col Inner Error 0.000837
/col Inner Error 0.000255
/col Inner Error 0.000072
/col Iteration 1 Outer Error 0.002862
/col Inner Error 0.056405
/col Inner Error 0.023209
/col Inner Error 0.008042
/col Inner Error 0.003131
/col Inner Error 0.001377
/col Inner Error 0.000304
/col Inner Error 0.000144
/col Inner Error 0.000027
/col Iteration 2 Outer Error 0.000083
/col Inner Error 0.003211
/col Inner Error 0.000607
/col Inner Error 0.000206
/col Inner Error 0.000092
>> V_MoleFraction.PROPANE
[ 0.8869468   0.76170961  0.70641336  0.66343679  0.63272305  0.61197313
       0.59837598  0.58950681  0.58356398  0.57930227  0.57591422  0.54307029
       0.50374481  0.46038993  0.41374653  0.3648788   0.31509197  0.26579486
       0.21833677  0.17385881  0.13318464  0.09621507]
>> 
>> Efficiencies = :0 .3 1 .5 2 .7 3-19 .5 20-21 .8
/col Inner Error 0.060598
/col Inner Error 0.016315
/col Inner Error 0.006267
/col Inner Error 0.001748
/col Inner Error 0.000682
/col Inner Error 0.000292
/col Inner Error 0.000055
/col Iteration 1 Outer Error 0.000489
/col Inner Error 0.015195
/col Inner Error 0.006889
/col Inner Error 0.002489
/col Inner Error 0.000823
/col Inner Error 0.000134
/col Inner Error 0.000062
/col Iteration 2 Outer Error 0.000029
/col Inner Error 0.000382
/col Inner Error 0.000110
/col Inner Error 0.000036
>> V_MoleFraction.PROPANE
[ 0.88849578  0.76450069  0.70957436  0.65554118  0.62832366  0.61012101
       0.59823399  0.59045614  0.58518785  0.58133513  0.57821663  0.54627257
       0.50799348  0.4657389   0.4202002   0.37238569  0.32354861  0.27505996
       0.22825307  0.18427219  0.14381523  0.08945651]
>> 
>> #Per compound
>> Efficiencies = :-2 .32 4 .18 8 .91 @PROPANE 0 .2 1 .4 2 .6 3-7 .7 @n-BUTANE 1 .3 4-5 .8 6- .4 @CARBON_DIOXIDE -3 .2 4 .6
/col Inner Error 0.270167
/col Inner Error 0.132537
/col Inner Error 0.045555
/col Inner Error 0.017207
/col Inner Error 0.008867
/col Inner Error 0.001720
/col Inner Error 0.000732
/col Inner Error 0.000574
/col Inner Error 0.000299
/col Inner Error 0.000049
/col Iteration 1 Outer Error 0.004066
/col Inner Error 0.181217
/col Inner Error 0.039124
/col Inner Error 0.011913
/col Inner Error 0.002731
/col Inner Error 0.000502
/col Inner Error 0.000159
/col Inner Error 0.000038
/col Iteration 2 Outer Error 0.000203
/col Inner Error 0.006778
/col Inner Error 0.000858
/col Inner Error 0.000073
/col Iteration 3 Outer Error 0.000013
/col Inner Error 0.000881
/col Inner Error 0.000257
/col Inner Error 0.000031
>> V_MoleFraction.PROPANE
[ 0.90426778  0.79271376  0.75714575  0.71843844  0.6664821   0.65112925
       0.63057037  0.62026055  0.61461376  0.61067517  0.60655338  0.55665487
       0.49234006  0.41720557  0.33715788  0.25963219  0.19099172  0.13474095
       0.09139422  0.05944647  0.03648948  0.01996365]
>> 
>> #Switching compounds should not affect
>> $thermo.PROPANE >> n-PENTANE
/col Inner Error 1.002670
/col Inner Error 0.206638
/col Inner Error 0.159116
/col Inner Error 0.106300
/col Inner Error 0.021925
/col Inner Error 0.005911
/col Inner Error 0.001290
/col Inner Error 0.000304
/col Inner Error 0.000051
/col Iteration 1 Outer Error 0.749224
/col Inner Error 0.519682
/col Inner Error 0.244676
/col Inner Error 0.162000
/col Inner Error 0.097357
/col Inner Error 0.036745
/col Inner Error 0.006265
/col Inner Error 0.001444
/col Inner Error 0.000249
/col Inner Error 0.000025
/col Iteration 2 Outer Error 0.044274
/col Inner Error 0.164960
/col Inner Error 0.062993
/col Inner Error 0.014962
/col Inner Error 0.003158
/col Inner Error 0.000129
/col Inner Error 0.000028
/col Iteration 3 Outer Error 0.004543
/col Inner Error 0.110461
/col Inner Error 0.010684
/col Inner Error 0.001987
/col Inner Error 0.000136
/col Inner Error 0.000016
/col Iteration 4 Outer Error 0.000099
/col Inner Error 0.003603
/col Inner Error 0.000484
/col Inner Error 0.000066
>> Efficiencies = :-2 .32 4 .18 8 .91 @PROPANE 0 .2 1 .4 2 .6 3-7 .7 @n-BUTANE 1 .3 4-5 .8 6- .4 @CARBON_DIOXIDE -3 .2 4 .6
/col Inner Error 0.000009
/col Iteration 1 Outer Error 0.000014
/col Inner Error 0.000230
/col Inner Error 0.000038
>> V_MoleFraction.PROPANE
[ 0.90426777  0.79271295  0.75714436  0.71843629  0.66647882  0.65112628
       0.63056695  0.62025728  0.61461095  0.61067296  0.60655179  0.55665152
       0.49233593  0.41720288  0.33715945  0.25963945  0.19100351  0.1347545 
       0.09140685  0.05945662  0.03649655  0.01996784]
>> 
>> #Get rid of the generic efficiencies
>> Efficiencies = :@PROPANE 0 .2 1 .4 2 .6 3-7 .7 17 .9 18 .9 @n-BUTANE 1 .3 4-5 .8 6- .4 @CARBON_DIOXIDE -3 .2 4 .6
/col Inner Error 0.180807
/col Inner Error 0.029099
/col Inner Error 0.006044
/col Inner Error 0.001329
/col Inner Error 0.000204
/col Inner Error 0.000090
/col Iteration 1 Outer Error 0.001887
/col Inner Error 0.020127
/col Inner Error 0.003716
/col Inner Error 0.001125
/col Inner Error 0.000195
/col Inner Error 0.000019
/col Iteration 2 Outer Error 0.000166
/col Inner Error 0.001797
/col Inner Error 0.000191
/col Inner Error 0.000019
/col Iteration 3 Outer Error 0.000012
/col Inner Error 0.000074
>> V_MoleFraction.PROPANE
[ 0.9043817   0.79279851  0.72508686  0.67261421  0.6408815   0.6242356 
       0.61541718  0.61117855  0.60868303  0.60617103  0.60269913  0.55015178
       0.48319497  0.40602651  0.32510083  0.24800629  0.1808059   0.12646323
       0.08780677  0.05888735  0.03608439  0.01971561]
>> 
>> #Delete a compound
>> $thermo - ISOBUTANE
Calculating Jacobian for /col
Calculating disturbance 10 of 22 in jacobian of /col
Calculating disturbance 20 of 22 in jacobian of /col
/col Inner Error 1.153557
/col Inner Error 0.728638
/col Inner Error 0.447041
/col Inner Error 0.361256
/col Inner Error 0.026530
/col Inner Error 0.006151
/col Inner Error 0.000802
/col Inner Error 0.000280
/col Inner Error 0.000029
/col Iteration 1 Outer Error 0.114635
/col Inner Error 1.103444
/col Inner Error 0.492820
/col Inner Error 0.043017
/col Inner Error 0.015970
/col Inner Error 0.004081
/col Inner Error 0.000528
/col Inner Error 0.000065
/col Iteration 2 Outer Error 0.001801
/col Inner Error 0.021321
/col Inner Error 0.004578
/col Inner Error 0.001132
/col Inner Error 0.000121
/col Inner Error 0.000033
/col Iteration 3 Outer Error 0.000909
/col Inner Error 0.012434
/col Inner Error 0.002088
/col Inner Error 0.000247
/col Inner Error 0.000053
/col Iteration 4 Outer Error 0.000047
/col Inner Error 0.000282
/col Inner Error 0.000014
>> V_MoleFraction.PROPANE
[ 0.99909594  0.99732857  0.99673981  0.99388788  0.98975652  0.98537232
       0.97957155  0.97581796  0.97024405  0.95903961  0.93129986  0.92752577
       0.92727693  0.9269431   0.92648953  0.92586652  0.92499857  0.92374261
       0.92170735  0.91703199  0.89792063  0.79328172]
>> 
>> #Now play with removing and adding stages
>> Efficiencies = 1.0
/col Inner Error 0.053920
/col Inner Error 0.007142
/col Inner Error 0.001853
/col Inner Error 0.000463
/col Inner Error 0.000056
/col Iteration 1 Outer Error 0.001503
/col Inner Error 0.012022
/col Inner Error 0.003391
/col Inner Error 0.001434
/col Inner Error 0.000147
/col Inner Error 0.000037
/col Iteration 2 Outer Error 0.000096
/col Inner Error 0.000718
/col Inner Error 0.000112
/col Inner Error 0.000023
>> /col.Stage_10 - 2
Rename port /col.LiquidDraw_21_l to LiquidDraw_19_l.  It is connected to 
Rename port /col.EnergyFeed_21_reb to EnergyFeed_19_reb.  It is connected to 
Calculating disturbance 10 of 20 in jacobian of /col
Calculating disturbance 20 of 20 in jacobian of /col
/col Inner Error 0.000002
/col Iteration 1 Outer Error 0.001749
/col Inner Error 0.000002
/col Iteration 2 Outer Error 0.000041
/col Inner Error 0.000000
>> Efficiencies
/col.Efficiencies = 1.0 
>> 
>> Efficiencies = :0 .9 1 .8 2 .9 3 .87 4 .98 5 .76 6 .9 7-14 .93 15- 1.0
/col Inner Error 0.004072
/col Inner Error 0.000109
/col Inner Error 0.000015
/col Iteration 1 Outer Error 0.000113
/col Inner Error 0.001342
/col Inner Error 0.000031
/col Iteration 2 Outer Error 0.000004
/col Inner Error 0.000010
>> /col.Stage_13 - 2
The efficiencies matrix changed as a result of a change in configuration in /col
Rename port /col.LiquidDraw_19_l to LiquidDraw_17_l.  It is connected to 
Rename port /col.EnergyFeed_19_reb to EnergyFeed_17_reb.  It is connected to 
Calculating disturbance 10 of 18 in jacobian of /col
/col Inner Error 0.000005
/col Iteration 1 Outer Error 0.002571
/col Inner Error 0.000009
/col Iteration 2 Outer Error 0.000053
/col Inner Error 0.000001
>> Efficiencies
/col.Efficiencies = :0 .9 1 .8 2 .9 3 .87 4 .98 5 .76 6 .9 7-13 .93 14- 1.0 
>> 
>> /col.Stage_3 - 2
The efficiencies matrix changed as a result of a change in configuration in /col
Rename port /col.Feed_10_f to Feed_8_f.  It is connected to 
Rename port /col.LiquidDraw_17_l to LiquidDraw_15_l.  It is connected to 
Rename port /col.EnergyFeed_17_reb to EnergyFeed_15_reb.  It is connected to 
Calculating disturbance 10 of 16 in jacobian of /col
/col Inner Error 0.000031
/col Iteration 1 Outer Error 0.003010
/col Inner Error 0.000044
/col Iteration 2 Outer Error 0.000039
/col Inner Error 0.000002
>> Efficiencies
/col.Efficiencies = :0 .9 1 .8 2 .9 3 .87 4 .9 5-11 .93 12- 1.0 
>> 
>> #/col.Stage_3 + 2
>> #Efficiencies 
>> 
>> 
>> Efficiencies = :-2 .32 4 .18 8 .91 @PROPANE 0 .2 1 .4 2 .6 3-7 .7 @n-BUTANE 1 .3 4-5 .8 6- .4 @CARBON_DIOXIDE -3 .2 4 .6
/col Inner Error 0.020758
/col Inner Error 0.004180
/col Inner Error 0.000298
/col Inner Error 0.000058
/col Iteration 1 Outer Error 0.001252
/col Inner Error 0.006858
/col Inner Error 0.000629
/col Inner Error 0.000050
/col Iteration 2 Outer Error 0.000092
/col Inner Error 0.000320
/col Inner Error 0.000025
>> /col.Stage_4 - 2
The efficiencies matrix changed as a result of a change in configuration in /col
Rename port /col.Feed_8_f to Feed_6_f.  It is connected to 
Rename port /col.LiquidDraw_15_l to LiquidDraw_13_l.  It is connected to 
Rename port /col.EnergyFeed_15_reb to EnergyFeed_13_reb.  It is connected to 
Calculating disturbance 10 of 14 in jacobian of /col
/col Inner Error 0.000778
/col Inner Error 0.000017
/col Iteration 1 Outer Error 0.002627
/col Inner Error 0.000630
/col Inner Error 0.000007
/col Iteration 2 Outer Error 0.000050
/col Inner Error 0.000006
>> Efficiencies
/col.Efficiencies = :-2 .32 4 .18 6 .91 @PROPANE 0 .2 1 .4 2 .6 3-5 .7 @n-BUTANE 1 .3 4-4 .8 5- .4 @CARBON_DIOXIDE -3 .2 4 .6 
>> 
>> /col.Stage_0 - 2
The efficiencies matrix changed as a result of a change in configuration in /col
Rename port /col.Feed_6_f to Feed_4_f.  It is connected to 
Rename port /col.LiquidDraw_13_l to LiquidDraw_11_l.  It is connected to 
Rename port /col.EnergyFeed_13_reb to EnergyFeed_11_reb.  It is connected to 
Calculating disturbance 10 of 12 in jacobian of /col
/col Inner Error 0.000128
/col Inner Error 0.000001
/col Iteration 1 Outer Error 0.004803
/col Inner Error 0.000127
/col Inner Error 0.000001
/col Iteration 2 Outer Error 0.000052
/col Inner Error 0.000006
>> Efficiencies
/col.Efficiencies = :-0 .32 2 .18 4 .91 @PROPANE 0 .2 1-3 .7 @n-BUTANE 2-2 .8 3- .4 @CARBON_DIOXIDE -1 .2 2 .6 
>> 
>> 
>> #Now lets play with the P_Profile object
>> Efficiencies = 1.0
/col Inner Error 0.037024
/col Inner Error 0.004152
/col Inner Error 0.000675
/col Inner Error 0.000087
/col Iteration 1 Outer Error 0.001691
/col Inner Error 0.012869
/col Inner Error 0.001207
/col Inner Error 0.000066
/col Iteration 2 Outer Error 0.000094
/col Inner Error 0.000422
/col Inner Error 0.000031
>> TryToSolve = 0
>> 
>> /col.P_Profile.Values
[ ...
700.0
None
None
None
None
None
None
None
None
None
None
730.0
 ... ]

>> 
>> /col.LiquidDraw_0_l.P = 
>> /col.P_Profile.Values
[ ...
None
None
None
None
None
None
None
None
None
None
None
730.0
 ... ]

>> 
>> /col.P_Profile.Item0 = 700
>> /col.LiquidDraw_0_l.P
/col.LiquidDraw_0_l.P= 700.0 = kPa
>> /col.P_Profile.Values
[ ...
700.0
None
None
None
None
None
None
None
None
None
None
730.0
 ... ]

>> 
>> TryToSolve = 1
/col Inner Error 0.000005
/col Iteration 1 Outer Error 0.000003
/col Inner Error 0.000010
>> /col.LiquidDraw_0_l.P
/col.LiquidDraw_0_l.P= 700.0 = kPa
>> /col.P_Profile.Values
[ ...
700.0
702.727272727
705.454545455
708.181818182
710.909090909
713.636363636
716.363636364
719.090909091
721.818181818
724.545454545
727.272727273
730.0
 ... ]

>> 
>> TryToSolve = 0
>> /col.P_Profile.Item4 = 701
>> TryToSolve = 1
/col Inner Error 0.000001
/col Iteration 1 Outer Error 0.011878
/col Inner Error 0.000418
/col Inner Error 0.000025
/col Iteration 2 Outer Error 0.000242
/col Inner Error 0.000168
/col Inner Error 0.000023
/col Iteration 3 Outer Error 0.000041
/col Inner Error 0.000091
>> /col.LiquidDraw_0_l.P
/col.LiquidDraw_0_l.P= 700.0 = kPa
>> /col.P_Profile.Values
[ ...
700.0
700.25
700.5
700.75
701.0
705.142857143
709.285714286
713.428571429
717.571428571
721.714285714
725.857142857
730.0
 ... ]

>> 
>> /col.P_Profile.Item0 = 
/col Inner Error 0.000007
/col Iteration 1 Outer Error 0.001189
/col Inner Error 0.000007
/col Iteration 2 Outer Error 0.000002
/col Inner Error 0.000002
>> cd /col.Stage_2
/col.Stage_2
>> . + 2
Rename port /col.LiquidDraw_11_l to LiquidDraw_12_l.  It is connected to 
Rename port /col.EnergyFeed_11_reb to EnergyFeed_12_reb.  It is connected to 
Rename port /col.Feed_4_f to Feed_5_f.  It is connected to 
Rename port /col.LiquidDraw_12_l to LiquidDraw_13_l.  It is connected to 
Rename port /col.EnergyFeed_12_reb to EnergyFeed_13_reb.  It is connected to 
Rename port /col.Feed_5_f to Feed_6_f.  It is connected to 
Calculating disturbance 10 of 14 in jacobian of /col
/col Inner Error 0.001895
/col Inner Error 0.000075
/col Iteration 1 Outer Error 0.000608
/col Inner Error 0.000625
/col Inner Error 0.000015
/col Iteration 2 Outer Error 0.000044
/col Inner Error 0.000015
>> cd /col
/col
>> /col.LiquidDraw_0_l.P
/col.LiquidDraw_0_l.P= 701.0 = kPa
>> /col.P_Profile.Values
[ ...
701.0
701.0
701.0
701.0
701.0
701.0
701.0
705.142857143
709.285714286
713.428571429
717.571428571
721.714285714
725.857142857
730.0
 ... ]

>> 
>> /col.LiquidDraw_13_l.P = 
/col Inner Error 0.000000
/col Iteration 1 Outer Error 0.034928
/col Inner Error 0.000250
/col Inner Error 0.000004
/col Iteration 2 Outer Error 0.001484
/col Inner Error 0.000079
/col Iteration 3 Outer Error 0.000204
/col Inner Error 0.000124
/col Inner Error 0.000001
/col Iteration 4 Outer Error 0.000018
/col Inner Error 0.000002
>> /col.P_Profile.Item6 = 
No outlet pressures available for tower /col
>> /col.LiquidDraw_0_l.P
/col.LiquidDraw_0_l.P= None
>> /col.LiquidDraw_13_l.P
/col.LiquidDraw_13_l.P= None
>> /col.P_Profile.Values
[ ...
None
None
None
None
None
None
None
None
None
None
None
None
None
None
 ... ]

>> 
>> TryToSolve = 0
>> /col.P_Profile.Item0 = 700
>> /col.P_Profile.Item13 = 720
>> TryToSolve = 1
/col Inner Error 0.000000
/col Iteration 1 Outer Error 0.022377
/col Inner Error 0.000098
/col Iteration 2 Outer Error 0.000993
/col Inner Error 0.000066
/col Iteration 3 Outer Error 0.000130
/col Inner Error 0.000044
/col Iteration 4 Outer Error 0.000011
/col Inner Error 0.000002
>> /col.LiquidDraw_0_l.P
/col.LiquidDraw_0_l.P= 700.0 = kPa
>> /col.LiquidDraw_13_l.P
/col.LiquidDraw_13_l.P= 720.0 = kPa
>> /col.P_Profile.Values
[ ...
700.0
701.538461538
703.076923077
704.615384615
706.153846154
707.692307692
709.230769231
710.769230769
712.307692308
713.846153846
715.384615385
716.923076923
718.461538462
720.0
 ... ]

>> 
>> 
>> #Degrees of subcooling
>> /col.Stage_0.dsc = Tower.DegSubCooling()
>> /col.Stage_0.l.Port
Port: /col.LiquidDraw_0_l + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = 700.0 = kPa
MoleFlow           = 5.0 * kgmole/h
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
n-BUTANE           = None
PROPANE            = None
n-PENTANE          = None

>> /col.Stage_0.dsc.Port = 3
/col Inner Error 0.000893
/col Inner Error 0.000015
/col Iteration 1 Outer Error 0.000267
/col Inner Error 0.000115
/col Inner Error 0.000002
/col Iteration 2 Outer Error 0.000009
/col Inner Error 0.000002
>> /col.Stage_0.l.Port
Port: /col.LiquidDraw_0_l + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 10.5204047102 = C
P                  = 700.0 = kPa
MoleFlow           = 5.0 * kgmole/h
MassFlow           = 220.730455282 = kg/h
VolumeFlow         = 0.424644581914 = m3/hr
StdLiqVolumeFlow   = 0.437347019965 = m3/hr
H                  = -2994.00120597 = kJ/kmol
Energy             = -4158.33500829 = W
MolecularWeight    = 44.1460910564 = 
ZFactor            = 0.024194101311 = 
n-BUTANE           = 0.00352802367721 = 
PROPANE            = 0.996436866194 = 
n-PENTANE          = 3.51101288955e-005 = 

>> /col.Stage_0.v = Tower.VapourDraw()
Could not assign Tower.VapourDraw()
>> /col.Stage_0.v.MoleFlow = 0.0
Could not assign 0.0
>> /col.Stage_0.v.Port
Port: /col.VapourDraw_0_v + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 10.5204047102 = C
P                  = 700.0 = kPa
MoleFlow           = 1e-040 * kgmole/h
MassFlow           = 4.41124979296e-039 = kg/h
VolumeFlow         = 8.48985307175e-042 = m3/hr
StdLiqVolumeFlow   = 8.74313821709e-042 = m3/hr
H                  = -2989.58178329 = kJ/kmol
Energy             = -8.30439384248e-038 = W
MolecularWeight    = 44.1124979296 = 
ZFactor            = 0.0241860850866 = 
n-BUTANE           = 0.00119448648375 = 
PROPANE            = 0.998801115817 = 
n-PENTANE          = 4.39769945343e-006 = 

>> /col.Stage_0.dsc.Port = 0
/col Inner Error 0.000300
/col Inner Error 0.000005
/col Iteration 1 Outer Error 0.000263
/col Inner Error 0.000057
/col Iteration 2 Outer Error 0.000013
/col Inner Error 0.000003
>> /col.Stage_0.v.Port
Port: /col.VapourDraw_0_v + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.999999732225 = 
T                  = 13.5261298877 = C
P                  = 700.0 = kPa
MoleFlow           = 1e-040 * kgmole/h
MassFlow           = 4.41134383819e-039 = kg/h
VolumeFlow         = 2.91717904978e-040 = m3/hr
StdLiqVolumeFlow   = 8.74324492767e-042 = m3/hr
H                  = 13122.7075951 = kJ/kmol
Energy             = 3.6451965542e-037 = W
MolecularWeight    = 44.1134383819 = 
ZFactor            = 0.857768364716 = 
n-BUTANE           = 0.00126088289521 = 
PROPANE            = 0.998734393678 = 
n-PENTANE          = 4.72342716497e-006 = 

>> /col.Stage_0.l.Port
Port: /col.LiquidDraw_0_l + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 13.5261298877 = C
P                  = 700.0 = kPa
MoleFlow           = 5.0 * kgmole/h
MassFlow           = 220.744549127 = kg/h
VolumeFlow         = 0.428433331398 = m3/hr
StdLiqVolumeFlow   = 0.437362971375 = m3/hr
H                  = -2640.84627529 = kJ/kmol
Energy             = -3667.84204902 = W
MolecularWeight    = 44.1489098255 = 
ZFactor            = 0.0242034430583 = 
n-BUTANE           = 0.00372379072148 = 
PROPANE            = 0.996238503116 = 
n-PENTANE          = 3.77061625411e-005 = 

>> /col.Stage_0.dsc.Port = 2
/col Inner Error 0.000057
/col Iteration 1 Outer Error 0.000178
/col Inner Error 0.000011
/col Iteration 2 Outer Error 0.000007
/col Inner Error 0.000001
>> /col.Stage_0.v.Port
Port: /col.VapourDraw_0_v + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 11.5222549272 = C
P                  = 700.0 = kPa
MoleFlow           = 1e-040 * kgmole/h
MassFlow           = 4.41128018662e-039 = kg/h
VolumeFlow         = 8.51468987745e-042 = m3/hr
StdLiqVolumeFlow   = 8.74317270443e-042 = m3/hr
H                  = -2872.37599887 = kJ/kmol
Energy             = -7.97882221908e-038 = W
MolecularWeight    = 44.1128018662 = 
ZFactor            = 0.0241876597048 = 
n-BUTANE           = 0.00121594641941 = 
PROPANE            = 0.998779551539 = 
n-PENTANE          = 4.50204195002e-006 = 

>> /col.Stage_0.l.Port
Port: /col.LiquidDraw_0_l + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 11.5222549272 = C
P                  = 700.0 = kPa
MoleFlow           = 5.0 * kgmole/h
MassFlow           = 220.735009761 = kg/h
VolumeFlow         = 0.425887607074 = m3/hr
StdLiqVolumeFlow   = 0.437352174905 = m3/hr
H                  = -2876.84125311 = kJ/kmol
Energy             = -3995.61285154 = W
MolecularWeight    = 44.1470019523 = 
ZFactor            = 0.0241956732563 = 
n-BUTANE           = 0.00359130105373 = 
PROPANE            = 0.996372757159 = 
n-PENTANE          = 3.59417877327e-005 = 

>> 
>> copy /col
Copied /col to the clipboard
>> paste /
Pasting /col
Pasted /col as /colClone
/colClone Inner Error 0.000000
/colClone Iteration 1 Outer Error 0.000001
/colClone Inner Error 0.000000
>> 
>> /col.LiquidDraw_0_l
Port: /col.LiquidDraw_0_l + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 11.5222549272 = C
P                  = 700.0 = kPa
MoleFlow           = 5.0 * kgmole/h
MassFlow           = 220.735009761 = kg/h
VolumeFlow         = 0.425887607074 = m3/hr
StdLiqVolumeFlow   = 0.437352174905 = m3/hr
H                  = -2876.84125311 = kJ/kmol
Energy             = -3995.61285154 = W
MolecularWeight    = 44.1470019523 = 
ZFactor            = 0.0241956732563 = 
n-BUTANE           = 0.00359130105373 = 
PROPANE            = 0.996372757159 = 
n-PENTANE          = 3.59417877327e-005 = 

>> /colClone.LiquidDraw_0_l
Port: /colClone.LiquidDraw_0_l + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 11.5222550123 = C
P                  = 700.0 = kPa
MoleFlow           = 5.0 * kgmole/h
MassFlow           = 220.735010072 = kg/h
VolumeFlow         = 0.425887607458 = m3/hr
StdLiqVolumeFlow   = 0.437352175257 = m3/hr
H                  = -2876.84125126 = kJ/kmol
Energy             = -3995.61284897 = W
MolecularWeight    = 44.1470020145 = 
ZFactor            = 0.024195673271 = 
n-BUTANE           = 0.003591305385 = 
PROPANE            = 0.996372752774 = 
n-PENTANE          = 3.5941840658e-005 = 

>> 
>> 
>> delete /col.Stage_0.dsc
/col Inner Error 0.000067
/col Iteration 1 Outer Error 0.000176
/col Inner Error 0.000038
/col Iteration 2 Outer Error 0.000009
/col Inner Error 0.000002
>> /col.Stage_0.v.Port
Port: /col.VapourDraw_0_v + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.99999982081 = 
T                  = 13.5261298198 = C
P                  = 700.0 = kPa
MoleFlow           = 1e-040 * kgmole/h
MassFlow           = 4.41134383675e-039 = kg/h
VolumeFlow         = 2.91717929979e-040 = m3/hr
StdLiqVolumeFlow   = 8.74324492604e-042 = m3/hr
H                  = 13122.7089842 = kJ/kmol
Energy             = 3.64519694006e-037 = W
MolecularWeight    = 44.1134383675 = 
ZFactor            = 0.857768438521 = 
n-BUTANE           = 0.00126088187899 = 
PROPANE            = 0.998734394698 = 
n-PENTANE          = 4.72342328615e-006 = 

>> /col.Stage_0.l.Port
Port: /col.LiquidDraw_0_l + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 13.5261298198 = C
P                  = 700.0 = kPa
MoleFlow           = 5.0 * kgmole/h
MassFlow           = 220.744548894 = kg/h
VolumeFlow         = 0.428433331106 = m3/hr
StdLiqVolumeFlow   = 0.43736297111 = m3/hr
H                  = -2640.84627731 = kJ/kmol
Energy             = -3667.84205182 = W
MolecularWeight    = 44.1489097788 = 
ZFactor            = 0.0242034430474 = 
n-BUTANE           = 0.00372378745805 = 
PROPANE            = 0.996238506411 = 
n-PENTANE          = 3.77061307517e-005 = 

>> 
>> 
>> 
>> 
>> 
>> clear
>> read c3splitter.tst
Processing c3splitter.tst
>> # C3 splitter test (from old Hysim manual)
>> units Field
>> $thermo = VirtualMaterials.SRK
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + PROPANE PROPYLENE
PROPANE PROPYLENE 
>> 
>> c3splitter = Tower.Tower()
>> c3splitter.Stage_0 + 183  # 185 stages`
>> 
>> cd c3splitter.Stage_0
/c3splitter.Stage_0
>> 
>> l = Tower.LiquidDraw()
>> l.Port.P = 280
>> l.Port.MoleFlow = 774.3
>> 
>> cond = Tower.EnergyFeed(0)
>> 
>> estT = Tower.Estimate('T')
>> estT.Value = 114.8
>> 
>> reflux = Tower.StageSpecification('Reflux')
>> reflux.Value = 16.4
>> 
>> cd ../Stage_137
/c3splitter.Stage_137
>> f = Tower.Feed()
>> 
>> cd ../Stage_184
/c3splitter.Stage_184
>> l = Tower.LiquidDraw()
>> l.Port.P = 280
>> 
>> reb = Tower.EnergyFeed(1)
>> estT = Tower.Estimate('T')
>> estT.Value = 129.2
>> 
>> cd /
/
>> 
>> feed = Stream.Stream_Material()
>> cd feed.In
/feed.In
>> P = 280
>> VapFrac = 1
>> MoleFlow = 1322.76
>> Fraction = .4 .6
>> cd /c3splitter
/c3splitter
>> /feed.Out -> Stage_137.f.Port
>> 
>> /overhead = Stream.Stream_Material()
>> /overhead.In -> Stage_0.l.Port
>> 
>> /bottoms = Stream.Stream_Material()
>> /bottoms.In -> Stage_184.l.Port
>> 
>> 
>> 
>> TryToSolve = 1  # start calculation
Calculating Jacobian for /c3splitter
Calculating disturbance 10 of 185 in jacobian of /c3splitter
Calculating disturbance 20 of 185 in jacobian of /c3splitter
Calculating disturbance 30 of 185 in jacobian of /c3splitter
Calculating disturbance 40 of 185 in jacobian of /c3splitter
Calculating disturbance 50 of 185 in jacobian of /c3splitter
Calculating disturbance 60 of 185 in jacobian of /c3splitter
Calculating disturbance 70 of 185 in jacobian of /c3splitter
Calculating disturbance 80 of 185 in jacobian of /c3splitter
Calculating disturbance 90 of 185 in jacobian of /c3splitter
Calculating disturbance 100 of 185 in jacobian of /c3splitter
Calculating disturbance 110 of 185 in jacobian of /c3splitter
Calculating disturbance 120 of 185 in jacobian of /c3splitter
Calculating disturbance 130 of 185 in jacobian of /c3splitter
Calculating disturbance 140 of 185 in jacobian of /c3splitter
Calculating disturbance 150 of 185 in jacobian of /c3splitter
Calculating disturbance 160 of 185 in jacobian of /c3splitter
Calculating disturbance 170 of 185 in jacobian of /c3splitter
Calculating disturbance 180 of 185 in jacobian of /c3splitter
/c3splitter Inner Error 0.734113
/c3splitter Inner Error 0.481556
/c3splitter Inner Error 0.202320
/c3splitter Inner Error 0.111777
/c3splitter Inner Error 0.100047
/c3splitter Inner Error 0.067292
/c3splitter Inner Error 0.054281
/c3splitter Iteration 1 Outer Error 0.010950
Calculating Jacobian for /c3splitter
Calculating disturbance 10 of 185 in jacobian of /c3splitter
Calculating disturbance 20 of 185 in jacobian of /c3splitter
Calculating disturbance 30 of 185 in jacobian of /c3splitter
Calculating disturbance 40 of 185 in jacobian of /c3splitter
Calculating disturbance 50 of 185 in jacobian of /c3splitter
Calculating disturbance 60 of 185 in jacobian of /c3splitter
Calculating disturbance 70 of 185 in jacobian of /c3splitter
Calculating disturbance 80 of 185 in jacobian of /c3splitter
Calculating disturbance 90 of 185 in jacobian of /c3splitter
Calculating disturbance 100 of 185 in jacobian of /c3splitter
Calculating disturbance 110 of 185 in jacobian of /c3splitter
Calculating disturbance 120 of 185 in jacobian of /c3splitter
Calculating disturbance 130 of 185 in jacobian of /c3splitter
Calculating disturbance 140 of 185 in jacobian of /c3splitter
Calculating disturbance 150 of 185 in jacobian of /c3splitter
Calculating disturbance 160 of 185 in jacobian of /c3splitter
Calculating disturbance 170 of 185 in jacobian of /c3splitter
Calculating disturbance 180 of 185 in jacobian of /c3splitter
/c3splitter Inner Error 1.845382
/c3splitter Inner Error 1.195519
/c3splitter Inner Error 0.685377
/c3splitter Inner Error 0.502926
/c3splitter Inner Error 0.376044
/c3splitter Inner Error 0.271609
/c3splitter Inner Error 0.195837
/c3splitter Inner Error 0.146495
/c3splitter Inner Error 0.107412
/c3splitter Inner Error 0.100408
/c3splitter Inner Error 0.084700
/c3splitter Iteration 2 Outer Error 0.000924
Calculating Jacobian for /c3splitter
Calculating disturbance 10 of 185 in jacobian of /c3splitter
Calculating disturbance 20 of 185 in jacobian of /c3splitter
Calculating disturbance 30 of 185 in jacobian of /c3splitter
Calculating disturbance 40 of 185 in jacobian of /c3splitter
Calculating disturbance 50 of 185 in jacobian of /c3splitter
Calculating disturbance 60 of 185 in jacobian of /c3splitter
Calculating disturbance 70 of 185 in jacobian of /c3splitter
Calculating disturbance 80 of 185 in jacobian of /c3splitter
Calculating disturbance 90 of 185 in jacobian of /c3splitter
Calculating disturbance 100 of 185 in jacobian of /c3splitter
Calculating disturbance 110 of 185 in jacobian of /c3splitter
Calculating disturbance 120 of 185 in jacobian of /c3splitter
Calculating disturbance 130 of 185 in jacobian of /c3splitter
Calculating disturbance 140 of 185 in jacobian of /c3splitter
Calculating disturbance 150 of 185 in jacobian of /c3splitter
Calculating disturbance 160 of 185 in jacobian of /c3splitter
Calculating disturbance 170 of 185 in jacobian of /c3splitter
Calculating disturbance 180 of 185 in jacobian of /c3splitter
/c3splitter Inner Error 0.021821
/c3splitter Inner Error 0.006911
/c3splitter Inner Error 0.000499
/c3splitter Inner Error 0.000059
/c3splitter Iteration 3 Outer Error 0.000830
/c3splitter Inner Error 0.039863
/c3splitter Inner Error 0.015736
/c3splitter Inner Error 0.002141
/c3splitter Inner Error 0.000150
/c3splitter Inner Error 0.000016
/c3splitter Iteration 4 Outer Error 0.000180
/c3splitter Inner Error 0.001378
/c3splitter Inner Error 0.000039
/c3splitter Iteration 5 Outer Error 0.000016
/c3splitter Inner Error 0.000134
/c3splitter Inner Error 0.000003
>> 
>> /overhead.Out
Port: /overhead.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 115.317078327 = F
P                  = 280.0 = psia
MoleFlow           = 774.3 = lbmole/h
MassFlow           = 32585.1422714 = lb/h
VolumeFlow         = 0.348388729466 = ft3/s
StdLiqVolumeFlow   = 0.278098080555 = ft3/s
H                  = 255.819282088 = Btu/lbmol
Energy             = 198047.560647 = Btu/hr
MolecularWeight    = 42.0833556392 = 
ZFactor            = 0.0735012478542 = 
PROPANE            = 0.00179357859041 = 
PROPYLENE          = 0.99820642141 = 

>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 130.050423684 = F
P                  = 280.0 = psia
MoleFlow           = 548.460100536 = lbmole/h
MassFlow           = 24142.8690134 = lb/h
VolumeFlow         = 0.276909565288 = ft3/s
StdLiqVolumeFlow   = 0.212704267835 = ft3/s
H                  = 1170.10120107 = Btu/lbmol
Energy             = 641645.904419 = Btu/hr
MolecularWeight    = 44.0193716731 = 
ZFactor            = 0.0804164151189 = 
PROPANE            = 0.962176157868 = 
PROPYLENE          = 0.0378238421317 = 

>> 
>> clear
>> read heatpump.tst
Processing heatpump.tst
>> # Depeopanizer test (from old Hysim manual)
>> units Field
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + Propane ISOBUTANE n-BUTANE ISOPENTANE
Propane ISOBUTANE n-BUTANE ISOPENTANE 
>> 
>> Feed = Stream.Stream_Material()
>> Feed.In.T = 90
>> Feed.In.P = 55
>> Feed.In.MoleFlow = 3000
>> Feed.In.Fraction = 2.5 39 58 .5
>> 
>> c4split = Tower.Tower()
>> c4split.Stage_0 + 38  # forty stages`
>> 
>> cd c4split.Stage_0
/c4split.Stage_0
>> 
>> l = Tower.LiquidDraw()
>> l.Port.P = 60
>> l.nC4spec = Tower.VolFractionSpec()
>> l.nC4spec + n-BUTANE
>> l.nC4spec.Port = .05
>> 
>> reflux = Tower.RefluxRatioSpec()
>> reflux.Port = 7
>> 
>> cond = Tower.EnergyFeed(0)
>> estT = Tower.Estimate('T')
>> estT.Port = 100
>> 
>> cd ../Stage_1
/c4split.Stage_1
>> vap = Tower.InternalVapourClone()
>> /to_comp = Stream.Stream_Material()
>> vap.Port -> /to_comp.In
>> 
>> cd ../Stage_29
/c4split.Stage_29
>> f = Tower.Feed()
>> f.Port -> /Feed.Out
>> 
>> cd ../Stage_39
/c4split.Stage_39
>> l = Tower.LiquidDraw()
>> l.Port.P = 68
>> 
>> reb = Tower.EnergyFeed(1)
>> 
>> estT = Tower.Estimate('T')
>> estT.Port = 120
>> 
>> cd ..
/c4split
>> 
>> /liq_prod = Stream.Stream_Material()
>> /liq_prod.clone = Stream.ClonePort(1) 
>> /liq_prod.In -> Stage_0.l.Port
>> 
>> /btm_prod = Stream.Stream_Material()
>> /btm_prod.In -> Stage_39.l.Port
>> 
>> TryToSolve = 1  # start calculation
Calculating Jacobian for /c4split
Calculating disturbance 10 of 40 in jacobian of /c4split
Calculating disturbance 20 of 40 in jacobian of /c4split
Calculating disturbance 30 of 40 in jacobian of /c4split
Calculating disturbance 40 of 40 in jacobian of /c4split
/c4split Inner Error 0.297589
/c4split Inner Error 0.099950
/c4split Inner Error 0.037882
/c4split Inner Error 0.009895
/c4split Inner Error 0.002803
/c4split Inner Error 0.001623
/c4split Inner Error 0.000143
/c4split Inner Error 0.000019
/c4split Iteration 1 Outer Error 0.003813
/c4split Inner Error 0.715093
/c4split Inner Error 0.239036
/c4split Inner Error 0.125198
/c4split Inner Error 0.013669
/c4split Inner Error 0.007114
/c4split Inner Error 0.001223
/c4split Inner Error 0.000368
/c4split Inner Error 0.000042
/c4split Iteration 2 Outer Error 0.000023
/c4split Inner Error 0.004967
/c4split Inner Error 0.000962
/c4split Inner Error 0.000094
>> 
>> /liq_prod.Out
Port: /liq_prod.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 81.807188438 = F
P                  = 60.0 = psia
MoleFlow           = 1044.40259526 = lbmole/h
MassFlow           = 59651.009294 = lb/h
VolumeFlow         = 0.46143048506 = ft3/s
StdLiqVolumeFlow   = 0.459757651766 = ft3/s
H                  = -1282.86260403 = Btu/lbmol
Energy             = -1339599.72672 = Btu/hr
MolecularWeight    = 57.1149569759 = 
ZFactor            = 0.0164228813901 = 
PROPANE            = 0.0718095946494 = 
ISOBUTANE          = 0.876985865196 = 
n-BUTANE           = 0.0512045401544 = 
ISOPENTANE         = 1.30912427885e-014 = 

>> /btm_prod.Out
Port: /btm_prod.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 6.87025262373e-006 = 
T                  = 115.165747022 = F
P                  = 68.0 = psia
MoleFlow           = 1955.59740474 = lbmole/h
MassFlow           = 113873.995906 = lb/h
VolumeFlow         = 0.891714645008 = ft3/s
StdLiqVolumeFlow   = 0.895899552906 = ft3/s
H                  = -123.581099402 = Btu/lbmol
Energy             = -241634.23698 = Btu/hr
MolecularWeight    = 58.2297745079 = 
ZFactor            = 0.0180947055527 = 
PROPANE            = 9.57755055909e-007 = 
ISOBUTANE          = 0.129921263837 = 
n-BUTANE           = 0.862407488008 = 
ISOPENTANE         = 0.00767029040009 = 

>> 
>> cd /
/
>> K-100 = Compressor.Compressor()
>> K-100.Efficiency = .75
>> K-100.Out.P = 235.1787
>> 
>> c4split.Stage_1.vap.Port -> K-100.In
>> 
>> E-100 = Heater.Cooler()
>> E-100.DeltaP = 5 
>> 
>> K-100.Out -> E-100.In
>> E-100.OutQ -> c4split.Stage_39.reb.Port
>> 
>> E-101 = Heater.Cooler()
>> E-101.DeltaP = 5 
>> E-100.Out -> E-101.In
>> 
>> CV-100 = Valve.Valve()
>> E-101.Out -> CV-100.In
>> 
>> V-100 = Flash.SimpleFlash()
>> CV-100.Out -> V-100.In
>> 
>> split = Split.Splitter()
>> V-100.Liq0 -> split.In
>> split.Out0 -> liq_prod.clone
>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
/RootClone.c4split Inner Error 0.000007
/RootClone.c4split Iteration 1 Outer Error 0.000001
/RootClone.c4split Inner Error 0.000165
/RootClone.c4split Inner Error 0.000045
>> 
>> /btm_prod.In
Port: /btm_prod.In + sim.solver.Ports.Port_Material
Connected to: /c4split.LiquidDraw_39_l
VapFrac            = 6.87025262373e-006 | 
T                  = 115.165747022 | F
P                  = 68.0 | psia
MoleFlow           = 1955.59740474 | lbmole/h
MassFlow           = 113873.995906 | lb/h
VolumeFlow         = 0.891714645008 | ft3/s
StdLiqVolumeFlow   = 0.895899552906 | ft3/s
H                  = -123.581099402 | Btu/lbmol
Energy             = -241634.23698 | Btu/hr
MolecularWeight    = 58.2297745079 | 
ZFactor            = 0.0180947055527 | 
PROPANE            = 9.57755055909e-007 | 
ISOBUTANE          = 0.129921263837 | 
n-BUTANE           = 0.862407488008 | 
ISOPENTANE         = 0.00767029040009 | 

>> /RootClone.btm_prod.In
Port: /RootClone.btm_prod.In + sim.solver.Ports.Port_Material
Connected to: /RootClone.c4split.LiquidDraw_39_l
VapFrac            = 0.0 | 
T                  = 115.165403414 | F
P                  = 68.0 | psia
MoleFlow           = 1955.65551212 | lbmole/h
MassFlow           = 113877.373233 | lb/h
VolumeFlow         = 0.891447359919 | ft3/s
StdLiqVolumeFlow   = 0.895925731414 | ft3/s
H                  = -123.651819516 | Btu/lbmol
Energy             = -241779.697669 | Btu/hr
MolecularWeight    = 58.2297713109 | 
ZFactor            = 0.0180887551291 | 
PROPANE            = 9.57778018081e-007 | 
ISOBUTANE          = 0.129934134672 | 
n-BUTANE           = 0.862394845053 | 
ISOPENTANE         = 0.00767006249672 | 

>> 
>> clear
>> read n2reject.tst
Processing n2reject.tst
>> # Nitrogen Rejection Unit (from old Hysim manual)
>> units Field
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + Nitrogen Methane Ethane PROPANE
Nitrogen Methane Ethane PROPANE 
>> thermo + ISOBUTANE n-BUTANE ISOPENTANE n-PENTANE
ISOBUTANE n-BUTANE ISOPENTANE n-PENTANE 
>> 
>> hp_feed = Stream.Stream_Material()
>> hp_ovhd = Stream.Stream_Material()
>> hp_btms = Stream.Stream_Material()
>> 
>> cd hp_feed.In
/hp_feed.In
>> T = -215
>> P = 380
>> MoleFlow = 1000
>> Fraction = .5454 .4153 .0347 .0036 .0004 .0003 .0002 .0001
>> cd /
/
>> 
>> hp_column = Tower.Tower()
>> hp_column.Stage_0 + 8  # ten stages`
>> 
>> cd hp_column.Stage_0
/hp_column.Stage_0
>> 
>> l = Tower.LiquidDraw()
>> l.Port.P = 370
>> 
>> l.Port -> /hp_ovhd.In
>> /hp_ovhd.In.Fraction.NITROGEN = .99
>> 
>> l.estF = Tower.Estimate('MoleFlow')
>> l.estF.Value = 200
>> 
>> cond = Tower.EnergyFeed(0)
>> 
>> estReflux = Tower.Estimate('Reflux')
>> estReflux.Value = 3
>> 
>> estT = Tower.Estimate('T')
>> estT.Value = -250
>> 
>> cd ../Stage_9
/hp_column.Stage_9
>> f = Tower.Feed()
>> f.Port -> /hp_feed.Out
>> 
>> l = Tower.LiquidDraw()
>> l.Port.P = 377
>> l.Port -> /hp_btms.In
>> 
>> estT = Tower.Estimate('T')
>> estT.Value = -230
>> 
>> cd ..
/hp_column
>> 
>> TryToSolve = 1  # start calculation
Calculating Jacobian for /hp_column
Calculating disturbance 10 of 10 in jacobian of /hp_column
/hp_column Inner Error 2.337422
/hp_column Inner Error 0.740563
/hp_column Inner Error 0.362387
/hp_column Inner Error 0.174440
/hp_column Inner Error 0.099854
/hp_column Inner Error 0.052663
/hp_column Inner Error 0.015577
/hp_column Inner Error 0.005888
/hp_column Inner Error 0.000937
/hp_column Inner Error 0.000251
/hp_column Inner Error 0.000026
/hp_column Iteration 1 Outer Error 0.042033
/hp_column Inner Error 2.214348
/hp_column Inner Error 2.127710
/hp_column Inner Error 1.155027
/hp_column Inner Error 0.482186
/hp_column Inner Error 0.312299
/hp_column Inner Error 0.096865
/hp_column Inner Error 0.017289
/hp_column Inner Error 0.002478
/hp_column Inner Error 0.000472
/hp_column Inner Error 0.000075
/hp_column Iteration 2 Outer Error 0.024458
/hp_column Inner Error 0.068969
/hp_column Inner Error 0.018232
/hp_column Inner Error 0.005682
/hp_column Inner Error 0.000475
/hp_column Inner Error 0.000121
/hp_column Inner Error 0.000026
/hp_column Iteration 3 Outer Error 0.013130
/hp_column Inner Error 0.028218
/hp_column Inner Error 0.005504
/hp_column Inner Error 0.001184
/hp_column Inner Error 0.000157
/hp_column Inner Error 0.000008
/hp_column Iteration 4 Outer Error 0.006264
/hp_column Inner Error 0.004089
/hp_column Inner Error 0.000742
/hp_column Inner Error 0.000123
/hp_column Inner Error 0.000015
/hp_column Iteration 5 Outer Error 0.002860
/hp_column Inner Error 0.000623
/hp_column Inner Error 0.000066
/hp_column Iteration 6 Outer Error 0.001268
/hp_column Inner Error 0.000119
/hp_column Inner Error 0.000018
/hp_column Iteration 7 Outer Error 0.000548
/hp_column Inner Error 0.000058
/hp_column Iteration 8 Outer Error 0.000231
/hp_column Inner Error 0.000050
/hp_column Iteration 9 Outer Error 0.000095
/hp_column Inner Error 0.000030
>> 
>> cd /
/
>> hp_ovhd.Out
Port: /hp_ovhd.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = -242.88136121 = F
P                  = 370.0 = psia
MoleFlow           = 161.789497506 = lbmole/h
MassFlow           = 4512.91873848 = lb/h
VolumeFlow         = 0.0393105642038 = ft3/s
StdLiqVolumeFlow   = 0.0630595680548 = ft3/s
H                  = -118.136331028 = Btu/lbmol
Energy             = -19110.0035367 = Btu/hr
MolecularWeight    = 27.8937681867 = 
ZFactor            = 0.139111852853 = 
NITROGEN           = 0.99 = 
METHANE            = 0.010000136126 = 
ETHANE             = 2.52511145703e-013 = 
PROPANE            = 5.23351765646e-021 = 
ISOBUTANE          = 9.37686953085e-027 = 
n-BUTANE           = 7.45309800737e-030 = 
ISOPENTANE         = 1.90239329136e-075 = 
n-PENTANE          = 1e-100 = 

>> hp_btms.Out
Port: /hp_btms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 3.24218524127e-005 = 
T                  = -216.057759275 = F
P                  = 377.0 = psia
MoleFlow           = 838.210502494 = lbmole/h
MassFlow           = 18692.5369882 = lb/h
VolumeFlow         = 0.155770648433 = ft3/s
StdLiqVolumeFlow   = 0.264167335352 = ft3/s
H                  = -820.565074574 = Btu/lbmol
Energy             = -687690.60131 = Btu/hr
MolecularWeight    = 22.3005282474 = 
ZFactor            = 0.0964749902036 = 
NITROGEN           = 0.459584338715 = 
METHANE            = 0.493530064071 = 
ETHANE             = 0.0413977156057 = 
PROPANE            = 0.00429486386688 = 
ISOBUTANE          = 0.00047720709632 = 
n-BUTANE           = 0.00035790532224 = 
ISOPENTANE         = 0.00023860354816 = 
n-PENTANE          = 0.00011930177408 = 

>> 
>> # now add exchanger for overheads
>> e1 = Heater.HeatExchanger()
>> e1.DeltaPC = 0.5
>> e1.DeltaPH = 0.5
>> hp_ovhd.Out -> e1.InH
>> e1.OutH.T = -270
>> 
>> # valve
>> v1 = Valve.Valve()
>> e1.OutH -> v1.In
>> v1.Out.P = 29.3919
>> 
>> e2 = Heater.HeatExchanger()
>> e2.DeltaPH = .5
>> e2.DeltaPC = .5
>> hp_btms.Out -> e2.InH
>> e2.OutH.T = -230
>> 
>> # another valve
>> v2 = Valve.Valve()
>> e2.OutH -> /v2.In
>> v2.Out.P = 29.3919
>> 
>> lp_column = Tower.Tower()
>> lp_column.Stage_0 + 4  # six stages
>> 
>> cd lp_column.Stage_0
/lp_column.Stage_0
>> f = Tower.Feed()
>> f.Port -> /v1.Out
>> 
>> v = Tower.VapourDraw()
>> v.Port -> /e1.InC
>> v.Port.P = 29.392
>> 
>> cd ../Stage_3
/lp_column.Stage_3
>> f = Tower.Feed()
>> f.Port -> /v2.Out
>> 
>> cd ../Stage_5
/lp_column.Stage_5
>> reb = Tower.EnergyFeed(1)
>> reb.Port -> /hp_column.Stage_0.cond.Port
>> 
>> l = Tower.LiquidDraw()
>> l.Port -> /e2.InC
>> l.Port.P = 36.74
>> 
>> cd ..
/lp_column
>> TryToSolve = 1
Calculating Jacobian for /lp_column
/lp_column Inner Error 0.151186
/lp_column Inner Error 0.061830
/lp_column Inner Error 0.016961
/lp_column Inner Error 0.002134
/lp_column Inner Error 0.000720
/lp_column Inner Error 0.000015
/lp_column Iteration 1 Outer Error 0.158857
/lp_column Inner Error 0.084959
/lp_column Inner Error 0.019084
/lp_column Inner Error 0.000914
/lp_column Inner Error 0.000288
/lp_column Inner Error 0.000035
/lp_column Iteration 2 Outer Error 0.089036
/lp_column Inner Error 0.050186
/lp_column Inner Error 0.010985
/lp_column Inner Error 0.000999
/lp_column Inner Error 0.000148
/lp_column Inner Error 0.000007
/lp_column Iteration 3 Outer Error 0.038864
/lp_column Inner Error 0.013035
/lp_column Inner Error 0.002125
/lp_column Inner Error 0.000070
/lp_column Iteration 4 Outer Error 0.023954
/lp_column Inner Error 0.008536
/lp_column Inner Error 0.001142
/lp_column Inner Error 0.000018
/lp_column Iteration 5 Outer Error 0.013628
/lp_column Inner Error 0.005975
/lp_column Inner Error 0.000516
/lp_column Inner Error 0.000092
/lp_column Iteration 6 Outer Error 0.007981
/lp_column Inner Error 0.001741
/lp_column Inner Error 0.000271
/lp_column Inner Error 0.000050
/lp_column Iteration 7 Outer Error 0.004711
/lp_column Inner Error 0.000413
/lp_column Inner Error 0.000043
/lp_column Iteration 8 Outer Error 0.002612
/lp_column Inner Error 0.000178
/lp_column Inner Error 0.000007
/lp_column Iteration 9 Outer Error 0.001376
/lp_column Inner Error 0.000072
/lp_column Iteration 10 Outer Error 0.000661
/lp_column Inner Error 0.000057
/lp_column Iteration 11 Outer Error 0.000330
/lp_column Inner Error 0.000036
/lp_column Iteration 12 Outer Error 0.000171
/lp_column Inner Error 0.000024
/lp_column Iteration 13 Outer Error 0.000090
/lp_column Inner Error 0.000014
>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
/RootClone.hp_column Inner Error 0.000003
/RootClone.hp_column Iteration 1 Outer Error 0.000038
/RootClone.hp_column Inner Error 0.000013
/RootClone.lp_column Inner Error 0.000020
/RootClone.lp_column Iteration 1 Outer Error 0.000041
/RootClone.lp_column Inner Error 0.000006
>> 
>> /e1.OutC
Port: /e1.ColdSide.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = -282.705130152 = F
P                  = 28.892 = psia
MoleFlow           = 511.695783571 = lbmole/h
MassFlow           = 14321.4960106 = lb/h
VolumeFlow         = 8.92885238389 = ft3/s
StdLiqVolumeFlow   = 0.200058982861 = ft3/s
H                  = 1197.9608246 = Btu/lbmol
Energy             = 612888.421574 = Btu/hr
MolecularWeight    = 27.9883017808 = 
ZFactor            = 0.955684069326 = 
NITROGEN           = 0.997896735687 = 
METHANE            = 0.00210326431314 = 
ETHANE             = 8.20072015364e-017 = 
PROPANE            = 4.24488696331e-026 = 
ISOBUTANE          = 1.01156778374e-032 = 
n-BUTANE           = 9.34256347786e-037 = 
ISOPENTANE         = 1e-100 = 
n-PENTANE          = 1e-100 = 

>> /RootClone.e1.OutC
Port: /RootClone.e1.ColdSide.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = -282.703864731 = F
P                  = 28.892 = psia
MoleFlow           = 511.698966871 = lbmole/h
MassFlow           = 14321.5862119 = lb/h
VolumeFlow         = 8.92897972063 = ft3/s
StdLiqVolumeFlow   = 0.200060241596 = ft3/s
H                  = 1197.97001432 = Btu/lbmol
Energy             = 612896.935983 = Btu/hr
MolecularWeight    = 27.9883039426 = 
ZFactor            = 0.95568491935 = 
NITROGEN           = 0.997896916271 = 
METHANE            = 0.00210308372948 = 
ETHANE             = 8.19851009437e-017 = 
PROPANE            = 4.24329384824e-026 = 
ISOBUTANE          = 1.01114479679e-032 = 
n-BUTANE           = 9.33856578488e-037 = 
ISOPENTANE         = 1e-100 = 
n-PENTANE          = 1e-100 = 

>> /e2.OutC
Port: /e2.ColdSide.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0866375083861 = 
T                  = -249.906174109 = F
P                  = 36.24 = psia
MoleFlow           = 488.304216429 = lbmole/h
MassFlow           = 8883.95971607 = lb/h
VolumeFlow         = 0.760170126352 = ft3/s
StdLiqVolumeFlow   = 0.127167920546 = ft3/s
H                  = -1845.37668099 = Btu/lbmol
Energy             = -900953.683487 = Btu/hr
MolecularWeight    = 18.1934933521 = 
ZFactor            = 0.0902231319412 = 
NITROGEN           = 0.0712270075907 = 
METHANE            = 0.848290377929 = 
ETHANE             = 0.0710622575692 = 
PROPANE            = 0.00737245323484 = 
ISOBUTANE          = 0.000819161470538 = 
n-BUTANE           = 0.000614371102904 = 
ISOPENTANE         = 0.000409580735269 = 
n-PENTANE          = 0.000204790367635 = 

>> /RootClone.e2.OutC
Port: /RootClone.e2.ColdSide.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0866276292939 = 
T                  = -249.905700099 = F
P                  = 36.24 = psia
MoleFlow           = 488.301033129 = lbmole/h
MassFlow           = 8883.86951306 = lb/h
VolumeFlow         = 0.760088718495 = ft3/s
StdLiqVolumeFlow   = 0.127166661789 = ft3/s
H                  = -1845.40706882 = Btu/lbmol
Energy             = -900962.646002 = Btu/hr
MolecularWeight    = 18.19342723 = 
ZFactor            = 0.0902138540536 = 
NITROGEN           = 0.071220776983 = 
METHANE            = 0.84829608386 = 
ETHANE             = 0.0710627208335 = 
PROPANE            = 0.00737250129685 = 
ISOBUTANE          = 0.000819166810761 = 
n-BUTANE           = 0.000614375108071 = 
ISOPENTANE         = 0.000409583405381 = 
n-PENTANE          = 0.00020479170269 = 

>> 
>> clear
>> read compressor.tst
Processing compressor.tst
>> # Simple compressor test
>> units SI
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + METHANE ETHANE PROPANE n-BUTANE
METHANE ETHANE PROPANE n-BUTANE 
>> comp = Compressor.Compressor()
>> comp
Operation: comp = sim.unitop.Compressor.Compressor
Port: In = sim.solver.Ports.Port_Material
Port: Out = sim.solver.Ports.Port_Material
Port: InQ = sim.solver.Ports.Port_Energy (/comp.TotalQ.In)
Port: DeltaP = sim.solver.Ports.Port_Signal
Port: PolytropicEff = sim.solver.Ports.Port_Signal
Port: AdiabaticEff = sim.solver.Ports.Port_Signal (/comp.EfficiencySig.In)
Child: EfficiencySig = sim.unitop.Stream.Stream_Signal
Child: Ideal = sim.unitop.Compressor.IdealCompressorExpander
Child: IdealQ = sim.unitop.Sensor.EnergySensor
Child: Mix = sim.unitop.Balance.BalanceOp
Child: Set = sim.unitop.Set.Set
Child: TotalQ = sim.unitop.Sensor.EnergySensor
Child: Waste = sim.unitop.Heater.Heater
Child: WasteQ = sim.unitop.Sensor.EnergySensor
Parameter: Ignored = None
>> cd comp
/comp
>> In.Fraction = .4 .3 .2 .1
>> In.P = 101.325
>> In.T = 20
>> In.MoleFlow = 100
>> Out.P = 400
>> Efficiency = .8
>> In
Port: /comp.Ideal.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 20.0 * C
P                  = 101.325 * kPa
MoleFlow           = 100.0 * kgmole/h
MassFlow           = 3006.904 = kg/h
VolumeFlow         = 2385.45637281 = m3/hr
StdLiqVolumeFlow   = 7.45757128 = m3/hr
H                  = 11976.2798701 = kJ/kmol
Energy             = 332674.440837 = W
MolecularWeight    = 30.06904 = 
ZFactor            = 0.9916714272 = 
METHANE            = 0.4 * 
ETHANE             = 0.3 * 
PROPANE            = 0.2 * 
n-BUTANE           = 0.1 * 

>> Out
Port: /comp.Waste.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 98.7185553622 = C
P                  = 400.0 * kPa
MoleFlow           = 100.0 = kgmole/h
MassFlow           = 3006.904 = kg/h
VolumeFlow         = 760.484232226 = m3/hr
StdLiqVolumeFlow   = 7.45757128 = m3/hr
H                  = 16552.4266544 = kJ/kmol
Energy             = 459789.629289 = W
MolecularWeight    = 30.06904 = 
ZFactor            = 0.983853322622 = 
METHANE            = 0.4 = 
ETHANE             = 0.3 = 
PROPANE            = 0.2 = 
n-BUTANE           = 0.1 = 

>> InQ
Port: /comp.TotalQ.In + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 127115.188451 = W

>> Efficiency = .5
>> Out
Port: /comp.Waste.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 139.865841752 = C
P                  = 400.0 * kPa
MoleFlow           = 100.0 = kgmole/h
MassFlow           = 3006.904 = kg/h
VolumeFlow         = 848.689371943 = m3/hr
StdLiqVolumeFlow   = 7.45757128 = m3/hr
H                  = 19298.1147249 = kJ/kmol
Energy             = 536058.74236 = W
MolecularWeight    = 30.06904 = 
ZFactor            = 0.988579620064 = 
METHANE            = 0.4 = 
ETHANE             = 0.3 = 
PROPANE            = 0.2 = 
n-BUTANE           = 0.1 = 

>> InQ
Port: /comp.TotalQ.In + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 203384.301522 = W

>> # ideal efficiency
>> Efficiency = 1.
>> Out
Port: /comp.Waste.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 84.3541772433 = C
P                  = 400.0 * kPa
MoleFlow           = 100.0 = kgmole/h
MassFlow           = 3006.904 = kg/h
VolumeFlow         = 729.514015412 = m3/hr
StdLiqVolumeFlow   = 7.45757128 = m3/hr
H                  = 15637.1972975 = kJ/kmol
Energy             = 434366.591598 = W
MolecularWeight    = 30.06904 = 
ZFactor            = 0.981707522123 = 
METHANE            = 0.4 = 
ETHANE             = 0.3 = 
PROPANE            = 0.2 = 
n-BUTANE           = 0.1 = 

>> InQ
Port: /comp.TotalQ.In + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 101692.150761 = W

>> 
>> # add expander
>> cd /
/
>> expander = Compressor.Expander()
>> comp.Out -> expander.In
>> expander.Efficiency = 1.
>> expander.Out.P = 101.325
>> expander.OutQ
Port: /expander.TotalQ.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 101697.854449 = W

>> expander.Out
Port: /expander.Waste.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 19.9962923979 = C
P                  = 101.325 * kPa
MoleFlow           = 100.0 = kgmole/h
MassFlow           = 3006.904 = kg/h
VolumeFlow         = 2385.42548153 = m3/hr
StdLiqVolumeFlow   = 7.45757128 = m3/hr
H                  = 11976.0745374 = kJ/kmol
Energy             = 332668.737149 = W
MolecularWeight    = 30.06904 = 
ZFactor            = 0.991671127333 = 
METHANE            = 0.4 = 
ETHANE             = 0.3 = 
PROPANE            = 0.2 = 
n-BUTANE           = 0.1 = 

>> comp.Efficiency = .75
>> expander.Efficiency = .75
>> comp.InQ
Port: /comp.TotalQ.In + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 135589.534348 = W

>> comp.Out
Port: /comp.Waste.Out + sim.solver.Ports.Port_Material
Connected to: /expander.Ideal.In
VapFrac            = 1.0 = 
T                  = 103.430650159 = C
P                  = 400.0 * kPa
MoleFlow           = 100.0 = kgmole/h
MassFlow           = 3006.904 = kg/h
VolumeFlow         = 770.621389641 = m3/hr
StdLiqVolumeFlow   = 7.45757128 = m3/hr
H                  = 16857.5031067 = kJ/kmol
Energy             = 468263.975185 = W
MolecularWeight    = 30.06904 = 
ZFactor            = 0.98449305718 = 
METHANE            = 0.4 = 
ETHANE             = 0.3 = 
PROPANE            = 0.2 = 
n-BUTANE           = 0.1 = 

>> expander.OutQ
Port: /expander.TotalQ.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 80770.6381035 = W

>> expander.Out
Port: /expander.Waste.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 54.4847164385 = C
P                  = 101.325 * kPa
MoleFlow           = 100.0 = kgmole/h
MassFlow           = 3006.904 = kg/h
VolumeFlow         = 2672.2543142 = m3/hr
StdLiqVolumeFlow   = 7.45757128 = m3/hr
H                  = 13949.760135 = kJ/kmol
Energy             = 387493.337082 = W
MolecularWeight    = 30.06904 = 
ZFactor            = 0.993971869692 = 
METHANE            = 0.4 = 
ETHANE             = 0.3 = 
PROPANE            = 0.2 = 
n-BUTANE           = 0.1 = 

>> 
>> clear
>> read compressor2.tst
Processing compressor2.tst
>> optimizecode 1
>> maxversions 0
>> units SI
>> /LiquidPhases = 2
>> /StdLiqVolRefT = 288.15 
>>  /StdLiqVolRefT = 60 F
>> /RecycleDetails = 1
>> displayproperties
VapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow H Energy MolecularWeight ZFactor 
>> displayproperties VapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow StdGasVolumeFlow Energy H S MolecularWeight MassDensity Cp ThermalConductivity Viscosity molarV ZFactor S
>> commonproperties
T P H S molarV ZFactor MolecularWeight StdLiqMolarVol 
>> commonproperties + ZFactor P T MolecularWeight MassDensity StdLiqMolarVolVapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow StdGasVolumeFlow Energy H S MolecularWeight MassDensity Cp ThermalConductivity Viscosity molarV ZFactor S
>> $VMGThermo = VirtualMaterials.Advanced_Peng-Robinson
>> / -> $VMGThermo
Thermo case attached to a unit operation. / to /VMGThermo
>> /SolidPhases = 0
>> 
>> $VMGThermo + WATER
WATER 
>> $VMGThermo + METHANE
METHANE 
>> $VMGThermo + ETHANE
ETHANE 
>> $VMGThermo + PROPANE
PROPANE 
>> $VMGThermo + n-BUTANE
n-BUTANE 
>> $VMGThermo + ISOPENTANE
ISOPENTANE 
>> 
>> /CP1 = Compressor.CompressorWithCurve("IgnoreCurve = 1")
>> IgnoreCurve = 1

>> '/CP1.In.Fraction' =   .003690036900369  .3690036900369  .3690036900369  .18450184501845  .03690036900369  .03690036900369
>> '/CP1.In.T' =  80
>> '/CP1.In.P' =  100
>> '/CP1.In.MoleFlow' =  100
>> '/CP1.Out.P' =  300
>> '/CP1.AdiabaticEff.Generic' =  .8
>> /CP1.In
Port: /CP1.FlowSensor.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 80.0 * C
P                     = 100.0 * kPa
MoleFlow              = 100.0 * kgmole/h
MassFlow              = 3002.45611808 = kg/h
VolumeFlow            = 2922.26279256 = m3/hr
StdLiqVolumeFlow      = 7.51920887853 = m3/hr
StdGasVolumeFlow      = 56856.7563839 = SCMD
Energy                = 425431.201219 = W
H                     = 15315.5232439 = kJ/kmol
S                     = 207.482715685 = kJ/kmol-K
MolecularWeight       = 30.0245611808 = 
MassDensity           = 1.02744220189 = kg/m3
Cp                    = 61.5246473432 = kJ/kmol-K
ThermalConductivity   = 0.0317093261254 = W/m-K
Viscosity             = 1.0954081597e-005 = Pa-s
molarV                = 29.2226279256 = m3/kmol
ZFactor               = 0.995265095981 = 
S                     = 207.482715685 = kJ/kmol-K
WATER                 = 0.00369003690037 * 
METHANE               = 0.369003690037 * 
ETHANE                = 0.369003690037 * 
PROPANE               = 0.184501845018 * 
n-BUTANE              = 0.0369003690037 * 
ISOPENTANE            = 0.0369003690037 * 

>> /CP1.Out
Port: /CP1.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 147.038897261 = C
P                     = 300.0 * kPa
MoleFlow              = 100.0 = kgmole/h
MassFlow              = 3002.45611808 = kg/h
VolumeFlow            = 1155.07069322 = m3/hr
StdLiqVolumeFlow      = 7.51920887853 = m3/hr
StdGasVolumeFlow      = 56856.7563839 = SCMD
Energy                = 545190.174941 = W
H                     = 19626.8462979 = kJ/kmol
S                     = 209.56601264 = kJ/kmol-K
MolecularWeight       = 30.0245612147 = 
MassDensity           = 2.5993700118 = kg/m3
Cp                    = 69.3065796666 = kJ/kmol-K
ThermalConductivity   = 0.0417206585103 = W/m-K
Viscosity             = 1.2802412163e-005 = Pa-s
molarV                = 11.5507069322 = m3/kmol
ZFactor               = 0.991925159043 = 
S                     = 209.56601264 = kJ/kmol-K
WATER                 = 0.00369003690037 = 
METHANE               = 0.369003690037 = 
ETHANE                = 0.369003690037 = 
PROPANE               = 0.184501845018 = 
n-BUTANE              = 0.0369003690037 = 
ISOPENTANE            = 0.0369003690037 = 

>> /CP1.AdiabaticEff
Port: /CP1.EfficiencySig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.8 * 

>> /CP1.PolytropicEff
Port: /CP1.PolytropicEffSig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.812928610047 = 

>> /CP1.TotalQ.In
Port: /CP1.TotalQ.In + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 119758.973721 = W

>> 
>> '/CP1.AdiabaticEff.Generic' =
>> '/CP1.PolytropicEff.Generic' =  .8
>> /CP1.In
Port: /CP1.FlowSensor.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 80.0 * C
P                     = 100.0 * kPa
MoleFlow              = 100.0 * kgmole/h
MassFlow              = 3002.45611808 = kg/h
VolumeFlow            = 2922.26279256 = m3/hr
StdLiqVolumeFlow      = 7.51920887853 = m3/hr
StdGasVolumeFlow      = 56856.7563839 = SCMD
Energy                = 425431.201219 = W
H                     = 15315.5232439 = kJ/kmol
S                     = 207.482715685 = kJ/kmol-K
MolecularWeight       = 30.0245611808 = 
MassDensity           = 1.02744220189 = kg/m3
Cp                    = 61.5246473432 = kJ/kmol-K
ThermalConductivity   = 0.0317093261254 = W/m-K
Viscosity             = 1.0954081597e-005 = Pa-s
molarV                = 29.2226279256 = m3/kmol
ZFactor               = 0.995265095981 = 
S                     = 207.482715685 = kJ/kmol-K
WATER                 = 0.00369003690037 * 
METHANE               = 0.369003690037 * 
ETHANE                = 0.369003690037 * 
PROPANE               = 0.184501845018 * 
n-BUTANE              = 0.0369003690037 * 
ISOPENTANE            = 0.0369003690037 * 

>> /CP1.Out
Port: /CP1.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 148.129963045 = C
P                     = 300.0 * kPa
MoleFlow              = 100.0 = kgmole/h
MassFlow              = 3002.45611808 = kg/h
VolumeFlow            = 1158.15405107 = m3/hr
StdLiqVolumeFlow      = 7.51920887853 = m3/hr
StdGasVolumeFlow      = 56856.7563839 = SCMD
Energy                = 547292.520164 = W
H                     = 19702.5307259 = kJ/kmol
S                     = 209.745899114 = kJ/kmol-K
MolecularWeight       = 30.0245612139 = 
MassDensity           = 2.59244969926 = kg/m3
Cp                    = 69.4282662521 = kJ/kmol-K
ThermalConductivity   = 0.0418853609861 = W/m-K
Viscosity             = 1.28309770887e-005 = Pa-s
molarV                = 11.5815405107 = m3/kmol
ZFactor               = 0.99199699293 = 
S                     = 209.745899114 = kJ/kmol-K
WATER                 = 0.00369003690037 = 
METHANE               = 0.369003690037 = 
ETHANE                = 0.369003690037 = 
PROPANE               = 0.184501845018 = 
n-BUTANE              = 0.0369003690037 = 
ISOPENTANE            = 0.0369003690037 = 

>> /CP1.AdiabaticEff
Port: /CP1.EfficiencySig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.786198329247 = 

>> /CP1.PolytropicEff
Port: /CP1.PolytropicEffSig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.8 * 

>> /CP1.TotalQ.In
Port: /CP1.TotalQ.In + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 121861.318945 = W

>> 
>> /CP1.FlowSensor.In.MoleFlow = 
>> /CP1.In
Port: /CP1.FlowSensor.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 80.0 * C
P                     = 100.0 * kPa
MoleFlow              = None
MassFlow              = None
VolumeFlow            = None
StdLiqVolumeFlow      = None
StdGasVolumeFlow      = None
Energy                = None
H                     = 15315.5232439 = kJ/kmol
S                     = 207.482715685 = kJ/kmol-K
MolecularWeight       = 30.0245611808 = 
MassDensity           = 1.02744220189 = kg/m3
Cp                    = 61.5246473432 = kJ/kmol-K
ThermalConductivity   = 0.0317093261254 = W/m-K
Viscosity             = 1.0954081597e-005 = Pa-s
molarV                = 29.2226279256 = m3/kmol
ZFactor               = 0.995265095981 = 
S                     = 207.482715685 = kJ/kmol-K
WATER                 = 0.00369003690037 * 
METHANE               = 0.369003690037 * 
ETHANE                = 0.369003690037 * 
PROPANE               = 0.184501845018 * 
n-BUTANE              = 0.0369003690037 * 
ISOPENTANE            = 0.0369003690037 * 

>> /CP1.Out
Port: /CP1.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 148.129963045 = C
P                     = 300.0 * kPa
MoleFlow              = None
MassFlow              = None
VolumeFlow            = None
StdLiqVolumeFlow      = None
StdGasVolumeFlow      = None
Energy                = None
H                     = 19702.5307259 = kJ/kmol
S                     = 209.745899114 = kJ/kmol-K
MolecularWeight       = 30.0245612139 = 
MassDensity           = 2.59244969926 = kg/m3
Cp                    = 69.4282662521 = kJ/kmol-K
ThermalConductivity   = 0.0418853609861 = W/m-K
Viscosity             = 1.28309770887e-005 = Pa-s
molarV                = 11.5815405107 = m3/kmol
ZFactor               = 0.99199699293 = 
S                     = 209.745899114 = kJ/kmol-K
WATER                 = 0.00369003690037 = 
METHANE               = 0.369003690037 = 
ETHANE                = 0.369003690037 = 
PROPANE               = 0.184501845018 = 
n-BUTANE              = 0.0369003690037 = 
ISOPENTANE            = 0.0369003690037 = 

>> /CP1.AdiabaticEff
Port: /CP1.EfficiencySig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.786198329247 = 

>> /CP1.PolytropicEff
Port: /CP1.PolytropicEffSig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.8 * 

>> /CP1.TotalQ.In
Port: /CP1.TotalQ.In + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = None

>> 
>> /CP1.TotalQ.In.Work = 121861.34
>> /CP1.In
Port: /CP1.FlowSensor.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 80.0 * C
P                     = 100.0 * kPa
MoleFlow              = 100.000017278 = kgmole/h
MassFlow              = 3002.45663684 = kg/h
VolumeFlow            = 2922.26329746 = m3/hr
StdLiqVolumeFlow      = 7.51921017769 = m3/hr
StdGasVolumeFlow      = 56856.7662075 = SCMD
Energy                = 425431.274725 = W
H                     = 15315.5232439 = kJ/kmol
S                     = 207.482715685 = kJ/kmol-K
MolecularWeight       = 30.0245611808 = 
MassDensity           = 1.02744220189 = kg/m3
Cp                    = 61.5246473432 = kJ/kmol-K
ThermalConductivity   = 0.0317093261254 = W/m-K
Viscosity             = 1.0954081597e-005 = Pa-s
molarV                = 29.2226279256 = m3/kmol
ZFactor               = 0.995265095981 = 
S                     = 207.482715685 = kJ/kmol-K
WATER                 = 0.00369003690037 * 
METHANE               = 0.369003690037 * 
ETHANE                = 0.369003690037 * 
PROPANE               = 0.184501845018 * 
n-BUTANE              = 0.0369003690037 * 
ISOPENTANE            = 0.0369003690037 * 

>> /CP1.Out
Port: /CP1.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 148.129963045 = C
P                     = 300.0 * kPa
MoleFlow              = 100.000017316 = kgmole/h
MassFlow              = 3002.45664129 = kg/h
VolumeFlow            = 1158.15425161 = m3/hr
StdLiqVolumeFlow      = 7.51921018055 = m3/hr
StdGasVolumeFlow      = 56856.7662291 = SCMD
Energy                = 547292.614933 = W
H                     = 19702.5307259 = kJ/kmol
S                     = 209.745899114 = kJ/kmol-K
MolecularWeight       = 30.0245612139 = 
MassDensity           = 2.59244969926 = kg/m3
Cp                    = 69.4282662521 = kJ/kmol-K
ThermalConductivity   = 0.0418853609861 = W/m-K
Viscosity             = 1.28309770887e-005 = Pa-s
molarV                = 11.5815405107 = m3/kmol
ZFactor               = 0.99199699293 = 
S                     = 209.745899114 = kJ/kmol-K
WATER                 = 0.00369003690037 = 
METHANE               = 0.369003690037 = 
ETHANE                = 0.369003690037 = 
PROPANE               = 0.184501845018 = 
n-BUTANE              = 0.0369003690037 = 
ISOPENTANE            = 0.0369003690037 = 

>> /CP1.AdiabaticEff
Port: /CP1.EfficiencySig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.786198329247 = 

>> /CP1.PolytropicEff
Port: /CP1.PolytropicEffSig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.8 * 

>> /CP1.TotalQ.In
Port: /CP1.TotalQ.In + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 121861.34 * W

>> 
>> /CP1.TotalQ.In.Work = 
>> /CP1.FlowSensor.In.MoleFlow = 100
>> /CP1.FlowSensor.In.T = 
>> /CP1.OutPSensor.Out.T = 148.12996
>> /CP1.In
Port: /CP1.FlowSensor.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 80.0000034009 = C
P                     = 100.0 * kPa
MoleFlow              = 100.0 * kgmole/h
MassFlow              = 3002.45611808 = kg/h
VolumeFlow            = 2922.26282112 = m3/hr
StdLiqVolumeFlow      = 7.51920887853 = m3/hr
StdGasVolumeFlow      = 56856.7563839 = SCMD
Energy                = 425431.197746 = W
H                     = 15315.5231188 = kJ/kmol
S                     = 207.482716277 = kJ/kmol-K
MolecularWeight       = 30.0245611808 = 
MassDensity           = 1.02744219185 = kg/m3
Cp                    = 61.5246477208 = kJ/kmol-K
ThermalConductivity   = 0.0317093266125 = W/m-K
Viscosity             = 1.09540816911e-005 = Pa-s
molarV                = 29.2226282112 = m3/kmol
ZFactor               = 0.995265096121 = 
S                     = 207.482716277 = kJ/kmol-K
WATER                 = 0.00369003690037 * 
METHANE               = 0.369003690037 * 
ETHANE                = 0.369003690037 * 
PROPANE               = 0.184501845018 * 
n-BUTANE              = 0.0369003690037 * 
ISOPENTANE            = 0.0369003690037 * 

>> /CP1.Out
Port: /CP1.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 148.12996 * C
P                     = 300.0 * kPa
MoleFlow              = 100.0 = kgmole/h
MassFlow              = 3002.45611808 = kg/h
VolumeFlow            = 1158.15404246 = m3/hr
StdLiqVolumeFlow      = 7.51920887853 = m3/hr
StdGasVolumeFlow      = 56856.7563839 = SCMD
Energy                = 547292.518462 = W
H                     = 19702.5306646 = kJ/kmol
S                     = 209.745898612 = kJ/kmol-K
MolecularWeight       = 30.0245612139 = 
MassDensity           = 2.59244971852 = kg/m3
Cp                    = 69.4282659125 = kJ/kmol-K
ThermalConductivity   = 0.0418853605263 = W/m-K
Viscosity             = 1.2830977009e-005 = Pa-s
molarV                = 11.5815404246 = m3/kmol
ZFactor               = 0.99199699273 = 
S                     = 209.745898612 = kJ/kmol-K
WATER                 = 0.00369003690037 = 
METHANE               = 0.369003690037 = 
ETHANE                = 0.369003690037 = 
PROPANE               = 0.184501845018 = 
n-BUTANE              = 0.0369003690037 = 
ISOPENTANE            = 0.0369003690037 = 

>> /CP1.AdiabaticEff
Port: /CP1.EfficiencySig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.786198478417 = 

>> /CP1.PolytropicEff
Port: /CP1.PolytropicEffSig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.8 * 

>> /CP1.TotalQ.In
Port: /CP1.TotalQ.In + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 121861.320716 = W

>> 
>> 
>> /CP1.PolytropicEffSig.effClone.Generic = 
>> /CP1.EfficiencySig.effClone.Generic = 0.78619833
>> /CP1.In
Port: /CP1.FlowSensor.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 79.999997201 = C
P                     = 100.0 * kPa
MoleFlow              = 100.0 * kgmole/h
MassFlow              = 3002.45611808 = kg/h
VolumeFlow            = 2922.26276906 = m3/hr
StdLiqVolumeFlow      = 7.51920887853 = m3/hr
StdGasVolumeFlow      = 56856.7563839 = SCMD
Energy                = 425431.18715 = W
H                     = 15315.5227374 = kJ/kmol
S                     = 207.482715197 = kJ/kmol-K
MolecularWeight       = 30.0245611808 = 
MassDensity           = 1.02744221015 = kg/m3
Cp                    = 61.5246470325 = kJ/kmol-K
ThermalConductivity   = 0.0317093257244 = W/m-K
Viscosity             = 1.09540815196e-005 = Pa-s
molarV                = 29.2226276906 = m3/kmol
ZFactor               = 0.995265095865 = 
S                     = 207.482715197 = kJ/kmol-K
WATER                 = 0.00369003690037 * 
METHANE               = 0.369003690037 * 
ETHANE                = 0.369003690037 * 
PROPANE               = 0.184501845018 * 
n-BUTANE              = 0.0369003690037 * 
ISOPENTANE            = 0.0369003690037 * 

>> /CP1.Out
Port: /CP1.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 148.12996 * C
P                     = 300.0 * kPa
MoleFlow              = 100.0 = kgmole/h
MassFlow              = 3002.45611808 = kg/h
VolumeFlow            = 1158.15404246 = m3/hr
StdLiqVolumeFlow      = 7.51920887853 = m3/hr
StdGasVolumeFlow      = 56856.7563839 = SCMD
Energy                = 547292.518462 = W
H                     = 19702.5306646 = kJ/kmol
S                     = 209.745898612 = kJ/kmol-K
MolecularWeight       = 30.0245612139 = 
MassDensity           = 2.59244971852 = kg/m3
Cp                    = 69.4282659125 = kJ/kmol-K
ThermalConductivity   = 0.0418853605263 = W/m-K
Viscosity             = 1.2830977009e-005 = Pa-s
molarV                = 11.5815404246 = m3/kmol
ZFactor               = 0.99199699273 = 
S                     = 209.745898612 = kJ/kmol-K
WATER                 = 0.00369003690037 = 
METHANE               = 0.369003690037 = 
ETHANE                = 0.369003690037 = 
PROPANE               = 0.184501845018 = 
n-BUTANE              = 0.0369003690037 = 
ISOPENTANE            = 0.0369003690037 = 

>> /CP1.AdiabaticEff
Port: /CP1.EfficiencySig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.78619833 * 

>> /CP1.PolytropicEff
Port: /CP1.PolytropicEffSig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.80000003407 = 

>> /CP1.TotalQ.In
Port: /CP1.TotalQ.In + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 121861.336856 = W

>> 
>> /CP1.OutPSensor.Out.T = 
>> /CP1.FlowSensor.In.T = 80
>> 
>> 
>> EXP1 = Compressor.ExpanderWithCurve()
>> /EXP1.FlowSensor.In -> /CP1.OutPSensor.Out
>> /EXP1.PolytropicEffSig.effClone.Generic = .8
>> /EXP1.OutPSensor.Out.P = 100
>> /EXP1.In
Port: /EXP1.FlowSensor.In + sim.solver.Ports.Port_Material
Connected to: /CP1.OutPSensor.Out
VapFrac               = 1.0 | 
T                     = 148.129962984 | C
P                     = 300.0 | kPa
MoleFlow              = 100.0 | kgmole/h
MassFlow              = 3002.45611808 | kg/h
VolumeFlow            = 1158.1540509 | m3/hr
StdLiqVolumeFlow      = 7.51920887853 | m3/hr
StdGasVolumeFlow      = 56856.7563839 | SCMD
Energy                = 547292.520048 | W
H                     = 19702.5307217 | kJ/kmol
S                     = 209.745899104 | kJ/kmol-K
MolecularWeight       = 30.0245612139 | 
MassDensity           = 2.59244969965 | kg/m3
Cp                    = 69.4282662453 | kJ/kmol-K
ThermalConductivity   = 0.0418853609769 | W/m-K
Viscosity             = 1.28309770871e-005 | Pa-s
molarV                = 11.581540509 | m3/kmol
ZFactor               = 0.991996992926 | 
S                     = 209.745899104 | kJ/kmol-K
WATER                 = 0.00369003690037 | 
METHANE               = 0.369003690037 | 
ETHANE                = 0.369003690037 | 
PROPANE               = 0.184501845018 | 
n-BUTANE              = 0.0369003690037 | 
ISOPENTANE            = 0.0369003690037 | 

>> /EXP1.Out
Port: /EXP1.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 103.673484387 = C
P                     = 100.0 * kPa
MoleFlow              = 100.0 = kgmole/h
MassFlow              = 3002.45611808 = kg/h
VolumeFlow            = 3120.88806006 = m3/hr
StdLiqVolumeFlow      = 7.51920887853 = m3/hr
StdGasVolumeFlow      = 56856.7563839 = SCMD
Energy                = 466756.581787 = W
H                     = 16803.2369443 = kJ/kmol
S                     = 211.559295153 = kJ/kmol-K
MolecularWeight       = 30.0245611808 = 
MassDensity           = 0.962051845597 = kg/m3
Cp                    = 64.1653588447 = kJ/kmol-K
ThermalConductivity   = 0.0351341764511 = W/m-K
Viscosity             = 1.16041647124e-005 = Pa-s
molarV                = 31.2088806006 = m3/kmol
ZFactor               = 0.996135175202 = 
S                     = 211.559295153 = kJ/kmol-K
WATER                 = 0.00369003690037 = 
METHANE               = 0.369003690037 = 
ETHANE                = 0.369003690037 = 
PROPANE               = 0.184501845018 = 
n-BUTANE              = 0.0369003690037 = 
ISOPENTANE            = 0.0369003690037 = 

>> /EXP1.AdiabaticEff
Port: /EXP1.EfficiencySig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.81140616318 = 

>> /EXP1.PolytropicEff
Port: /EXP1.PolytropicEffSig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.8 * 

>> /EXP1.TotalQ.Out
Port: /EXP1.TotalQ.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 80535.9382604 = W

>> 
>> 
>> /EXP1.PolytropicEffSig.effClone.Generic = 
>> /EXP1.EfficiencySig.effClone.Generic = 	0.81140616
>> /EXP1.In
Port: /EXP1.FlowSensor.In + sim.solver.Ports.Port_Material
Connected to: /CP1.OutPSensor.Out
VapFrac               = 1.0 | 
T                     = 148.129962984 | C
P                     = 300.0 | kPa
MoleFlow              = 100.0 | kgmole/h
MassFlow              = 3002.45611808 | kg/h
VolumeFlow            = 1158.1540509 | m3/hr
StdLiqVolumeFlow      = 7.51920887853 | m3/hr
StdGasVolumeFlow      = 56856.7563839 | SCMD
Energy                = 547292.520048 | W
H                     = 19702.5307217 | kJ/kmol
S                     = 209.745899104 | kJ/kmol-K
MolecularWeight       = 30.0245612139 | 
MassDensity           = 2.59244969965 | kg/m3
Cp                    = 69.4282662453 | kJ/kmol-K
ThermalConductivity   = 0.0418853609769 | W/m-K
Viscosity             = 1.28309770871e-005 | Pa-s
molarV                = 11.581540509 | m3/kmol
ZFactor               = 0.991996992926 | 
S                     = 209.745899104 | kJ/kmol-K
WATER                 = 0.00369003690037 | 
METHANE               = 0.369003690037 | 
ETHANE                = 0.369003690037 | 
PROPANE               = 0.184501845018 | 
n-BUTANE              = 0.0369003690037 | 
ISOPENTANE            = 0.0369003690037 | 

>> /EXP1.Out
Port: /EXP1.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 103.673484564 = C
P                     = 100.0 * kPa
MoleFlow              = 100.0 = kgmole/h
MassFlow              = 3002.45611808 = kg/h
VolumeFlow            = 3120.88806154 = m3/hr
StdLiqVolumeFlow      = 7.51920887853 = m3/hr
StdGasVolumeFlow      = 56856.7563839 = SCMD
Energy                = 466756.582103 = W
H                     = 16803.2369557 = kJ/kmol
S                     = 211.559295183 = kJ/kmol-K
MolecularWeight       = 30.0245611808 = 
MassDensity           = 0.962051845139 = kg/m3
Cp                    = 64.1653588645 = kJ/kmol-K
ThermalConductivity   = 0.0351341764769 = W/m-K
Viscosity             = 1.16041647173e-005 = Pa-s
molarV                = 31.2088806154 = m3/kmol
ZFactor               = 0.996135175208 = 
S                     = 211.559295183 = kJ/kmol-K
WATER                 = 0.00369003690037 = 
METHANE               = 0.369003690037 = 
ETHANE                = 0.369003690037 = 
PROPANE               = 0.184501845018 = 
n-BUTANE              = 0.0369003690037 = 
ISOPENTANE            = 0.0369003690037 = 

>> /EXP1.AdiabaticEff
Port: /EXP1.EfficiencySig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.81140616 * 

>> /EXP1.PolytropicEff
Port: /EXP1.PolytropicEffSig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.799999996767 = 

>> /EXP1.TotalQ.Out
Port: /EXP1.TotalQ.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 80535.9379449 = W

>> 
>> 
>> /EXP1.EfficiencySig.effClone.Generic = 
>> /EXP1.PolytropicEffSig.effClone.Generic = .8
>> /EXP1.FlowSensor.In -> 
>> /EXP1.OutPSensor.Out.T = 103.7
>> /EXP1.FlowSensor.In.P = 300
>> /EXP1.In.Fraction = 0.00369003690037 0.369003690037 0.369003690037 0.184501845018 0.0369003690037 0.0369003690037
>> /EXP1.FlowSensor.In.MoleFlow = 100
>> /EXP1.In
Port: /EXP1.FlowSensor.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 148.157363927 = C
P                     = 300.0 * kPa
MoleFlow              = 100.0 * kgmole/h
MassFlow              = 3002.45611808 = kg/h
VolumeFlow            = 1158.23148135 = m3/hr
StdLiqVolumeFlow      = 7.51920887853 = m3/hr
StdGasVolumeFlow      = 56856.7563839 = SCMD
Energy                = 547345.365659 = W
H                     = 19704.4331637 = kJ/kmol
S                     = 209.750414818 = kJ/kmol-K
MolecularWeight       = 30.0245612139 = 
MassDensity           = 2.59227638839 = kg/m3
Cp                    = 69.431322581 = kJ/kmol-K
ThermalConductivity   = 0.041889499164 = W/m-K
Viscosity             = 1.28316942133e-005 = Pa-s
molarV                = 11.5823148135 = m3/kmol
ZFactor               = 0.991998788096 = 
S                     = 209.750414818 = kJ/kmol-K
WATER                 = 0.00369003690037 * 
METHANE               = 0.369003690037 * 
ETHANE                = 0.369003690037 * 
PROPANE               = 0.184501845018 * 
n-BUTANE              = 0.0369003690037 * 
ISOPENTANE            = 0.0369003690037 * 

>> /EXP1.Out
Port: /EXP1.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 103.7 * C
P                     = 100.0 * kPa
MoleFlow              = 100.0 = kgmole/h
MassFlow              = 3002.45611808 = kg/h
VolumeFlow            = 3121.11038427 = m3/hr
StdLiqVolumeFlow      = 7.51920887853 = m3/hr
StdGasVolumeFlow      = 56856.7563839 = SCMD
Energy                = 466803.843246 = W
H                     = 16804.9383569 = kJ/kmol
S                     = 211.563810167 = kJ/kmol-K
MolecularWeight       = 30.0245611808 = 
MassDensity           = 0.961983316328 = kg/m3
Cp                    = 64.1683289976 = kJ/kmol-K
ThermalConductivity   = 0.0351380502703 = W/m-K
Viscosity             = 1.16048871413e-005 = Pa-s
molarV                = 31.2111038427 = m3/kmol
ZFactor               = 0.996136041533 = 
S                     = 211.563810167 = kJ/kmol-K
WATER                 = 0.00369003690037 = 
METHANE               = 0.369003690037 = 
ETHANE                = 0.369003690037 = 
PROPANE               = 0.184501845018 = 
n-BUTANE              = 0.0369003690037 = 
ISOPENTANE            = 0.0369003690037 = 

>> /EXP1.AdiabaticEff
Port: /EXP1.EfficiencySig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.811405640567 = 

>> /EXP1.PolytropicEff
Port: /EXP1.PolytropicEffSig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.8 * 

>> /EXP1.TotalQ.Out
Port: /EXP1.TotalQ.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 80541.5224135 = W

>> 
>> 
>> /EXP1.OutPSensor.Out.T = 
>> /EXP1.FlowSensor.In.T = 148.15736
>> /EXP1.In
Port: /EXP1.FlowSensor.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 148.15736 * C
P                     = 300.0 * kPa
MoleFlow              = 100.0 * kgmole/h
MassFlow              = 3002.45611808 = kg/h
VolumeFlow            = 1158.23147025 = m3/hr
StdLiqVolumeFlow      = 7.51920887853 = m3/hr
StdGasVolumeFlow      = 56856.7563839 = SCMD
Energy                = 547345.362249 = W
H                     = 19704.433041 = kJ/kmol
S                     = 209.750414171 = kJ/kmol-K
MolecularWeight       = 30.0245612139 = 
MassDensity           = 2.59227641323 = kg/m3
Cp                    = 69.431322143 = kJ/kmol-K
ThermalConductivity   = 0.0418894985709 = W/m-K
Viscosity             = 1.28316941105e-005 = Pa-s
molarV                = 11.5823147025 = m3/kmol
ZFactor               = 0.991998787839 = 
S                     = 209.750414171 = kJ/kmol-K
WATER                 = 0.00369003690037 * 
METHANE               = 0.369003690037 * 
ETHANE                = 0.369003690037 * 
PROPANE               = 0.184501845018 * 
n-BUTANE              = 0.0369003690037 * 
ISOPENTANE            = 0.0369003690037 * 

>> /EXP1.Out
Port: /EXP1.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 103.699996832 = C
P                     = 100.0 * kPa
MoleFlow              = 100.0 = kgmole/h
MassFlow              = 3002.45611808 = kg/h
VolumeFlow            = 3121.1103577 = m3/hr
StdLiqVolumeFlow      = 7.51920887853 = m3/hr
StdGasVolumeFlow      = 56856.7563839 = SCMD
Energy                = 466803.837894 = W
H                     = 16804.9381642 = kJ/kmol
S                     = 211.563809628 = kJ/kmol-K
MolecularWeight       = 30.0245611808 = 
MassDensity           = 0.961983324514 = kg/m3
Cp                    = 64.1683286427 = kJ/kmol-K
ThermalConductivity   = 0.0351380498075 = W/m-K
Viscosity             = 1.16048870549e-005 = Pa-s
molarV                = 31.211103577 = m3/kmol
ZFactor               = 0.99613604143 = 
S                     = 211.563809628 = kJ/kmol-K
WATER                 = 0.00369003690037 = 
METHANE               = 0.369003690037 = 
ETHANE                = 0.369003690037 = 
PROPANE               = 0.184501845018 = 
n-BUTANE              = 0.0369003690037 = 
ISOPENTANE            = 0.0369003690037 = 

>> /EXP1.AdiabaticEff
Port: /EXP1.EfficiencySig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.811405634225 = 

>> /EXP1.PolytropicEff
Port: /EXP1.PolytropicEffSig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.8 * 

>> /EXP1.TotalQ.Out
Port: /EXP1.TotalQ.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 80541.524355 = W

>> 
>> /EXP1.FlowSensor.In.MoleFlow = 
>> /EXP1.In
Port: /EXP1.FlowSensor.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 148.15736 * C
P                     = 300.0 * kPa
MoleFlow              = None
MassFlow              = None
VolumeFlow            = None
StdLiqVolumeFlow      = None
StdGasVolumeFlow      = None
Energy                = None
H                     = 19704.433041 = kJ/kmol
S                     = 209.750414171 = kJ/kmol-K
MolecularWeight       = 30.0245612139 = 
MassDensity           = 2.59227641323 = kg/m3
Cp                    = 69.431322143 = kJ/kmol-K
ThermalConductivity   = 0.0418894985709 = W/m-K
Viscosity             = 1.28316941105e-005 = Pa-s
molarV                = 11.5823147025 = m3/kmol
ZFactor               = 0.991998787839 = 
S                     = 209.750414171 = kJ/kmol-K
WATER                 = 0.00369003690037 * 
METHANE               = 0.369003690037 * 
ETHANE                = 0.369003690037 * 
PROPANE               = 0.184501845018 * 
n-BUTANE              = 0.0369003690037 * 
ISOPENTANE            = 0.0369003690037 * 

>> /EXP1.Out
Port: /EXP1.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 103.699996832 = C
P                     = 100.0 * kPa
MoleFlow              = None
MassFlow              = None
VolumeFlow            = None
StdLiqVolumeFlow      = None
StdGasVolumeFlow      = None
Energy                = None
H                     = 16804.9381642 = kJ/kmol
S                     = 211.563809628 = kJ/kmol-K
MolecularWeight       = 30.0245611808 = 
MassDensity           = 0.961983324514 = kg/m3
Cp                    = 64.1683286427 = kJ/kmol-K
ThermalConductivity   = 0.0351380498075 = W/m-K
Viscosity             = 1.16048870549e-005 = Pa-s
molarV                = 31.211103577 = m3/kmol
ZFactor               = 0.99613604143 = 
S                     = 211.563809628 = kJ/kmol-K
WATER                 = 0.00369003690037 = 
METHANE               = 0.369003690037 = 
ETHANE                = 0.369003690037 = 
PROPANE               = 0.184501845018 = 
n-BUTANE              = 0.0369003690037 = 
ISOPENTANE            = 0.0369003690037 = 

>> /EXP1.AdiabaticEff
Port: /EXP1.EfficiencySig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.811405634225 = 

>> /EXP1.PolytropicEff
Port: /EXP1.PolytropicEffSig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.8 * 

>> /EXP1.TotalQ.Out
Port: /EXP1.TotalQ.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = None

>> 
>> /EXP1.TotalQ.Out.Work = 80541.524
>> /EXP1.In
Port: /EXP1.FlowSensor.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 148.15736 * C
P                     = 300.0 * kPa
MoleFlow              = 99.9999995593 = kgmole/h
MassFlow              = 3002.45610816 = kg/h
VolumeFlow            = 1158.23146515 = m3/hr
StdLiqVolumeFlow      = 7.51920884539 = m3/hr
StdGasVolumeFlow      = 56856.7561333 = SCMD
Energy                = 547345.359837 = W
H                     = 19704.433041 = kJ/kmol
S                     = 209.750414171 = kJ/kmol-K
MolecularWeight       = 30.0245612139 = 
MassDensity           = 2.59227641323 = kg/m3
Cp                    = 69.431322143 = kJ/kmol-K
ThermalConductivity   = 0.0418894985709 = W/m-K
Viscosity             = 1.28316941105e-005 = Pa-s
molarV                = 11.5823147025 = m3/kmol
ZFactor               = 0.991998787839 = 
S                     = 209.750414171 = kJ/kmol-K
WATER                 = 0.00369003690037 * 
METHANE               = 0.369003690037 * 
ETHANE                = 0.369003690037 * 
PROPANE               = 0.184501845018 * 
n-BUTANE              = 0.0369003690037 * 
ISOPENTANE            = 0.0369003690037 * 

>> /EXP1.Out
Port: /EXP1.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 103.699996832 = C
P                     = 100.0 * kPa
MoleFlow              = 99.9999995593 = kgmole/h
MassFlow              = 3002.45610485 = kg/h
VolumeFlow            = 3121.11034395 = m3/hr
StdLiqVolumeFlow      = 7.51920884539 = m3/hr
StdGasVolumeFlow      = 56856.7561333 = SCMD
Energy                = 466803.835837 = W
H                     = 16804.9381642 = kJ/kmol
S                     = 211.563809628 = kJ/kmol-K
MolecularWeight       = 30.0245611808 = 
MassDensity           = 0.961983324514 = kg/m3
Cp                    = 64.1683286427 = kJ/kmol-K
ThermalConductivity   = 0.0351380498075 = W/m-K
Viscosity             = 1.16048870549e-005 = Pa-s
molarV                = 31.211103577 = m3/kmol
ZFactor               = 0.99613604143 = 
S                     = 211.563809628 = kJ/kmol-K
WATER                 = 0.00369003690037 = 
METHANE               = 0.369003690037 = 
ETHANE                = 0.369003690037 = 
PROPANE               = 0.184501845018 = 
n-BUTANE              = 0.0369003690037 = 
ISOPENTANE            = 0.0369003690037 = 

>> /EXP1.AdiabaticEff
Port: /EXP1.EfficiencySig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.811405634225 = 

>> /EXP1.PolytropicEff
Port: /EXP1.PolytropicEffSig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.8 * 

>> /EXP1.TotalQ.Out
Port: /EXP1.TotalQ.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 80541.524 * W

>> 
>> 
>> copy /CP1 /EXP1
Copied /CP1 /EXP1 to the clipboard
>> paste /
Pasting /CP1 /EXP1
Pasted /CP1 /EXP1 as /CP1Clone /EXP1Clone
>> /CP1.Out
Port: /CP1.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 148.129962984 = C
P                     = 300.0 * kPa
MoleFlow              = 100.0 = kgmole/h
MassFlow              = 3002.45611808 = kg/h
VolumeFlow            = 1158.1540509 = m3/hr
StdLiqVolumeFlow      = 7.51920887853 = m3/hr
StdGasVolumeFlow      = 56856.7563839 = SCMD
Energy                = 547292.520048 = W
H                     = 19702.5307217 = kJ/kmol
S                     = 209.745899104 = kJ/kmol-K
MolecularWeight       = 30.0245612139 = 
MassDensity           = 2.59244969965 = kg/m3
Cp                    = 69.4282662453 = kJ/kmol-K
ThermalConductivity   = 0.0418853609769 = W/m-K
Viscosity             = 1.28309770871e-005 = Pa-s
molarV                = 11.581540509 = m3/kmol
ZFactor               = 0.991996992926 = 
S                     = 209.745899104 = kJ/kmol-K
WATER                 = 0.00369003690037 = 
METHANE               = 0.369003690037 = 
ETHANE                = 0.369003690037 = 
PROPANE               = 0.184501845018 = 
n-BUTANE              = 0.0369003690037 = 
ISOPENTANE            = 0.0369003690037 = 

>> /EXP1.Out
Port: /EXP1.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 103.699996832 = C
P                     = 100.0 * kPa
MoleFlow              = 99.9999995593 = kgmole/h
MassFlow              = 3002.45610485 = kg/h
VolumeFlow            = 3121.11034395 = m3/hr
StdLiqVolumeFlow      = 7.51920884539 = m3/hr
StdGasVolumeFlow      = 56856.7561333 = SCMD
Energy                = 466803.835837 = W
H                     = 16804.9381642 = kJ/kmol
S                     = 211.563809628 = kJ/kmol-K
MolecularWeight       = 30.0245611808 = 
MassDensity           = 0.961983324514 = kg/m3
Cp                    = 64.1683286427 = kJ/kmol-K
ThermalConductivity   = 0.0351380498075 = W/m-K
Viscosity             = 1.16048870549e-005 = Pa-s
molarV                = 31.211103577 = m3/kmol
ZFactor               = 0.99613604143 = 
S                     = 211.563809628 = kJ/kmol-K
WATER                 = 0.00369003690037 = 
METHANE               = 0.369003690037 = 
ETHANE                = 0.369003690037 = 
PROPANE               = 0.184501845018 = 
n-BUTANE              = 0.0369003690037 = 
ISOPENTANE            = 0.0369003690037 = 

>> /CP1Clone.Out
Port: /CP1Clone.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = None
T                     = None
P                     = 300.0 * kPa
MoleFlow              = None
MassFlow              = None
VolumeFlow            = None
StdLiqVolumeFlow      = None
StdGasVolumeFlow      = None
Energy                = None
H                     = None
S                     = None
MolecularWeight       = None
MassDensity           = None
Cp                    = None
ThermalConductivity   = None
Viscosity             = None
molarV                = None
ZFactor               = None
S                     = None
WATER                 = None
METHANE               = None
ETHANE                = None
PROPANE               = None
n-BUTANE              = None
ISOPENTANE            = None

>> /EXP1Clone.Out
Port: /EXP1Clone.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = None
T                     = None
P                     = 100.0 * kPa
MoleFlow              = None
MassFlow              = None
VolumeFlow            = None
StdLiqVolumeFlow      = None
StdGasVolumeFlow      = None
Energy                = None
H                     = None
S                     = None
MolecularWeight       = None
MassDensity           = None
Cp                    = None
ThermalConductivity   = None
Viscosity             = None
molarV                = None
ZFactor               = None
S                     = None
WATER                 = None
METHANE               = None
ETHANE                = None
PROPANE               = None
n-BUTANE              = None
ISOPENTANE            = None

>> 
>> clear
>> read pump.tst
Processing pump.tst
>> # pump test
>> units SI
>> $thermo = VirtualMaterials.Advanced_Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo +  WATER
WATER 
>> 
>> # A theoretical pump: calculate flow from delP -------------
>> pump = Pump.Pump()
>> cd pump
/pump
>> In.Fraction = 1.0
>> In.P = 101.325
>> In.T = 20
>> 
>> Out.P = 300.0
>> Efficiency = 0.8
>> In
Port: /pump.Ideal.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 20.0 * C
P                  = 101.325 * kPa
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow is invalid
H                  = -34877.2269632 = kJ/kmol
Energy             = None
MolecularWeight    = 18.01528 = 
ZFactor            = 0.000881443274783 = 
WATER              = 1.0 * 

>> Out
Port: /pump.Waste.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 20.0247059822 = C
P                  = 300.0 * kPa
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow is invalid
H                  = -34871.9614913 = kJ/kmol
Energy             = None
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00260950729548 = 
WATER              = 1.0 = 

>> 
>> InQ = 300
>> In
Port: /pump.Ideal.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 20.0 * C
P                  = 101.325 * kPa
MoleFlow           = 205.109820409 = kgmole/h
MassFlow           = 3695.11084541 = kg/h
VolumeFlow         = 3.70366978471 = m3/hr
StdLiqVolumeFlow   = 3.69861461351 = m3/hr
H                  = -34877.2269632 = kJ/kmol
Energy             = -1987128.26633 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.000881443274783 = 
WATER              = 1.0 * 

>> Out
Port: /pump.Waste.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 20.0247059822 = C
P                  = 300.0 * kPa
MoleFlow           = 205.109820409 = kgmole/h
MassFlow           = 3695.11084541 = kg/h
VolumeFlow         = 3.70359658166 = m3/hr
StdLiqVolumeFlow   = 3.69861461351 = m3/hr
H                  = -34871.9614913 = kJ/kmol
Energy             = -1986828.26633 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00260950729548 = 
WATER              = 1.0 = 

>> InQ
Port: /pump.TotalQ.In + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 300.0 * W

>> 
>> InQ = None
>> In.T = 
>> Out.T = 20.0247
>> In.MoleFlow = 205.10982071
>> In
Port: /pump.Ideal.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 19.9999938965 = C
P                  = 101.325 * kPa
MoleFlow           = 205.10982071 * kgmole/h
MassFlow           = 3695.11085084 = kg/h
VolumeFlow         = 3.70366978392 = m3/hr
StdLiqVolumeFlow   = 3.69861461894 = m3/hr
H                  = -34877.2274551 = kJ/kmol
Energy             = -1987128.29727 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.000881443289687 = 
WATER              = 1.0 * 

>> Out
Port: /pump.Waste.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 20.0247 * C
P                  = 300.0 * kPa
MoleFlow           = 205.10982071 = kgmole/h
MassFlow           = 3695.11085084 = kg/h
VolumeFlow         = 3.70359658101 = m3/hr
StdLiqVolumeFlow   = 3.69861461894 = m3/hr
H                  = -34871.9615318 = kJ/kmol
Energy             = -1986828.27155 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00260950733873 = 
WATER              = 1.0 = 

>> InQ
Port: /pump.TotalQ.In + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 300.001968052 = W

>> 
>> Out.T =
>> In.T = 20.0
>> 
>> cd /
/
>> 
>> 
>> 
>> # A real pump with one set of pump curves ------------------
>> # where head-flow-efficiency-power are restricted
>> realPump = Pump.PumpWithCurve()
>> cd realPump 
/realPump
>> 
>> NumberTables = 1
>> PumpSpeed0 = 100.0
>> FlowCurve0 = 0.0 1000.0 2000.0 3000.0 4000.0 5000.0 6000.0 7000.0  # mass flow
>> HeadCurve0 = 0.0  10.0   20.0   30.0   40.0   50.0   60.0   70.0
>> EfficiencyCurve0 = 0.0 0.5 0.7 0.8 0.8 0.7 0.5 0.0
>> 
>> PumpSpeed = 30.0        # operating pump speed, not used here
>> In.Fraction = 1.0
>> In.P = 101.325
>> In.T = 20
>> In.VolumeFlow = 3600.0     # calculate delP from flow
>> 
>> In
Port: /realPump.FlowSensor.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 20.0 * C
P                  = 101.325 * kPa
MoleFlow           = 199368.57128 = kgmole/h
MassFlow           = 3591680.63482 = kg/h
VolumeFlow         = 3600.0 * m3/hr
StdLiqVolumeFlow   = 3595.08632859 = m3/hr
H                  = -34877.2269632 = kJ/kmol
Energy             = -1931506363.86 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.000881443274783 = 
WATER              = 1.0 * 

>> Out
Port: /realPump.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 20.043529129 = C
P                  = 453.668870276 = kPa
MoleFlow           = 199368.57128 = kgmole/h
MassFlow           = 3591680.63482 = kg/h
VolumeFlow         = 3599.87594234 = m3/hr
StdLiqVolumeFlow   = 3595.08632859 = m3/hr
H                  = -34867.8890478 = kJ/kmol
Energy             = -1930989228.62 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00394589510967 = 
WATER              = 1.0 = 

>> InQ
Port: /realPump.TotalQ.In + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 517135.238989 = W

>> 
>> # calculate flow from delP
>> In.VolumeFlow = None
>> Out
Port: /realPump.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
WATER              = 1.0 = 

>> Out.P = 400.0
>> Out
Port: /realPump.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 20.0369606972 = C
P                  = 400.0 * kPa
MoleFlow           = 169000.834272 = kgmole/h
MassFlow           = 3044597.34964 = kg/h
VolumeFlow         = 3051.55996619 = m3/hr
StdLiqVolumeFlow   = 3047.48428958 = m3/hr
H                  = -34869.3114359 = kJ/kmol
Energy             = -1636928534.21 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00347918287938 = 
WATER              = 1.0 = 

>> InQ
Port: /realPump.TotalQ.In + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 371591.86729 = W

>> 
>> 
>> copy /pump /realPump
Copied /pump /realPump to the clipboard
>> paste /
Pasting /pump /realPump
Pasted /pump /realPump as /pumpClone /realPumpClone
>> /pump.Out
Port: /pump.Waste.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 20.0247059822 = C
P                  = 300.0 * kPa
MoleFlow           = 205.10982071 = kgmole/h
MassFlow           = 3695.11085084 = kg/h
VolumeFlow         = 3.7035965871 = m3/hr
StdLiqVolumeFlow   = 3.69861461894 = m3/hr
H                  = -34871.9614913 = kJ/kmol
Energy             = -1986828.26925 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00260950729548 = 
WATER              = 1.0 = 

>> /pumpClone.Out
Port: /pumpClone.Waste.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = 300.0 * kPa
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
WATER              = None

>> /realPump.Out
Port: /realPump.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 20.0369606972 = C
P                  = 400.0 * kPa
MoleFlow           = 169000.834272 = kgmole/h
MassFlow           = 3044597.34964 = kg/h
VolumeFlow         = 3051.55996619 = m3/hr
StdLiqVolumeFlow   = 3047.48428958 = m3/hr
H                  = -34869.3114359 = kJ/kmol
Energy             = -1636928534.21 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00347918287938 = 
WATER              = 1.0 = 

>> /realPumpClone.Out
Port: /realPumpClone.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = 400.0 * kPa
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
WATER              = None

>> 
>> clear
>> read controller.tst
Processing controller.tst
>> # hysim 1.5 tutorial problem
>> units Field
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + Methane Ethane Propane
Methane Ethane Propane 
>> thermo + isoButane n-Butane isoPentane n-Pentane n-Hexane
isoButane n-Butane isoPentane n-Pentane n-Hexane 
>> thermo + n-Heptane n-Octane
n-Heptane n-Octane 
>> 
>> Feed = Sensor.PropertySensor()
>> Feed.SignalType = T
>> Feed.In.T = 60
>> Feed.In.P = 600
>> Feed.In.MoleFlow = 144
>> Feed.In.Fraction = 70 20 10 9 8 7 6 5 4 3 
>> 
>> # Inlet separator
>> Sep = Flash.SimpleFlash()
>> Feed.Out -> Sep.In
>> 
>> Gas-Gas = Heater.HeatExchanger()
>> cd Gas-Gas
/Gas-Gas
>> DeltaPH = 10
>> DeltaPC = 10
>> DeltaTHI = 10
>> cd ..
/
>> 
>> Sep.Vap -> Gas-Gas.InH
>> 
>> Chiller = Heater.HeatExchanger()
>> cd Chiller
/Chiller
>> DeltaPH = 10
>> DeltaPC = .1
>> DeltaTCI = 5  # 5 degree approach on the hot end
>> cd ..
/
>> 
>> Gas-Gas.OutH -> Chiller.InH
>> 
>> LTS = Flash.SimpleFlash()
>> 
>> LTS-Feed = Sensor.PropertySensor()
>> LTS-Feed.SignalType = T
>> LTS-Feed.In.T = 0
>> 
>> Chiller.OutH -> LTS-Feed.In
>> LTS-Feed.Out -> LTS.In
>> 
>> LTS.Vap -> Gas-Gas.InC
>> 
>> # dew point check - use mole balance to copy material of the sales gas
>> DP = Balance.BalanceOp()
>> cd DP
/DP
>> NumberStreamsInMat = 1
>> NumberStreamsOutMat = 1
>> BalanceType = 2 # Mole balance
>> cd ..
/
>> 
>> Gas-Gas.OutC -> DP.In0
>> DP.Out0.P = 815
>> DP.Out0.VapFrac = 1.
>> DewPoint = Sensor.PropertySensor()
>> DewPoint.SignalType = T
>> DP.Out0 -> DewPoint.In
>> 
>> # mix flash liquid streams
>> Mixer = Mixer.Mixer()
>> Sep.Liq0 -> Mixer.In0
>> LTS.Liq0 -> Mixer.In1
>> 
>> Tower_Feed = Sensor.PropertySensor()
>> Tower_Feed.SignalType = T
>> Mixer.Out -> Tower_Feed.In
>> 
>> Mixer.Out
Port: /Mixer.Out + sim.solver.Ports.Port_Material
Connected to: /Tower_Feed.In
VapFrac            = 0.0143972758343 = 
T                  = 56.0845180389 = F
P                  = 580.0 = psia
MoleFlow           = 77.3895096817 = lbmole/h
MassFlow           = 4065.80804724 = lb/h
VolumeFlow         = 0.0338205371776 = ft3/s
StdLiqVolumeFlow   = 0.0332405804806 = ft3/s
H                  = -1124.44180613 = Btu/lbmol
Energy             = -87005.3666731 = Btu/hr
MolecularWeight    = 52.5369402644 = 
ZFactor            = 0.164863034902 = 
METHANE            = 0.198493739542 = 
ETHANE             = 0.153594457951 = 
PROPANE            = 0.109732297747 = 
ISOBUTANE          = 0.1112901199 = 
n-BUTANE           = 0.10090216652 = 
ISOPENTANE         = 0.0907735676934 = 
n-PENTANE          = 0.0780195568259 = 
n-HEXANE           = 0.0654744608358 = 
n-HEPTANE          = 0.0524092755195 = 
n-OCTANE           = 0.0393103574644 = 

>> DewPoint.Out
Port: /DewPoint.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 1.2980346889 = F
P                  = 815.0 = psia
MoleFlow           = 66.6104903183 = lbmole/h
MassFlow           = 1274.04747276 = lb/h
VolumeFlow         = 0.0787070854455 = ft3/s
StdLiqVolumeFlow   = 0.0174754854327 = ft3/s
H                  = 2881.53007158 = Btu/lbmol
Energy             = 191907.854094 = Btu/hr
MolecularWeight    = 19.1268292227 = 
ZFactor            = 0.700806197488 = 
METHANE            = 0.835072404499 = 
ETHANE             = 0.126032555984 = 
PROPANE            = 0.0247516020921 = 
ISOBUTANE          = 0.00771759447223 = 
n-BUTANE           = 0.00456244747756 = 
ISOPENTANE         = 0.00110597674764 = 
n-PENTANE          = 0.000699766563633 = 
n-HEXANE           = 5.083455227e-005 = 
n-HEPTANE          = 6.15357941085e-006 = 
n-OCTANE           = 6.64032656698e-007 = 

>> LTS-Feed.In.T
/LTS-Feed.In.T= 0.0 * F
>> Feed.In.T
/Feed.In.T= 60.0 * F
>> 
>> hold  # keep things in limbo while controllers are set up
>> 
>> #remove previous fixed values
>> LTS-Feed.In.T = None
>> Feed.In.T = None
>> 
>> DPControl = Controller.Controller()
>> DPControl.In -> DewPoint.Signal
>> DPControl.Out -> LTS-Feed.Signal
ControllerConnect ('/DPControl.Out', '/LTS-Feed.Signal')
ControllerConnect ('/DPControl.Out', '/LTS-Feed.Signal')
ControllerConnect ('/DPControl.Out', '/LTS-Feed.Signal')
>> DPControl.Out = 0
>> DPControl.Target = 15
>> DPControl.StepSize = 10
>> 
>> TLiqCont = Controller.Controller()
>> TLiqCont.In -> Tower_Feed.Signal
>> TLiqCont.Out -> Feed.Signal
ControllerConnect ('/TLiqCont.Out', '/Feed.Signal')
ControllerConnect ('/TLiqCont.Out', '/Feed.Signal')
ControllerConnect ('/TLiqCont.Out', '/Feed.Signal')
>> TLiqCont.Out = 60
>> TLiqCont.Target = 50
>> TLiqCont.StepSize = 10
>> 
>> go
Controller solver for / calculating derivative 0
Controller solver for / calculating derivative 1
Controller solver for / error - 0.024297
Controller solver for / error - 0.001144
Controller solver for / error - 0.000068
>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
>> 
>> Mixer.Out.T
/Mixer.Out.T= 50.0101215885 = F
>> DewPoint.Out.T
/DewPoint.Out.T= 15.0021057229 = F
>> LTS-Feed.In.T
/LTS-Feed.In.T= 13.4020567578 = F
>> Feed.In.T
/Feed.In.T= 51.6063838548 = F
>> Tower_Feed.In.T
/Tower_Feed.In.T= 50.0101215885 | F
>> 
>> cd /RootClone
/RootClone
>> Mixer.Out.T
/RootClone.Mixer.Out.T= 50.0101215885 = F
>> DewPoint.Out.T
/RootClone.DewPoint.Out.T= 15.0021057229 = F
>> LTS-Feed.In.T
/RootClone.LTS-Feed.In.T= 13.4020567578 = F
>> Feed.In.T
/RootClone.Feed.In.T= 51.6063838548 = F
>> Tower_Feed.In.T
/RootClone.Tower_Feed.In.T= 50.0101215885 | F
>> 
>> cd /
/
>> 
>> # now let's make it fail
>> TLiqCont.Minimum = 53
>> TLiqCont.Out = 60
Controller solver for / error - 0.007293
Controller solver for / error - 0.007293
Controller solver for / calculating derivative 0
Controller solver for / calculating derivative 1
Controller solver for / error - 0.007931
Controller solver for / failed to converge
>> hold  # so it doesn't try and solve on each command
>> 
>> Feed.In.T
/Feed.In.T= 53.0 = F
>> DewPoint.In.T
/DewPoint.In.T= 14.8531036478 | F
>> Tower_Feed.In.T
/Tower_Feed.In.T= 51.2807704004 | F
>> 
>> #Make sure disconnecting doesn't screw things up
>> #TLiqCont.In ->
>> #Tower_Feed.Signal =  10.0
>> 
>> clear
>> read gasplant.tst
Processing gasplant.tst
>> # hysim 1.5 tutorial problem
>> units Field
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + Methane Ethane Propane
Methane Ethane Propane 
>> thermo + isoButane n-Butane isoPentane n-Pentane n-Hexane
isoButane n-Butane isoPentane n-Pentane n-Hexane 
>> thermo + n-Heptane n-Octane
n-Heptane n-Octane 
>> 
>> Feed = Stream.Stream_Material()
>> Feed.In.T = 60
>> Feed.In.P = 600
>> Feed.In.MoleFlow = 144
>> Feed.In.Fraction = 70 20 10 9 8 7 6 7 4 3 
>> 
>> # Inlet separator
>> Sep = Flash.SimpleFlash()
>> Feed.Out -> Sep.In
>> 
>> Gas-Gas = Heater.HeatExchanger()
>> cd Gas-Gas
/Gas-Gas
>> DeltaPH = 10
>> DeltaPC = 10
>> DeltaTHI = 10
>> cd ..
/
>> 
>> Sep.Vap -> Gas-Gas.InH
>> 
>> Chiller = Heater.HeatExchanger()
>> cd Chiller
/Chiller
>> DeltaPH = 10
>> DeltaPC = .1
>> DeltaTCI = 5  # 5 degree approach on the hot end
>> cd ..
/
>> 
>> Gas-Gas.OutH -> Chiller.InH
>> 
>> # create a nested Flowsheet for the LTS and dewpoint calc
>> # this prevents the controller solver from resolving everything during
>> # its iterations
>> 
>> ContFS = Flowsheet.Flowsheet()
>> cd ContFS
/ContFS
>> 
>> LTS = Flash.SimpleFlash()
>> 
>> #LTS-Feed = Sensor.PropertySensor()
>> #LTS-Feed.SignalType = T
>> LTS-Feed = Stream.Stream_Material()
>> LTS-Feed.Signal = Stream.SensorPort('T')
>> 
>> LTS-Vap = Stream.Stream_Material()
>> LTS-Vap.DPFeed = Stream.ClonePort(0)   # outgoing clone for dew point
>> 
>> /Chiller.OutH -> LTS-Feed.In
>> LTS-Feed.Out -> LTS.In
>> 
>> LTS.Vap -> LTS-Vap.In
>> LTS-Vap.Out -> /Gas-Gas.InC
>> 
>> # dew point check - use mole balance to copy material of the sales gas
>> DP = Balance.BalanceOp()
>> cd DP
/ContFS.DP
>> NumberStreamsInMat = 1
>> NumberStreamsOutMat = 1
>> BalanceType = 2 # Mole balance
>> cd ..
/ContFS
>> 
>> LTS-Vap.DPFeed -> DP.In0
>> DP.Out0.P = 815
>> DP.Out0.VapFrac = 1.
>> DewPoint = Sensor.PropertySensor()
>> DewPoint.SignalType = T
>> DP.Out0 -> DewPoint.In
>> 
>> DPControl = Controller.Controller()
>> DPControl.In -> DewPoint.Signal
>> DPControl.Out -> LTS-Feed.Signal
ControllerConnect ('/ContFS.DPControl.Out', '/ContFS.LTS-Feed.Signal')
ControllerConnect ('/ContFS.DPControl.Out', '/ContFS.LTS-Feed.Signal')
ControllerConnect ('/ContFS.DPControl.Out', '/ContFS.LTS-Feed.Signal')
>> DPControl.Out = 0
>> DPControl.Target = 15
>> DPControl.StepSize = 10
Controller solver for /ContFS calculating derivative 0
Controller solver for /ContFS error - 0.019507
Controller solver for /ContFS error - 0.000087
>> 
>> # return to root flowsheet
>> cd /
/
>> 
>> # mix flash liquid streams
>> Mixer = Mixer.Mixer()
>> Sep.Liq0 -> Mixer.In0
>> ContFS.LTS.Liq0 -> Mixer.In1
>> 
>> deprop = Tower.Tower()
>> deprop.Stage_0 + 10  # twelve stages`
>> 
>> cd deprop.Stage_0
/deprop.Stage_0
>> v = Tower.VapourDraw()
>> v.Port.P = 200
>> reflux = Tower.RefluxRatioSpec()
>> reflux.Port = 1.0
>> 
>> cond = Tower.EnergyFeed(0)
>> estT = Tower.Estimate('T')
>> estT.Value = 40
>> 
>> cd ../Stage_5
/deprop.Stage_5
>> f = Tower.Feed()
>> /Mixer.Out -> f.Port
>> 
>> cd ../Stage_11
/deprop.Stage_11
>> l = Tower.LiquidDraw()
>> l.Port.P = 205
>> l.Port.Fraction.PROPANE = .02
>> 
>> reb = Tower.EnergyFeed(1)
>> estT = Tower.Estimate('T')
>> estT.Value = 200
>> 
>> cd ..
/deprop
>> 
>> /overhead = Stream.Stream_Material()
>> /overhead.In -> Stage_0.v.Port
>> 
>> /bottoms = Stream.Stream_Material()
>> /bottoms.In -> Stage_11.l.Port
>> 
>> 
>> 
>> TryToSolve = 1  # start calculation
Calculating Jacobian for /deprop
Calculating disturbance 10 of 12 in jacobian of /deprop
/deprop Inner Error 0.076719
/deprop Inner Error 0.014282
/deprop Inner Error 0.000526
/deprop Inner Error 0.000057
/deprop Iteration 1 Outer Error 0.075904
/deprop Inner Error 0.050545
/deprop Inner Error 0.006186
/deprop Inner Error 0.000670
/deprop Inner Error 0.000109
/deprop Inner Error 0.000003
/deprop Iteration 2 Outer Error 0.008549
/deprop Inner Error 0.035529
/deprop Inner Error 0.003508
/deprop Inner Error 0.000282
/deprop Inner Error 0.000032
/deprop Iteration 3 Outer Error 0.001361
/deprop Inner Error 0.001328
/deprop Inner Error 0.000116
/deprop Inner Error 0.000009
/deprop Iteration 4 Outer Error 0.000249
/deprop Inner Error 0.000190
/deprop Inner Error 0.000015
/deprop Iteration 5 Outer Error 0.000056
/deprop Inner Error 0.000013
>> 
>> /overhead.Out
Port: /overhead.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 17.4359710711 = F
P                  = 200.0 = psia
MoleFlow           = 34.1182708855 = lbmole/h
MassFlow           = 923.531442238 = lb/h
VolumeFlow         = 0.210275305026 = ft3/s
StdLiqVolumeFlow   = 0.0108598708275 = ft3/s
H                  = 3956.99930265 = Btu/lbmol
Energy             = 134983.271364 = Btu/hr
MolecularWeight    = 27.0685300945 = 
ZFactor            = 0.866675135178 = 
METHANE            = 0.442351985643 = 
ETHANE             = 0.336580718029 = 
PROPANE            = 0.213707307828 = 
ISOBUTANE          = 0.00604454295513 = 
n-BUTANE           = 0.00130674728145 = 
ISOPENTANE         = 6.21441031027e-006 = 
n-PENTANE          = 2.48260163284e-006 = 
n-HEXANE           = 1.2491945146e-009 = 
n-HEPTANE          = 2.46298766737e-012 = 
n-OCTANE           = 5.69413269815e-015 = 

>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 258.619969475 = F
P                  = 205.0 = psia
MoleFlow           = 43.3489473178 = lbmole/h
MassFlow           = 3219.61717001 = lb/h
VolumeFlow         = 0.0288130846679 = ft3/s
StdLiqVolumeFlow   = 0.0227273964507 = ft3/s
H                  = 6368.46215368 = Btu/lbmol
Energy             = 276019.706843 = Btu/hr
MolecularWeight    = 74.272095846 = 
ZFactor            = 0.0636363381943 = 
METHANE            = 8.16478570095e-008 = 
ETHANE             = 0.000109920640066 = 
PROPANE            = 0.02 = 
ISOBUTANE          = 0.187590861532 = 
n-BUTANE           = 0.174095242236 = 
ISOPENTANE         = 0.158793129369 = 
n-PENTANE          = 0.136678913602 = 
n-HEXANE           = 0.161271980835 = 
n-HEPTANE          = 0.0922555167735 = 
n-OCTANE           = 0.0692036981012 = 

>> 
>> 
>> # add refrigeration
>> # fix the chiller cold outlet as boiling refrigerant
>> cd /Chiller.OutC
/Chiller.ColdSide.Out
>> VapFrac = 1
>> Fraction = 0 0 1 0 0 0 0 0 0 0
>> cd /
/
>> Chiller.DeltaTHI = 30
>> 
>> # add valve
>> V-100 = Valve.Valve()
>> V-100.Out -> Chiller.InC
>> 
>> # add condensor
>> E-103 = Heater.Cooler()
>> E-103.Out -> V-100.In
>> 
>> # Condensor outlet is bubble point liquid at air cooler kind of T
>> E-103.Out.T = 120
>> E-103.Out.VapFrac = 0
>> E-103.DeltaP = 5
>> 
>> V-100.Out
Port: /V-100.Out + sim.solver.Ports.Port_Material
Connected to: /Chiller.ColdSide.In
VapFrac            = 0.450569885527 = 
T                  = 2.81256840575 = F
P                  = 40.5248033406 | psia
MoleFlow           = 5.74181467269 | lbmole/h
MassFlow           = 253.188877917 | lb/h
VolumeFlow         = 0.0827316554254 | ft3/s
StdLiqVolumeFlow   = 0.00223327662481 | ft3/s
H                  = 833.169320593 = Btu/lbmol
Energy             = 4783.09936384 | Btu/hr
MolecularWeight    = 44.09562 = 
ZFactor            = 0.423533753434 = 
METHANE            = 0.0 | 
ETHANE             = 0.0 | 
PROPANE            = 1.0 | 
ISOBUTANE          = 0.0 | 
n-BUTANE           = 0.0 | 
ISOPENTANE         = 0.0 | 
n-PENTANE          = 0.0 | 
n-HEXANE           = 0.0 | 
n-HEPTANE          = 0.0 | 
n-OCTANE           = 0.0 | 

>> 
>> # compressor isn't needed to calculate flows, but add it for completeness
>> K-100 = Compressor.Compressor()
>> K-100.Efficiency = .75
>> 
>> Chiller.OutC -> K-100.In
>> 
>> K-100.Out -> E-103.In
>> K-100.Out
Port: /K-100.Waste.Out + sim.solver.Ports.Port_Material
Connected to: /E-103.In
VapFrac            = 1.0 = 
T                  = 157.514291564 = F
P                  = 248.506530698 | psia
MoleFlow           = 5.74181467269 = lbmole/h
MassFlow           = 253.188877917 = lb/h
VolumeFlow         = 0.0331805518842 = ft3/s
StdLiqVolumeFlow   = 0.00223327662481 = ft3/s
H                  = 7116.9898399 = Btu/lbmol
Energy             = 40857.5648842 = Btu/hr
MolecularWeight    = 44.09562 = 
ZFactor            = 0.78054384428 = 
METHANE            = 0.0 = 
ETHANE             = 0.0 = 
PROPANE            = 1.0 = 
ISOBUTANE          = 0.0 = 
n-BUTANE           = 0.0 = 
ISOPENTANE         = 0.0 = 
n-PENTANE          = 0.0 = 
n-HEXANE           = 0.0 = 
n-HEPTANE          = 0.0 = 
n-OCTANE           = 0.0 = 

>> E-103.OutQ
Port: /E-103.OutQ + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 36074.4655204 = Btu/hr

>> 
>> 
>> # try making some changes
>> cd /
/
>> Feed.In.T = 55
Controller solver for /ContFS error - 0.000010
/deprop Inner Error 0.017148
/deprop Inner Error 0.000475
/deprop Inner Error 0.000114
/deprop Inner Error 0.000023
/deprop Iteration 1 Outer Error 0.002337
/deprop Inner Error 0.007531
/deprop Inner Error 0.000363
/deprop Inner Error 0.000013
/deprop Iteration 2 Outer Error 0.000320
/deprop Inner Error 0.000250
/deprop Inner Error 0.000030
/deprop Iteration 3 Outer Error 0.000055
/deprop Inner Error 0.000032
>> bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 258.541767591 = F
P                  = 205.0 = psia
MoleFlow           = 43.3772724384 = lbmole/h
MassFlow           = 3221.18062666 = lb/h
VolumeFlow         = 0.028826221093 = ft3/s
StdLiqVolumeFlow   = 0.0227396727313 = ft3/s
H                  = 6363.78874774 = Btu/lbmol
Energy             = 275997.378454 = Btu/hr
MolecularWeight    = 74.2596397973 = 
ZFactor            = 0.0636307056906 = 
METHANE            = 7.888742922e-008 = 
ETHANE             = 0.00010693878787 = 
PROPANE            = 0.02 = 
ISOBUTANE          = 0.188060313856 = 
n-BUTANE           = 0.174148060531 = 
ISOPENTANE         = 0.158631241722 = 
n-PENTANE          = 0.136544746392 = 
n-HEXANE           = 0.161155603879 = 
n-HEPTANE          = 0.0921942920103 = 
n-OCTANE           = 0.0691584187658 = 

>> ContFS.DewPoint.In.T
/ContFS.DewPoint.In.T= 14.9981231789 | F
>> 
>> ContFS.DPControl.Target = 10
Controller solver for /ContFS error - 0.000232
Controller solver for /ContFS error - 0.000001
/deprop Inner Error 0.002206
/deprop Inner Error 0.000295
/deprop Inner Error 0.000008
/deprop Iteration 1 Outer Error 0.000118
/deprop Inner Error 0.001200
/deprop Inner Error 0.000013
/deprop Iteration 2 Outer Error 0.000032
/deprop Inner Error 0.000061
>> ContFS.DewPoint.In.T
/ContFS.DewPoint.In.T= 9.99989320245 | F
>> bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 258.344833205 = F
P                  = 205.0 = psia
MoleFlow           = 43.5091550684 = lbmole/h
MassFlow           = 3229.31962836 = lb/h
VolumeFlow         = 0.0288984312855 = ft3/s
StdLiqVolumeFlow   = 0.0228011301777 = ft3/s
H                  = 6351.65955247 = Btu/lbmol
Energy             = 276308.868224 = Btu/hr
MolecularWeight    = 74.2216120558 = 
ZFactor            = 0.0636141876524 = 
METHANE            = 7.83250882342e-008 = 
ETHANE             = 0.000106572526953 = 
PROPANE            = 0.02 = 
ISOBUTANE          = 0.188738420798 = 
n-BUTANE           = 0.174566813562 = 
ISOPENTANE         = 0.158578459492 = 
n-PENTANE          = 0.136423831085 = 
n-HEXANE           = 0.1607164783 = 
n-HEPTANE          = 0.0919197558562 = 
n-OCTANE           = 0.0689493687852 = 

>> 
>> 
>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
/RootClone.deprop Inner Error 0.000001
/RootClone.deprop Iteration 1 Outer Error 0.000004
/RootClone.deprop Inner Error 0.000002
>> cd /RootClone
/RootClone
>> ContFS.DewPoint.In.T
/RootClone.ContFS.DewPoint.In.T= 9.99989320245 | F
>> bottoms.Out
Port: /RootClone.bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 258.344881 = F
P                  = 205.0 = psia
MoleFlow           = 43.5091517688 = lbmole/h
MassFlow           = 3229.31930094 = lb/h
VolumeFlow         = 0.0288984323825 = ft3/s
StdLiqVolumeFlow   = 0.0228011280241 = ft3/s
H                  = 6351.66206081 = Btu/lbmol
Energy             = 276308.956387 = Btu/hr
MolecularWeight    = 74.2216101591 = 
ZFactor            = 0.0636141906568 = 
METHANE            = 7.83223019934e-008 = 
ETHANE             = 0.000106569585092 = 
PROPANE            = 0.02 = 
ISOBUTANE          = 0.188738563565 = 
n-BUTANE           = 0.174566827099 = 
ISOPENTANE         = 0.158578471538 = 
n-PENTANE          = 0.136423841396 = 
n-HEXANE           = 0.160716490489 = 
n-HEPTANE          = 0.0919197628272 = 
n-OCTANE           = 0.0689493740141 = 

>> #Feed.In.T = 55
>> #bottoms.Out
>> #ContFS.DewPoint.In.T
>> cd /
/
>> 
>> 
>> 
>> 
>> clear
>> read valueOf.tst
Processing valueOf.tst
>> # Create a pre-heater, from heater.tst
>> units SI
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + PROPANE n-BUTANE ISOBUTANE n-PENTANE
PROPANE n-BUTANE ISOBUTANE n-PENTANE 
>> 
>> preHeater = Heater.Heater()
>> preHeater
Operation: preHeater = sim.unitop.Heater.Heater
Port: In = sim.solver.Ports.Port_Material
Port: Out = sim.solver.Ports.Port_Material
Port: InQ = sim.solver.Ports.Port_Energy
Port: DeltaP = sim.solver.Ports.Port_Signal
Parameter: Ignored = None
Parameter: NumberSegments = 1
>> cd preHeater
/preHeater
>> In.Fraction
PROPANE                     = None
n-BUTANE                    = None
ISOBUTANE                   = None
n-PENTANE                   = None

>> In.Fraction = .25 .25 .25 .25
>> In.P = 101.325
>> In.H = -7200
>> In.T
/preHeater.In.T= -16.8256453172 = C
>> In.MoleFlow = 10
>> InQ.Energy = 1000000
>> DeltaP
Port: /preHeater.DeltaP + sim.solver.Ports.Port_Signal
Connected to: None
DP   = None

>> DeltaP.DP = 0.1
>> In
Port: /preHeater.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.06935770054 = 
T                  = -16.8256453172 = C
P                  = 101.325 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 581.222 = kg/h
VolumeFlow         = 14.9801812132 = m3/hr
StdLiqVolumeFlow   = 1.01168513413 = m3/hr
H                  = -7200.0 * kJ/kmol
Energy             = -20000.0 = W
MolecularWeight    = 58.1222050264 = 
ZFactor            = 0.0712218769665 = 
PROPANE            = 0.25 * 
n-BUTANE           = 0.25 * 
ISOBUTANE          = 0.25 * 
n-PENTANE          = 0.25 * 

>> Out
Port: /preHeater.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 1542.83932948 = C
P                  = 101.225 = kPa
MoleFlow           = 10.0 = kgmole/h
MassFlow           = 581.222 = kg/h
VolumeFlow         = 1492.26267873 = m3/hr
StdLiqVolumeFlow   = 1.01168513413 = m3/hr
H                  = 352800.0 = kJ/kmol
Energy             = 980000.0 = W
MolecularWeight    = 58.1221999082 = 
ZFactor            = 1.00043615554 = 
PROPANE            = 0.25 = 
n-BUTANE           = 0.25 = 
ISOBUTANE          = 0.25 = 
n-PENTANE          = 0.25 = 

>> InQ
Port: /preHeater.InQ + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 1000000.0 * W

>> cd /
/
>> 
>> #create a mixer and splitter
>> mixer = Mixer.Mixer()
>> splitter = Split.Splitter()
>> 
>> #connect the pre-heater to the mixer
>> preHeater.Out -> mixer.In0
>> 
>> valueOf preHeater.In.Fraction.processValue		# composition
[0.25, 0.25, 0.25, 0.25]
>> valueOf preHeater.compoundNames                         # compound name
['PROPANE', 'n-BUTANE', 'ISOBUTANE', 'n-PENTANE']
>> valueOf preHeater.LiquidPhases.processValue		# parameter
>> valueOf preHeater.In.path				# port
/preHeater.In
>> valueOf preHeater.In.properties.key			# user dictionary
['Energy', 'H', 'MassFlow', 'MoleFlow', 'MolecularWeight', 'P', 'S', 'StdGasVolumeFlow', 'StdLiqMolarVol', 'StdLiqVolumeFlow', 'T', 'VapFrac', 'VolumeFlow', 'ZFactor', 'molarV']
>> valueOf preHeater.DeltaP.properties.key                 # dictionary
['DP']
>> 
>> valueOf preHeater.DeltaP.type
sim.solver.Ports.Port_Signal
>> valueOf preHeater.DeltaP.DP.processValue		#DeltaP is the signal 
0.1
>> valueOf preHeater.InQ.Energy.processValue
1000000.0
>> valueOf preHeater.InQ.processValue
1000000.0
>> valueOf preHeater.In.MoleFlow.processValue
10.0
>> 
>> # everything about one Basic property
>> valueOf mixer.In0.P.processValue        #current process variable value
101.225
>> valueOf mixer.In0.P.value		#internal current value
101.225
>> valueOf mixer.In0.P.calcStatus
8
>> valueOf mixer.In0.P.name
P
>> valueOf mixer.In0.P.calcType
5
>> valueOf mixer.In0.P.unitType
1
>> valueOf mixer.In0.P.scaleFactor
1000.0
>> valueOf mixer.In0.P.minValue
>> valueOf mixer.In0.VapFrac.maxValue
1.0
>> 
>> # a full material port values
>> valueOf preHeater.Out.T.processValue
1815.98932948
>> valueOf preHeater.Out.P.processValue
101.225
>> valueOf preHeater.Out.molarV.processValue
149.226267873
>> valueOf preHeater.Out.H.processValue
352800.0
>> valueOf preHeater.Out.S.processValue
554.716251991
>> valueOf preHeater.Out.VapFrac.processValue
1.0
>> valueOf preHeater.Out.MoleFlow.processValue
10.0
>> valueOf preHeater.Out.MassFlow.processValue
581.222
>> valueOf preHeater.Out.Energy.processValue
980000.0
>> valueOf preHeater.Out.Fraction.processValue
[0.25, 0.25, 0.25, 0.25]
>> 
>> 
>> 
>> clear
>> read eqn.tst
Processing eqn.tst
>> units SI
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + Methane Ethane Propane
Methane Ethane Propane 
>> 
>> Feed = Stream.Stream_Material()
>> Feed.In.T = 20
>> Feed.In.P = 3000
>> Feed.In.MoleFlow = 100
>> Feed.In.Fraction = 70 20 10
>> 
>> valve = Valve.Valve()
>> Feed.Out -> valve.In
>> Outlet = Stream.Stream_Material()
>> valve.Out -> Outlet.In
>> 
>> Feed.pPort = Stream.SensorPort('P')
>> Outlet.pPort = Stream.SensorPort('P')
>> Feed.flowPort = Stream.SensorPort('MoleFlow')
>> 
>> cv_eqn = Equation.Equation()
>> cd cv_eqn
/cv_eqn
>> Equation = Signal P(pIn, pOut) MoleFlow(f)
Signal Generic(cv)

pIn-pOut = 0.05*f^2
>> 
>> cd /
/
>> cv_eqn.pIn -> Feed.pPort
>> cv_eqn.pOut -> Outlet.pPort
>> cv_eqn.f -> Feed.flowPort
>> Outlet.Out
Port: /Outlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 16.3086693801 = C
P                  = 2500.0 = kPa
MoleFlow           = 100.0 = kgmole/h
MassFlow           = 2165.3092 = kg/h
VolumeFlow         = 85.2610019004 = m3/hr
StdLiqVolumeFlow   = 6.31048314 = m3/hr
H                  = 9614.62967139 = kJ/kmol
Energy             = 267073.046428 = W
MolecularWeight    = 21.6530919813 = 
ZFactor            = 0.885673166857 = 
METHANE            = 0.7 = 
ETHANE             = 0.2 = 
PROPANE            = 0.1 = 

>> Feed.In.MoleFlow = 200
>> Outlet.Out.P
/Outlet.Out.P= 1000.0 = kPa
>> 
>> # now try changing the equation so that cv is a variable
>> cv_eqn.Equation = Signal P(pIn, pOut) MoleFlow(f)
Signal Generic(cv)

pIn-pOut = cv*f^2
>> 
>> # try back calculating cv
>> Outlet.Out.P = 2500
>> cv_eqn.cv
Port: /cv_eqn.S_cv.In + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.0125 = 

>> 
>> # change feed flow again
>> Feed.In.MoleFlow = 100
>> cv_eqn.cv
Port: /cv_eqn.S_cv.In + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.05 = 

>> 
>> # more than one expression is allowed in an Equation op
>> cv_eqn.Equation = Signal P(pIn, pOut) MoleFlow(f)
Signal Generic(cv) DP(deltaP)

deltaP = pIn - pOut
deltaP = cv*f^2
>> 
>> cv_eqn.cv
Port: /cv_eqn.S_cv.In + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.05 = 

>> Outlet.Out.P = None
>> cv_eqn.deltaP = 400
>> 
>> cv_eqn.cv
Port: /cv_eqn.S_cv.In + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.04 = 

>> Outlet.Out.P
/Outlet.Out.P= 2600.0 = kPa
>> 
>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
>> cd RootClone
/RootClone
>> cv_eqn.cv
Port: /RootClone.cv_eqn.S_cv.In + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = None

>> Outlet.Out.P
/RootClone.Outlet.Out.P= None
>> 
>> 
>> clear
>> read scriptop.tst
Processing scriptop.tst
>> units SI
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + Methane Ethane Propane
Methane Ethane Propane 
>> 
>> Feed = Stream.Stream_Material()
>> Feed.In.T = 20
>> Feed.In.P = 3000
>> Feed.In.MoleFlow = 100
>> Feed.In.Fraction = 70 20 10
>> 
>> 
>> valve = Flowsheet.SubFlowsheet('read cv_valve.sop')
Processing cv_valve.sop
>> read cv_valve.sop
>> inlet = Stream.Stream_Material()
>> 
>> valve = Valve.Valve()
>> inlet.Out -> valve.In
>> outlet = Stream.Stream_Material()
>> valve.Out -> outlet.In
>> 
>> inlet.portP = Stream.SensorPort('P')
>> outlet.portP = Stream.SensorPort('P')
>> inlet.flowPort = Stream.SensorPort('MoleFlow')
>> 
>> cv_eqn = Equation.Equation()
>> cd cv_eqn
/valve.cv_eqn
>> Equation = Signal P(pIn, pOut) MoleFlow(f)
Signal Generic(cv) DP(deltaP)

pIn-pOut = cv*f^2
deltaP = pIn-pOut
>> 
>> cd ..
/valve
>> cv_eqn.pIn -> inlet.portP
>> cv_eqn.pOut -> outlet.portP
>> cv_eqn.f -> inlet.flowPort
>> 
>> inlet.In @ In
>> outlet.Out @ Out
>> cv_eqn.cv @ Cv
>> cv_eqn.deltaP @ DeltaP

>> Feed.Out -> valve.In
>> Outlet = Stream.Stream_Material()
>> valve.Out -> Outlet.In
>> valve.Cv = 0.05
>> 
>> Outlet.Out
Port: /Outlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 16.3086693801 = C
P                  = 2500.0 = kPa
MoleFlow           = 100.0 = kgmole/h
MassFlow           = 2165.3092 = kg/h
VolumeFlow         = 85.2610019004 = m3/hr
StdLiqVolumeFlow   = 6.31048314 = m3/hr
H                  = 9614.62967139 = kJ/kmol
Energy             = 267073.046428 = W
MolecularWeight    = 21.6530919813 = 
ZFactor            = 0.885673166857 = 
METHANE            = 0.7 = 
ETHANE             = 0.2 = 
PROPANE            = 0.1 = 

>> Feed.In.MoleFlow = 200
>> Outlet.Out
Port: /Outlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 4.53355624674 = C
P                  = 1000.0 = kPa
MoleFlow           = 199.999999661 = kgmole/h
MassFlow           = 4330.61839267 = kg/h
VolumeFlow         = 437.944394318 = m3/hr
StdLiqVolumeFlow   = 12.6209662586 = m3/hr
H                  = 9614.62967139 = kJ/kmol
Energy             = 534146.092855 = W
MolecularWeight    = 21.653092 = 
ZFactor            = 0.948436856105 = 
METHANE            = 0.7 = 
ETHANE             = 0.2 = 
PROPANE            = 0.1 = 

>> 
>> hx = Heater.HeatExchanger('read heatexdp.sop')
Processing heatexdp.sop
>> read heatexdp.sop
>> # need to stick in streams to get flow and delta p from
>> coldIn = Stream.Stream_Material()
>> coldIn.portF = Stream.SensorPort('MoleFlow')
>> 
>> coldIn.Out -> ColdSide.In
>> 
>> # change the alias to the interposed stream
>> coldIn.In @ InC
>> 
>> deltaPSig = Stream.Stream_Signal()
>> deltaPSig.In -> ColdSide.DeltaP
>> deltaPSig.clone = Stream.ClonePort()
>> deltaPSig.Out @ DeltaPC
>> 
>> cv_eqn = Equation.Equation()
>> cd cv_eqn
/hx.cv_eqn
>> Equation = Signal MoleFlow(f)
Signal Generic(cv) DP(deltaP)

deltaP = cv*f^2
>> 
>> cd ..
/hx
>> cv_eqn.deltaP -> deltaPSig.clone
>> cv_eqn.f -> coldIn.portF
>> 
>> cv_eqn.cv @ CvC

>> 
>> hx.InC -> Outlet.Out
>> hx.InC.P
/hx.coldIn.In.P= 1000.0 | kPa
>> hx.OutC.P
/hx.ColdSide.Out.P= None
>> hx.CvC = .01
>> hx.OutC.P
/hx.ColdSide.Out.P= 600.000001354 = kPa
>> hx.CvC = None
>> hx.OutC.P = 800
>> hx.CvC
Port: /hx.cv_eqn.S_cv.In + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.00500000001693 = 

>> 
>> copy /valve /Outlet /Feed /hx
Copied /valve /Outlet /Feed /hx to the clipboard
>> paste /
Pasting /valve /Outlet /Feed /hx
Pasted /valve /Outlet /Feed /hx as /valveClone /OutletClone /FeedClone /hxClone
>> 
>> OutletClone.Out
Port: /OutletClone.Out + sim.solver.Ports.Port_Material
Connected to: /hxClone.coldIn.In
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = 200.0 = kgmole/h
MassFlow           = 4330.6184 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 12.62096628 = m3/hr
H                  = 9614.62967139 = kJ/kmol
Energy             = 534146.092855 = W
MolecularWeight    = None
ZFactor            = None
METHANE            = 0.7 = 
ETHANE             = 0.2 = 
PROPANE            = 0.1 = 

>> hxClone.CvC
Port: /hxClone.cv_eqn.S_cv.In + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = None

>> 
>> clear
>> read compsplit.tst
Processing compsplit.tst
>> # Component Splitter test
>> units SI
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + PROPANE n-BUTANE ISOBUTANE n-PENTANE
PROPANE n-BUTANE ISOBUTANE n-PENTANE 
>> f = Stream.Stream_Material()
>> cd f.In
/f.In
>> Fraction = .4 .3 .2 .1
>> T = 0 C
>> P = 101.325
>> MoleFlow = 10
>> cd /
/
>> 
>> s = ComponentSplitter.SimpleComponentSplitter()
>> s.Splits = 1.0 .8 .3 0.0
>> s.Splits
Splits:
   PROPANE_Split = 1.000000
   n-BUTANE_Split = 0.800000
   ISOBUTANE_Split = 0.300000
   n-PENTANE_Split = 0.000000

>> 
>> f.Out -> s.In
>> s.Out0
Port: /s.Out0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = 7.0 = kgmole/h
MassFlow           = 350.74908 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 0.6574647186 = m3/hr
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = 0.571428571429 = 
n-BUTANE           = 0.342857142857 = 
ISOBUTANE          = 0.0857142857143 = 
n-PENTANE          = 0.0 = 

>> s.Out1
Port: /s.Out1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = 3.0 = kgmole/h
MassFlow           = 188.39318 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 0.315768184053 = m3/hr
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = 0.0 = 
n-BUTANE           = 0.2 = 
ISOBUTANE          = 0.466666666667 = 
n-PENTANE          = 0.333333333333 = 

>> 
>> f.Out ->
>> s.Out0 -> f.In
>> s.In   # doesn't work because fo the zero split
Port: /s.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = None
n-BUTANE           = None
ISOBUTANE          = None
n-PENTANE          = None

>> s.Splits = 1.0 .8 .3 .01
>> s.In
Port: /s.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = 114.416666667 = kgmole/h
MassFlow           = 7996.70006333 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 12.8305141118 = m3/hr
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = 0.0349599417334 = 
n-BUTANE           = 0.0327749453751 = 
ISOBUTANE          = 0.0582665695557 = 
n-PENTANE          = 0.873998543336 = 

>> 
>> f.In ->
>> s.Out1 -> f.In
>> s.In # now the problem is the 1.0
Port: /s.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = None
n-BUTANE           = None
ISOBUTANE          = None
n-PENTANE          = None

>> s.Splits.PROPANE_Split = .99
>> s.In
Port: /s.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = 418.867243867 = kgmole/h
MassFlow           = 18749.0219841 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 36.9152400753 = m3/hr
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = 0.954956506761 = 
n-BUTANE           = 0.0358108690035 = 
ISOBUTANE          = 0.00682111790543 = 
n-PENTANE          = 0.0024115063302 = 

>> s
Operation: s = sim.unitop.ComponentSplitter.SimpleComponentSplitter
Port: In = sim.solver.Ports.Port_Material
Port: Out0 = sim.solver.Ports.Port_Material
Port: Out1 = sim.solver.Ports.Port_Material
Port: ISOBUTANE_Split = sim.solver.Ports.Port_Signal
Port: n-BUTANE_Split = sim.solver.Ports.Port_Signal
Port: n-PENTANE_Split = sim.solver.Ports.Port_Signal
Port: PROPANE_Split = sim.solver.Ports.Port_Signal
Parameter: Ignored = None
>> 
>> thermo + n-Hexane
n-Hexane 
>> s.In
Port: /s.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = None
n-BUTANE           = None
ISOBUTANE          = None
n-PENTANE          = None
n-HEXANE           = None

>> f.In.Fraction = .4 .3 .15 .1 .05
>> s.Splits.n-HEXANE_Split = .03
>> 
>> s.In
Port: /s.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = 418.66842207 = kgmole/h
MassFlow           = 18751.9264156 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 36.910854176 = m3/hr
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = 0.955410006854 = 
n-BUTANE           = 0.035827875257 = 
ISOBUTANE          = 0.00511826789386 = 
n-PENTANE          = 0.00241265153246 = 
n-HEXANE           = 0.00123119846244 = 

>> 
>> delete s
>> s = ComponentSplitter.ComponentSplitter()
>> s.Splits = .99 .8 .5 .3 .1
>> f.Out -> s.In0
>> s.Out0
Port: /s.Splitter.Out0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = 7.46 = kgmole/h
MassFlow           = 383.6569872 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 0.709675122855 = m3/hr
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = 0.530831099196 = 
n-BUTANE           = 0.321715817694 = 
ISOBUTANE          = 0.100536193029 = 
n-PENTANE          = 0.0402144772118 = 
n-HEXANE           = 0.00670241286863 = 

>> 
>> s.Out0.VapFrac = 1
>> s.Out0.P = 400
>> 
>> s.Out1.VapFrac = 0
>> s.Out1.P = 400
>> 
>> s.InQ0
Port: /s.FeedBalance.InQ0 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 2813.24002322 = W

>> 
>> thermo - n-HEXANE
>> s.In0
Port: /s.FeedBalance.In0 + sim.solver.Ports.Port_Material
Connected to: /f.Out
VapFrac            = 1.0 | 
T                  = 0.0 | C
P                  = 101.325 | kPa
MoleFlow           = 10.0 | kgmole/h
MassFlow           = 536.927536842 | kg/h
VolumeFlow         = 217.383878204 | m3/hr
StdLiqVolumeFlow   = 0.972025169635 | m3/hr
H                  = 14537.5200286 | kJ/kmol
Energy             = 40382.0000793 | W
MolecularWeight    = 53.6927536842 | 
ZFactor            = 0.969867369566 | 
PROPANE            = 0.421052631579 | 
n-BUTANE           = 0.315789473684 | 
ISOBUTANE          = 0.157894736842 | 
n-PENTANE          = 0.105263157895 | 

>> s.Out1
Port: /s.Splitter.Out1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 * 
T                  = 43.7495183304 = C
P                  = 400.0 * kPa
MoleFlow           = 2.2 = kgmole/h
MassFlow           = 137.613621895 = kg/h
VolumeFlow         = 0.23580996935 = m3/hr
StdLiqVolumeFlow   = 0.231816272808 = m3/hr
H                  = -678.688901639 = kJ/kmol
Energy             = -414.754328779 = W
MolecularWeight    = 62.5516463158 = 
ZFactor            = 0.0162722460047 = 
PROPANE            = 0.0191387559809 = 
n-BUTANE           = 0.287081339713 = 
ISOBUTANE          = 0.358851674641 = 
n-PENTANE          = 0.334928229665 = 

>> s.InQ0
Port: /s.FeedBalance.InQ0 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = -6379.29732732 = W

>> 
>> 
>> 
>> copy /f /s
Copied /f /s to the clipboard
>> paste /
Pasting /f /s
Pasted /f /s as /fClone /sClone
>> sClone.In0
Port: /sClone.FeedBalance.In0 + sim.solver.Ports.Port_Material
Connected to: /fClone.Out
VapFrac            = 1.0 | 
T                  = 0.0 | C
P                  = 101.325 | kPa
MoleFlow           = 10.0 | kgmole/h
MassFlow           = 536.927536842 | kg/h
VolumeFlow         = 217.383878204 | m3/hr
StdLiqVolumeFlow   = 0.972025169635 | m3/hr
H                  = 14537.5200286 | kJ/kmol
Energy             = 40382.0000793 | W
MolecularWeight    = 53.6927536842 | 
ZFactor            = 0.969867369566 | 
PROPANE            = 0.421052631579 | 
n-BUTANE           = 0.315789473684 | 
ISOBUTANE          = 0.157894736842 | 
n-PENTANE          = 0.105263157895 | 

>> sClone.Out1
Port: /sClone.Splitter.Out1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 * 
T                  = 43.7495183304 = C
P                  = 400.0 * kPa
MoleFlow           = 2.2 = kgmole/h
MassFlow           = 137.613621895 = kg/h
VolumeFlow         = 0.23580996935 = m3/hr
StdLiqVolumeFlow   = 0.231816272808 = m3/hr
H                  = -678.688901639 = kJ/kmol
Energy             = -414.754328779 = W
MolecularWeight    = 62.5516463158 = 
ZFactor            = 0.0162722460047 = 
PROPANE            = 0.0191387559809 = 
n-BUTANE           = 0.287081339713 = 
ISOBUTANE          = 0.358851674641 = 
n-PENTANE          = 0.334928229665 = 

>> sClone.InQ0
Port: /sClone.FeedBalance.InQ0 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = -6379.29732732 = W

>> 
>> clear
>> read mechengpump.tst
Processing mechengpump.tst
>> units SI
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + propane isobutane n-butane isopentane n-pentane n-hexane
propane isobutane n-butane isopentane n-pentane n-hexane 
>> 
>> Feed = Stream.Stream_Material()
>> Feed.In.T = 20
>> Feed.In.P = 3000
>> Feed.In.MoleFlow = 100
>> Feed.In.Fraction = 1 2 3 4 5 6 
>> 
>> 
>> pump = Flowsheet.SubFlowsheet('read mechengpump.sop')
Processing mechengpump.sop
>> read mechengpump.sop
>> inlet = Stream.Stream_Material()
>> inlet.flow = Stream.SensorPort('MassFlow')
>> inlet.molarV = Stream.SensorPort('molarV')
>> inlet.p = Stream.SensorPort('P')
>> inlet.mw = Stream.SensorPort('MolecularWeight')
>> 
>> outlet = Stream.Stream_Material()
>> outlet.p = Stream.SensorPort('P')
>> outlet.molarV = Stream.SensorPort('molarV')
>> outlet.mw = Stream.SensorPort('MolecularWeight')
>> 
>> power = Stream.Stream_Energy()
>> power.Q = Stream.SensorPort('Energy')
>> 
>> pump = Heater.Heater()
>> inlet.Out -> pump.In
>> outlet.In -> pump.Out
>> power.Out -> pump.InQ
>> 
>> 
>> powerEqn = Equation.Equation()
>> cd powerEqn
/pump.powerEqn
>> Equation = Signal P(pIn, pOut) MassFlow(f)
Signal Fraction(eff) Energy(Q)
Signal molarV(v, vOut) MolecularWeight(mw, mwOut)
vOut = v  # will cause inconsistancy if too different
mwOut = mw  # should be known, but not calced until flash
Q * eff = f*(pOut - pIn)*v/mw/3.6
>> /inlet.flow -> f
>> /inlet.p -> pIn
>> /outlet.p -> pOut
>> /inlet.molarV -> v
>> /inlet.mw -> mw
>> /outlet.molarV -> vOut
>> /outlet.mw -> mwOut
>> /power.Q -> Q
>> cd ..
/pump
>> 
>> inlet.In @ In
>> outlet.Out @ Out
>> power.In @ InQ
>> pump.DeltaP @ DeltaP
>> powerEqn.eff @ Efficiency
>> 

>> Feed.Out -> pump.In
>> pump.Out.P = 5000
>> pump.Efficiency = .75
>> 
>> pump.Out
Port: /pump.outlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 21.0666525144 = C
P                  = 5000.0 * kPa
MoleFlow           = 100.0 = kgmole/h
MassFlow           = 7148.0847619 = kg/h
VolumeFlow         = 11.0786378419 = m3/hr
StdLiqVolumeFlow   = 11.4575452171 = m3/hr
H                  = -4839.67666764 = kJ/kmol
Energy             = -134435.46299 = W
MolecularWeight    = 71.480847619 = 
ZFactor            = 0.225647778906 = 
PROPANE            = 0.047619047619 = 
ISOBUTANE          = 0.0952380952381 = 
n-BUTANE           = 0.142857142857 = 
ISOPENTANE         = 0.190476190476 = 
n-PENTANE          = 0.238095238095 = 
n-HEXANE           = 0.285714285714 = 

>> pump.InQ
Port: /pump.power.In + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 8206.39840138 = W

>> 
>> # try Efficiency / Q test
>> pump.Out.P = None
>> pump.InQ = 8000
>> pump.Out
Port: /pump.outlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 21.0400227498 = C
P                  = 4949.69817665 = kPa
MoleFlow           = 100.0 = kgmole/h
MassFlow           = 7148.0847619 = kg/h
VolumeFlow         = 11.0786378419 = m3/hr
StdLiqVolumeFlow   = 11.4575452171 = m3/hr
H                  = -4847.10701009 = kJ/kmol
Energy             = -134641.861391 = W
MolecularWeight    = 71.480847619 = 
ZFactor            = 0.223417171511 = 
PROPANE            = 0.047619047619 = 
ISOBUTANE          = 0.0952380952381 = 
n-BUTANE           = 0.142857142857 = 
ISOPENTANE         = 0.190476190476 = 
n-PENTANE          = 0.238095238095 = 
n-HEXANE           = 0.285714285714 = 

>> 
>> # backwards
>> Feed.In.P = None
>> Feed.In.T = None
>> pump.Out.P = 5000
>> pump.Out.T = 20
>> Feed.In
Port: /Feed.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 18.9665454781 = C
P                  = 3040.39931437 = kPa
MoleFlow           = 100.0 * kgmole/h
MassFlow           = 7148.0847619 = kg/h
VolumeFlow         = 11.0226538286 = m3/hr
StdLiqVolumeFlow   = 11.4575452171 = m3/hr
H                  = -5298.01380462 = kJ/kmol
Energy             = -147167.050128 = W
MolecularWeight    = 71.480847619 = 
ZFactor            = 0.138454636029 = 
PROPANE            = 0.047619047619 * 
ISOBUTANE          = 0.0952380952381 * 
n-BUTANE           = 0.142857142857 * 
ISOPENTANE         = 0.190476190476 * 
n-PENTANE          = 0.238095238095 * 
n-HEXANE           = 0.285714285714 * 

>> 
>> # compare to isentropic pump
>> spump = Pump.Pump()
>> Feed.clone = Stream.ClonePort(0)
>> Feed.clone -> spump.In
>> spump.Out.P = 5000
>> spump.Efficiency = .75
>> spump.InQ
Port: /spump.TotalQ.In + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 8008.73156975 = W

>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
>> 
>> clear
>> read convrxn.tst
Processing convrxn.tst
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + HYDROGEN WATER CARBON_MONOXIDE CARBON_DIOXIDE 
HYDROGEN WATER CARBON MONOXIDE CARBON DIOXIDE 
>> thermo + METHANE OXYGEN NITROGEN AMMONIA ETHANE PROPANE
METHANE OXYGEN NITROGEN AMMONIA ETHANE PROPANE 
>> 
>> units SI
>> 
>> # A conversion reactor - isothermal, no pressure drop
>> rxn = ConvRxn.ConvReactor()
>> cd /rxn
/rxn
>> In.P = 0.0 psig
>> In.T = 70.08 F
>> In.MoleFlow = 21.1497
>> In.Fraction = 0. 0. 0. 0. 1.0 4.0 5.0 0. 0. 0.
>> DeltaP = 0
>> Out.T = 70.08 F
>> 
>> # Test 1 : Single reaction, complete reaction----------------------------------
>> # The default is 100 % conversion
>> NumberRxn = 1
>> # Note the use of quotes around CO2
>> Rxn0.Formula = CH4-Combustion:2*WATER+"CARBON DIOXIDE"-!METHANE-2*OXYGEN
>> # review reaction and results
>> Rxn0
Operation: Rxn0 = sim.unitop.ConvRxn.ConversionReaction
Parameter: Ignored = None
Parameter: RxnOrder = 1
Parameter: Formula = CH4-Combustion:2.0*'WATER'+1.0*'CARBON_DIOXIDE'-1.0*!'METHANE'-2.0*'OXYGEN'
>> Rxn0.Coeff
Reaction = CH4-Combustion:2.0*'WATER'+1.0*'CARBON_DIOXIDE'-1.0*!'METHANE'-2.0*'OXYGEN'
Order = 1
Stoichmetric coefficients:
   HYDROGEN          0.000000
   WATER             2.000000
   CARBON MONOXIDE   0.000000
   CARBON DIOXIDE    1.000000
   METHANE          -1.000000 (Base Comp)
   OXYGEN           -2.000000
   NITROGEN          0.000000
   AMMONIA           0.000000
   ETHANE            0.000000
   PROPANE           0.000000
>> valueOf Rxn0.Coeff.GetValues
['CH4-Combustion', 4, 1.0, 1, 0, 2.0, 0, 1.0, -1.0, -2.0, 0, 0, 0, 0]
>> In
Port: /rxn.IsoRxn.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 21.1555333645 * C
P                  = 101.325 * kPa
MoleFlow           = 21.1497 * kgmole/h
MassFlow           = 600.873678748 = kg/h
VolumeFlow         = 510.335314688 = m3/hr
StdLiqVolumeFlow   = 1.65308520086 = m3/hr
H                  = 8693.34842184 = kJ/kmol
Energy             = 51072.6975326 = W
MolecularWeight    = 28.4105059999 = 
ZFactor            = 0.99916958056 = 
HYDROGEN           = 0.0 * 
WATER              = 0.0 * 
CARBON MONOXIDE    = 0.0 * 
CARBON DIOXIDE     = 0.0 * 
METHANE            = 0.1 * 
OXYGEN             = 0.4 * 
NITROGEN           = 0.5 * 
AMMONIA            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 

>> Out
Port: /rxn.RxnHeater.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.819963768853 = 
T                  = 21.1555333645 * C
P                  = 101.325 = kPa
MoleFlow           = 21.1497 = kgmole/h
MassFlow           = 600.873678748 = kg/h
VolumeFlow         = 418.312638465 = m3/hr
StdLiqVolumeFlow   = 1.42460225356 = m3/hr
H                  = 812.940137048 = kJ/kmol
Energy             = 4775.95556015 = W
MolecularWeight    = 28.410506 = 
ZFactor            = 0.819001255621 = 
HYDROGEN           = 0.0 = 
WATER              = 0.2 = 
CARBON MONOXIDE    = 0.0 = 
CARBON DIOXIDE     = 0.1 = 
METHANE            = 0.0 = 
OXYGEN             = 0.2 = 
NITROGEN           = 0.5 = 
AMMONIA            = 0.0 = 
ETHANE             = 0.0 = 
PROPANE            = 0.0 = 

>> OutQ
Port: /rxn.EneStream.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 518901.348986 = W

>> 
>> # Test 2  : Single reaction, 25% conversion-------------------------------------
>> Rxn0.Conversion = 0.25
>> Out
Port: /rxn.RxnHeater.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.97368016448 = 
T                  = 21.1555333645 * C
P                  = 101.325 = kPa
MoleFlow           = 21.1497 = kgmole/h
MassFlow           = 600.873678748 = kg/h
VolumeFlow         = 496.765443537 = m3/hr
StdLiqVolumeFlow   = 1.59596446403 = m3/hr
H                  = 7555.26743658 = kJ/kmol
Energy             = 44386.5665843 = W
MolecularWeight    = 28.410506 = 
ZFactor            = 0.972601553467 = 
HYDROGEN           = 0.0 = 
WATER              = 0.05 = 
CARBON MONOXIDE    = 0.0 = 
CARBON DIOXIDE     = 0.025 = 
METHANE            = 0.075 = 
OXYGEN             = 0.35 = 
NITROGEN           = 0.5 = 
AMMONIA            = 0.0 = 
ETHANE             = 0.0 = 
PROPANE            = 0.0 = 

>> 
>> # Test 3  : Single reaction, in-sufficient O2 for complete reaction-------------
>> Rxn0.Conversion = 1.0
>> In.Fraction = 0. 0. 0. 0. 5.0 2.0 3.0 0. 0. 0.
>> Out
Port: /rxn.RxnHeater.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.819880656635 = 
T                  = 21.1555333645 * C
P                  = 101.325 = kPa
MoleFlow           = 21.1497 = kgmole/h
MassFlow           = 482.74262159 = kg/h
VolumeFlow         = 418.019504879 = m3/hr
StdLiqVolumeFlow   = 1.20041401502 = m3/hr
H                  = 1340.6077701 = kJ/kmol
Energy             = 7875.958932 = W
MolecularWeight    = 22.825034 = 
ZFactor            = 0.818427338524 = 
HYDROGEN           = 0.0 = 
WATER              = 0.2 = 
CARBON MONOXIDE    = 0.0 = 
CARBON DIOXIDE     = 0.1 = 
METHANE            = 0.4 = 
OXYGEN             = 0.0 = 
NITROGEN           = 0.3 = 
AMMONIA            = 0.0 = 
ETHANE             = 0.0 = 
PROPANE            = 0.0 = 

>> 
>> # test 4 : Multiple reactions, in-sufficient O2 for complete reaction--------------
>> IsoRxn.NumberRxn = 5
>> Rxn1.Formula = H2_Combustion:2*WATER-2*!HYDROGEN-OXYGEN
>> Rxn2.Formula = CO_Combustion:2*CARBON_DIOXIDE-2*!CARBON_MONOXIDE-OXYGEN
>> Rxn3.Formula = C2_Combustion:3*WATER+2*CARBON_DIOXIDE-!ETHANE-3.5*OXYGEN
>> # test5 : Alternative formula input
>> # 4*WATER+3*CARBON_DIOXIDE-!PROPANE-5*OXYGEN
>> Rxn4.Formula = C3_Combustion:4*1+3*3-!9-5*5
>> Rxn4.Coeff
Reaction = C3_Combustion:4.0*'WATER'+3.0*'CARBON_DIOXIDE'-5.0*'OXYGEN'-1.0*!'PROPANE'
Order = 5
Stoichmetric coefficients:
   HYDROGEN          0.000000
   WATER             4.000000
   CARBON MONOXIDE   0.000000
   CARBON DIOXIDE    3.000000
   METHANE           0.000000
   OXYGEN           -5.000000
   NITROGEN          0.000000
   AMMONIA           0.000000
   ETHANE            0.000000
   PROPANE          -1.000000 (Base Comp)
>> In.Fraction = .1 .1 .1 .1 .1 .1 .1 .1 .1 .1
>> In.MoleFlow = 10.0
>> Out
Port: /rxn.RxnHeater.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.816575879931 = 
T                  = 21.1555333645 * C
P                  = 101.325 = kPa
MoleFlow           = 10.0434782609 = kgmole/h
MassFlow           = 259.30072 = kg/h
VolumeFlow         = 197.287732764 = m3/hr
StdLiqVolumeFlow   = 0.58237818 = m3/hr
H                  = 1757.65952513 = kJ/kmol
Energy             = 4903.61534185 = W
MolecularWeight    = 25.8178206061 = 
ZFactor            = 0.813399181372 = 
HYDROGEN           = 0.0909090909091 = 
WATER              = 0.186147186147 = 
CARBON MONOXIDE    = 0.0909090909091 = 
CARBON DIOXIDE     = 0.160173160173 = 
METHANE            = 0.0909090909091 = 
OXYGEN             = 0.0 = 
NITROGEN           = 0.0995670995671 = 
AMMONIA            = 0.0995670995671 = 
ETHANE             = 0.0909090909091 = 
PROPANE            = 0.0909090909091 = 

>> OutQ
Port: /rxn.EneStream.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 127906.539303 = W

>> 
>> # test 5 : adibatic reaction-----------------------------------------------------
>> Out.T =
>> OutQ = 0.0
>> Out
Port: /rxn.RxnHeater.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 733.838403947 = C
P                  = 101.325 = kPa
MoleFlow           = 10.0434782609 = kgmole/h
MassFlow           = 259.30072 = kg/h
VolumeFlow         = 830.02709732 = m3/hr
StdLiqVolumeFlow   = 0.58237818 = m3/hr
H                  = 47604.6788078 = kJ/kmol
Energy             = 132810.154645 = W
MolecularWeight    = 25.8178206061 = 
ZFactor            = 1.00016091273 = 
HYDROGEN           = 0.0909090909091 = 
WATER              = 0.186147186147 = 
CARBON MONOXIDE    = 0.0909090909091 = 
CARBON DIOXIDE     = 0.160173160173 = 
METHANE            = 0.0909090909091 = 
OXYGEN             = 0.0 = 
NITROGEN           = 0.0995670995671 = 
AMMONIA            = 0.0995670995671 = 
ETHANE             = 0.0909090909091 = 
PROPANE            = 0.0909090909091 = 

>> 
>> # test 6 : Compae with literature result-----------------------------------------
>> # burns 1 mole of C3 with 28 moles of air adibatically 
>> # literature outlet T = 1878.8 C
>> In.Fraction = 0 0 0 0 0 0.202759 0.7628 0 0 0.034482
>> In.P = 1 atm
>> In.T = 25 C
>> OutQ = 0.0
>> In.MoleFlow = 29
>> In
Port: /rxn.IsoRxn.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 25.0 * C
P                  = 101.325 * kPa
MoleFlow           = 29.0 * kgmole/h
MassFlow           = 851.904811562 = kg/h
VolumeFlow         = 708.958306495 = m3/hr
StdLiqVolumeFlow   = 2.45657468203 = m3/hr
H                  = 8883.86503802 = kJ/kmol
Energy             = 71564.4683618 = W
MolecularWeight    = 29.3760280156 = 
ZFactor            = 0.999249878613 = 
HYDROGEN           = 0.0 * 
WATER              = 0.0 * 
CARBON MONOXIDE    = 0.0 * 
CARBON DIOXIDE     = 0.0 * 
METHANE            = 0.0 * 
OXYGEN             = 0.202750687222 * 
NITROGEN           = 0.762768726482 * 
AMMONIA            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.034480586296 * 

>> IsoRxn.Out
Port: /rxn.IsoRxn.Out + sim.solver.Ports.Port_Material
Connected to: /rxn.RxnHeater.In
VapFrac            = 0.894230320598 = 
T                  = 25.0 = C
P                  = 101.325 = kPa
MoleFlow           = 29.9999370026 = kgmole/h
MassFlow           = 851.904811562 = kg/h
VolumeFlow         = 655.56334133 = m3/hr
StdLiqVolumeFlow   = 2.2416735226 = m3/hr
H                  = 4173.97269064 = kJ/kmol
Energy             = 34783.0327138 = W
MolecularWeight    = 28.3968866831 = 
ZFactor            = 0.893193850114 = 
HYDROGEN           = 0.0 = 
WATER              = 0.133325213649 = 
CARBON MONOXIDE    = 0.0 = 
CARBON DIOXIDE     = 0.0999939102369 = 
METHANE            = 0.0 = 
OXYGEN             = 0.0293362254875 = 
NITROGEN           = 0.737344650626 = 
AMMONIA            = 0.0 = 
ETHANE             = 0.0 = 
PROPANE            = 0.0 = 

>> IsoRxn.OutQ
Port: /rxn.IsoRxn.OutQ + sim.solver.Ports.Port_Energy
Connected to: /rxn.EneBalance.InQ0
Energy   = 607287.525987 = W

>> Out
Port: /rxn.RxnHeater.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 1879.44874361 = C
P                  = 101.325 = kPa
MoleFlow           = 29.9999370026 = kgmole/h
MassFlow           = 851.904811562 = kg/h
VolumeFlow         = 5299.73087134 = m3/hr
StdLiqVolumeFlow   = 2.2416735226 = m3/hr
H                  = 77048.6288395 = kJ/kmol
Energy             = 642070.5587 = W
MolecularWeight    = 28.3968866831 = 
ZFactor            = 1.0001303608 = 
HYDROGEN           = 0.0 = 
WATER              = 0.133325213649 = 
CARBON MONOXIDE    = 0.0 = 
CARBON DIOXIDE     = 0.0999939102369 = 
METHANE            = 0.0 = 
OXYGEN             = 0.0293362254875 = 
NITROGEN           = 0.737344650626 = 
AMMONIA            = 0.0 = 
ETHANE             = 0.0 = 
PROPANE            = 0.0 = 

>> 
>> # test 7 : partial spec----------------------------------------------------------
>> # specify inlet composition, should be able to calculate outlet composition
>> In.P =
>> In.T =
>> In.MoleFlow =
>> OutQ.Energy =
>> Out
Port: /rxn.RxnHeater.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
HYDROGEN           = 0.0 = 
WATER              = 0.133325213649 = 
CARBON MONOXIDE    = 0.0 = 
CARBON DIOXIDE     = 0.0999939102369 = 
METHANE            = 0.0 = 
OXYGEN             = 0.0293362254875 = 
NITROGEN           = 0.737344650626 = 
AMMONIA            = 0.0 = 
ETHANE             = 0.0 = 
PROPANE            = 0.0 = 

>> 
>> # test 8 : backward calc---------------------------------------------------------
>> Out.P = 101.325
>> Out.T = 2000 C
>> Out.MoleFlow = 30
>> In.T = 29 C
>> DeltaP = 5 psi
>> In
Port: /rxn.IsoRxn.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 29.0 * C
P                  = 135.798785 = kPa
MoleFlow           = 29.0000608976 = kgmole/h
MassFlow           = 851.906600492 = kg/h
VolumeFlow         = 535.981104025 = m3/hr
StdLiqVolumeFlow   = 2.45657984064 = m3/hr
H                  = 9003.97595243 = kJ/kmol
Energy             = 72532.180817 = W
MolecularWeight    = 29.3760280028 = 
ZFactor            = 0.999064351591 = 
HYDROGEN           = 0.0 * 
WATER              = 0.0 * 
CARBON MONOXIDE    = 0.0 * 
CARBON DIOXIDE     = 0.0 * 
METHANE            = 0.0 * 
OXYGEN             = 0.202750687222 * 
NITROGEN           = 0.762768726482 * 
AMMONIA            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.034480586296 * 

>> Out
Port: /rxn.RxnHeater.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 2000.0 * C
P                  = 101.325 * kPa
MoleFlow           = 30.0 * kgmole/h
MassFlow           = 851.906600492 = kg/h
VolumeFlow         = 5596.49921899 = m3/hr
StdLiqVolumeFlow   = 2.24167822993 = m3/hr
H                  = 81969.1057877 = kJ/kmol
Energy             = 683075.881564 = W
MolecularWeight    = 28.3968866827 = 
ZFactor            = 1.00012277785 = 
HYDROGEN           = 0.0 = 
WATER              = 0.133325213649 = 
CARBON MONOXIDE    = 0.0 = 
CARBON DIOXIDE     = 0.0999939102369 = 
METHANE            = 0.0 = 
OXYGEN             = 0.0293362254875 = 
NITROGEN           = 0.737344650626 = 
AMMONIA            = 0.0 = 
ETHANE             = 0.0 = 
PROPANE            = 0.0 = 

>> OutQ
Port: /rxn.EneStream.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = -40036.412392 = W

>> 
>> 
>> 
>> In.T =
>> In.VapFrac = 1.0
>> OutQ
Port: /rxn.EneStream.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = -70514.0820811 = W

>> 
>> 
>> In.VapFrac =
>> In.T = 29 C
>> Out.T = 29 C
>> OutQ
Port: /rxn.EneStream.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 604272.656964 = W

>> 
>> 
>> #Due to an old mistake in the sign of Q, now we have to support the following parameter
>> QExothermicIsPositive = 0
>> OutQ
Port: /rxn.EneStream.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = -604272.656964 = W

>> 
>> QExothermicIsPositive = 1
>> OutQ
Port: /rxn.EneStream.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 604272.656964 = W

>> 
>> copy /rxn
Copied /rxn to the clipboard
>> paste /
Pasting /rxn
Pasted /rxn as /rxnClone
>> 
>> 
>> 
>> clear
>> read eqmRxn.tst
Processing eqmRxn.tst
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + BGS-HYDROGEN BGS-WATER BGS-CARBON_MONOXIDE BGS-CARBON_DIOXIDE 
BGS-HYDROGEN BGS-WATER BGS-CARBON MONOXIDE BGS-CARBON DIOXIDE 
>> thermo + BGS-METHANE BGS-OXYGEN BGS-NITROGEN AMMONIA BGS-ETHANE BGS-PROPANE
BGS-METHANE BGS-OXYGEN BGS-NITROGEN AMMONIA BGS-ETHANE BGS-PROPANE 
>> 
>> units SI
>> 
>> # A Equilibrum reactor - isothermal, no pressure drop
>> #rxn = EquiliReactor.IsothermalEquiliReactor()           #IsothermalEqmReactor()
>> rxn = EquiliReactor.EquilibriumReactor()          
>> cd /rxn
/rxn
>> In.P = 100 
>> In.T = 80 
>> In.MoleFlow = 8 lbmole/h
>> In.Fraction = 1 1 1 1 1 1 1 1 0 0 
>> DeltaP = 10 
>> 
>> # Test 1 : Testing Outlet T spec  ----------------------------------
>> 
>> NumberRxn = 2
>> Rxn0.Formula = Reforming:3*0+1*2-1*1-!4
>> Rxn1.Formula =  Shift:1*3+1*0-!2-1*1
>> Rxn0.EqmConst.Table.Series0  =  366.5 533.15 699.8 810.9 866.5 922.04 977.6 1033.15 1199.8 1310.9 1477.6 K
>> Rxn0.EqmConst.Table.Series1  =  7.81e-19 2.17e-9 0.000266 0.049 0.4098 2.679 14.26 63.43 2464 17010 178400
>> Rxn1.EqmConst.Table.Series0  =  366.5 422.04 477.6 505.4 588.7 616.5 727.6 838.7 1088.7 1227.6 1477.6 K
>> Rxn1.EqmConst.Table.Series1  =  4523 783.6 206.8 119 31.44 22 7.05 3.13 0.9813 0.647 0.3843
>> CalculationOption = 1
>> Out.T = 80 
Converged /rxn.itnRxn
>> 
>> In
Port: /rxn.itnRxn.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 80.0 * C
P                  = 100.0 * kPa
MoleFlow           = 3.62873953016 * kgmole/h
MassFlow           = 83.9763174225 = kg/h
VolumeFlow         = 106.363986265 = m3/hr
StdLiqVolumeFlow   = 0.211953066516 = m3/hr
H                  = 11007.1152582 = kJ/kmol
Energy             = 11094.9872917 = W
MolecularWeight    = 23.1420075 = 
ZFactor            = 0.998272728579 = 
BGS-HYDROGEN       = 0.125 * 
BGS-WATER          = 0.125 * 
BGS-CARBON MONOXIDE = 0.125 * 
BGS-CARBON DIOXIDE = 0.125 * 
BGS-METHANE        = 0.125 * 
BGS-OXYGEN         = 0.125 * 
BGS-NITROGEN       = 0.125 * 
AMMONIA            = 0.125 * 
BGS-ETHANE         = 0.0 * 
BGS-PROPANE        = 0.0 * 

>> Out
Port: /rxn.itnRxn.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 80.0 * C
P                  = 90.0 = kPa
MoleFlow           = 3.17995854559 = kgmole/h
MassFlow           = 83.9763174225 = kg/h
VolumeFlow         = 103.511541034 = m3/hr
StdLiqVolumeFlow   = 0.166715066131 = m3/hr
H                  = 11528.9368923 = kJ/kmol
Energy             = 10183.7614979 = W
MolecularWeight    = 26.4079912422 = 
ZFactor            = 0.997746522158 = 
BGS-HYDROGEN       = 0.00302550382823 = 
BGS-WATER          = 0.141128544533 = 
BGS-CARBON MONOXIDE = 6.09014294e-007 = 
BGS-CARBON DIOXIDE = 0.214717407106 = 
BGS-METHANE        = 0.213204959699 = 
BGS-OXYGEN         = 0.14264099194 = 
BGS-NITROGEN       = 0.14264099194 = 
AMMONIA            = 0.14264099194 = 
BGS-ETHANE         = 0.0 = 
BGS-PROPANE        = 0.0 = 

>> OutQ
Port: /rxn.EneStream.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 15606.3013267 = W

>> 
>> # Test 2 : Testing Outlet Q spec  ----------------------------------
>> Out.T = None
>> OutQ = 10000 
>> Out
Port: /rxn.itnRxn.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 245.563462784 = C
P                  = 90.0 = kPa
MoleFlow           = 3.18483525827 = kgmole/h
MassFlow           = 83.9763174225 = kg/h
VolumeFlow         = 152.542460594 = m3/hr
StdLiqVolumeFlow   = 0.167234922497 = m3/hr
H                  = 17725.5813568 = kJ/kmol
Energy             = 15681.4045773 = W
MolecularWeight    = 26.3675545835 = 
ZFactor            = 0.99951282858 = 
BGS-HYDROGEN       = 0.00598481633237 = 
BGS-WATER          = 0.139479728324 = 
BGS-CARBON MONOXIDE = 9.91211984434e-005 = 
BGS-CARBON DIOXIDE = 0.21505572702 = 
BGS-METHANE        = 0.212112879453 = 
BGS-OXYGEN         = 0.142422575891 = 
BGS-NITROGEN       = 0.142422575891 = 
AMMONIA            = 0.142422575891 = 
BGS-ETHANE         = 0.0 = 
BGS-PROPANE        = 0.0 = 

>> OutQ
Port: /rxn.EneStream.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 10000.0 * W

>> 
>> # Test 3 Negative K value in K table, Should not solve -------------------------------------------
>> Rxn0.EqmConst.Table.Series0  =  366.5 533.15 699.8 810.9 866.5 922.04 977.6 1033.15 1199.8 1310.9 1477.6 K
>> Rxn0.EqmConst.Table.Series1  =  -7.81e-19 -2.17e-9 -0.000266 -0.049 -0.4098 -2.679 -14.26 -63.43 -2464 -17010 -178400
>> #Rxn1.EqmConst.Table.Series0  =  366.5 422.04 477.6 505.4 588.7 616.5 727.6 838.7 1088.7 1227.6 1477.6 K
>> #Rxn1.EqmConst.Table.Series1  =  -4523 -783.6 -206.8 -119 -31.44 -22 -7.05 -3.13 -0.9813 -0.647 -0.3843
>> Ignored = 1
>> Ignored = None
>> Out
Port: /rxn.itnRxn.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = 90.0 = kPa
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
BGS-HYDROGEN       = None
BGS-WATER          = None
BGS-CARBON MONOXIDE = None
BGS-CARBON DIOXIDE = None
BGS-METHANE        = None
BGS-OXYGEN         = None
BGS-NITROGEN       = None
AMMONIA            = None
BGS-ETHANE         = None
BGS-PROPANE        = None

>> OutQ
Port: /rxn.EneStream.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 10000.0 * W

>> 
>> 
>> # Test 4 : Given No Flow at Temperature spec. Should partially solve ----------------------------------
>> Rxn0.EqmConst.Table.Series0  =  366.5 533.15 699.8 810.9 866.5 922.04 977.6 1033.15 1199.8 1310.9 1477.6 K
>> Rxn0.EqmConst.Table.Series1  =  7.81e-19 2.17e-9 0.000266 0.049 0.4098 2.679 14.26 63.43 2464 17010 178400
>> In.MoleFlow = None
>> OutQ = None
>> Out.T = 80
Converged /rxn.itnRxn
>> Out
Port: /rxn.itnRxn.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 80.0 * C
P                  = 90.0 = kPa
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = 11528.9368923 = kJ/kmol
Energy             = None
MolecularWeight    = 26.4079912422 = 
ZFactor            = 0.997746522158 = 
BGS-HYDROGEN       = 0.00302550382824 = 
BGS-WATER          = 0.141128544533 = 
BGS-CARBON MONOXIDE = 6.0901429399e-007 = 
BGS-CARBON DIOXIDE = 0.214717407106 = 
BGS-METHANE        = 0.213204959699 = 
BGS-OXYGEN         = 0.14264099194 = 
BGS-NITROGEN       = 0.14264099194 = 
AMMONIA            = 0.14264099194 = 
BGS-ETHANE         = 0.0 = 
BGS-PROPANE        = 0.0 = 

>> OutQ
Port: /rxn.EneStream.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = None

>> 
>> # Test 5 : Given No Flow at Reaction Heat spec. Should not solve ----------------------------------
>> Out.T = None
>> OutQ = -10000
>> Out
Port: /rxn.itnRxn.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = 90.0 = kPa
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
BGS-HYDROGEN       = None
BGS-WATER          = None
BGS-CARBON MONOXIDE = None
BGS-CARBON DIOXIDE = None
BGS-METHANE        = None
BGS-OXYGEN         = None
BGS-NITROGEN       = None
AMMONIA            = None
BGS-ETHANE         = None
BGS-PROPANE        = None

>> OutQ
Port: /rxn.EneStream.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = -10000.0 * W

>> 
>> # Test 6 : Given Inlet and Outlet Pressures ----------------------------------
>> OutQ = -5150 
>> In.P = None
>> In.MoleFlow = 8 lbmole/h
>> Out.P = 90
>> Out
Port: /rxn.itnRxn.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 464.746961509 = C
P                  = 90.0 * kPa
MoleFlow           = 3.41039611708 = kgmole/h
MassFlow           = 83.9763174225 = kg/h
VolumeFlow         = 232.497028951 = m3/hr
StdLiqVolumeFlow   = 0.190674758077 = m3/hr
H                  = 26088.003442 = kJ/kmol
Energy             = 24714.0071225 = W
MolecularWeight    = 24.6236256844 = 
ZFactor            = 1.00006672602 = 
BGS-HYDROGEN       = 0.104660227185 = 
BGS-WATER          = 0.0973226058389 = 
BGS-CARBON MONOXIDE = 0.0332997165371 = 
BGS-CARBON DIOXIDE = 0.200694561137 = 
BGS-METHANE        = 0.165014305814 = 
BGS-OXYGEN         = 0.133002861163 = 
BGS-NITROGEN       = 0.133002861163 = 
AMMONIA            = 0.133002861163 = 
BGS-ETHANE         = 0.0 = 
BGS-PROPANE        = 0.0 = 

>> OutQ
Port: /rxn.EneStream.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = -5150.0 * W

>> 
>> 
>> #Due to an old mistake in the sign of Q, now we have to support the following parameter
>> QExothermicIsPositive = 0
>> Out
Port: /rxn.itnRxn.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 347.486379283 = C
P                  = 90.0 * kPa
MoleFlow           = 3.22830139891 = kgmole/h
MassFlow           = 83.9763174225 = kg/h
VolumeFlow         = 185.072103902 = m3/hr
StdLiqVolumeFlow   = 0.171838325403 = m3/hr
H                  = 21754.8311144 = kJ/kmol
Energy             = 19508.6532554 = W
MolecularWeight    = 26.0125394274 = 
ZFactor            = 0.999865944677 = 
BGS-HYDROGEN       = 0.0304454247101 = 
BGS-WATER          = 0.126524662239 = 
BGS-CARBON MONOXIDE = 0.00248477817217 = 
BGS-CARBON DIOXIDE = 0.216505250811 = 
BGS-METHANE        = 0.202524927542 = 
BGS-OXYGEN         = 0.140504985508 = 
BGS-NITROGEN       = 0.140504985508 = 
AMMONIA            = 0.140504985508 = 
BGS-ETHANE         = 0.0 = 
BGS-PROPANE        = 0.0 = 

>> OutQ
Port: /rxn.EneStream.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = -5150.0 * W

>> 
>> QExothermicIsPositive = 1
>> OutQ = 5150
>> Out
Port: /rxn.itnRxn.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 347.486379283 = C
P                  = 90.0 * kPa
MoleFlow           = 3.22830139891 = kgmole/h
MassFlow           = 83.9763174225 = kg/h
VolumeFlow         = 185.072103902 = m3/hr
StdLiqVolumeFlow   = 0.171838325403 = m3/hr
H                  = 21754.8311144 = kJ/kmol
Energy             = 19508.6532554 = W
MolecularWeight    = 26.0125394274 = 
ZFactor            = 0.999865944677 = 
BGS-HYDROGEN       = 0.0304454247101 = 
BGS-WATER          = 0.126524662239 = 
BGS-CARBON MONOXIDE = 0.00248477817217 = 
BGS-CARBON DIOXIDE = 0.216505250811 = 
BGS-METHANE        = 0.202524927542 = 
BGS-OXYGEN         = 0.140504985508 = 
BGS-NITROGEN       = 0.140504985508 = 
AMMONIA            = 0.140504985508 = 
BGS-ETHANE         = 0.0 = 
BGS-PROPANE        = 0.0 = 

>> 
>> copy /rxn
Copied /rxn to the clipboard
>> paste /
Pasting /rxn
Pasted /rxn as /rxnClone
>> /rxnClone.Out
Port: /rxnClone.itnRxn.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = 90.0 * kPa
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
BGS-HYDROGEN       = None
BGS-WATER          = None
BGS-CARBON MONOXIDE = None
BGS-CARBON DIOXIDE = None
BGS-METHANE        = None
BGS-OXYGEN         = None
BGS-NITROGEN       = None
AMMONIA            = None
BGS-ETHANE         = None
BGS-PROPANE        = None

>> 
>> clear 
>> read gibbsRxn.tst
Processing gibbsRxn.tst
>> $thermo = VirtualMaterials.SRK
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> #Peng-Robinson
>> thermo + METHANE WATER CARBON_MONOXIDE CARBON_DIOXIDE BGS-HYDROGEN 
METHANE WATER CARBON MONOXIDE CARBON DIOXIDE BGS-HYDROGEN 
>> 
>> units SI
>> 
>> # A Equilibrum reactor - isothermal, no pressure drop
>> rxn = EquiliReactor.EquilibriumReactor()          
>> cd /rxn
/rxn
>> In.P = 100
>> In.T = 1000 K
>> In.MoleFlow = 5
>> In.Fraction = 0.4 0.6 0 0 0
>> #In.Fraction = 1.95862592784202e-002 9.93197945149974e-002 0.175637702766885 3.57267224820499e-002 0.669729520957648
>> Out.P = 100 
>> Out.T = 1000 K
>> 'OutQ = 100000
None
>> 
>> NumberRxn = 2
>> 
>> Rxn0.Formula = Shift:1*3+1*4-!2-1*1
>> Rxn1.Formula = reforming:1*2+3*4-1*1-!0  
>> 
>> CalculationOption = 2
Converged /rxn.itnRxn
>> 
>> In
Port: /rxn.itnRxn.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 726.85 * C
P                  = 100.0 * kPa
MoleFlow           = 5.0 * kgmole/h
MassFlow           = 86.13076 = kg/h
VolumeFlow         = 415.738207741 = m3/hr
StdLiqVolumeFlow   = 0.161135103201 = m3/hr
H                  = 40861.9770423 = kJ/kmol
Energy             = 56752.7458922 = W
MolecularWeight    = 17.226152 = 
ZFactor            = 1.00004500088 = 
METHANE            = 0.4 * 
WATER              = 0.6 * 
CARBON MONOXIDE    = 0.0 * 
CARBON DIOXIDE     = 0.0 * 
BGS-HYDROGEN       = 0.0 * 

>> Out
Port: /rxn.itnRxn.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 726.85 * C
P                  = 100.0 * kPa
MoleFlow           = 8.66680487242 = kgmole/h
MassFlow           = 86.13076 = kg/h
VolumeFlow         = 720.757297438 = m3/hr
StdLiqVolumeFlow   = 0.544120889223 = m3/hr
H                  = 30176.6748969 = kJ/kmol
Energy             = 72648.709175 = W
MolecularWeight    = 9.93800614172 = 
ZFactor            = 1.00022944997 = 
METHANE            = 0.0192224892845 = 
WATER              = 0.0989712059748 = 
CARBON MONOXIDE    = 0.175909002802 = 
CARBON DIOXIDE     = 0.0356340587063 = 
BGS-HYDROGEN       = 0.670263243232 = 

>> OutQ
Port: /rxn.EneStream.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = -111972.85911 = W

>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
>> cd /RootClone.rxn
/RootClone.rxn
>> In
Port: /RootClone.rxn.itnRxn.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = 726.85 * C
P                  = 100.0 * kPa
MoleFlow           = 5.0 * kgmole/h
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
METHANE            = 0.4 * 
WATER              = 0.6 * 
CARBON MONOXIDE    = 0.0 * 
CARBON DIOXIDE     = 0.0 * 
BGS-HYDROGEN       = 0.0 * 

>> Out
Port: /RootClone.rxn.itnRxn.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = 726.85 * C
P                  = 100.0 * kPa
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
METHANE            = None
WATER              = None
CARBON MONOXIDE    = None
CARBON DIOXIDE     = None
BGS-HYDROGEN       = None

>> OutQ
Port: /RootClone.rxn.EneStream.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = None

>> 
>> 
>> clear
>> read man-controller.tst
Processing man-controller.tst
>> units SI
>> $thermo = VirtualMaterials.SRK
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + Methane Ethane Propane n-Butane n-Pentane n-Hexane n-Heptane n-Octane n-Nonane n-Decane
Methane Ethane Propane n-Butane n-Pentane n-Hexane n-Heptane n-Octane n-Nonane n-Decane 
>> 
>> S1 = Stream.Stream_Material()
>> S1.In.T = 25
>> S1.In.P = 200
>> S1.In.MoleFlow = 1000
>> S1.In.Fraction = 100 10 7 5 4 3 2 1 1 1
>> S1.In
Port: /S1.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.958915938874 = 
T                  = 25.0 * C
P                  = 200.0 * kPa
MoleFlow           = 1000.0 * kgmole/h
MassFlow           = 27138.1128358 = kg/h
VolumeFlow         = 11795.4195648 = m3/hr
StdLiqVolumeFlow   = 67.1216588756 = m3/hr
H                  = 10686.8084334 = kJ/kmol
Energy             = 2968557.89815 = W
MolecularWeight    = 27.1381128358 = 
ZFactor            = 0.951652041205 = 
METHANE            = 0.746268656716 * 
ETHANE             = 0.0746268656716 * 
PROPANE            = 0.0522388059701 * 
n-BUTANE           = 0.0373134328358 * 
n-PENTANE          = 0.0298507462687 * 
n-HEXANE           = 0.0223880597015 * 
n-HEPTANE          = 0.0149253731343 * 
n-OCTANE           = 0.00746268656716 * 
n-NONANE           = 0.00746268656716 * 
n-DECANE           = 0.00746268656716 * 

>> 
>> Sep = Flash.SimpleFlash()
>> 
>> S2 = Stream.Stream_Material()
>> S3 = Stream.Stream_Material()
>> 
>> S1.Out -> Sep.In
>> Sep.Vap -> S2.In
>> Sep.Liq0 -> S3.In
>> 
>> S1.In
Port: /S1.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.958915938874 = 
T                  = 25.0 * C
P                  = 200.0 * kPa
MoleFlow           = 1000.0 * kgmole/h
MassFlow           = 27138.1128358 = kg/h
VolumeFlow         = 11795.4195648 = m3/hr
StdLiqVolumeFlow   = 67.1216588756 = m3/hr
H                  = 10686.8084334 = kJ/kmol
Energy             = 2968557.89815 = W
MolecularWeight    = 27.1381128358 = 
ZFactor            = 0.951652041205 = 
METHANE            = 0.746268656716 * 
ETHANE             = 0.0746268656716 * 
PROPANE            = 0.0522388059701 * 
n-BUTANE           = 0.0373134328358 * 
n-PENTANE          = 0.0298507462687 * 
n-HEXANE           = 0.0223880597015 * 
n-HEPTANE          = 0.0149253731343 * 
n-OCTANE           = 0.00746268656716 * 
n-NONANE           = 0.00746268656716 * 
n-DECANE           = 0.00746268656716 * 

>> S2.In
Port: /S2.In + sim.solver.Ports.Port_Material
Connected to: /Sep.Vap
VapFrac            = 1.0 | 
T                  = 25.0 | C
P                  = 200.0 | kPa
MoleFlow           = 958.915938874 | kgmole/h
MassFlow           = 22743.1201048 | kg/h
VolumeFlow         = 11788.0180316 | m3/hr
StdLiqVolumeFlow   = 60.8104879229 | m3/hr
H                  = 11459.9241634 | kJ/kmol
Energy             = 3052528.87182 | W
MolecularWeight    = 23.7175326667 | 
ZFactor            = 0.991802101608 | 
METHANE            = 0.777904726796 | 
ETHANE             = 0.0776152314534 | 
PROPANE            = 0.0539440510002 | 
n-BUTANE           = 0.0375733281319 | 
n-PENTANE          = 0.0277453304281 | 
n-HEXANE           = 0.0164151271746 | 
n-HEPTANE          = 0.00661206761419 | 
n-OCTANE           = 0.00147352122052 | 
n-NONANE           = 0.000536260580591 | 
n-DECANE           = 0.000180355600222 | 

>> S3.In
Port: /S3.In + sim.solver.Ports.Port_Material
Connected to: /Sep.Liq0
VapFrac            = 0.0 | 
T                  = 25.0 | C
P                  = 200.0 | kPa
MoleFlow           = 41.084061126 | kgmole/h
MassFlow           = 4394.99392903 | kg/h
VolumeFlow         = 7.4020804625 | m3/hr
StdLiqVolumeFlow   = 6.31117225065 | m3/hr
H                  = -7357.95193544 | kJ/kmol
Energy             = -83970.7075216 | W
MolecularWeight    = 106.975644777 | 
ZFactor            = 0.0145360097338 | 
METHANE            = 0.00787176770177 | 
ETHANE             = 0.00487736799771 | 
PROPANE            = 0.0124377933285 | 
n-BUTANE           = 0.0312473861494 | 
n-PENTANE          = 0.0789918849382 | 
n-HEXANE           = 0.161798384215 | 
n-HEPTANE          = 0.208960818055 | 
n-OCTANE           = 0.147251890744 | 
n-NONANE           = 0.169127880365 | 
n-DECANE           = 0.177434826507 | 

>> 
>> S3.FlowSig = Stream.SensorPort("MoleFlow")
>> 
>> S1.TempSig = Stream.SensorPort("T")
>> 
>> S3.FlowSig
Port: /S3.FlowSig + sim.solver.Ports.Port_Signal
Connected to: None
MoleFlow   = 41.084061126 = kgmole/h

>> S1.TempSig
Port: /S1.TempSig + sim.solver.Ports.Port_Signal
Connected to: None
T   = 25.0 = C

>> 
>> ctr = Controller.Controller()
>> ctr.In -> S3.FlowSig
>> 
>> # before connecting the Outlet, we should get rid of the value downstream of the controlled
>> # port.  The controller changes the fixed values in this port and everything else must be
>> # calculated from it or an inconsistancy will occur
>> S1.In.T = None
>> 
>> ctr.Out -> S1.TempSig
ControllerConnect ('/ctr.Out', '/S1.TempSig')
ControllerConnect ('/ctr.Out', '/S1.TempSig')
ControllerConnect ('/ctr.Out', '/S1.TempSig')
>> ctr.Out = 25
>> # note that you could not have assigned ctr.Out until the connection was made as the type of
>> # signal was not known
>> 
>> ctr.Target = 300
>> ctr.StepSize = 30
Controller solver for / calculating derivative 0
Controller solver for / error - 0.223644
Controller solver for / error - 0.183460
Controller solver for / error - 0.137339
Controller solver for / error - 0.082072
Controller solver for / error - 0.010447
Controller solver for / error - 0.004604
Controller solver for / error - 0.000402
Controller solver for / error - 0.000015
>> 
>> ctr.In
Port: /ctr.In + sim.solver.Ports.Port_Signal
Connected to: /S3.FlowSig
MoleFlow   = 299.984829945 | kgmole/h

>> ctr.Out
Port: /ctr.Out + sim.solver.Ports.Port_Signal
Connected to: /S1.TempSig
T   = -128.144558434 * C

>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
>> 
>> cd /RootClone
/RootClone
>> ctr.In
Port: /RootClone.ctr.In + sim.solver.Ports.Port_Signal
Connected to: /RootClone.S3.FlowSig
MoleFlow   = 299.984829945 | kgmole/h

>> ctr.Out
Port: /RootClone.ctr.Out + sim.solver.Ports.Port_Signal
Connected to: /RootClone.S1.TempSig
T   = -128.144558434 * C

>> 
>> clear
>> read man-convrxn.tst
Processing man-convrxn.tst
>> #conversion reactor example
>> #calculation of propane adiabatic flame temperature
>> $thermo = VirtualMaterials.SRK
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + PROPANE OXYGEN NITROGEN CARBON_DIOXIDE WATER
PROPANE OXYGEN NITROGEN CARBON DIOXIDE WATER 
>> 
>> units SI
>> 
>> #create reactor
>> r = ConvRxn.ConvReactor()
>> cd /r
/r
>> In.P = 1 atm
>> In.T = 25 C
>> In.MoleFlow = 1
>> In.Fraction = 1 6 24 0 0
>> DeltaP = 0
>> OutQ = 0
>> 
>> #create reaction
>> NumberRxn = 1
>> Rxn0.Formula = PropaneAFT:4*WATER+3*"CARBON DIOXIDE"-!PROPANE-5*OXYGEN
>> 
>> Out
Port: /r.RxnHeater.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 1783.67118106 = C
P                  = 101.325 = kPa
MoleFlow           = 1.03225806452 = kgmole/h
MassFlow           = 29.3036109677 = kg/h
VolumeFlow         = 174.246977013 = m3/hr
StdLiqVolumeFlow   = 0.0779236765282 = m3/hr
H                  = 72780.2416088 = kJ/kmol
Energy             = 20868.8864828 = W
MolecularWeight    = 28.387873125 = 
ZFactor            = 1.00015348438 = 
PROPANE            = 0.0 = 
OXYGEN             = 0.03125 = 
NITROGEN           = 0.75 = 
CARBON DIOXIDE     = 0.09375 = 
WATER              = 0.125 = 

>> 
>> copy /r
Copied /r to the clipboard
>> paste /
Pasting /r
Pasted /r as /rClone
>> /rClone.Out
Port: /rClone.RxnHeater.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = None
OXYGEN             = None
NITROGEN           = None
CARBON DIOXIDE     = None
WATER              = None

>> 
>> clear
>> read man-cooler.tst
Processing man-cooler.tst
>> #Cooler Example - Distillation Tower Condenser Duty
>> $thermo = VirtualMaterials.NRTL/Ideal/HC
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + ETHANOL WATER
ETHANOL WATER 
>> 
>> topVap = Stream.Stream_Material()
>> topVap.In.P = 101.325
>> topVap.In.VapFrac = 1
>> topVap.In.MoleFlow = 100
>> topVap.In.Fraction = 0.85 0.15
>> 
>> cond = Heater.Cooler()
>> topVap.Out -> cond.In
>> cond.DeltaP = 0
>> cond.Out.VapFrac = 0
>> 
>> cond.OutQ
Port: /cond.OutQ + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 1072658.08202 = W

>> 
>> 
>> clear
>> read man-dehy1.tst
Processing man-dehy1.tst
>> #dehydration plant
>> $thermo = VirtualMaterials.Advanced_Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + WATER NITROGEN CARBON_DIOXIDE METHANE ETHANE PROPANE ISOBUTANE N-BUTANE ISOPENTANE
WATER NITROGEN CARBON DIOXIDE METHANE ETHANE PROPANE ISOBUTANE N-BUTANE ISOPENTANE 
>> thermo + N-PENTANE N-HEXANE N-OCTANE BENZENE TOLUENE ETHYLBENZENE O-XYLENE TRIETHYLENE_GLYCOL
N-PENTANE N-HEXANE N-OCTANE BENZENE TOLUENE ETHYLBENZENE O-XYLENE TRIETHYLENE GLYCOL 
>> 
>> units Field
>> 
>> #define feed to dehydration plant
>> Feed = Stream.Stream_Material()
>> Feed.In.MoleFlow = 100
>> Feed.In.Fraction = 0.0022 0.0041 0.0186 0.8954 0.0469 0.0161 0.0043 0.0053 0.0021 0.0016 0.0022 .0016 0.000256 0.00018 0.000100 0.000095 0.0
>> 
>> Feed.In.T = 120
>> Feed.In.P = 1000
>> Feed.In
Port: /Feed.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.999849237566 = 
T                  = 120.0 * F
P                  = 1000.0 * psia
MoleFlow           = 100.0 * lbmole/h
MassFlow           = 1869.29480482 = lb/h
VolumeFlow         = 0.150162392388 = ft3/s
StdLiqVolumeFlow   = 0.0252026886471 = ft3/s
H                  = 4270.73184587 = Btu/lbmol
Energy             = 427001.36754 = Btu/hr
MolecularWeight    = 18.6929480482 = 
ZFactor            = 0.868456621466 = 
WATER              = 0.00219773413611 * 
NITROGEN           = 0.00409577725365 * 
CARBON DIOXIDE     = 0.0185808431507 * 
METHANE            = 0.894477793395 * 
ETHANE             = 0.0468516959015 * 
PROPANE            = 0.016083417996 * 
ISOBUTANE          = 0.00429557126602 * 
n-BUTANE           = 0.00529454132789 * 
ISOPENTANE         = 0.00209783712992 * 
n-PENTANE          = 0.00159835209899 * 
n-HEXANE           = 0.00219773413611 * 
n-OCTANE           = 0.00159835209899 * 
BENZENE            = 0.000255736335838 * 
TOLUENE            = 0.000179814611136 * 
ETHYLBENZENE       = 9.98970061866e-005 * 
o-XYLENE           = 9.49021558773e-005 * 
TRIETHYLENE GLYCOL = 0.0 * 

>> 
>> Lean = Stream.Stream_Material()
>> Lean.In.T = 130.0022
>> Lean.In.P = 1000
>> Lean.In.MoleFlow = 5
>> Lean.In.Fraction = 0.14 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.86
>> Lean.In
Port: /Lean.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 130.0022 * F
P                  = 1000.0 * psia
MoleFlow           = 5.0 * lbmole/h
MassFlow           = 658.354424 = lb/h
VolumeFlow         = 0.00269392947813 = ft3/s
StdLiqVolumeFlow   = 0.00260142625666 = ft3/s
H                  = -19890.6464214 = Btu/lbmol
Energy             = -99436.5079538 = Btu/hr
MolecularWeight    = 131.6708848 = 
ZFactor            = 0.328171649273 = 
WATER              = 0.14 * 
NITROGEN           = 0.0 * 
CARBON DIOXIDE     = 0.0 * 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
ISOBUTANE          = 0.0 * 
n-BUTANE           = 0.0 * 
ISOPENTANE         = 0.0 * 
n-PENTANE          = 0.0 * 
n-HEXANE           = 0.0 * 
n-OCTANE           = 0.0 * 
BENZENE            = 0.0 * 
TOLUENE            = 0.0 * 
ETHYLBENZENE       = 0.0 * 
o-XYLENE           = 0.0 * 
TRIETHYLENE GLYCOL = 0.86 * 

>> 
>> dehy = Tower.Tower()
>> dehy.Stage_0 + 10
>> 
>> cd dehy.Stage_0
/dehy.Stage_0
>> v = Tower.VapourDraw()
>> v.Port.P = 995
>> estT = Tower.Estimate('T')
>> estT.Value = 130
>> lFeed = Tower.Feed()
>> /Lean.Out -> lFeed.Port
>> 
>> cd ../Stage_11
/dehy.Stage_11
>> l = Tower.LiquidDraw()
>> l.Port.P = 1000
>> estT = Tower.Estimate('T')
>> estT.Value = 120
>> vFeed = Tower.Feed()
>> /Feed.Out -> vFeed.Port
>> 
>> cd ..
/dehy
>> /dryGas = Stream.Stream_Material()
>> /Rich = Stream.Stream_Material()
>> 
>> /dryGas.In -> Stage_0.V.Port
Cannot connect to Stage_0.V.Port
>> /Rich.In -> Stage_11.L.Port
Cannot connect to Stage_11.L.Port
>> 
>> InitKPower = 0  # says to use combined feed composition and est T and P on each stage to get initial Ks
>> TryToSolve = 1
Calculating Jacobian for /dehy
Calculating disturbance 10 of 12 in jacobian of /dehy
/dehy Inner Error 0.867424
/dehy Inner Error 0.577463
/dehy Inner Error 0.372552
/dehy Inner Error 0.368812
/dehy Inner Error 0.050131
/dehy Inner Error 0.008061
/dehy Inner Error 0.005992
/dehy Inner Error 0.001680
/dehy Inner Error 0.000666
/dehy Inner Error 0.000172
/dehy Inner Error 0.000059
/dehy Iteration 1 Outer Error 0.968627
/dehy Inner Error 0.099701
/dehy Inner Error 0.046340
/dehy Inner Error 0.020456
/dehy Inner Error 0.002737
/dehy Inner Error 0.001256
/dehy Inner Error 0.000203
/dehy Inner Error 0.000083
/dehy Iteration 2 Outer Error 0.116568
/dehy Inner Error 0.057834
/dehy Inner Error 0.033708
/dehy Inner Error 0.008714
/dehy Inner Error 0.003651
/dehy Inner Error 0.000832
/dehy Inner Error 0.000247
/dehy Inner Error 0.000065
/dehy Iteration 3 Outer Error 0.041864
/dehy Inner Error 0.029097
/dehy Inner Error 0.003370
/dehy Inner Error 0.002052
/dehy Inner Error 0.000421
/dehy Inner Error 0.000075
/dehy Iteration 4 Outer Error 0.007244
/dehy Inner Error 0.007188
/dehy Inner Error 0.002123
/dehy Inner Error 0.000614
/dehy Inner Error 0.000057
/dehy Iteration 5 Outer Error 0.001105
/dehy Inner Error 0.001910
/dehy Inner Error 0.000116
/dehy Inner Error 0.000058
/dehy Iteration 6 Outer Error 0.000119
/dehy Inner Error 0.000112
/dehy Inner Error 0.000022
/dehy Iteration 7 Outer Error 0.000034
/dehy Inner Error 0.000033
>> 
>> Stage_0.v.Port
Port: /dehy.VapourDraw_0_v + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 124.354759287 = F
P                  = 995.0 * psia
MoleFlow           = 99.5470265571 = lbmole/h
MassFlow           = 1853.80922768 = lb/h
VolumeFlow         = 0.152319277472 = ft3/s
StdLiqVolumeFlow   = 0.025095924441 = ft3/s
H                  = 4326.49579733 = Btu/lbmol
Energy             = 430617.366817 = Btu/hr
MolecularWeight    = 18.6224470162 = 
ZFactor            = 0.873790854203 = 
WATER              = 0.000198231812263 = 
NITROGEN           = 0.0041087558255 = 
CARBON DIOXIDE     = 0.0184032037388 = 
METHANE            = 0.897369389224 = 
ETHANE             = 0.0469116176225 = 
PROPANE            = 0.0160817190946 = 
ISOBUTANE          = 0.00428442128848 = 
n-BUTANE           = 0.00526316423205 = 
ISOPENTANE         = 0.00207548048612 = 
n-PENTANE          = 0.00157590149545 = 
n-HEXANE           = 0.0021293056621 = 
n-OCTANE           = 0.00135220532678 = 
BENZENE            = 0.000142534304563 = 
TOLUENE            = 3.31279111313e-005 = 
ETHYLBENZENE       = 6.8911136358e-005 = 
o-XYLENE           = 9.46646789573e-008 = 
TRIETHYLENE GLYCOL = 1.93617453481e-006 = 

>> Stage_11.l.Port
Port: /dehy.LiquidDraw_11_l + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 122.875808096 = F
P                  = 1000.0 * psia
MoleFlow           = 5.45297344292 = lbmole/h
MassFlow           = 673.840001144 = lb/h
VolumeFlow         = 0.00278674052041 = ft3/s
StdLiqVolumeFlow   = 0.0027081904628 = ft3/s
H                  = -18901.5994668 = Btu/lbmol
Energy             = -103052.587582 = Btu/hr
MolecularWeight    = 123.57294753 = 
ZFactor            = 0.314816494983 = 
WATER              = 0.1650549073 = 
NITROGEN           = 0.000103301454335 = 
CARBON DIOXIDE     = 0.00478639847178 = 
METHANE            = 0.021515769354 = 
ETHANE             = 0.00279802295128 = 
PROPANE            = 0.00136704898596 = 
ISOBUTANE          = 0.000560378085203 = 
n-BUTANE           = 0.00101261876012 = 
ISOPENTANE         = 0.000582398200638 = 
n-PENTANE          = 0.000542621729417 = 
n-HEXANE           = 0.00143176312865 = 
n-OCTANE           = 0.00462631820726 = 
BENZENE            = 0.00208780906442 = 
TOLUENE            = 0.00269278334438 = 
ETHYLBENZENE       = 0.000573962431748 = 
o-XYLENE           = 0.00173864628164 = 
TRIETHYLENE GLYCOL = 0.788525252249 = 

>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
/RootClone.dehy Inner Error 0.000010
/RootClone.dehy Iteration 1 Outer Error 0.000016
/RootClone.dehy Inner Error 0.000024
>> cd /RootClone.dehy
/RootClone.dehy
>> Stage_0.v.Port
Port: /RootClone.dehy.VapourDraw_0_v + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 124.355031762 = F
P                  = 995.0 * psia
MoleFlow           = 99.5470240073 = lbmole/h
MassFlow           = 1853.80912113 = lb/h
VolumeFlow         = 0.152319385816 = ft3/s
StdLiqVolumeFlow   = 0.0250959236001 = ft3/s
H                  = 4326.49896568 = Btu/lbmol
Energy             = 430617.671133 = Btu/hr
MolecularWeight    = 18.6224464228 = 
ZFactor            = 0.873791087064 = 
WATER              = 0.00019822977459 = 
NITROGEN           = 0.00410875587324 = 
CARBON DIOXIDE     = 0.0184032010855 = 
METHANE            = 0.897369401111 = 
ETHANE             = 0.0469116172651 = 
PROPANE            = 0.0160817187237 = 
ISOBUTANE          = 0.00428442106987 = 
n-BUTANE           = 0.0052631637557 = 
ISOPENTANE         = 0.00207548018344 = 
n-PENTANE          = 0.00157590119811 = 
n-HEXANE           = 0.00212930480013 = 
n-OCTANE           = 0.00135220258006 = 
BENZENE            = 0.000142533001542 = 
TOLUENE            = 3.31277343007e-005 = 
ETHYLBENZENE       = 6.89110323132e-005 = 
o-XYLENE           = 9.46589478131e-008 = 
TRIETHYLENE GLYCOL = 1.93615213947e-006 = 

>> Stage_11.l.Port
Port: /RootClone.dehy.LiquidDraw_11_l + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 122.873985289 = F
P                  = 1000.0 * psia
MoleFlow           = 5.45297599273 = lbmole/h
MassFlow           = 673.840107694 = lb/h
VolumeFlow         = 0.00278673925073 = ft3/s
StdLiqVolumeFlow   = 0.00270819130368 = ft3/s
H                  = -18901.6673413 = Btu/lbmol
Energy             = -103053.005825 = Btu/hr
MolecularWeight    = 123.572909287 = 
ZFactor            = 0.314817281425 = 
WATER              = 0.165054867412 = 
NITROGEN           = 0.000103302455793 = 
CARBON DIOXIDE     = 0.00478645327573 = 
METHANE            = 0.0215159618969 = 
ETHANE             = 0.00279805010409 = 
PROPANE            = 0.00136706263662 = 
ISOBUTANE          = 0.000560383817424 = 
n-BUTANE           = 0.00101262944375 = 
ISOPENTANE         = 0.000582404424324 = 
n-PENTANE          = 0.000542627640524 = 
n-HEXANE           = 0.00143177919064 = 
n-OCTANE           = 0.00462636681918 = 
BENZENE            = 0.00208783194216 = 
TOLUENE            = 0.00269278532886 = 
ETHYLBENZENE       = 0.00057396409498 = 
o-XYLENE           = 0.00173864557332 = 
TRIETHYLENE GLYCOL = 0.788524883944 = 

>> 
>> 
>> clear
>> read man-ethanol.tst
Processing man-ethanol.tst
>> #ethanol distillation
>> $thermo = VirtualMaterials.PSRK
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + Ethanol Water
Ethanol Water 
>> 
>> units SI
>> 
>> Feed = Stream.Stream_Material()
>> Feed.In.MoleFlow = 34.43
>> Feed.In.Fraction = 0.3 0.7
>> Feed.In.VapFrac = 0.0
>> Feed.In.P = 101.325
>> Feed.In
Port: /Feed.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 * 
T                  = 82.3053969833 = C
P                  = 101.325 * kPa
MoleFlow           = 34.43 * kgmole/h
MassFlow           = 910.02718004 = kg/h
VolumeFlow         = 1.08837773058 = m3/hr
StdLiqVolumeFlow   = 1.03202731818 = m3/hr
H                  = -26999.078441 = kJ/kmol
Energy             = -258216.186312 = W
MolecularWeight    = 26.431228 = 
ZFactor            = 0.00134578067469 = 
ETHANOL            = 0.3 * 
WATER              = 0.7 * 

>> 
>> Steam = Stream.Stream_Material()
>> Steam.In.P = 24.7 psia
>> Steam.In.Fraction = 0 1
>> Steam.In.MoleFlow = 51.1
>> Steam.In.VapFrac = 1.0
>> Steam.In
Port: /Steam.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 * 
T                  = 115.126421791 = C
P                  = 170.3004979 * kPa
MoleFlow           = 51.1 * kgmole/h
MassFlow           = 920.580808 = kg/h
VolumeFlow         = 956.093791476 = m3/hr
StdLiqVolumeFlow   = 0.921453718664 = m3/hr
H                  = 12894.1567862 = kJ/kmol
Energy             = 183025.39216 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.987319045108 = 
ETHANOL            = 0.0 * 
WATER              = 1.0 * 

>> 
>> dist = Tower.Tower()
>> dist.MaxOuterLoops = 40
>> dist.Stage_0 + 12
>> cd dist.Stage_0
/dist.Stage_0
>> l = Tower.LiquidDraw()
>> l.Port.P = 101.325
>> l.Port.MoleFlow = 12.91
>> #reflux = Tower.RefluxRatioSpec()
>> #reflux.Port = 3.0
>> cond = Tower.EnergyFeed(0)
>> estT = Tower.Estimate('T')
>> estT.Value = 78
>> 
>> cd ../Stage_11
/dist.Stage_11
>> f = Tower.Feed()
>> /Feed.Out -> f.Port
>> 
>> cd ../Stage_13
/dist.Stage_13
>> l = Tower.LiquidDraw()
>> l.Port.P = 101.325
>> f = Tower.Feed()
>> /Steam.Out -> f.Port
>> estT = Tower.Estimate('T')
>> estT.Value = 100
>> 
>> cd ..
/dist
>> /distillate = Stream.Stream_Material()
>> /stillage   = Stream.Stream_Material()
>> /distillate.In -> Stage_0.l.Port
>> /stillage.In -> Stage_13.l.Port
>> 
>> TryToSolve = 1
Calculating Jacobian for /dist
Calculating disturbance 10 of 14 in jacobian of /dist
/dist Inner Error 0.520456
/dist Inner Error 0.299183
/dist Inner Error 0.085292
/dist Inner Error 0.019654
/dist Inner Error 0.003884
/dist Inner Error 0.000213
/dist Inner Error 0.000009
/dist Iteration 1 Outer Error 0.494313
/dist Inner Error 1.181750
/dist Inner Error 1.172933
/dist Inner Error 0.800024
/dist Inner Error 0.365589
/dist Inner Error 0.281486
/dist Inner Error 0.056091
/dist Inner Error 0.011805
/dist Inner Error 0.005841
/dist Inner Error 0.001093
/dist Inner Error 0.000103
/dist Inner Error 0.000008
/dist Iteration 2 Outer Error 0.210928
/dist Inner Error 0.432210
/dist Inner Error 0.093560
/dist Inner Error 0.016225
/dist Inner Error 0.002888
/dist Inner Error 0.000455
/dist Inner Error 0.000061
/dist Iteration 3 Outer Error 0.186157
/dist Inner Error 0.043121
/dist Inner Error 0.009182
/dist Inner Error 0.000983
/dist Inner Error 0.000220
/dist Inner Error 0.000057
/dist Iteration 4 Outer Error 0.180835
/dist Inner Error 0.032609
/dist Inner Error 0.007836
/dist Inner Error 0.001627
/dist Inner Error 0.000253
/dist Inner Error 0.000025
/dist Iteration 5 Outer Error 0.150195
/dist Inner Error 0.058382
/dist Inner Error 0.007691
/dist Inner Error 0.000752
/dist Inner Error 0.000159
/dist Inner Error 0.000009
/dist Iteration 6 Outer Error 0.134487
/dist Inner Error 0.057579
/dist Inner Error 0.012589
/dist Inner Error 0.000920
/dist Inner Error 0.000132
/dist Inner Error 0.000015
/dist Iteration 7 Outer Error 0.131415
/dist Inner Error 0.023773
/dist Inner Error 0.005332
/dist Inner Error 0.000435
/dist Inner Error 0.000050
/dist Iteration 8 Outer Error 0.086428
/dist Inner Error 0.019178
/dist Inner Error 0.002841
/dist Inner Error 0.000519
/dist Inner Error 0.000015
/dist Iteration 9 Outer Error 0.087944
/dist Inner Error 0.031362
/dist Inner Error 0.005243
/dist Inner Error 0.000756
/dist Inner Error 0.000048
/dist Iteration 10 Outer Error 0.083068
/dist Inner Error 0.010750
/dist Inner Error 0.001145
/dist Inner Error 0.000060
/dist Iteration 11 Outer Error 0.063463
/dist Inner Error 0.008161
/dist Inner Error 0.001273
/dist Inner Error 0.000084
/dist Iteration 12 Outer Error 0.041871
/dist Inner Error 0.010145
/dist Inner Error 0.000869
/dist Inner Error 0.000102
/dist Inner Error 0.000006
/dist Iteration 13 Outer Error 0.005213
/dist Inner Error 0.009854
/dist Inner Error 0.000746
/dist Inner Error 0.000058
/dist Iteration 14 Outer Error 0.032569
/dist Inner Error 0.010642
/dist Inner Error 0.000967
/dist Inner Error 0.000344
/dist Inner Error 0.000012
/dist Iteration 15 Outer Error 0.025001
/dist Inner Error 0.004556
/dist Inner Error 0.000531
/dist Inner Error 0.000037
/dist Iteration 16 Outer Error 0.019612
/dist Inner Error 0.002807
/dist Inner Error 0.000110
/dist Inner Error 0.000004
/dist Iteration 17 Outer Error 0.014569
/dist Inner Error 0.000227
/dist Inner Error 0.000024
/dist Iteration 18 Outer Error 0.010444
/dist Inner Error 0.000214
/dist Inner Error 0.000015
/dist Iteration 19 Outer Error 0.007296
/dist Inner Error 0.000137
/dist Inner Error 0.000010
/dist Iteration 20 Outer Error 0.000617
/dist Inner Error 0.001481
/dist Inner Error 0.000102
/dist Inner Error 0.000006
/dist Iteration 21 Outer Error 0.000452
/dist Inner Error 0.000684
/dist Inner Error 0.000002
/dist Iteration 22 Outer Error 0.000329
/dist Inner Error 0.000211
/dist Inner Error 0.000002
/dist Iteration 23 Outer Error 0.000234
/dist Inner Error 0.000036
/dist Iteration 24 Outer Error 0.000164
/dist Inner Error 0.000033
/dist Iteration 25 Outer Error 0.000113
/dist Inner Error 0.000029
/dist Iteration 26 Outer Error 0.000077
/dist Inner Error 0.000023
>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
/RootClone.dist Inner Error 0.000000
/RootClone.dist Iteration 1 Outer Error 0.000052
/RootClone.dist Inner Error 0.000020
>> cd /RootClone
/RootClone
>> dist.Stage_0.l.Port
Port: /RootClone.dist.LiquidDraw_0_l + sim.solver.Ports.Port_Material
Connected to: /RootClone.distillate.In
VapFrac            = 0.0 = 
T                  = 78.3527342961 = C
P                  = 101.325 * kPa
MoleFlow           = 12.91 * kgmole/h
MassFlow           = 521.748176105 = kg/h
VolumeFlow         = 0.675553560445 = m3/hr
StdLiqVolumeFlow   = 0.643133412002 = m3/hr
H                  = -23523.7525852 = kJ/kmol
Energy             = -84358.7905208 = W
MolecularWeight    = 40.4142661584 = 
ZFactor            = 0.00218822662589 = 
ETHANOL            = 0.798447881036 = 
WATER              = 0.201552118964 = 

>> 
>> clear
>> read man-heater.tst
Processing man-heater.tst
>> #Heater example
>> #distillation tower condenser is used to preheat distillation tower feed
>> 
>> $thermo = VirtualMaterials.NRTL/Ideal/HC
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + ETHANOL WATER
ETHANOL WATER 
>> 
>> topVap = Stream.Stream_Material()
>> topVap.In.P = 101.325
>> topVap.In.VapFrac = 1
>> topVap.In.MoleFlow = 100
>> topVap.In.Fraction = 0.85 0.15
>> 
>> cond = Heater.Cooler()
>> topVap.Out -> cond.In
>> cond.DeltaP = 0
>> cond.Out.VapFrac = 0
>> 
>> heater = Heater.Heater()
>> heater.In.P = 130.0
>> heater.In.T = 25.0
>> heater.In.MoleFlow = 1000.0
>> heater.In.Fraction = 0.1 0.9
>> heater.DeltaP = 0.0
>> cond.OutQ -> heater.InQ
>> heater.Out
Port: /heater.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 72.7332878896 = C
P                  = 130.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 20820.596 = kg/h
VolumeFlow         = 22.833656076 = m3/hr
StdLiqVolumeFlow   = 22.0131260827 = m3/hr
H                  = -29515.0282062 = kJ/kmol
Energy             = -8198618.94618 = W
MolecularWeight    = 20.820596 = 
ZFactor            = 0.00103218807451 = 
ETHANOL            = 0.1 = 
WATER              = 0.9 = 

>> 		
>> 
>> clear
>> read man-material.tst
Processing man-material.tst
>> #material stream example
>> $thermo = VirtualMaterials.Advanced_Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + WATER TRIETHYLENE_GLYCOL
WATER TRIETHYLENE GLYCOL 
>> 
>> #generate WATER/TEG bubble temperature curve
>> units Field
>> 
>> s = Stream.Stream_Material()
>> s.In.P = 1 atm
>> s.In.VapFrac = 0.0
>> s.In.Fraction = 0.0 1.0
>> s.Out.T
/s.Out.T= 533.598720068 = F
>> s.In.Fraction = 0.1 0.9
>> s.Out.T
/s.Out.T= 393.213847232 = F
>> s.In.Fraction = 0.2 0.8
>> s.Out.T
/s.Out.T= 336.780260915 = F
>> s.In.Fraction = 0.3 0.7
>> s.Out.T
/s.Out.T= 305.006931912 = F
>> s.In.Fraction = 0.4 0.6
>> s.Out.T
/s.Out.T= 282.841331424 = F
>> s.In.Fraction = 0.5 0.5
>> s.Out.T
/s.Out.T= 265.550293452 = F
>> s.In.Fraction = 0.6 0.4
>> s.Out.T
/s.Out.T= 251.124748727 = F
>> s.In.Fraction = 0.7 0.3
>> s.Out.T
/s.Out.T= 238.598652058 = F
>> s.In.Fraction = 0.8 0.2
>> s.Out.T
/s.Out.T= 227.597819205 = F
>> s.In.Fraction = 0.9 0.1
>> s.Out.T
/s.Out.T= 218.378877239 = F
>> s.In.Fraction = 1.0 0.0
>> s.Out.T
/s.Out.T= 212.016986471 = F
>> 
>> clear
>> read man-mixer.tst
Processing man-mixer.tst
>> #adiabatic mixer example
>> $thermo = VirtualMaterials.PSRK
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + ETHANOL WATER
ETHANOL WATER 
>> units SI
>> 
>> m = Mixer.Mixer()
>> 
>> m.In0.P = 1 atm
>> m.In0.T = 25 C
>> m.In0.MoleFlow = 1.0
>> m.In0.Fraction = 1.0 0.0
>> 
>> m.In1.P = 1 atm
>> m.In1.T = 25 C
>> m.In1.MoleFlow = 1.0
>> m.In1.Fraction = 0.0 1.0
>> 
>> m.Out
Port: /m.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 25.1658490669 = C
P                  = 101.325 = kPa
MoleFlow           = 2.0 = kgmole/h
MassFlow           = 64.08372 = kg/h
VolumeFlow         = 0.0739615972581 = m3/hr
StdLiqVolumeFlow   = 0.0758723616231 = m3/hr
H                  = -31108.6581268 = kJ/kmol
Energy             = -17282.5878482 = W
MolecularWeight    = 32.04186 = 
ZFactor            = 0.00187446691958 = 
ETHANOL            = 0.5 = 
WATER              = 0.5 = 

>> 
>> #Play with pressures
>> m.In0.P = 100
>> m.In1.P = 80
>> m.Out.P
/m.Out.P= 80.0 = kPa
>> 
>> m.In0.P = 100
>> m.In1.P = 110
>> m.Out.P
/m.Out.P= 100.0 = kPa
>> 
>> m.In0.P = 
>> m.In1.P = 110
>> m.Out.P = 100
>> m.In0.P
/m.In0.P= 100.0 = kPa
>> 
>> m.Out.P = 80
>> m.In0.P
/m.In0.P= 80.0 = kPa
>> 
>> 
>> 
>> /m.CalcPressureMode = DontCalculate
>> /m.In0.P = 130
>> /m.In0.P = 100
>> /m.In0.P = 70
>> 
>> /m.CalcPressureMode = LowestPInOutlet
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/m.Out.P: 70 Vs 80

ConsistencyError: /m.Out - P 70.0 vs 80.0
>> /m.Out.P = 
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/m.Out.P: 80 Vs 70

ConsistencyError: /m.Out - P 80.0 vs 70.0
>> #A problem in the solver does not clear the consistency error properly because of some
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/m.Out.P: 80 Vs 70

>> #stored results in the flash. This will be addressed later
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/m.Out.P: 80 Vs 70

>> Ignored = 1 ; Ignored = None
>> 
>> /m.CalcPressureMode = AllPEqual
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/m.In1.P: 70 Vs 110

ConsistencyError: /m.In1 - P 70.0 vs 110.0
>> /m.In1.P = 
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/m.In1.P: 110 Vs 70

ConsistencyError: /m.In1 - P 110.0 vs 70.0
>> /m.In0.P = 
>> /m.Out.P = 100
>> /m.Out.P = 
>> /m.In1.P = 120
>> copy /m
Copied /m to the clipboard
>> paste /
Pasting /m
Pasted /m as /mClone
>> /m.Out
Port: /m.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 25.1657751191 = C
P                  = 120.0 = kPa
MoleFlow           = 2.0 = kgmole/h
MassFlow           = 64.08372 = kg/h
VolumeFlow         = 0.0739608581443 = m3/hr
StdLiqVolumeFlow   = 0.0758723616231 = m3/hr
H                  = -31108.0495579 = kJ/kmol
Energy             = -17282.2497544 = W
MolecularWeight    = 32.04186 = 
ZFactor            = 0.00221992868951 = 
ETHANOL            = 0.5 = 
WATER              = 0.5 = 

>> /mClone.Out
Port: /mClone.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 25.1657751191 = C
P                  = 120.0 = kPa
MoleFlow           = 2.0 = kgmole/h
MassFlow           = 64.08372 = kg/h
VolumeFlow         = 0.0739608581443 = m3/hr
StdLiqVolumeFlow   = 0.0758723616231 = m3/hr
H                  = -31108.0495579 = kJ/kmol
Energy             = -17282.2497544 = W
MolecularWeight    = 32.04186 = 
ZFactor            = 0.00221992868951 = 
ETHANOL            = 0.5 = 
WATER              = 0.5 = 

>> 
>> 
>> clear
>> read man-propsensor.tst
Processing man-propsensor.tst
>> #Property Sensor Example
>> #generate a table of enthalpy versus molar fractions
>> $thermo = VirtualMaterials.Advanced_Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + WATER TRIETHYLENE_GLYCOL
WATER TRIETHYLENE GLYCOL 
>> 
>> #generate WATER/TEG bubble temperature curve
>> units Field
>> 
>> s = Stream.Stream_Material()
>> s.In.P = 1 atm
>> s.In.VapFrac = 0.0
>> 
>> ps = Sensor.PropertySensor()
>> s.Out -> ps.In
>> ps.SignalType = H
>> 
>> #generate enthalpy composition curve
>> s.In.Fraction = 0.0 1.0
>> ps.Signal
Port: /ps.Signal + sim.solver.Ports.Port_Signal
Connected to: None
H   = 6664.66072071 = Btu/lbmol

>> s.In.Fraction = 0.1 0.9
>> ps.Signal
Port: /ps.Signal + sim.solver.Ports.Port_Signal
Connected to: None
H   = -5753.61092186 = Btu/lbmol

>> s.In.Fraction = 0.2 0.8
>> ps.Signal
Port: /ps.Signal + sim.solver.Ports.Port_Signal
Connected to: None
H   = -9559.29851847 = Btu/lbmol

>> s.In.Fraction = 0.3 0.7
>> ps.Signal
Port: /ps.Signal + sim.solver.Ports.Port_Signal
Connected to: None
H   = -11302.3469052 = Btu/lbmol

>> s.In.Fraction = 0.4 0.6
>> ps.Signal
Port: /ps.Signal + sim.solver.Ports.Port_Signal
Connected to: None
H   = -12262.3611607 = Btu/lbmol

>> s.In.Fraction = 0.5 0.5
>> ps.Signal
Port: /ps.Signal + sim.solver.Ports.Port_Signal
Connected to: None
H   = -12812.1153656 = Btu/lbmol

>> s.In.Fraction = 0.6 0.4
>> ps.Signal
Port: /ps.Signal + sim.solver.Ports.Port_Signal
Connected to: None
H   = -13102.1535022 = Btu/lbmol

>> s.In.Fraction = 0.7 0.3
>> ps.Signal
Port: /ps.Signal + sim.solver.Ports.Port_Signal
Connected to: None
H   = -13201.4478266 = Btu/lbmol

>> s.In.Fraction = 0.8 0.2
>> ps.Signal
Port: /ps.Signal + sim.solver.Ports.Port_Signal
Connected to: None
H   = -13135.8847696 = Btu/lbmol

>> s.In.Fraction = 0.9 0.1
>> ps.Signal
Port: /ps.Signal + sim.solver.Ports.Port_Signal
Connected to: None
H   = -12890.4573901 = Btu/lbmol

>> s.In.Fraction = 1.0 0.0
>> ps.Signal
Port: /ps.Signal + sim.solver.Ports.Port_Signal
Connected to: None
H   = -12367.9834643 = Btu/lbmol

>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
>> /RootClone.ps.Signal
Port: /RootClone.ps.Signal + sim.solver.Ports.Port_Signal
Connected to: None
H   = -12367.9834643 = Btu/lbmol

>> 
>> clear
>> read man-splitter.tst
Processing man-splitter.tst
>> #splitter example
>> $thermo = VirtualMaterials.NRTL/Ideal/HC
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + ETHANOL WATER
ETHANOL WATER 
>> units SI
>> s = Split.Splitter()
>> s.In.P = 100.0
>> s.In.T = 25.0
>> s.In
Port: /s.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = 25.0 * C
P                  = 100.0 * kPa
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow is invalid
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
ETHANOL            = None
WATER              = None

>> s.Out0.MoleFlow = 50.0
>> s.Out1.MoleFlow = 50.0
>> s.Out1.Fraction = 1.0 1.0
>> s.In
Port: /s.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 25.0 * C
P                  = 100.0 * kPa
MoleFlow           = 100.0 = kgmole/h
MassFlow           = 3204.186 = kg/h
VolumeFlow         = 3.82918220463 = m3/hr
StdLiqVolumeFlow   = 3.79361808116 = m3/hr
H                  = -31194.1513604 = kJ/kmol
Energy             = -866504.204454 = W
MolecularWeight    = 32.04186 = 
ZFactor            = 0.00154468819068 = 
ETHANOL            = 0.5 = 
WATER              = 0.5 = 

>> cd /s
/s
>> /s.Out0.MoleFlow = 
>> /s.FlowFraction1.Fraction = .3
>> Out0
Port: /s.Out0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 25.0 = C
P                  = 100.0 = kPa
MoleFlow           = 116.666666667 = kgmole/h
MassFlow           = 3738.217 = kg/h
VolumeFlow         = 4.46737923874 = m3/hr
StdLiqVolumeFlow   = 4.42588776135 = m3/hr
H                  = -31194.1513604 = kJ/kmol
Energy             = -1010921.57186 = W
MolecularWeight    = 32.04186 = 
ZFactor            = 0.00154468819068 = 
ETHANOL            = 0.5 = 
WATER              = 0.5 = 

>> /s.FlowFraction1.Fraction = 
>> /s.FlowFraction0.Fraction = .2
>> Out0
Port: /s.Out0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 25.0 = C
P                  = 100.0 = kPa
MoleFlow           = 12.5 = kgmole/h
MassFlow           = 400.52325 = kg/h
VolumeFlow         = 0.478647775579 = m3/hr
StdLiqVolumeFlow   = 0.474202260144 = m3/hr
H                  = -31194.1513604 = kJ/kmol
Energy             = -108313.025557 = W
MolecularWeight    = 32.04186 = 
ZFactor            = 0.00154468819068 = 
ETHANOL            = 0.5 = 
WATER              = 0.5 = 

>> /s.FlowFraction0.Fraction = 3
>> In
Port: /s.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 25.0 * C
P                  = 100.0 * kPa
MoleFlow           = -25.0 = kgmole/h
MassFlow           = -801.0465 = kg/h
VolumeFlow         = -0.957295551158 = m3/hr
StdLiqVolumeFlow   = -0.948404520289 = m3/hr
H                  = -31194.1513604 = kJ/kmol
Energy             = 216626.051114 = W
MolecularWeight    = 32.04186 = 
ZFactor            = 0.00154468819068 = 
ETHANOL            = 0.5 = 
WATER              = 0.5 = 

>> Out0
Port: /s.Out0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 25.0 = C
P                  = 100.0 = kPa
MoleFlow           = -75.0 = kgmole/h
MassFlow           = -2403.1395 = kg/h
VolumeFlow         = -2.87188665347 = m3/hr
StdLiqVolumeFlow   = -2.84521356087 = m3/hr
H                  = -31194.1513604 = kJ/kmol
Energy             = 649878.153341 = W
MolecularWeight    = 32.04186 = 
ZFactor            = 0.00154468819068 = 
ETHANOL            = 0.5 = 
WATER              = 0.5 = 

>> /s.FlowFraction0.Fraction = .1
>> /s.Out1.MoleFlow = 
>> /s.In.MoleFlow = 100
>> Out1
Port: /s.Out1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 25.0 = C
P                  = 100.0 = kPa
MoleFlow           = 90.0 = kgmole/h
MassFlow           = 2883.7674 = kg/h
VolumeFlow         = 3.44626398417 = m3/hr
StdLiqVolumeFlow   = 3.41425627304 = m3/hr
H                  = -31194.1513604 = kJ/kmol
Energy             = -779853.784009 = W
MolecularWeight    = 32.04186 = 
ZFactor            = 0.00154468819068 = 
ETHANOL            = 0.5 * 
WATER              = 0.5 * 

>> cd /s.NumberStreamsOut
/s.NumberStreamsOut
>> /s.NumberStreamsOut = 4
>> cd /s.FlowFraction1
/s.FlowFraction1
>> cd /s
/s
>> /s.Out2.MassFlow = 30
>> /s.FlowFraction1.Fraction = .3
>> FlowFraction3
Port: /s.FlowFraction3 + sim.solver.Ports.Port_Signal
Connected to: None
Fraction   = 0.59063724765 = 

>> Out1
Port: /s.Out1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 25.0 = C
P                  = 100.0 = kPa
MoleFlow           = 30.0 = kgmole/h
MassFlow           = 961.2558 = kg/h
VolumeFlow         = 1.14875466139 = m3/hr
StdLiqVolumeFlow   = 1.13808542435 = m3/hr
H                  = -31194.1513604 = kJ/kmol
Energy             = -259951.261336 = W
MolecularWeight    = 32.04186 = 
ZFactor            = 0.00154468819068 = 
ETHANOL            = 0.5 * 
WATER              = 0.5 * 

>> cd /s.NumberStreamsOut
/s.NumberStreamsOut
>> /s.NumberStreamsOut = 2
Mole fractions of /s.Out0 sums to 7.000000, not 1
Mole fractions of /s.Out0 sums to 7.000000, not 1
Mole fractions of /s.Out0 sums to 7.000000, not 1
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s.In.Energy: -519903 Vs -866504

ConsistencyError: /s.In - MassFlow 1922.5116 vs 3204.186
>> cd /s
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s.In.Energy: -519903 Vs -866504

/s
>> /s.FlowFraction0.Fraction = 
>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
>> /s.Out0
Port: /s.Out0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 25.0 = C
P                  = 100.0 = kPa
MoleFlow           = 70.0 = kgmole/h
MassFlow           = 2242.9302 = kg/h
VolumeFlow         = 2.68042754324 = m3/hr
StdLiqVolumeFlow   = 2.65553265681 = m3/hr
H                  = -31194.1513604 = kJ/kmol
Energy             = -606552.943118 = W
MolecularWeight    = 32.04186 = 
ZFactor            = 0.00154468819068 = 
ETHANOL            = 0.5 = 
WATER              = 0.5 = 

>> /RootClone.s.Out0
Port: /RootClone.s.Out0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 25.0 = C
P                  = 100.0 = kPa
MoleFlow           = 70.0 = kgmole/h
MassFlow           = 2242.9302 = kg/h
VolumeFlow         = 2.68042754324 = m3/hr
StdLiqVolumeFlow   = 2.65553265681 = m3/hr
H                  = -31194.1513604 = kJ/kmol
Energy             = -606552.943118 = W
MolecularWeight    = 32.04186 = 
ZFactor            = 0.00154468819068 = 
ETHANOL            = 0.5 = 
WATER              = 0.5 = 

>> 
>> clear
>> read man-valve.tst
Processing man-valve.tst
>> #valve example
>> $thermo = VirtualMaterials.Advanced_Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + METHANE
METHANE 
>> units SI
>> 
>> v = Valve.Valve()
>> v.In.T = 50
>> v.In.P = 7000.0
>> v.In.MoleFlow = 100.0
>> v.In.Fraction = 1.0
>> 
>> v.Out
Port: /v.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = 100.0 = kgmole/h
MassFlow           = 1604.246 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 5.3519008 = m3/hr
H                  = 9888.53049712 = kJ/kmol
Energy             = 274681.402698 = W
MolecularWeight    = None
ZFactor            = None
METHANE            = 1.0 = 

>> v.Out.P = 500.0
>> v.Out
Port: /v.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 23.2003818512 = C
P                  = 500.0 * kPa
MoleFlow           = 100.0 = kgmole/h
MassFlow           = 1604.246 = kg/h
VolumeFlow         = 487.379175823 = m3/hr
StdLiqVolumeFlow   = 5.3519008 = m3/hr
H                  = 9888.53049712 = kJ/kmol
Energy             = 274681.402698 = W
MolecularWeight    = 16.04246 = 
ZFactor            = 0.988762905712 = 
METHANE            = 1.0 = 

>> 
>> copy /v
Copied /v to the clipboard
>> paste /
Pasting /v
Pasted /v as /vClone
>> /vClone.Out
Port: /vClone.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 23.2003818512 = C
P                  = 500.0 * kPa
MoleFlow           = 100.0 = kgmole/h
MassFlow           = 1604.246 = kg/h
VolumeFlow         = 487.379175823 = m3/hr
StdLiqVolumeFlow   = 5.3519008 = m3/hr
H                  = 9888.53049712 = kJ/kmol
Energy             = 274681.402698 = W
MolecularWeight    = 16.04246 = 
ZFactor            = 0.988762905712 = 
METHANE            = 1.0 = 

>> 
>> clear
>> read hypo.tst
Processing hypo.tst
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + methane water 'Carbon dioxide'
methane water Carbon dioxide 
>> 
>> thermo.hypo1 = HypoCompound NormalBoilingPoint = 100 C
MolecularWeight =  108.0
LiquidDensity@298 = 880.0 kg/m3
>> thermo.hypo2 = HypoCompound NormalBoilingPoint = 373.15
MolecularWeight =  18
LiquidDensity@298 = 980.0
>> thermo.hypo1*

 Name 	= hypo1*
 Formula 	= Unknown
 CASN 	= Unknown
 ChemicalFamily 	= OIL
 UNIFACStructure 	= Unknown
 Notes 	= Unknown
 Owner 	= Unknown
 CreationInfo 	= 
NormalBoilingPoint = 373.15
MolecularWeight = 108.0
LiquidDensity@298 = 880.0
 ElectricCharge 	= -12321.0
 GammaNormalization 	= -12321.0
 LiquidThermalConductivityEqType 	= -12321.0
 AcentricFactor 	= 0.236308466884
 AdsorptionAt10ppm(vol) 	= -12321.0
 AdsorptionInActivatedCarbonA 	= -12321.0
 AdsorptionInActivatedCarbonB 	= -12321.0
 AdsorptionInActivatedCarbonC 	= -12321.0
 Antoine5LogA 	= -57.5925320867
 Antoine5LogB 	= -604.818354628
 Antoine5LogC 	= 28.2176416421
 Antoine5LogD 	= -0.0364519383528
 Antoine5LogE 	= 1.61497047129e-005
 Antoine5LogTmax 	= 584.59663857 K
 Antoine5LogTmin 	= 373.15 K
 AutoIgnitionTemperature 	= -12321.0 K
 ConcentrationInGas@298And1AtmMax 	= -12321.0 Fraction
 ConcentrationInGas@298And1AtmMin 	= -12321.0 Fraction
 CriticalCompressibility 	= 0.269231530992
 CriticalPressure 	= 4535.47669403 kPa
 CriticalTemperature 	= 584.59663857 K
 CriticalVolume 	= 0.288529143792 m3/kmol
 DiffusionCoefficientInAirA 	= -12321.0
 DiffusionCoefficientInAirB 	= -12321.0
 DiffusionCoefficientInAirC 	= -12321.0
 DiffusionCoefficientInAirTmax 	= -12321.0 K
 DiffusionCoefficientInAirTmin 	= -12321.0 K
 DiffusionCoefficientInWaterA 	= -12321.0
 DiffusionCoefficientInWaterB 	= -12321.0
 DiffusionCoefficientInWaterTmax 	= -12321.0 K
 DiffusionCoefficientInWaterTmin 	= -12321.0 K
 DipoleMoment 	= -12321.0 Coulomb-m
 EnthalpyOfCombustionAt298 	= -12321.0 kJ/kmol
 EnthalpyOfFusion 	= -12321.0 kJ/kmol
 EnthalpyOfVapourizationA 	= -12321.0
 EnthalpyOfVapourizationB 	= -12321.0
 EnthalpyOfVapourizationN 	= -12321.0
 EnthalpyOfVapourizationTmax 	= -12321.0 K
 EnthalpyOfVapourizationTmin 	= -12321.0 K
 FlashPointTemperature 	= -12321.0 K
 FreezingPoint 	= -12321.0 K
 GasThermalConductivityA 	= -12321.0
 GasThermalConductivityB 	= -12321.0
 GasThermalConductivityC 	= -12321.0
 GasThermalConductivityTmax 	= -12321.0 K
 GasThermalConductivityTmin 	= -12321.0 K
 GasViscosityA 	= -12321.0
 GasViscosityB 	= -12321.0
 GasViscosityC 	= -12321.0
 GasViscosityTmax 	= -12321.0 K
 GasViscosityTmin 	= -12321.0 K
 HaydenOConnell 	= -12321.0
 HenryConstantInWaterTemperature 	= -12321.0 K
 HTIdealGasHeatCapacityA 	= -12321.0
 HTIdealGasHeatCapacityB 	= -12321.0
 HTIdealGasHeatCapacityC 	= -12321.0
 HTIdealGasHeatCapacityD 	= -12321.0
 HTIdealGasHeatCapacityTmax 	= -12321.0 K
 HTIdealGasHeatCapacityTmin 	= -12321.0 K
 IdealGasEnthalpyOfFormation@298 	= -202590.931491 kJ/kmol
 IdealGasEnthalpyOfFormationA 	= -12321.0
 IdealGasEnthalpyOfFormationB 	= -12321.0
 IdealGasEnthalpyOfFormationC 	= -12321.0
 IdealGasEnthalpyOfFormationTmax 	= -12321.0 K
 IdealGasEnthalpyOfFormationTmin 	= -12321.0 K
 IdealGasGibbsFreeEnergyOfFormation@298 	= 8029.66089852 kJ/kmol
 IdealGasGibbsFreeEnergyOfFormationA 	= -12321.0
 IdealGasGibbsFreeEnergyOfFormationB 	= -12321.0
 IdealGasGibbsFreeEnergyOfFormationC 	= -12321.0
 IdealGasGibbsFreeEnergyOfFormationTmax 	= -12321.0 K
 IdealGasGibbsFreeEnergyOfFormationTmin 	= -12321.0 K
 ImmediatelyDangerousToLifeHealthmgm3 	= -12321.0 Fraction
 ImmediatelyDangerousToLifeHealthppm 	= -12321.0 Fraction
 LiquidDensity@298 	= 880.0 kg/m3
 LiquidHeatCapacityA 	= -12321.0
 LiquidHeatCapacityB 	= -12321.0
 LiquidHeatCapacityC 	= -12321.0
 LiquidHeatCapacityD 	= -12321.0
 LiquidHeatCapacityTmax 	= -12321.0 K
 LiquidHeatCapacityTmin 	= -12321.0 K
 LiquidThemalExpansionTc 	= -12321.0
 LiquidThermalConductivityA 	= -12321.0
 LiquidThermalConductivityB 	= -12321.0
 LiquidThermalConductivityC 	= -12321.0
 LiquidThermalConductivityTmax 	= -12321.0 K
 LiquidThermalConductivityTmin 	= -12321.0 K
 LiquidThermalExpansion@298 	= -12321.0 1/K
 LiquidThermalExpansionA 	= -12321.0
 LiquidThermalExpansionM 	= -12321.0
 LiquidThermalExpansionTmax 	= -12321.0 K
 LiquidThermalExpansionTmin 	= -12321.0 K
 LiquidViscosityA 	= -12321.0
 LiquidViscosityB 	= -12321.0
 LiquidViscosityC 	= -12321.0
 LiquidViscosityD 	= -12321.0
 LiquidViscosityTmax 	= -12321.0 K
 LiquidViscosityTmin 	= -12321.0 K
 Log10KOW 	= -12321.0
 LowerExplosionLimitVol 	= -12321.0 Fraction
 MaxP 	= -12321.0 kPa
 MaxT 	= -12321.0 K
 MinP 	= -12321.0 kPa
 MinT 	= -12321.0 K
 MolecularWeight 	= 108.0
 NormalBoilingPoint 	= 373.15 K
 PermissibleExposureLimitOSHAmgm3 	= -12321.0 Fraction
 PermissibleExposureLimitOSHAppm 	= -12321.0 Fraction
 Poly5IdealGasCpA 	= -26.402397335
 Poly5IdealGasCpB 	= 0.563304257784
 Poly5IdealGasCpC 	= -0.00024377797859
 Poly5IdealGasCpTmax 	= 700.0 K
 Poly5IdealGasCpTmin 	= 200.0 K
 RackettLiquidDensityA 	= 301.778382964
 RackettLiquidDensityB 	= 0.269231530992
 RackettLiquidDensityN 	= 0.285714285714
 RackettLiquidDensityTc 	= 584.59663857
 RackettLiquidDensityTmax 	= 584.59663857 K
 RackettLiquidDensityTmin 	= 298.15 K
 RadiusOfGyration 	= -12321.0 m
 RecommendedExposureLimitNIOSHmgm3 	= -12321.0 Fraction
 RecommendedExposureLimitNIOSHppm 	= -12321.0 Fraction
 RefractiveIndex 	= -12321.0
 SolidDensity 	= -12321.0 kg/m3
 SolidDensityTemperature 	= -12321.0 K
 SolidHeatCapacityA 	= -12321.0
 SolidHeatCapacityB 	= -12321.0
 SolidHeatCapacityC 	= -12321.0
 SolidHeatCapacityTmax 	= -12321.0 K
 SolidHeatCapacityTmin 	= -12321.0 K
 SolidThermalConductivityA 	= -12321.0
 SolidThermalConductivityB 	= -12321.0
 SolidThermalConductivityC 	= -12321.0
 SolidThermalConductivityTmax 	= -12321.0 K
 SolidThermalConductivityTmin 	= -12321.0 K
 SolubilityInWater@298 	= -12321.0 Fraction
 SolubilityInWaterA 	= -12321.0
 SolubilityInWaterB 	= -12321.0
 SolubilityInWaterC 	= -12321.0
 SolubilityInwaterInMass 	= -12321.0 Fraction
 SolubilityInWaterInMol 	= -12321.0 Fraction
 SolubilityInWaterTemperature 	= -12321.0 K
 SolubilityInWaterTmax 	= -12321.0 K
 SolubilityInWaterTmin 	= -12321.0 K
 SolubilityInWaterWithNaClA 	= -12321.0
 SolubilityInWaterWithNaClB 	= -12321.0
 SolubilityInWaterWithNaClC 	= -12321.0
 SolubilityInWaterWithNaClXmax 	= -12321.0 Fraction
 SolubilityInWaterWithNaClXmin 	= -12321.0 Fraction
 SolubilityParameter 	= -12321.0 (J/m3)1/2
 StandardAbsoluteEntropyOfFormation 	= -12321.0 kJ/kmol-K
 StandardEnthalpyOfFormation 	= -12321.0 kJ/kmol
 StandardEntropyofFormation 	= -12321.0 kJ/kmol-K
 StandardGibbsFreeEnergyOfFormation 	= -12321.0 kJ/kmol
 StandardHelmholtzEnergyOfFormation 	= -12321.0 kJ/kmol
 StandardInternalEnergyOfFormation 	= -12321.0 kJ/kmol
 SurfaceTensionA 	= -12321.0
 SurfaceTensionB 	= -12321.0
 SurfaceTensionN 	= -12321.0
 SurfaceTensionTmax 	= -12321.0 K
 SurfaceTensionTmin 	= -12321.0 K
 UpperExplosionLimitVol 	= -12321.0 Fraction
 vanderWaalsVolume 	= -12321.0 m3/kmol
>> 
>> strm = Stream.Stream_Material()
>> strm.In.Fraction = 0.1 0.2 0.3 0.4 0.0 
>> strm.In.P = 100
>> strm.In.T = 300
>> strm.In
Port: /strm.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 300.0 * C
P                  = 100.0 * kPa
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow is invalid
H                  = 37068.5210792 = kJ/kmol
Energy             = None
MolecularWeight    = 61.610152 = 
ZFactor            = 0.997392244916 = 
METHANE            = 0.1 * 
WATER              = 0.2 * 
CARBON DIOXIDE     = 0.3 * 
hypo1*             = 0.4 * 
hypo2*             = 0.0 * 

>> 
>> # move methane last
>> thermo.METHANE >> $
>> strm.In
Port: /strm.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 300.0 * C
P                  = 100.0 * kPa
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow is invalid
H                  = 37068.5210792 = kJ/kmol
Energy             = None
MolecularWeight    = 61.610152 = 
ZFactor            = 0.997392244916 = 
WATER              = 0.2 * 
CARBON DIOXIDE     = 0.3 * 
hypo1*             = 0.4 * 
hypo2*             = 0.0 * 
METHANE            = 0.1 * 

>> 
>> # move hypo1 first
>> thermo.hypo1* >> WATER
>> strm.In
Port: /strm.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 300.0 * C
P                  = 100.0 * kPa
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow is invalid
H                  = 37068.5210792 = kJ/kmol
Energy             = None
MolecularWeight    = 61.610152 = 
ZFactor            = 0.997392244916 = 
hypo1*             = 0.4 * 
WATER              = 0.2 * 
CARBON DIOXIDE     = 0.3 * 
hypo2*             = 0.0 * 
METHANE            = 0.1 * 

>> 
>> copy /strm
Copied /strm to the clipboard
>> paste /
Pasting /strm
Pasted /strm as /strmClone
>> /strmClone.Out
Port: /strmClone.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 300.0 = C
P                  = 100.0 = kPa
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow is invalid
H                  = 37068.5210792 = kJ/kmol
Energy             = None
MolecularWeight    = 61.610152 = 
ZFactor            = 0.997392244916 = 
hypo1*             = 0.4 = 
WATER              = 0.2 = 
CARBON DIOXIDE     = 0.3 = 
hypo2*             = 0.0 = 
METHANE            = 0.1 = 

>> 
>> clear
>> read connector.tst
Processing connector.tst
>> # Cross connecter thermo test
>> units SI
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + PROPANE ISOBUTANE n-BUTANE n-PENTANE WATER
PROPANE ISOBUTANE n-BUTANE n-PENTANE WATER 
>> # lets have some streams for this test
>> coldInlet = Stream.Stream_Material()
>> hotInlet = Stream.Stream_Material()
>> 
>> cd hotInlet.In
/hotInlet.In
>> T = 200
>> P = 150
>> Fraction = .01 .02 .01 0 1
>> MoleFlow = 500
>> 
>> cd /
/
>> cd /coldInlet.In
/coldInlet.In
>> Fraction
PROPANE                     = None
ISOBUTANE                   = None
n-BUTANE                    = None
n-PENTANE                   = None
WATER                       = None

>> Fraction = .75 15 .08 .02 0
>> VapFrac = 0
>> P = 300
>> T =
>> MoleFlow = 1000
>> cd /
/
>> 
>> coldOutlet = Stream.Stream_Material()
>> 
>> exch = Heater.HeatExchanger()
>> exch
Operation: exch = sim.unitop.Heater.HeatExchanger
Port: InH = sim.solver.Ports.Port_Material (/exch.HotSide.In)
Port: InC = sim.solver.Ports.Port_Material (/exch.ColdSide.In)
Port: OutH = sim.solver.Ports.Port_Material (/exch.HotSide.Out)
Port: OutC = sim.solver.Ports.Port_Material (/exch.ColdSide.Out)
Port: DeltaTHI = sim.solver.Ports.Port_Signal
Port: UA = sim.solver.Ports.Port_Signal
Port: DeltaPH = sim.solver.Ports.Port_Signal (/exch.HotSide.DeltaP)
Port: DeltaPC = sim.solver.Ports.Port_Signal (/exch.ColdSide.DeltaP)
Port: DeltaTHO = sim.solver.Ports.Port_Signal
Child: ColdSide = sim.unitop.Heater.Heater
Child: HotSide = sim.unitop.Heater.Cooler
Parameter: Ignored = None
Parameter: IsCounterCurrent = 1
>> cd exch
/exch
>> DeltaPC = 10
>> DeltaPH = 50
>> DeltaTHO = 5 K
>> cd /
/
>> 
>> # hot side will use steam property package
>> $thermo1 = VirtualMaterials.Steam95
>> exch.HotSide -> $thermo1
Thermo case attached to a unit operation. /exch.HotSide to /exch.HotSide.thermo1
>> exch.HotSide.thermo1 + water
water 
>> 
>> # create hot outlet and assign the hot inlet thermo
>> hotOutlet = Stream.Stream_Material()
>> hotOutlet -> $thermo1
Thermo case attached to a unit operation. /hotOutlet to /exch.HotSide.thermo1
>> 
>> # create CrossConnector
>> xc = CrossConnector.CrossConnector()
>> hotInlet.Out -> xc.In
>> xc.In
Port: /xc.InletNode.NodePort + sim.solver.Ports.Port_Material
Connected to: /hotInlet.Out
VapFrac            = 1.0 | 
T                  = 200.0 | C
P                  = 150.0 | kPa
MoleFlow           = 500.0 | kgmole/h
MassFlow           = 9711.49144231 | kg/h
VolumeFlow         = 13029.1824937 | m3/hr
StdLiqVolumeFlow   = 10.54440638 | m3/hr
H                  = 16650.2428605 | kJ/kmol
Energy             = 2312533.73063 | W
MolecularWeight    = 19.4229828846 | 
ZFactor            = 0.993594515147 | 
PROPANE            = 0.00961538461538 | 
ISOBUTANE          = 0.0192307692308 | 
n-BUTANE           = 0.00961538461538 | 
n-PENTANE          = 0.0 | 
WATER              = 0.961538461538 | 

>> xc.Out
Port: /xc.OutletNode.NodePort + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 200.0 = C
P                  = 150.0 = kPa
MoleFlow           = 500.0 = kgmole/h
MassFlow           = 9711.49144231 = kg/h
VolumeFlow         = 13029.1824937 = m3/hr
StdLiqVolumeFlow   = 10.54440638 = m3/hr
H                  = 16650.2428605 = kJ/kmol
Energy             = 2312533.73063 = W
MolecularWeight    = 19.4229828846 = 
ZFactor            = 0.993594515147 = 
PROPANE            = 0.00961538461538 = 
ISOBUTANE          = 0.0192307692308 = 
n-BUTANE           = 0.00961538461538 = 
n-PENTANE          = 0.0 = 
WATER              = 0.961538461538 = 

>> 
>> #connect things
>> coldInlet.Out -> exch.InC
>> exch.OutC -> coldOutlet.In
>> xc.Out -> exch.InH
A significant loss of mole flow of 19.230769 was detected in the cross connector /xc. A common reason is the mismatch of compounds that contain significant flows
>> exch.OutH.T
/exch.HotSide.Out.T= 22.3470279017 = C
>> exch.OutH -> hotOutlet.In
>> 
>> # results
>> coldInlet
Operation: coldInlet = sim.unitop.Stream.Stream_Material
Port: In = sim.solver.Ports.Port_Material
Port: Out = sim.solver.Ports.Port_Material
Parameter: Ignored = None
>> coldInlet.Out
Port: /coldInlet.Out + sim.solver.Ports.Port_Material
Connected to: /exch.ColdSide.In
VapFrac            = 0.0 = 
T                  = 17.3470279017 = C
P                  = 300.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 57476.180858 = kg/h
VolumeFlow         = 97.1731465897 = m3/hr
StdLiqVolumeFlow   = 99.0777864828 = m3/hr
H                  = -4478.62399075 = kJ/kmol
Energy             = -1244062.21965 = W
MolecularWeight    = 57.476180858 = 
ZFactor            = 0.0120696710893 = 
PROPANE            = 0.0473186119874 = 
ISOBUTANE          = 0.946372239748 = 
n-BUTANE           = 0.00504731861199 = 
n-PENTANE          = 0.001261829653 = 
WATER              = 0.0 = 

>> coldOutlet.Out
Port: /coldOutlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 62.3866149383 = C
P                  = 290.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 57476.180858 = kg/h
VolumeFlow         = 9101.31277992 = m3/hr
StdLiqVolumeFlow   = 99.0777864828 = m3/hr
H                  = 19592.8886443 = kJ/kmol
Energy             = 5442469.06786 = W
MolecularWeight    = 57.476180858 = 
ZFactor            = 0.946088420232 = 
PROPANE            = 0.0473186119874 = 
ISOBUTANE          = 0.946372239748 = 
n-BUTANE           = 0.00504731861199 = 
n-PENTANE          = 0.001261829653 = 
WATER              = 0.0 = 

>> hotInlet.Out
Port: /hotInlet.Out + sim.solver.Ports.Port_Material
Connected to: /xc.InletNode.NodePort
VapFrac            = 1.0 = 
T                  = 200.0 = C
P                  = 150.0 = kPa
MoleFlow           = 500.0 = kgmole/h
MassFlow           = 9711.49144231 = kg/h
VolumeFlow         = 13029.1824937 = m3/hr
StdLiqVolumeFlow   = 10.54440638 = m3/hr
H                  = 16650.2428605 = kJ/kmol
Energy             = 2312533.73063 = W
MolecularWeight    = 19.4229828846 = 
ZFactor            = 0.993594515147 = 
PROPANE            = 0.00961538461538 = 
ISOBUTANE          = 0.0192307692308 = 
n-BUTANE           = 0.00961538461538 = 
n-PENTANE          = 0.0 = 
WATER              = 0.961538461538 = 

>> hotOutlet.Out
Port: /hotOutlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 22.3470279017 = C
P                  = 100.0 = kPa
MoleFlow           = 480.769230769 = kgmole/h
MassFlow           = 8661.19230769 = kg/h
VolumeFlow         = 8.68108081607 = m3/hr
StdLiqVolumeFlow   = 8.66940500023 = m3/hr
H                  = 1690.24592657 = kJ/kmol
Energy             = 225727.287202 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.000734942944811 = 
WATER              = 1.0 = 

>> exch.ColdSide.InQ
Port: /exch.ColdSide.InQ + sim.solver.Ports.Port_Energy
Connected to: /exch.HotSide.OutQ
Energy   = 6686531.28752 | W

>> 
>> # one more stream and connector
>> hotOut2 = Stream.Stream_Material()
>> xc2 = CrossConnector.CrossConnector()
>> xc2.Out -> hotOut2.In
>> hotOut2.In
Port: /hotOut2.In + sim.solver.Ports.Port_Material
Connected to: /xc2.OutletNode.NodePort
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow is invalid
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = None
ISOBUTANE          = None
n-BUTANE           = None
n-PENTANE          = None
WATER              = None

>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
A significant loss of mole flow of 19.230769 was detected in the cross connector /RootClone.xc. A common reason is the mismatch of compounds that contain significant flows
>> cd /RootClone
/RootClone
>> coldInlet
Operation: coldInlet = sim.unitop.Stream.Stream_Material
Port: In = sim.solver.Ports.Port_Material
Port: Out = sim.solver.Ports.Port_Material
Parameter: Ignored = None
>> coldInlet.Out
Port: /RootClone.coldInlet.Out + sim.solver.Ports.Port_Material
Connected to: /RootClone.exch.ColdSide.In
VapFrac            = 0.0 = 
T                  = 17.3470279017 = C
P                  = 300.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 57476.180858 = kg/h
VolumeFlow         = 97.1731465897 = m3/hr
StdLiqVolumeFlow   = 99.0777864828 = m3/hr
H                  = -4478.62399075 = kJ/kmol
Energy             = -1244062.21965 = W
MolecularWeight    = 57.476180858 = 
ZFactor            = 0.0120696710893 = 
PROPANE            = 0.0473186119874 = 
ISOBUTANE          = 0.946372239748 = 
n-BUTANE           = 0.00504731861199 = 
n-PENTANE          = 0.001261829653 = 
WATER              = 0.0 = 

>> coldOutlet.Out
Port: /RootClone.coldOutlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 62.3866149383 = C
P                  = 290.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 57476.180858 = kg/h
VolumeFlow         = 9101.31277992 = m3/hr
StdLiqVolumeFlow   = 99.0777864828 = m3/hr
H                  = 19592.8886443 = kJ/kmol
Energy             = 5442469.06786 = W
MolecularWeight    = 57.476180858 = 
ZFactor            = 0.946088420232 = 
PROPANE            = 0.0473186119874 = 
ISOBUTANE          = 0.946372239748 = 
n-BUTANE           = 0.00504731861199 = 
n-PENTANE          = 0.001261829653 = 
WATER              = 0.0 = 

>> hotInlet.Out
Port: /RootClone.hotInlet.Out + sim.solver.Ports.Port_Material
Connected to: /RootClone.xc.InletNode.NodePort
VapFrac            = 1.0 = 
T                  = 200.0 = C
P                  = 150.0 = kPa
MoleFlow           = 500.0 = kgmole/h
MassFlow           = 9711.49144231 = kg/h
VolumeFlow         = 13029.1824937 = m3/hr
StdLiqVolumeFlow   = 10.54440638 = m3/hr
H                  = 16650.2428605 = kJ/kmol
Energy             = 2312533.73063 = W
MolecularWeight    = 19.4229828846 = 
ZFactor            = 0.993594515147 = 
PROPANE            = 0.00961538461538 = 
ISOBUTANE          = 0.0192307692308 = 
n-BUTANE           = 0.00961538461538 = 
n-PENTANE          = 0.0 = 
WATER              = 0.961538461538 = 

>> hotOutlet.Out
Port: /RootClone.hotOutlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 22.3470279017 = C
P                  = 100.0 = kPa
MoleFlow           = 480.769230769 = kgmole/h
MassFlow           = 8661.19230769 = kg/h
VolumeFlow         = 8.68108081607 = m3/hr
StdLiqVolumeFlow   = 8.66940500023 = m3/hr
H                  = 1690.24592657 = kJ/kmol
Energy             = 225727.287202 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.000734942944811 = 
WATER              = 1.0 = 

>> exch.ColdSide.InQ
Port: /RootClone.exch.ColdSide.InQ + sim.solver.Ports.Port_Energy
Connected to: /RootClone.exch.HotSide.OutQ
Energy   = 6686531.28752 | W

>> 
>> 
>> clear
>> read towerspec.tst
Processing towerspec.tst
>> # Depeopanizer test (from old Hysim manual)
>> units Field
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + Methane Ethane PROPANE
Methane Ethane PROPANE 
>> thermo + ISOBUTANE n-BUTANE ISOPENTANE n-PENTANE n-Hexane
ISOBUTANE n-BUTANE ISOPENTANE n-PENTANE n-Hexane 
>> thermo + n-Heptane n-Octane
n-Heptane n-Octane 
>> 
>> deprop = Tower.Tower()
>> deprop.Stage_0 + 18  # twenty stages`
>> 
>> cd deprop.Stage_0
/deprop.Stage_0
>> 
>> v = Tower.VapourDraw()
>> v.Port.P = 200
>> v.Port.Fraction.ISOBUTANE = .01
>> 
>> cond = Tower.EnergyFeed(0)
>> 
>> estT = Tower.Estimate('T')
>> estT.Value = 25
>> 
>> cd ../Stage_9
/deprop.Stage_9
>> f = Tower.Feed()
>> f.Port.T = 50
>> f.Port.P = 480
>> f.Port.MoleFlow = 1000
>> f.Port.Fraction = .1702 .1473 .1132 .1166 .1066 .0963 .0829 .0694 .0558 .0417
>> f.Port
Port: /deprop.Feed_9_f + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0156862063356 = 
T                  = 50.0 * F
P                  = 480.0 * psia
MoleFlow           = 1000.0 * lbmole/h
MassFlow           = 54388.324404 = lb/h
VolumeFlow         = 0.452031963439 = ft3/s
StdLiqVolumeFlow   = 0.438228699383 = ft3/s
H                  = -1484.95388229 = Btu/lbmol
Energy             = -1484704.17098 = Btu/hr
MolecularWeight    = 54.388324404 = 
ZFactor            = 0.142810862978 = 
METHANE            = 0.1702 * 
ETHANE             = 0.1473 * 
PROPANE            = 0.1132 * 
ISOBUTANE          = 0.1166 * 
n-BUTANE           = 0.1066 * 
ISOPENTANE         = 0.0963 * 
n-PENTANE          = 0.0829 * 
n-HEXANE           = 0.0694 * 
n-HEPTANE          = 0.0558 * 
n-OCTANE           = 0.0417 * 

>> 
>> cd ../Stage_19
/deprop.Stage_19
>> l = Tower.LiquidDraw()
>> l.Port.P = 205
>> l.spec = Tower.MoleRecoverySpec()
>> l.spec + PROPANE
>> l.spec.Port.Fraction = .1
>> 
>> reb = Tower.EnergyFeed(1)
>> estT = Tower.Estimate('T')
>> estT.Value = 250
>> 
>> cd ..
/deprop
>> 
>> /overhead = Stream.Stream_Material()
>> /overhead.In -> Stage_0.v.Port
>> 
>> /bottoms = Stream.Stream_Material()
>> /bottoms.In -> Stage_19.l.Port
>> 
>> 
>> TryToRestart = 0 # so each test starts from scratch
>> TryToSolve = 1  # start calculation
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 0.525663
/deprop Inner Error 0.398715
/deprop Inner Error 0.373803
/deprop Inner Error 0.181765
/deprop Inner Error 0.156735
/deprop Inner Error 0.039565
/deprop Inner Error 0.012048
/deprop Inner Error 0.006210
/deprop Inner Error 0.001727
/deprop Inner Error 0.001020
/deprop Inner Error 0.000146
/deprop Inner Error 0.000048
/deprop Iteration 1 Outer Error 0.090300
/deprop Inner Error 0.901582
/deprop Inner Error 0.430674
/deprop Inner Error 0.115232
/deprop Inner Error 0.044547
/deprop Inner Error 0.013016
/deprop Inner Error 0.005766
/deprop Inner Error 0.002449
/deprop Inner Error 0.000521
/deprop Inner Error 0.000169
/deprop Inner Error 0.000059
/deprop Iteration 2 Outer Error 0.014571
/deprop Inner Error 0.111675
/deprop Inner Error 0.022029
/deprop Inner Error 0.005391
/deprop Inner Error 0.000724
/deprop Inner Error 0.000245
/deprop Inner Error 0.000049
/deprop Iteration 3 Outer Error 0.001373
/deprop Inner Error 0.010457
/deprop Inner Error 0.003223
/deprop Inner Error 0.000843
/deprop Inner Error 0.000152
/deprop Inner Error 0.000025
/deprop Iteration 4 Outer Error 0.000127
/deprop Inner Error 0.002820
/deprop Inner Error 0.000647
/deprop Inner Error 0.000072
/deprop Iteration 5 Outer Error 0.000025
/deprop Inner Error 0.000241
/deprop Inner Error 0.000052
>> 
>> /overhead.Out
Port: /overhead.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.999999822737 = 
T                  = 25.1920199998 = F
P                  = 200.0 = psia
MoleFlow           = 424.243369048 = lbmole/h
MassFlow           = 11934.8349991 = lb/h
VolumeFlow         = 2.64369523979 = ft3/s
StdLiqVolumeFlow   = 0.137708217251 = ft3/s
H                  = 4084.42952074 = Btu/lbmol
Energy             = 1732500.75249 = Btu/hr
MolecularWeight    = 28.132048418 = 
ZFactor            = 0.862279555354 = 
METHANE            = 0.401184820761 = 
ETHANE             = 0.347197128692 = 
PROPANE            = 0.240145727463 = 
ISOBUTANE          = 0.01 = 
n-BUTANE           = 0.00147165494857 = 
ISOPENTANE         = 3.92377968096e-007 = 
n-PENTANE          = 9.07491654145e-008 = 
n-HEXANE           = 2.12241558577e-013 = 
n-HEPTANE          = 1.22885068009e-017 = 
n-OCTANE           = 5.30982137188e-022 = 

>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 255.033527264 = F
P                  = 205.0 = psia
MoleFlow           = 575.756630952 = lbmole/h
MassFlow           = 42453.487051 = lb/h
VolumeFlow         = 0.37942940501 = ft3/s
StdLiqVolumeFlow   = 0.300520472818 = ft3/s
H                  = 6158.63586195 = Btu/lbmol
Energy             = 3545279.15724 = Btu/hr
MolecularWeight    = 73.7351248232 = 
ZFactor            = 0.0634103126049 = 
METHANE            = 5.15046517922e-011 = 
ETHANE             = 6.80912714513e-006 = 
PROPANE            = 0.0196606811108 = 
ISOBUTANE          = 0.195147535922 = 
n-BUTANE           = 0.184063290719 = 
ISOPENTANE         = 0.167257880082 = 
n-PENTANE          = 0.143984379934 = 
n-HEXANE           = 0.120537039904 = 
n-HEPTANE          = 0.0969159485106 = 
n-OCTANE           = 0.0724264346397 = 

>> 
>> cd Stage_19.l
/deprop.Stage_19.l
>> delete spec
>> spec = Tower.ComponentMoleFlowSpec()
>> spec + PROPANE
>> spec.Port.MoleFlow = 10
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 2.810031
/deprop Inner Error 1.692983
/deprop Inner Error 0.926787
/deprop Iteration 1 Outer Error 0.074216
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 5.034522
/deprop Inner Error 2.326123
/deprop Inner Error 0.938023
/deprop Inner Error 0.381030
/deprop Inner Error 0.097975
/deprop Inner Error 0.041846
/deprop Inner Error 0.004452
/deprop Inner Error 0.000855
/deprop Inner Error 0.000117
/deprop Inner Error 0.000015
/deprop Iteration 2 Outer Error 0.020731
/deprop Inner Error 1.175768
/deprop Inner Error 0.022669
/deprop Inner Error 0.008213
/deprop Inner Error 0.002820
/deprop Inner Error 0.000038
/deprop Iteration 3 Outer Error 0.002689
/deprop Inner Error 0.035574
/deprop Inner Error 0.008058
/deprop Inner Error 0.000331
/deprop Inner Error 0.000057
/deprop Iteration 4 Outer Error 0.000272
/deprop Inner Error 0.002879
/deprop Inner Error 0.000376
/deprop Inner Error 0.000023
/deprop Iteration 5 Outer Error 0.000028
/deprop Inner Error 0.000211
/deprop Inner Error 0.000014
>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 255.649343248 = F
P                  = 205.0 = psia
MoleFlow           = 574.43338594 = lbmole/h
MassFlow           = 42395.1017429 = lb/h
VolumeFlow         = 0.379150525174 = ft3/s
StdLiqVolumeFlow   = 0.300005808072 = ft3/s
H                  = 6193.0572152 = Btu/lbmol
Energy             = 3556900.59294 = Btu/hr
MolecularWeight    = 73.8033386997 = 
ZFactor            = 0.0634549933513 = 
METHANE            = 4.83544105697e-011 = 
ETHANE             = 6.04834332679e-006 = 
PROPANE            = 0.0174084305193 = 
ISOBUTANE          = 0.195574142896 = 
n-BUTANE           = 0.184504967275 = 
ISOPENTANE         = 0.167643173451 = 
n-PENTANE          = 0.144316058133 = 
n-HEXANE           = 0.120814704888 = 
n-HEPTANE          = 0.0971392007599 = 
n-OCTANE           = 0.0725932736862 = 

>> 
>> delete spec
>> Port.MassFlow = 43000
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 0.488561
/deprop Inner Error 0.409325
/deprop Inner Error 0.338130
/deprop Inner Error 0.199238
/deprop Inner Error 0.149316
/deprop Inner Error 0.063256
/deprop Inner Error 0.040801
/deprop Inner Error 0.014301
/deprop Inner Error 0.011337
/deprop Inner Error 0.004494
/deprop Inner Error 0.000948
/deprop Inner Error 0.000318
/deprop Inner Error 0.000128
/deprop Inner Error 0.000051
/deprop Iteration 1 Outer Error 0.123167
/deprop Inner Error 1.058409
/deprop Inner Error 0.493445
/deprop Inner Error 0.371460
/deprop Inner Error 0.110062
/deprop Inner Error 0.047065
/deprop Inner Error 0.011885
/deprop Inner Error 0.005143
/deprop Inner Error 0.002010
/deprop Inner Error 0.000525
/deprop Inner Error 0.000189
/deprop Inner Error 0.000035
/deprop Iteration 2 Outer Error 0.019355
/deprop Inner Error 0.106580
/deprop Inner Error 0.024982
/deprop Inner Error 0.005357
/deprop Inner Error 0.001819
/deprop Inner Error 0.000569
/deprop Inner Error 0.000136
/deprop Inner Error 0.000033
/deprop Iteration 3 Outer Error 0.001558
/deprop Inner Error 0.010628
/deprop Inner Error 0.003963
/deprop Inner Error 0.000833
/deprop Inner Error 0.000163
/deprop Inner Error 0.000052
/deprop Iteration 4 Outer Error 0.000129
/deprop Inner Error 0.002287
/deprop Inner Error 0.000606
/deprop Inner Error 0.000133
/deprop Inner Error 0.000028
/deprop Iteration 5 Outer Error 0.000024
/deprop Inner Error 0.000159
/deprop Inner Error 0.000019
>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 6.06082206465e-008 = 
T                  = 249.502688081 = F
P                  = 205.0 = psia
MoleFlow           = 588.121657516 = lbmole/h
MassFlow           = 43000.0 = lb/h
VolumeFlow         = 0.382172104767 = ft3/s
StdLiqVolumeFlow   = 0.305334488071 = ft3/s
H                  = 5852.55929622 = Btu/lbmol
Energy             = 3441438.06106 = Btu/hr
MolecularWeight    = 73.1141208869 = 
ZFactor            = 0.06301349869 = 
METHANE            = 8.07273535415e-011 = 
ETHANE             = 1.51683356014e-005 = 
PROPANE            = 0.040101293612 = 
ISOBUTANE          = 0.191254996837 = 
n-BUTANE           = 0.180145199742 = 
ISOPENTANE         = 0.163741351346 = 
n-PENTANE          = 0.140957167864 = 
n-HEXANE           = 0.118002796042 = 
n-HEPTANE          = 0.0948783288064 = 
n-OCTANE           = 0.0709036973338 = 

>> 
>> Port.MassFlow = None
>> spec = Tower.ComponentMassFlowSpec()
>> spec + PROPANE
>> spec.Port.MassFlow = 450
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 107.152797
/deprop Inner Error 61.809597
/deprop Inner Error 32.386413
/deprop Iteration 1 Outer Error 0.074651
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 186.409385
/deprop Inner Error 89.015180
/deprop Inner Error 36.236356
/deprop Inner Error 15.082171
/deprop Inner Error 3.926408
/deprop Inner Error 1.766477
/deprop Inner Error 0.148635
/deprop Inner Error 0.032648
/deprop Inner Error 0.005483
/deprop Inner Error 0.000336
/deprop Inner Error 0.000295
/deprop Inner Error 0.000032
/deprop Iteration 2 Outer Error 0.021035
/deprop Inner Error 33.967501
/deprop Inner Error 6.914759
/deprop Inner Error 0.151211
/deprop Inner Error 0.040667
/deprop Inner Error 0.001792
/deprop Inner Error 0.000116
/deprop Inner Error 0.000022
/deprop Iteration 3 Outer Error 0.002724
/deprop Inner Error 1.875381
/deprop Inner Error 0.049231
/deprop Inner Error 0.001327
/deprop Iteration 4 Outer Error 0.000275
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 0.009058
/deprop Inner Error 0.000066
/deprop Iteration 5 Outer Error 0.000028
/deprop Inner Error 0.000948
/deprop Inner Error 0.000007
>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 255.553372815 = F
P                  = 205.0 = psia
MoleFlow           = 574.638887187 = lbmole/h
MassFlow           = 42404.1669777 = lb/h
VolumeFlow         = 0.379193623979 = ft3/s
StdLiqVolumeFlow   = 0.300085725115 = ft3/s
H                  = 6187.68841589 = Btu/lbmol
Energy             = 3555088.45785 = Btu/hr
MolecularWeight    = 73.7927208256 = 
ZFactor            = 0.0634480236471 = 
METHANE            = 4.88504198389e-011 = 
ETHANE             = 6.16559773202e-006 = 
PROPANE            = 0.0177591454099 = 
ISOBUTANE          = 0.195507807675 = 
n-BUTANE           = 0.184435938357 = 
ISOPENTANE         = 0.167583220531 = 
n-PENTANE          = 0.144264447967 = 
n-HEXANE           = 0.120771499367 = 
n-HEPTANE          = 0.0971044620268 = 
n-OCTANE           = 0.07256731302 = 

>> 
>> delete spec
>> spec = Tower.MassRecoverySpec()
>> spec + PROPANE ETHANE
>> spec.Port.Fraction = .1
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 0.553287
/deprop Inner Error 0.456737
/deprop Inner Error 0.360825
/deprop Inner Error 0.196819
/deprop Inner Error 0.165781
/deprop Inner Error 0.066788
/deprop Inner Error 0.035140
/deprop Inner Error 0.016829
/deprop Inner Error 0.012065
/deprop Inner Error 0.004018
/deprop Inner Error 0.001162
/deprop Inner Error 0.000299
/deprop Inner Error 0.000110
/deprop Inner Error 0.000023
/deprop Iteration 1 Outer Error 0.117397
/deprop Inner Error 1.167586
/deprop Inner Error 0.592624
/deprop Inner Error 0.349320
/deprop Inner Error 0.093405
/deprop Inner Error 0.026003
/deprop Inner Error 0.009035
/deprop Inner Error 0.003920
/deprop Inner Error 0.001647
/deprop Inner Error 0.000708
/deprop Inner Error 0.000083
/deprop Iteration 2 Outer Error 0.018770
/deprop Inner Error 0.085261
/deprop Inner Error 0.025734
/deprop Inner Error 0.007097
/deprop Inner Error 0.002315
/deprop Inner Error 0.000452
/deprop Inner Error 0.000141
/deprop Inner Error 0.000044
/deprop Iteration 3 Outer Error 0.001556
/deprop Inner Error 0.012995
/deprop Inner Error 0.004428
/deprop Inner Error 0.000664
/deprop Inner Error 0.000194
/deprop Inner Error 0.000061
/deprop Iteration 4 Outer Error 0.000133
/deprop Inner Error 0.001515
/deprop Inner Error 0.000249
/deprop Inner Error 0.000042
/deprop Iteration 5 Outer Error 0.000025
/deprop Inner Error 0.000173
/deprop Inner Error 0.000043
>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 250.480624952 = F
P                  = 205.0 = psia
MoleFlow           = 585.872878583 = lbmole/h
MassFlow           = 42900.5394656 = lb/h
VolumeFlow         = 0.381656661206 = ft3/s
StdLiqVolumeFlow   = 0.304458635987 = ft3/s
H                  = 5906.27357247 = Btu/lbmol
Energy             = 3459743.60786 = Btu/hr
MolecularWeight    = 73.2249964692 = 
ZFactor            = 0.0630830615835 = 
METHANE            = 7.50578942935e-011 = 
ETHANE             = 1.3414901117e-005 = 
PROPANE            = 0.0364566604352 = 
ISOBUTANE          = 0.191950688814 = 
n-BUTANE           = 0.180837100176 = 
ISOPENTANE         = 0.164369842897 = 
n-PENTANE          = 0.141498208065 = 
n-HEXANE           = 0.11845573082 = 
n-HEPTANE          = 0.0952425040308 = 
n-OCTANE           = 0.0711758497864 = 

>> 
>> delete spec
>> spec = Tower.MoleRatioSpec()
>> spec + ETHANE PROPANE / ISOBUTANE n-BUTANE
>> spec.Port.Fraction = 0.05
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 1.015851
/deprop Inner Error 0.689334
/deprop Inner Error 0.430710
/deprop Inner Error 0.429891
/deprop Inner Error 0.363224
/deprop Inner Error 0.105554
/deprop Inner Error 0.035729
/deprop Inner Error 0.009484
/deprop Inner Error 0.007238
/deprop Inner Error 0.003773
/deprop Inner Error 0.001414
/deprop Inner Error 0.000320
/deprop Inner Error 0.000075
/deprop Iteration 1 Outer Error 0.088887
/deprop Inner Error 1.509141
/deprop Inner Error 0.988174
/deprop Inner Error 0.214378
/deprop Inner Error 0.066780
/deprop Inner Error 0.025094
/deprop Inner Error 0.006797
/deprop Inner Error 0.001958
/deprop Inner Error 0.000850
/deprop Inner Error 0.000191
/deprop Inner Error 0.000040
/deprop Iteration 2 Outer Error 0.014350
/deprop Inner Error 0.123833
/deprop Inner Error 0.018300
/deprop Inner Error 0.007094
/deprop Inner Error 0.001918
/deprop Inner Error 0.000582
/deprop Inner Error 0.000090
/deprop Iteration 3 Outer Error 0.001361
/deprop Inner Error 0.010507
/deprop Inner Error 0.002953
/deprop Inner Error 0.000390
/deprop Inner Error 0.000103
/deprop Inner Error 0.000010
/deprop Iteration 4 Outer Error 0.000126
/deprop Inner Error 0.001318
/deprop Inner Error 0.000230
/deprop Inner Error 0.000039
/deprop Iteration 5 Outer Error 0.000023
/deprop Inner Error 0.000108
/deprop Inner Error 0.000020
>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 255.223003014 = F
P                  = 205.0 = psia
MoleFlow           = 575.348359569 = lbmole/h
MassFlow           = 42435.4702661 = lb/h
VolumeFlow         = 0.379343030656 = ft3/s
StdLiqVolumeFlow   = 0.300361664353 = ft3/s
H                  = 6169.21942224 = Btu/lbmol
Energy             = 3548853.39535 = Btu/hr
MolecularWeight    = 73.7561332371 = 
ZFactor            = 0.0634240494702 = 
METHANE            = 5.05429118415e-011 = 
ETHANE             = 6.5728403659e-006 = 
PROPANE            = 0.0189672193049 = 
ISOBUTANE          = 0.195279068519 = 
n-BUTANE           = 0.184198894667 = 
ISOPENTANE         = 0.167376568532 = 
n-PENTANE          = 0.144086552484 = 
n-HEXANE           = 0.120622573864 = 
n-HEPTANE          = 0.096984720773 = 
n-OCTANE           = 0.0724778289648 = 

>> 
>> delete spec
>> spec = Tower.MassRatioSpec()
>> spec + ETHANE PROPANE / ISOBUTANE n-BUTANE
>> spec.Port.Fraction = 0.05
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 1.098813
/deprop Inner Error 0.808397
/deprop Inner Error 0.736522
/deprop Inner Error 0.314193
/deprop Inner Error 0.091308
/deprop Inner Error 0.045701
/deprop Inner Error 0.030811
/deprop Inner Error 0.023544
/deprop Inner Error 0.013078
/deprop Inner Error 0.001667
/deprop Inner Error 0.000732
/deprop Inner Error 0.000218
/deprop Inner Error 0.000058
/deprop Iteration 1 Outer Error 0.099640
/deprop Inner Error 1.490756
/deprop Inner Error 0.917366
/deprop Inner Error 0.185283
/deprop Inner Error 0.056843
/deprop Inner Error 0.010550
/deprop Inner Error 0.003522
/deprop Inner Error 0.000881
/deprop Inner Error 0.000445
/deprop Inner Error 0.000087
/deprop Iteration 2 Outer Error 0.016083
/deprop Inner Error 0.165076
/deprop Inner Error 0.030508
/deprop Inner Error 0.006448
/deprop Inner Error 0.001967
/deprop Inner Error 0.000503
/deprop Inner Error 0.000097
/deprop Iteration 3 Outer Error 0.001457
/deprop Inner Error 0.013845
/deprop Inner Error 0.002798
/deprop Inner Error 0.000625
/deprop Inner Error 0.000231
/deprop Inner Error 0.000069
/deprop Iteration 4 Outer Error 0.000131
/deprop Inner Error 0.001306
/deprop Inner Error 0.000249
/deprop Inner Error 0.000058
/deprop Iteration 5 Outer Error 0.000021
/deprop Inner Error 0.000156
/deprop Inner Error 0.000037
>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 253.617900455 = F
P                  = 205.0 = psia
MoleFlow           = 578.839961221 = lbmole/h
MassFlow           = 42589.6479489 = lb/h
VolumeFlow         = 0.380091405342 = ft3/s
StdLiqVolumeFlow   = 0.301720290964 = ft3/s
H                  = 6079.76703718 = Btu/lbmol
Energy             = 3518620.32186 = Btu/hr
MolecularWeight    = 73.5775875928 = 
ZFactor            = 0.0633079819515 = 
METHANE            = 5.85905151506e-011 = 
ETHANE             = 8.64916044332e-006 = 
PROPANE            = 0.0248543604792 = 
ISOBUTANE          = 0.194161476865 = 
n-BUTANE           = 0.183055854513 = 
ISOPENTANE         = 0.166366936359 = 
n-PENTANE          = 0.143217411976 = 
n-HEXANE           = 0.119894970371 = 
n-HEPTANE          = 0.0963997024019 = 
n-OCTANE           = 0.0720406378165 = 

>> 
>> delete spec
>> cd ..
/deprop.Stage_19
>> spec = Tower.ReboilRatioSpec()
>> spec.Port = 2
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 1.068337
/deprop Inner Error 0.394219
/deprop Inner Error 0.163345
/deprop Inner Error 0.097009
/deprop Inner Error 0.041863
/deprop Inner Error 0.004283
/deprop Inner Error 0.001219
/deprop Inner Error 0.000509
/deprop Inner Error 0.000197
/deprop Inner Error 0.000056
/deprop Iteration 1 Outer Error 0.051310
/deprop Inner Error 0.153681
/deprop Inner Error 0.092068
/deprop Inner Error 0.042277
/deprop Inner Error 0.012564
/deprop Inner Error 0.003009
/deprop Inner Error 0.000520
/deprop Inner Error 0.000135
/deprop Inner Error 0.000056
/deprop Iteration 2 Outer Error 0.009451
/deprop Inner Error 0.040644
/deprop Inner Error 0.006876
/deprop Inner Error 0.002121
/deprop Inner Error 0.000471
/deprop Inner Error 0.000047
/deprop Iteration 3 Outer Error 0.001491
/deprop Inner Error 0.006156
/deprop Inner Error 0.000672
/deprop Inner Error 0.000245
/deprop Inner Error 0.000029
/deprop Iteration 4 Outer Error 0.000360
/deprop Inner Error 0.001592
/deprop Inner Error 0.000253
/deprop Inner Error 0.000019
/deprop Iteration 5 Outer Error 0.000057
/deprop Inner Error 0.000059
>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.03252426948e-007 = 
T                  = 259.480499767 = F
P                  = 205.0 = psia
MoleFlow           = 566.496189752 = lbmole/h
MassFlow           = 42046.6738879 = lb/h
VolumeFlow         = 0.377573296939 = ft3/s
StdLiqVolumeFlow   = 0.296927726024 = ft3/s
H                  = 6408.686801 = Btu/lbmol
Energy             = 3629886.1462 = Btu/hr
MolecularWeight    = 74.2223419124 = 
ZFactor            = 0.0637350418859 = 
METHANE            = 1.98588277839e-011 = 
ETHANE             = 1.37804779611e-006 = 
PROPANE            = 0.00345362289159 = 
ISOBUTANE          = 0.198174382853 = 
n-BUTANE           = 0.187422366541 = 
ISOPENTANE         = 0.169992110057 = 
n-PENTANE          = 0.146338094458 = 
n-HEXANE           = 0.122507443572 = 
n-HEPTANE          = 0.0985002212008 = 
n-OCTANE           = 0.0736103803597 = 

>> spec.Port = None
>> 
>> cd l
/deprop.Stage_19.l
>> viscosity = Tower.PropertySpec('Viscosity')
>> viscosity.Port = 0.078
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 0.459765
/deprop Inner Error 0.366644
/deprop Inner Error 0.285265
/deprop Inner Error 0.150406
/deprop Inner Error 0.042742
/deprop Inner Error 0.023605
/deprop Inner Error 0.008023
/deprop Inner Error 0.003089
/deprop Inner Error 0.000738
/deprop Inner Error 0.000448
/deprop Inner Error 0.000149
/deprop Inner Error 0.000060
/deprop Iteration 1 Outer Error 0.079146
/deprop Inner Error 0.714677
/deprop Inner Error 0.311687
/deprop Inner Error 0.133225
/deprop Inner Error 0.035015
/deprop Inner Error 0.013894
/deprop Inner Error 0.002229
/deprop Inner Error 0.000819
/deprop Inner Error 0.000263
/deprop Inner Error 0.000066
/deprop Iteration 2 Outer Error 0.016379
/deprop Inner Error 0.091771
/deprop Inner Error 0.040594
/deprop Inner Error 0.010434
/deprop Inner Error 0.001698
/deprop Inner Error 0.000282
/deprop Inner Error 0.000121
/deprop Inner Error 0.000040
/deprop Iteration 3 Outer Error 0.002016
/deprop Inner Error 0.015771
/deprop Inner Error 0.004364
/deprop Inner Error 0.001747
/deprop Inner Error 0.000672
/deprop Inner Error 0.000085
/deprop Iteration 4 Outer Error 0.000206
/deprop Inner Error 0.004319
/deprop Inner Error 0.001107
/deprop Inner Error 0.000047
/deprop Iteration 5 Outer Error 0.000029
/deprop Inner Error 0.000243
/deprop Inner Error 0.000057
>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 255.623586317 = F
P                  = 205.0 = psia
MoleFlow           = 574.488489888 = lbmole/h
MassFlow           = 42397.5321075 = lb/h
VolumeFlow         = 0.379162063275 = ft3/s
StdLiqVolumeFlow   = 0.300027235783 = ft3/s
H                  = 6191.61617935 = Btu/lbmol
Energy             = 3556414.07817 = Btu/hr
MolecularWeight    = 73.8004900947 = 
ZFactor            = 0.0634531224943 = 
METHANE            = 4.8484901725e-011 = 
ETHANE             = 6.07963611371e-006 = 
PROPANE            = 0.0175025502732 = 
ISOBUTANE          = 0.19555629014 = 
n-BUTANE           = 0.1844864606 = 
ISOPENTANE         = 0.167627093208 = 
n-PENTANE          = 0.144302215546 = 
n-HEXANE           = 0.120803116549 = 
n-HEPTANE          = 0.0971298833347 = 
n-OCTANE           = 0.0725863106641 = 

>> 
>> viscosity.Port = None
>> speedofsound = Tower.PropertySpec('SpeedOfSound')
>> speedofsound.Port = 400 m/s
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 5.819716
/deprop Inner Error 4.106136
/deprop Inner Error 4.100515
/deprop Inner Error 1.279419
/deprop Inner Error 0.166985
/deprop Inner Error 0.154172
/deprop Inner Error 0.136220
/deprop Inner Error 0.089434
/deprop Inner Error 0.083129
/deprop Inner Error 0.003899
/deprop Inner Error 0.000818
/deprop Iteration 1 Outer Error 0.102797
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 8.982360
/deprop Inner Error 0.729649
/deprop Inner Error 0.206220
/deprop Inner Error 0.047924
/deprop Inner Error 0.019552
/deprop Inner Error 0.007706
/deprop Inner Error 0.001339
/deprop Inner Error 0.000252
/deprop Inner Error 0.000079
/deprop Iteration 2 Outer Error 0.018559
/deprop Inner Error 0.707975
/deprop Inner Error 0.187617
/deprop Inner Error 0.034475
/deprop Inner Error 0.006962
/deprop Inner Error 0.000405
/deprop Inner Error 0.000065
/deprop Iteration 3 Outer Error 0.001804
/deprop Inner Error 0.096078
/deprop Inner Error 0.027476
/deprop Inner Error 0.001505
/deprop Inner Error 0.000931
/deprop Inner Error 0.000098
/deprop Iteration 4 Outer Error 0.000163
/deprop Inner Error 0.005632
/deprop Inner Error 0.000543
/deprop Inner Error 0.000033
/deprop Iteration 5 Outer Error 0.000027
/deprop Inner Error 0.001011
/deprop Inner Error 0.000223
/deprop Inner Error 0.000014
>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 4.8653337568e-009 = 
T                  = 252.444696978 = F
P                  = 205.0 = psia
MoleFlow           = 581.437833524 = lbmole/h
MassFlow           = 42704.4501212 = lb/h
VolumeFlow         = 0.380661126394 = ft3/s
StdLiqVolumeFlow   = 0.302731608949 = ft3/s
H                  = 6014.67894888 = Btu/lbmol
Energy             = 3496573.81119 = Btu/hr
MolecularWeight    = 73.4462872194 = 
ZFactor            = 0.0632235787468 = 
METHANE            = 6.45293150107e-011 = 
ETHANE             = 1.0301511079e-005 = 
PROPANE            = 0.0291776098886 = 
ISOBUTANE          = 0.19333861094 = 
n-BUTANE           = 0.182225331938 = 
ISOPENTANE         = 0.165623606236 = 
n-PENTANE          = 0.142577514999 = 
n-HEXANE           = 0.11935927798 = 
n-HEPTANE          = 0.0959689871948 = 
n-OCTANE           = 0.0717187592477 = 

>> viscosity.Port
Port: /deprop.Variable_19_viscosity + sim.solver.Ports.Port_Signal
Connected to: None
Viscosity   = 0.0788577050417 = cp

>> 
>> 
>> #Test some special properties
>> speedofsound.Port = None
>> rvpd323 = Tower.SpecialPropertySpec("ReidVaporPressure_D323")
>> rvpd323.Port = 33.027
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 0.492242
/deprop Inner Error 0.401397
/deprop Inner Error 0.330255
/deprop Inner Error 0.249717
/deprop Inner Error 0.183229
/deprop Inner Error 0.044873
/deprop Inner Error 0.027933
/deprop Inner Error 0.015186
/deprop Inner Error 0.005993
/deprop Inner Error 0.000715
/deprop Inner Error 0.000270
/deprop Inner Error 0.000124
/deprop Inner Error 0.000024
/deprop Iteration 1 Outer Error 0.106593
/deprop Inner Error 0.996554
/deprop Inner Error 0.315517
/deprop Inner Error 0.131215
/deprop Inner Error 0.061016
/deprop Inner Error 0.023690
/deprop Inner Error 0.008886
/deprop Inner Error 0.002561
/deprop Inner Error 0.000585
/deprop Inner Error 0.000151
/deprop Inner Error 0.000044
/deprop Iteration 2 Outer Error 0.017115
/deprop Inner Error 0.198582
/deprop Inner Error 0.025467
/deprop Inner Error 0.009886
/deprop Inner Error 0.002894
/deprop Inner Error 0.000812
/deprop Inner Error 0.000104
/deprop Inner Error 0.000036
/deprop Iteration 3 Outer Error 0.001499
/deprop Inner Error 0.016436
/deprop Inner Error 0.005202
/deprop Inner Error 0.001831
/deprop Inner Error 0.000192
/deprop Inner Error 0.000045
/deprop Iteration 4 Outer Error 0.000133
/deprop Inner Error 0.001057
/deprop Inner Error 0.000340
/deprop Inner Error 0.000102
/deprop Inner Error 0.000022
/deprop Iteration 5 Outer Error 0.000027
/deprop Inner Error 0.000257
/deprop Inner Error 0.000069
>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 252.450386546 = F
P                  = 205.0 = psia
MoleFlow           = 581.425039292 = lbmole/h
MassFlow           = 42703.8826571 = lb/h
VolumeFlow         = 0.380658230219 = ft3/s
StdLiqVolumeFlow   = 0.302726619825 = ft3/s
H                  = 6014.99406403 = Btu/lbmol
Energy             = 3496680.05597 = Btu/hr
MolecularWeight    = 73.4469274132 = 
ZFactor            = 0.0632239838065 = 
METHANE            = 6.44976785313e-011 = 
ETHANE             = 1.02930792638e-005 = 
PROPANE            = 0.0291566682643 = 
ISOBUTANE          = 0.193342436936 = 
n-BUTANE           = 0.182229357595 = 
ISOPENTANE         = 0.165627250774 = 
n-PENTANE          = 0.142580652408 = 
n-HEXANE           = 0.119361904476 = 
n-HEPTANE          = 0.095971098988 = 
n-OCTANE           = 0.0717203374157 = 

>> viscosity.Port
Port: /deprop.Variable_19_viscosity + sim.solver.Ports.Port_Signal
Connected to: None
Viscosity   = 0.0788561761243 = cp

>> speedofsound.Port
Port: /deprop.Variable_19_speedofsound + sim.solver.Ports.Port_Signal
Connected to: None
SpeedOfSound   = 1312.31326392 = ft/s

>> 
>> rvpd323.Port = None
>> kinvisc = Tower.SpecialPropertySpec("KinematicViscosity")
>> kinvisc.Port = 3.1
Calculating Jacobian for /deprop
Calculating disturbance 10 of 20 in jacobian of /deprop
Calculating disturbance 20 of 20 in jacobian of /deprop
/deprop Inner Error 0.481443
/deprop Inner Error 0.401322
/deprop Inner Error 0.320500
/deprop Inner Error 0.199566
/deprop Inner Error 0.156882
/deprop Inner Error 0.070656
/deprop Inner Error 0.046543
/deprop Inner Error 0.014708
/deprop Inner Error 0.010741
/deprop Inner Error 0.004471
/deprop Inner Error 0.000932
/deprop Inner Error 0.000325
/deprop Inner Error 0.000147
/deprop Inner Error 0.000057
/deprop Iteration 1 Outer Error 0.127192
/deprop Inner Error 0.773590
/deprop Inner Error 0.394196
/deprop Inner Error 0.318644
/deprop Inner Error 0.086755
/deprop Inner Error 0.031852
/deprop Inner Error 0.013558
/deprop Inner Error 0.004590
/deprop Inner Error 0.001815
/deprop Inner Error 0.000292
/deprop Inner Error 0.000115
/deprop Inner Error 0.000033
/deprop Iteration 2 Outer Error 0.021551
/deprop Inner Error 0.161023
/deprop Inner Error 0.038011
/deprop Inner Error 0.011694
/deprop Inner Error 0.004791
/deprop Inner Error 0.001431
/deprop Inner Error 0.000269
/deprop Inner Error 0.000081
/deprop Iteration 3 Outer Error 0.001754
/deprop Inner Error 0.023017
/deprop Inner Error 0.006082
/deprop Inner Error 0.000947
/deprop Inner Error 0.000115
/deprop Inner Error 0.000021
/deprop Iteration 4 Outer Error 0.000142
/deprop Inner Error 0.002216
/deprop Inner Error 0.000445
/deprop Inner Error 0.000035
/deprop Iteration 5 Outer Error 0.000027
/deprop Inner Error 0.000263
/deprop Inner Error 0.000035
>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 248.203870169 = F
P                  = 205.0 = psia
MoleFlow           = 591.150557162 = lbmole/h
MassFlow           = 43133.9793133 = lb/h
VolumeFlow         = 0.382876165702 = ft3/s
StdLiqVolumeFlow   = 0.306514291301 = ft3/s
H                  = 5781.48896287 = Btu/lbmol
Energy             = 3417155.69272 = Btu/hr
MolecularWeight    = 72.9661484552 = 
ZFactor            = 0.0629213643275 = 
METHANE            = 8.8842007545e-011 = 
ETHANE             = 1.77562345679e-005 = 
PROPANE            = 0.0449635682369 = 
ISOBUTANE          = 0.190326152281 = 
n-BUTANE           = 0.179224407982 = 
ISOPENTANE         = 0.162902389242 = 
n-PENTANE          = 0.140234942384 = 
n-HEXANE           = 0.117398180817 = 
n-HEPTANE          = 0.0943921972566 = 
n-OCTANE           = 0.0705404054767 = 

>> viscosity.Port
Port: /deprop.Variable_19_viscosity + sim.solver.Ports.Port_Signal
Connected to: None
Viscosity   = 0.0799997454936 = cp

>> speedofsound.Port
Port: /deprop.Variable_19_speedofsound + sim.solver.Ports.Port_Signal
Connected to: None
SpeedOfSound   = 1329.19139485 = ft/s

>> rvpd323.Port
Port: /deprop.Variable_19_rvpd323 + sim.solver.Ports.Port_Signal
Connected to: None
P   = 34.9817984883 = psia

>> 
>> copy /deprop /overhead /bottoms
Copied /deprop /overhead /bottoms to the clipboard
>> paste /
Pasting /deprop /overhead /bottoms
Pasted /deprop /overhead /bottoms as /depropClone /overheadClone /bottomsClone
Calculating Jacobian for /depropClone
Calculating disturbance 10 of 20 in jacobian of /depropClone
Calculating disturbance 20 of 20 in jacobian of /depropClone
/depropClone Inner Error 0.481443
/depropClone Inner Error 0.401322
/depropClone Inner Error 0.320500
/depropClone Inner Error 0.199566
/depropClone Inner Error 0.156882
/depropClone Inner Error 0.070656
/depropClone Inner Error 0.046543
/depropClone Inner Error 0.014708
/depropClone Inner Error 0.010741
/depropClone Inner Error 0.004471
/depropClone Inner Error 0.000932
/depropClone Inner Error 0.000325
/depropClone Inner Error 0.000147
/depropClone Inner Error 0.000057
/depropClone Iteration 1 Outer Error 0.127192
/depropClone Inner Error 0.773590
/depropClone Inner Error 0.394196
/depropClone Inner Error 0.318644
/depropClone Inner Error 0.086755
/depropClone Inner Error 0.031852
/depropClone Inner Error 0.013558
/depropClone Inner Error 0.004590
/depropClone Inner Error 0.001815
/depropClone Inner Error 0.000292
/depropClone Inner Error 0.000115
/depropClone Inner Error 0.000033
/depropClone Iteration 2 Outer Error 0.021551
/depropClone Inner Error 0.161023
/depropClone Inner Error 0.038011
/depropClone Inner Error 0.011694
/depropClone Inner Error 0.004791
/depropClone Inner Error 0.001431
/depropClone Inner Error 0.000269
/depropClone Inner Error 0.000081
/depropClone Iteration 3 Outer Error 0.001754
/depropClone Inner Error 0.023017
/depropClone Inner Error 0.006082
/depropClone Inner Error 0.000947
/depropClone Inner Error 0.000115
/depropClone Inner Error 0.000021
/depropClone Iteration 4 Outer Error 0.000142
/depropClone Inner Error 0.002216
/depropClone Inner Error 0.000445
/depropClone Inner Error 0.000035
/depropClone Iteration 5 Outer Error 0.000027
/depropClone Inner Error 0.000263
/depropClone Inner Error 0.000035
>> cd /depropClone.Stage_19.l
/depropClone.Stage_19.l
>> /bottomsClone.Out
Port: /bottomsClone.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 248.203870169 = F
P                  = 205.0 = psia
MoleFlow           = 591.150557162 = lbmole/h
MassFlow           = 43133.9793133 = lb/h
VolumeFlow         = 0.382876165702 = ft3/s
StdLiqVolumeFlow   = 0.306514291301 = ft3/s
H                  = 5781.48896287 = Btu/lbmol
Energy             = 3417155.69272 = Btu/hr
MolecularWeight    = 72.9661484552 = 
ZFactor            = 0.0629213643275 = 
METHANE            = 8.8842007545e-011 = 
ETHANE             = 1.77562345679e-005 = 
PROPANE            = 0.0449635682369 = 
ISOBUTANE          = 0.190326152281 = 
n-BUTANE           = 0.179224407982 = 
ISOPENTANE         = 0.162902389242 = 
n-PENTANE          = 0.140234942384 = 
n-HEXANE           = 0.117398180817 = 
n-HEPTANE          = 0.0943921972566 = 
n-OCTANE           = 0.0705404054767 = 

>> viscosity.Port
Port: /depropClone.Variable_19_viscosity + sim.solver.Ports.Port_Signal
Connected to: None
Viscosity   = 0.0799997454936 = cp

>> speedofsound.Port
Port: /depropClone.Variable_19_speedofsound + sim.solver.Ports.Port_Signal
Connected to: None
SpeedOfSound   = 1329.19139485 = ft/s

>> rvpd323.Port
Port: /depropClone.Variable_19_rvpd323 + sim.solver.Ports.Port_Signal
Connected to: None
P   = 34.9817984883 = psia

>> 
>> clear
>> read envelope.tst
Processing envelope.tst
>> units SI
>> # test 2-phase VL envelope
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + methane propane n-hexane water
methane propane n-hexane water 
>> env = Envelope.PTEnvelope()
>> env.In.Fraction = 0.15 0.15 0.2 0.5
>> # I need temperatures at these pressure values
>> env.Pressures = 101.325 202.65 303.975 405.3 506.625 kPa
>> # add a bubble/dew point curve
>> env.bubble = Envelope.QualityCurve(0.0)
>> # add a quality curve
>> env.q4 = Envelope.QualityCurve(0.4)
>> # examine results
>> env
Operation: env = sim.unitop.Envelope.PTEnvelope
Port: In = sim.solver.Ports.Port_Material
Port: Out = sim.solver.Ports.Port_Material
Port: Crit_T = sim.solver.Ports.Port_Signal
Port: Crit_P = sim.solver.Ports.Port_Signal
Port: Cricondentherm_T = sim.solver.Ports.Port_Signal
Port: Cricondenbar_T = sim.solver.Ports.Port_Signal
Port: Cricondentherm_P = sim.solver.Ports.Port_Signal
Port: Starting_P = sim.solver.Ports.Port_Signal
Port: Cricondenbar_P = sim.solver.Ports.Port_Signal
Parameter: Ignored = None
Parameter: Hydrate = 0
Parameter: DryBasis = 1
Parameter: MaxNumPoints = 50
DataSeries: Pressures = sim.unitop.XYTable.DataSeries; P 101.325 202.65 303.975 405.3 506.625
QualityCurve: bubble
QualityCurve: q4
>> env.bubble.Results
PT: [PTEnvelop::Terminate] P is out of range :       0.58115
Total 33 points: pointType, P kPa, T C
 Point 0: 	 0 	 101.325	 -153.143954431
 Point 1: 	 0 	 111.530989441	 -151.675905678
 Point 2: 	 0 	 136.325991528	 -148.476879005
 Point 3: 	 7 	 202.64999944	 -141.596768279
 Point 4: 	 0 	 207.007700804	 -141.203706397
 Point 5: 	 7 	 303.975	 -133.659414269
 Point 6: 	 0 	 330.522296452	 -131.88790054
 Point 7: 	 7 	 405.3	 -127.366270837
 Point 8: 	 7 	 506.625	 -122.04830653
 Point 9: 	 0 	 522.780062311	 -121.264451532
 Point 10: 	 0 	 817.764966771	 -109.054563237
 Point 11: 	 0 	 1263.35932593	 -94.8452833933
 Point 12: 	 0 	 1926.3209545	 -77.94062401
 Point 13: 	 0 	 2899.97102679	 -57.0177499049
 Point 14: 	 0 	 4309.32305658	 -29.3722314323
 Point 15: 	 0 	 6260.33748637	 10.5076577729
 Point 16: 	 0 	 8498.55663986	 72.2827854885
 Point 17: 	 0 	 9247.11212811	 114.364722815
 Point 18: 	 3 	 9315.66053098	 129.347211109
 Point 19: 	 0 	 8779.98089177	 161.291350787
 Point 20: 	 2 	 8080.4939945	 173.786572526
 Point 21: 	 4 	 6379.61977918	 182.48015727
 Point 22: 	 0 	 5057.3765639	 179.30179084
 Point 23: 	 0 	 2589.04548251	 156.326393727
 Point 24: 	 0 	 524.769266431	 93.2504088568
 Point 25: 	 7 	 506.625	 92.0003775299
 Point 26: 	 7 	 405.299999998	 84.2595235155
 Point 27: 	 7 	 303.974999993	 74.7357004847
 Point 28: 	 7 	 202.649999995	 62.1307522446
 Point 29: 	 7 	 101.325	 42.6191446251
 Point 30: 	 0 	 62.1369730937	 30.2758424406
 Point 31: 	 0 	 6.2247509218	 -15.6673769423
 Point 32: 	 0 	 0.581151154366	 -49.0629103276
>> env.q4.Results
PT: [PTEnvelop::Terminate] P is out of range :       0.35551
Total 22 points: pointType, P kPa, T C
 Point 0: 	 0 	 101.325	 -47.7098174991
 Point 1: 	 0 	 158.140682734	 -37.1807753825
 Point 2: 	 7 	 202.65	 -30.7668700915
 Point 3: 	 7 	 303.975	 -19.3204083383
 Point 4: 	 0 	 381.195221139	 -12.3181046687
 Point 5: 	 7 	 405.3	 -10.3345554347
 Point 6: 	 7 	 506.624999966	 -2.78869023657
 Point 7: 	 0 	 1852.82642756	 54.233713228
 Point 8: 	 0 	 6822.8734191	 149.675511489
 Point 9: 	 3 	 8043.11995334	 171.120886482
 Point 10: 	 2 	 7999.86587374	 172.359797797
 Point 11: 	 4 	 7869.16293252	 172.778898294
 Point 12: 	 0 	 3929.65386477	 139.134469965
 Point 13: 	 0 	 585.4087649	 54.6135171007
 Point 14: 	 7 	 506.625	 49.5211439746
 Point 15: 	 7 	 405.299999998	 41.9804272345
 Point 16: 	 7 	 303.974999996	 32.7918676156
 Point 17: 	 7 	 202.649999997	 20.765393551
 Point 18: 	 7 	 101.325	 2.39681983634
 Point 19: 	 0 	 56.2452527867	 -11.3226643386
 Point 20: 	 0 	 4.61976163541	 -55.7534181718
 Point 21: 	 0 	 0.355506548787	 -86.7571284575
>> # test deleting curve
>> delete env.q4
>> env
Operation: env = sim.unitop.Envelope.PTEnvelope
Port: In = sim.solver.Ports.Port_Material
Port: Out = sim.solver.Ports.Port_Material
Port: Crit_T = sim.solver.Ports.Port_Signal
Port: Crit_P = sim.solver.Ports.Port_Signal
Port: Cricondentherm_T = sim.solver.Ports.Port_Signal
Port: Cricondenbar_T = sim.solver.Ports.Port_Signal
Port: Cricondentherm_P = sim.solver.Ports.Port_Signal
Port: Starting_P = sim.solver.Ports.Port_Signal
Port: Cricondenbar_P = sim.solver.Ports.Port_Signal
Parameter: Ignored = None
Parameter: Hydrate = 0
Parameter: DryBasis = 1
Parameter: MaxNumPoints = 50
DataSeries: Pressures = sim.unitop.XYTable.DataSeries; P 101.325 202.65 303.975 405.3 506.625
QualityCurve: bubble
>> # examine the critical point
>> env.Crit_T
Port: /env.Crit_T + sim.solver.Ports.Port_Signal
Connected to: None
T   = 173.786572526 = C

>> env.Crit_P
Port: /env.Crit_P + sim.solver.Ports.Port_Signal
Connected to: None
P   = 8080.4939945 = kPa

>> 
>> # Add a Enthalpy diagram
>> env.th = Envelope.THEnvelope()
>> # Add an isobar
>> env.th.isobar1 = Envelope.QualityCurve(500)
>> env.th.isobar2 = Envelope.QualityCurve(1000)
>> 
>> # examine results
>> /env.th.isobar1.Results
TH: 
Total 42 points: pointType, P kPa, T C, H kJ/kmol
 Point 0: 	 0 	 500.0	 -153.143954431	 -19896.2142016
 Point 1: 	 0 	 500.0	 -151.675905678	 -19766.0014464
 Point 2: 	 0 	 500.0	 -148.476879005	 -19481.182553
 Point 3: 	 0 	 500.0	 -141.596768279	 -18863.4106614
 Point 4: 	 0 	 500.0	 -141.203706397	 -18827.8938097
 Point 5: 	 0 	 500.0	 -133.659414269	 -18141.2792297
 Point 6: 	 0 	 500.0	 -131.88790054	 -17978.6561381
 Point 7: 	 0 	 500.0	 -127.366270837	 -17561.0727478
 Point 8: 	 0 	 500.0	 -122.374196846	 -17095.7407191
 Point 9: 	 0 	 500.0	 -122.04830653	 -17022.9355957
 Point 10: 	 0 	 500.0	 -121.264451532	 -16853.4677496
 Point 11: 	 0 	 500.0	 -109.054563237	 -14851.3095114
 Point 12: 	 0 	 500.0	 -102.815149137	 -14047.1337186
 Point 13: 	 0 	 500.0	 -94.8452833933	 -13101.3305355
 Point 14: 	 0 	 500.0	 -77.94062401	 -11203.4121632
 Point 15: 	 0 	 500.0	 -57.0177499049	 -8811.56554925
 Point 16: 	 0 	 500.0	 -49.0629103276	 -7845.18846765
 Point 17: 	 0 	 500.0	 -29.3722314323	 -5225.51379371
 Point 18: 	 0 	 500.0	 -15.6673769423	 -3158.12422194
 Point 19: 	 0 	 500.0	 10.5076577729	 1303.67516975
 Point 20: 	 0 	 500.0	 30.2758424406	 4933.02575145
 Point 21: 	 0 	 500.0	 42.6191446251	 7380.79926717
 Point 22: 	 0 	 500.0	 62.1307522446	 11978.676272
 Point 23: 	 0 	 500.0	 72.2827854885	 15053.0530525
 Point 24: 	 0 	 500.0	 74.7357004847	 15909.4515249
 Point 25: 	 0 	 500.0	 84.2595235155	 19857.0767166
 Point 26: 	 0 	 500.0	 91.5348557811	 23868.1243476
 Point 27: 	 0 	 500.0	 92.0003775299	 23918.7332669
 Point 28: 	 0 	 500.0	 93.2504088568	 24054.8326704
 Point 29: 	 0 	 500.0	 114.364722815	 26398.6494243
 Point 30: 	 0 	 500.0	 117.551952139	 26759.8641973
 Point 31: 	 0 	 500.0	 129.347211109	 28113.64593
 Point 32: 	 0 	 500.0	 156.326393727	 31311.0609899
 Point 33: 	 0 	 500.0	 161.291350787	 31914.7920856
 Point 34: 	 0 	 500.0	 173.786572526	 33455.2293869
 Point 35: 	 0 	 500.0	 179.30179084	 34144.7213119
 Point 36: 	 0 	 500.0	 182.48015727	 34544.7247115
 Point 37: 	 0 	 500.0	 200.705363561	 36875.7921403
 Point 38: 	 0 	 500.0	 218.930569852	 39270.2186486
 Point 39: 	 0 	 500.0	 237.155776143	 41727.4772589
 Point 40: 	 0 	 500.0	 255.380982434	 44246.9441744
 Point 41: 	 0 	 500.0	 273.606188724	 46827.9128464
>> /env.th.isobar2.Results
TH: 
Total 42 points: pointType, P kPa, T C, H kJ/kmol
 Point 0: 	 0 	 1000.0	 -153.143954431	 -19863.1155561
 Point 1: 	 0 	 1000.0	 -151.675905678	 -19732.9389385
 Point 2: 	 0 	 1000.0	 -148.476879005	 -19448.201837
 Point 3: 	 0 	 1000.0	 -141.596768279	 -18830.6208397
 Point 4: 	 0 	 1000.0	 -141.203706397	 -18795.1155449
 Point 5: 	 0 	 1000.0	 -133.659414269	 -18108.737497
 Point 6: 	 0 	 1000.0	 -131.88790054	 -17946.1742102
 Point 7: 	 0 	 1000.0	 -127.366270837	 -17528.7513668
 Point 8: 	 0 	 1000.0	 -122.374196846	 -17063.6105923
 Point 9: 	 0 	 1000.0	 -122.04830653	 -17033.0851558
 Point 10: 	 0 	 1000.0	 -121.264451532	 -16959.5815178
 Point 11: 	 0 	 1000.0	 -109.054563237	 -15799.2924364
 Point 12: 	 0 	 1000.0	 -102.815149137	 -15194.7044754
 Point 13: 	 0 	 1000.0	 -94.8452833933	 -13896.4657287
 Point 14: 	 0 	 1000.0	 -77.94062401	 -11684.8423733
 Point 15: 	 0 	 1000.0	 -57.0177499049	 -9208.97268125
 Point 16: 	 0 	 1000.0	 -49.0629103276	 -8265.24919393
 Point 17: 	 0 	 1000.0	 -29.3722314323	 -5831.63251468
 Point 18: 	 0 	 1000.0	 -15.6673769423	 -4008.8796718
 Point 19: 	 0 	 1000.0	 10.5076577729	 -119.528156693
 Point 20: 	 0 	 1000.0	 30.2758424406	 3191.55197308
 Point 21: 	 0 	 1000.0	 42.6191446251	 5402.49807387
 Point 22: 	 0 	 1000.0	 62.1307522446	 9170.08694711
 Point 23: 	 0 	 1000.0	 72.2827854885	 11340.2431183
 Point 24: 	 0 	 1000.0	 74.7357004847	 11896.2641982
 Point 25: 	 0 	 1000.0	 84.2595235155	 14210.2284071
 Point 26: 	 0 	 1000.0	 91.5348557811	 16192.4969111
 Point 27: 	 0 	 1000.0	 92.0003775299	 16327.2564058
 Point 28: 	 0 	 1000.0	 93.2504088568	 16694.4423427
 Point 29: 	 0 	 1000.0	 114.364722815	 24603.7829305
 Point 30: 	 0 	 1000.0	 117.551952139	 26199.5621693
 Point 31: 	 0 	 1000.0	 129.347211109	 27586.8496369
 Point 32: 	 0 	 1000.0	 156.326393727	 30848.8302181
 Point 33: 	 0 	 1000.0	 161.291350787	 31462.9615335
 Point 34: 	 0 	 1000.0	 173.786572526	 33027.9014796
 Point 35: 	 0 	 1000.0	 179.30179084	 33727.5156625
 Point 36: 	 0 	 1000.0	 182.48015727	 34133.1752734
 Point 37: 	 0 	 1000.0	 200.705363561	 36494.4131087
 Point 38: 	 0 	 1000.0	 218.930569852	 38915.6572723
 Point 39: 	 0 	 1000.0	 237.155776143	 41396.941443
 Point 40: 	 0 	 1000.0	 255.380982434	 43938.0775661
 Point 41: 	 0 	 1000.0	 273.606188724	 46538.7040469
>> 
>> copy /env
Copied /env to the clipboard
>> paste /
Pasting /env
Pasted /env as /envClone
>> /envClone.Crit_T
Port: /envClone.Crit_T + sim.solver.Ports.Port_Signal
Connected to: None
T   = 173.786572526 = C

>> /envClone.Crit_P
Port: /envClone.Crit_P + sim.solver.Ports.Port_Signal
Connected to: None
P   = 8080.4939945 = kPa

>> /envClone.bubble.Results
PT: [PTEnvelop::Terminate] P is out of range :       0.58115
Total 37 points: pointType, P kPa, T C
 Point 0: 	 0 	 101.325	 -153.143954431
 Point 1: 	 0 	 111.530989441	 -151.675905678
 Point 2: 	 0 	 136.325991528	 -148.476879005
 Point 3: 	 7 	 202.64999944	 -141.596768279
 Point 4: 	 0 	 207.007700804	 -141.203706397
 Point 5: 	 7 	 303.975	 -133.659414269
 Point 6: 	 0 	 330.522296452	 -131.88790054
 Point 7: 	 7 	 405.3	 -127.366270837
 Point 8: 	 7 	 500.0	 -122.374196846
 Point 9: 	 7 	 506.625	 -122.04830653
 Point 10: 	 0 	 522.780062311	 -121.264451532
 Point 11: 	 0 	 817.764966771	 -109.054563237
 Point 12: 	 7 	 1000.0	 -102.815149137
 Point 13: 	 0 	 1263.35932593	 -94.8452833933
 Point 14: 	 0 	 1926.3209545	 -77.94062401
 Point 15: 	 0 	 2899.97102679	 -57.0177499049
 Point 16: 	 0 	 4309.32305658	 -29.3722314323
 Point 17: 	 0 	 6260.33748637	 10.5076577729
 Point 18: 	 0 	 8498.55663986	 72.2827854885
 Point 19: 	 0 	 9247.11212811	 114.364722815
 Point 20: 	 3 	 9315.66053098	 129.347211109
 Point 21: 	 0 	 8779.98089177	 161.291350787
 Point 22: 	 2 	 8080.4939945	 173.786572526
 Point 23: 	 4 	 6379.61977918	 182.48015727
 Point 24: 	 0 	 5057.3765639	 179.30179084
 Point 25: 	 0 	 2589.04548251	 156.326393727
 Point 26: 	 7 	 999.999997603	 117.551952139
 Point 27: 	 0 	 524.769266431	 93.2504088568
 Point 28: 	 7 	 506.625	 92.0003775299
 Point 29: 	 7 	 500.0	 91.5348557811
 Point 30: 	 7 	 405.299999998	 84.2595235155
 Point 31: 	 7 	 303.974999993	 74.7357004847
 Point 32: 	 7 	 202.649999995	 62.1307522446
 Point 33: 	 7 	 101.325	 42.6191446251
 Point 34: 	 0 	 62.1369730937	 30.2758424406
 Point 35: 	 0 	 6.2247509218	 -15.6673769423
 Point 36: 	 0 	 0.581151154366	 -49.0629103276
>> 
>> clear
>> read patest.tst
Processing patest.tst
>> # Depeopanizer test (from old Hysim manual)
>> units SI
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + propane isobutane n-butane isopentane n-pentane
propane isobutane n-butane isopentane n-pentane 
>> thermo + n-hexane n-heptane n-octane
n-hexane n-heptane n-octane 
>> thermo + n-nonane n-decane
n-nonane n-decane 
>> 
>> stab = Tower.Tower()
>> stab.Stage_0 + 10  # twelve stages
>> stab.LiquidPhases = 2
>> 
>> cd stab.Stage_0
/stab.Stage_0
>> 
>> l = Tower.LiquidDraw()
>> l.Port.P = 1000
>> 
>> cond = Tower.EnergyFeed(0)
>> 
>> estT = Tower.Estimate('T')
>> estT.Value = 25
>> 
>> reflux = Tower.StageSpecification('Reflux')
>> reflux.Value = 2
>> 
>> cd ../Stage_5
/stab.Stage_5
>> f = Tower.Feed()
>> f.Port.T = 50
>> f.Port.P = 2000
>> f.Port.MoleFlow = 1000
>> f.Port.Fraction = .1702 .1473 .1132 .1166 .1066 .0963 .0829 .0694 .0558 .0417
>> f.Port
Port: /stab.Feed_5_f + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 50.0 * C
P                  = 2000.0 * kPa
MoleFlow           = 1000.0 * kgmole/h
MassFlow           = 76372.183238 = kg/h
VolumeFlow         = 124.531495189 = m3/hr
StdLiqVolumeFlow   = 120.564823348 = m3/hr
H                  = -64.716985556 = kJ/kmol
Energy             = -17976.9404322 = W
MolecularWeight    = 76.3721833199 = 
ZFactor            = 0.0926989139352 = 
PROPANE            = 0.1702 * 
ISOBUTANE          = 0.1473 * 
n-BUTANE           = 0.1132 * 
ISOPENTANE         = 0.1166 * 
n-PENTANE          = 0.1066 * 
n-HEXANE           = 0.0963 * 
n-HEPTANE          = 0.0829 * 
n-OCTANE           = 0.0694 * 
n-NONANE           = 0.0558 * 
n-DECANE           = 0.0417 * 

>> 
>> cd ../Stage_11
/stab.Stage_11
>> l = Tower.LiquidDraw()
>> l.Port.P = 1100
>> l.Port.Fraction.n-BUTANE = .02
>> 
>> reb = Tower.EnergyFeed(1)
>> estT = Tower.Estimate('T')
>> estT.Value = 100
>> 
>> cd ../Stage_9
/stab.Stage_9
>> pa_source = Tower.VapourDraw()
>> pa_source.Port.MoleFlow = 200
>> 
>> cd ../Stage_7
/stab.Stage_7
>> pa_dest = Tower.Feed()
>> 
>> cd ..
/stab
>> Stage_9.pa_source.Port -> Stage_7.pa_dest.Port
>> 
>> /overhead = Stream.Stream_Material()
>> /overhead.In -> Stage_0.l.Port
>> 
>> /bottoms = Stream.Stream_Material()
>> /bottoms.In -> Stage_11.l.Port
>> 
>> 
>> 
>> TryToSolve = 1  # start calculation
Calculating Jacobian for /stab
Calculating disturbance 10 of 13 in jacobian of /stab
/stab Inner Error 0.712828
/stab Inner Error 0.181826
/stab Inner Error 0.041557
/stab Inner Error 0.014114
/stab Inner Error 0.006089
/stab Inner Error 0.000541
/stab Inner Error 0.000166
/stab Inner Error 0.000023
/stab Iteration 1 Outer Error 0.065420
/stab Inner Error 0.231639
/stab Inner Error 0.081327
/stab Inner Error 0.021972
/stab Inner Error 0.005395
/stab Inner Error 0.001209
/stab Inner Error 0.000265
/stab Inner Error 0.000056
/stab Iteration 2 Outer Error 0.002053
/stab Inner Error 0.043846
/stab Inner Error 0.007969
/stab Inner Error 0.002285
/stab Inner Error 0.000402
/stab Inner Error 0.000056
/stab Iteration 3 Outer Error 0.000144
/stab Inner Error 0.003450
/stab Inner Error 0.000739
/stab Inner Error 0.000105
/stab Inner Error 0.000009
/stab Iteration 4 Outer Error 0.000045
/stab Inner Error 0.000234
/stab Inner Error 0.000059
>> 
>> /overhead.Out
Port: /overhead.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 51.5647086147 = C
P                  = 1000.0 = kPa
MoleFlow           = 444.113686036 = kgmole/h
MassFlow           = 23833.5777482 = kg/h
VolumeFlow         = 45.5805583427 = m3/hr
StdLiqVolumeFlow   = 42.9891607454 = m3/hr
H                  = 1030.0703143 = kJ/kmol
Energy             = 127074.534489 = W
MolecularWeight    = 53.6654881343 = 
ZFactor            = 0.0380148368299 = 
PROPANE            = 0.383035476934 = 
ISOBUTANE          = 0.32190329398 = 
n-BUTANE           = 0.229859838788 = 
ISOPENTANE         = 0.0431038110312 = 
n-PENTANE          = 0.0219989597948 = 
n-HEXANE           = 9.65158489988e-005 = 
n-HEPTANE          = 2.06339337471e-006 = 
n-OCTANE           = 3.93654137078e-008 = 
n-NONANE           = 8.46276150741e-010 = 
n-DECANE           = 1.79467843171e-011 = 

>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.36720783672e-005 = 
T                  = 165.482779672 = C
P                  = 1100.0 = kPa
MoleFlow           = 555.886313964 = kgmole/h
MassFlow           = 52538.5462979 = kg/h
VolumeFlow         = 103.426358792 = m3/hr
StdLiqVolumeFlow   = 77.5756037202 = m3/hr
H                  = 28104.813098 = kJ/kmol
Energy             = 4339744.71048 = W
MolecularWeight    = 94.5131135237 = 
ZFactor            = 0.0561185527893 = 
PROPANE            = 0.000159569419303 = 
ISOBUTANE          = 0.00780436836523 = 
n-BUTANE           = 0.02 = 
ISOPENTANE         = 0.175318235316 = 
n-PENTANE          = 0.174190222792 = 
n-HEXANE           = 0.173159751504 = 
n-HEPTANE          = 0.149129563971 = 
n-OCTANE           = 0.12484563979 = 
n-NONANE           = 0.10038023643 = 
n-DECANE           = 0.0750153384685 = 

>> L
[  888.22737207   851.22264055   829.92800463   804.78563343   727.45142038
       2155.62573022  2216.73466528  2255.25604581  2263.94598151
       2201.71944383  2012.14339122   555.88631396]
>> V
[ 1.06015082e-040  1.33234106e+003  1.29533633e+003  1.27404169e+003
       1.24889932e+003  1.17156511e+003  1.59973942e+003  1.66084835e+003
       1.49937092e+003  1.50806086e+003  1.64583313e+003  1.45625708e+003]
>> T
[ 324.71470861  337.88514785  347.12540955  353.61677126  359.37269605
       370.34892478  379.63211069  386.98852683  392.7696445   400.20301187
       412.61468931  438.63277967]
>> 
>> # remove feed and draw and install VapourPumpAround object
>> TryToSolve = 0
>> delete Stage_9.pa_source
>> delete Stage_7.pa_dest
>> 
>> Stage_9.pa = Tower.VapourPumpAround(7)
>> Stage_7.pa_paR.Port.MoleFlow = 200
>> Stage_7.pa_paQ.Port.Energy = 0
>> TryToSolve = 1
/stab Inner Error 0.000018
/stab Iteration 1 Outer Error 0.000002
/stab Inner Error 0.000036
>> 
>> /overhead.Out
Port: /overhead.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 2.77279253874e-008 = 
T                  = 51.5644175006 = C
P                  = 1000.0 = kPa
MoleFlow           = 444.107641413 = kgmole/h
MassFlow           = 23833.1969766 = kg/h
VolumeFlow         = 45.5798800043 = m3/hr
StdLiqVolumeFlow   = 42.9885184724 = m3/hr
H                  = 1030.02984432 = kJ/kmol
Energy             = 127067.812429 = W
MolecularWeight    = 53.665361174 = 
ZFactor            = 0.0380148225686 = 
PROPANE            = 0.383040619391 = 
ISOBUTANE          = 0.321904610593 = 
n-BUTANE           = 0.229857283351 = 
ISOPENTANE         = 0.0431048769171 = 
n-PENTANE          = 0.0219939955686 = 
n-HEXANE           = 9.65105756437e-005 = 
n-HEPTANE          = 2.0633748835e-006 = 
n-OCTANE           = 3.93643933565e-008 = 
n-NONANE           = 8.46272835409e-010 = 
n-DECANE           = 1.7947205246e-011 = 

>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 165.481332526 = C
P                  = 1100.0 = kPa
MoleFlow           = 555.892358587 = kgmole/h
MassFlow           = 52539.0145318 = kg/h
VolumeFlow         = 103.408209485 = m3/hr
StdLiqVolumeFlow   = 77.5763329987 = m3/hr
H                  = 28104.1155188 = kJ/kmol
Energy             = 4339684.18382 = W
MolecularWeight    = 94.5129281241 = 
ZFactor            = 0.0561082800813 = 
PROPANE            = 0.000159624350422 = 
ISOBUTANE          = 0.00780673193706 = 
n-BUTANE           = 0.02 = 
ISOPENTANE         = 0.175315946106 = 
n-PENTANE          = 0.174192533873 = 
n-HEXANE           = 0.173157873874 = 
n-HEPTANE          = 0.149127942414 = 
n-OCTANE           = 0.124844282254 = 
n-NONANE           = 0.100379144923 = 
n-DECANE           = 0.0750145227721 = 

>> Stage_7.pa_paR.Port
Port: /stab.Feed_7_pa_paR + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.999998121036 = 
T                  = 127.051426029 = C
P                  = 1081.81818182 = kPa
MoleFlow           = 200.0 * kgmole/h
MassFlow           = 14161.1139149 = kg/h
VolumeFlow         = 486.361569051 = m3/hr
StdLiqVolumeFlow   = 22.7722981582 = m3/hr
H                  = 32107.30171 = kJ/kmol
Energy             = 1783738.98389 = W
MolecularWeight    = 70.805568349 = 
ZFactor            = 0.790632217933 = 
PROPANE            = 0.00656281705655 = 
ISOBUTANE          = 0.0795997127806 = 
n-BUTANE           = 0.136084625837 = 
ISOPENTANE         = 0.390552247807 = 
n-PENTANE          = 0.297633610436 = 
n-HEXANE           = 0.060926692528 = 
n-HEPTANE          = 0.0184599396583 = 
n-OCTANE           = 0.00655283967584 = 
n-NONANE           = 0.00259448047442 = 
n-DECANE           = 0.00103303374548 = 

>> L
[  888.21528283   851.21164373   829.91449336   804.76492366   727.45672252
       2155.6196283   2216.72418964  2255.18676583  2263.85479143
       2201.65579399  2012.07502777   555.89235859]
>> V
[ 1.06008619e-040  1.33232292e+003  1.29531929e+003  1.27402213e+003
       1.24887257e+003  1.17156436e+003  1.59972727e+003  1.66083183e+003
       1.49929545e+003  1.50796347e+003  1.64576344e+003  1.45618267e+003]
>> T
[ 324.7144175   337.88476854  347.12498988  353.61611839  359.37154543
       370.34749798  379.63018855  386.98677674  392.76807145  400.20149474
       412.61314525  438.63133253]
>> 
>> # delete the pump around
>> delete Stage_9.pa
Calculating Jacobian for /stab
Calculating disturbance 10 of 12 in jacobian of /stab
/stab Inner Error 0.322516
/stab Inner Error 0.080473
/stab Inner Error 0.021652
/stab Inner Error 0.007407
/stab Inner Error 0.001670
/stab Inner Error 0.000497
/stab Inner Error 0.000063
/stab Iteration 1 Outer Error 0.051741
/stab Inner Error 0.167874
/stab Inner Error 0.051890
/stab Inner Error 0.018475
/stab Inner Error 0.004463
/stab Inner Error 0.000358
/stab Inner Error 0.000080
/stab Iteration 2 Outer Error 0.001834
/stab Inner Error 0.027493
/stab Inner Error 0.014675
/stab Inner Error 0.002902
/stab Inner Error 0.000782
/stab Inner Error 0.000080
/stab Iteration 3 Outer Error 0.000137
/stab Inner Error 0.003060
/stab Inner Error 0.000915
/stab Inner Error 0.000105
/stab Inner Error 0.000019
/stab Iteration 4 Outer Error 0.000039
/stab Inner Error 0.000360
/stab Inner Error 0.000058
>> 
>> # add liquid pump down
>> Stage_7.pd = Tower.LiquidPumpAround(10)
>> Stage_7.pd.Port.MoleFlow = 300
>> Stage_10.pd_paQ.Port.Energy = 1000000
Calculating Jacobian for /stab
Calculating disturbance 10 of 13 in jacobian of /stab
/stab Inner Error 0.877538
/stab Inner Error 0.210996
/stab Inner Error 0.047998
/stab Inner Error 0.013759
/stab Inner Error 0.004535
/stab Inner Error 0.000971
/stab Inner Error 0.000170
/stab Inner Error 0.000044
/stab Iteration 1 Outer Error 0.075096
/stab Inner Error 0.188744
/stab Inner Error 0.177619
/stab Inner Error 0.030180
/stab Inner Error 0.008546
/stab Inner Error 0.002922
/stab Inner Error 0.001188
/stab Inner Error 0.000343
/stab Inner Error 0.000041
/stab Iteration 2 Outer Error 0.002060
/stab Inner Error 0.029284
/stab Inner Error 0.006530
/stab Inner Error 0.002283
/stab Inner Error 0.000602
/stab Inner Error 0.000067
/stab Iteration 3 Outer Error 0.000188
/stab Inner Error 0.004649
/stab Inner Error 0.001661
/stab Inner Error 0.000211
/stab Inner Error 0.000042
/stab Iteration 4 Outer Error 0.000046
/stab Inner Error 0.000428
/stab Inner Error 0.000096
>> /overhead.Out
Port: /overhead.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 51.8719007643 = C
P                  = 1000.0 = kPa
MoleFlow           = 447.309196193 = kgmole/h
MassFlow           = 24070.0687562 = kg/h
VolumeFlow         = 46.0017261998 = m3/hr
StdLiqVolumeFlow   = 43.3627147535 = m3/hr
H                  = 1061.07999266 = kJ/kmol
Energy             = 131841.899614 = W
MolecularWeight    = 53.8108068446 = 
ZFactor            = 0.0380560127696 = 
PROPANE            = 0.380157404457 = 
ISOBUTANE          = 0.318809203862 = 
n-BUTANE           = 0.228360413484 = 
ISOPENTANE         = 0.0479189443031 = 
n-PENTANE          = 0.0246450808618 = 
n-HEXANE           = 0.000106610270764 = 
n-HEPTANE          = 2.29750395328e-006 = 
n-OCTANE           = 4.42724437607e-008 = 
n-NONANE           = 9.64463113274e-010 = 
n-DECANE           = 2.0704638874e-011 = 

>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.30551542475e-005 = 
T                  = 165.766016587 = C
P                  = 1100.0 = kPa
MoleFlow           = 552.690803807 = kgmole/h
MassFlow           = 52302.0586562 = kg/h
VolumeFlow         = 102.975126289 = m3/hr
StdLiqVolumeFlow   = 77.2020530408 = m3/hr
H                  = 28215.5046724 = kJ/kmol
Energy             = 4331791.65479 = W
MolecularWeight    = 94.6316788626 = 
ZFactor            = 0.0561604991294 = 
PROPANE            = 0.000275193624357 = 
ISOBUTANE          = 0.0084924721911 = 
n-BUTANE           = 0.02 = 
ISOPENTANE         = 0.172185632339 = 
n-PENTANE          = 0.172928566988 = 
n-HEXANE           = 0.17415218705 = 
n-HEPTANE          = 0.149991589754 = 
n-OCTANE           = 0.125567459633 = 
n-NONANE           = 0.100960607964 = 
n-DECANE           = 0.075449057056 = 

>> Stage_10.pd_paR.Port
Port: /stab.Feed_10_pd_paR + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 54.5511603333 = C
P                  = 1063.63636364 = kPa
MoleFlow           = 300.00365084 = kgmole/h
MassFlow           = 22636.6960999 = kg/h
VolumeFlow         = 37.0598663555 = m3/hr
StdLiqVolumeFlow   = 35.7009212361 = m3/hr
H                  = 398.934112416 = kJ/kmol
Energy             = 33244.913936 = W
MolecularWeight    = 75.4547354223 = 
ZFactor            = 0.0482238760676 = 
PROPANE            = 0.0114522730696 = 
ISOBUTANE          = 0.0844052056565 = 
n-BUTANE           = 0.127551487753 = 
ISOPENTANE         = 0.325384335499 = 
n-PENTANE          = 0.250099291863 = 
n-HEXANE           = 0.0752102709967 = 
n-HEPTANE          = 0.0464655088006 = 
n-OCTANE           = 0.0343102747433 = 
n-NONANE           = 0.0261254368118 = 
n-DECANE           = 0.0189959148064 = 

>> L
[  894.61839239   856.3883845    835.59575253   811.22770539   734.41645072
       2165.41659632  2229.11107506  1969.27420774  1968.56030084
       1908.18947526  2148.49220453   552.69080381]
>> V
[ 1.21879874e-040  1.34192759e+003  1.30369758e+003  1.28290495e+003
       1.25853690e+003  1.18172565e+003  1.61272579e+003  1.67642027e+003
       1.71658705e+003  1.71587315e+003  1.65550232e+003  1.59580140e+003]
>> T
[ 325.02190076  338.56794828  348.04200533  354.59484767  360.30782058
       371.13770637  380.54505859  387.88460921  394.42850144  401.37061123
       412.05164104  438.91601659]
>> 
>> #Create some pump around variables
>> cd /stab.Stage_7.pd
/stab.Stage_7.pd
>> PADeltaT = Tower.PumpAroundDTSpec()
>> cd PADeltaT
/stab.Stage_7.pd.PADeltaT
>> cd /stab.Stage_7.pd
/stab.Stage_7.pd
>> PAReturnT = Tower.PumpAroundReturnTSpec()
>> cd PAReturnT
/stab.Stage_7.pd.PAReturnT
>> cd /stab.Stage_7.pd
/stab.Stage_7.pd
>> PAReturnCv = Tower.PumpAroundReturnPropSpec("Cv")
>> cd PAReturnCv
/stab.Stage_7.pd.PAReturnCv
>> cd /stab
/stab
>> TryToSolve = 0
>> TryToRestart = 0
>> /stab.EnergyFeed_10_pd_paQ.Energy = 
>> TryToSolve = 1
>> /stab.Variable_7_PAReturnT.T = 54.53
Calculating Jacobian for /stab
Calculating disturbance 10 of 13 in jacobian of /stab
/stab Inner Error 2.300047
/stab Inner Error 0.215087
/stab Iteration 1 Outer Error 0.091943
Calculating Jacobian for /stab
Calculating disturbance 10 of 13 in jacobian of /stab
/stab Inner Error 1.092559
/stab Inner Error 0.910602
/stab Inner Error 0.507954
/stab Inner Error 0.079517
/stab Inner Error 0.031367
/stab Inner Error 0.006379
/stab Inner Error 0.000522
/stab Inner Error 0.000042
/stab Iteration 2 Outer Error 0.001225
/stab Inner Error 0.115256
/stab Inner Error 0.020069
/stab Inner Error 0.002165
/stab Inner Error 0.000393
/stab Inner Error 0.000058
/stab Iteration 3 Outer Error 0.000485
/stab Inner Error 0.016972
/stab Inner Error 0.002655
/stab Inner Error 0.000068
/stab Iteration 4 Outer Error 0.000050
/stab Inner Error 0.000895
/stab Inner Error 0.000154
/stab Inner Error 0.000009
>> L
[  894.60514654   856.36950606   835.5733449    811.20335331   734.40695219
       2165.38894188  2229.10097576  1969.26618306  1968.4708509 
       1908.04352593  2148.4877649    552.69742673]
>> V
[ 1.21877053e-040  1.34190772e+003  1.30367208e+003  1.28287592e+003
       1.25850593e+003  1.18170953e+003  1.61269152e+003  1.67640355e+003
       1.71656836e+003  1.71577302e+003  1.65534570e+003  1.59579034e+003]
>> T
[ 325.02145205  338.56736885  348.04156088  354.59462246  360.30764105
       371.1375407   380.54467435  387.88428608  394.42868077  401.37089062
       412.05084731  438.9149102 ]
>> /stab.Variable_7_PAReturnT.T = 
>> /stab.Variable_7_PADeltaT.DT = 60
Calculating Jacobian for /stab
Calculating disturbance 10 of 13 in jacobian of /stab
/stab Inner Error 2.294939
/stab Inner Error 0.272744
/stab Inner Error 0.259818
/stab Inner Error 0.030498
/stab Inner Error 0.024946
/stab Inner Error 0.003499
/stab Inner Error 0.000261
/stab Inner Error 0.000130
/stab Inner Error 0.000022
/stab Iteration 1 Outer Error 0.075100
/stab Inner Error 0.861988
/stab Inner Error 0.623181
/stab Inner Error 0.304001
/stab Inner Error 0.046099
/stab Inner Error 0.013778
/stab Inner Error 0.003243
/stab Inner Error 0.000456
/stab Inner Error 0.000132
/stab Inner Error 0.000017
/stab Iteration 2 Outer Error 0.002060
/stab Inner Error 0.072211
/stab Inner Error 0.061130
/stab Inner Error 0.028905
/stab Inner Error 0.002404
/stab Inner Error 0.000262
/stab Inner Error 0.000032
/stab Iteration 3 Outer Error 0.000187
/stab Inner Error 0.007851
/stab Inner Error 0.001236
/stab Inner Error 0.000281
/stab Inner Error 0.000025
/stab Iteration 4 Outer Error 0.000046
/stab Inner Error 0.001648
/stab Inner Error 0.000298
/stab Inner Error 0.000024
>> L
[  894.60780589   856.37484367   835.58241127   811.21324593   734.4072719 
       2165.38604038  2229.09913477  1969.26530787  1968.47931849
       1908.03839126  2148.06896794   552.69609705]
>> V
[ 1.21879636e-040  1.34191171e+003  1.30367875e+003  1.28288631e+003
       1.25851715e+003  1.18171117e+003  1.61268994e+003  1.67640304e+003
       1.71656859e+003  1.71578260e+003  1.65534167e+003  1.59537287e+003]
>> T
[ 325.02154123  338.56730014  348.04115619  354.5939129   360.30688671
       371.13697353  380.54411392  387.8838313   394.42832816  401.37094706
       412.05213134  438.91502787]
>> /stab.Variable_7_PADeltaT.DT = 
>> /stab.Stage_10.pd_paQ.Port.Energy = 1000000
Calculating Jacobian for /stab
Calculating disturbance 10 of 13 in jacobian of /stab
/stab Inner Error 0.877538
/stab Inner Error 0.210996
/stab Inner Error 0.047998
/stab Inner Error 0.013759
/stab Inner Error 0.004535
/stab Inner Error 0.000971
/stab Inner Error 0.000170
/stab Inner Error 0.000044
/stab Iteration 1 Outer Error 0.075096
/stab Inner Error 0.188744
/stab Inner Error 0.177619
/stab Inner Error 0.030180
/stab Inner Error 0.008546
/stab Inner Error 0.002922
/stab Inner Error 0.001188
/stab Inner Error 0.000343
/stab Inner Error 0.000041
/stab Iteration 2 Outer Error 0.002060
/stab Inner Error 0.029284
/stab Inner Error 0.006530
/stab Inner Error 0.002283
/stab Inner Error 0.000602
/stab Inner Error 0.000067
/stab Iteration 3 Outer Error 0.000188
/stab Inner Error 0.004649
/stab Inner Error 0.001661
/stab Inner Error 0.000211
/stab Inner Error 0.000042
/stab Iteration 4 Outer Error 0.000046
/stab Inner Error 0.000428
/stab Inner Error 0.000096
>> 
>> 
>> #lets see if it balances when using efficiencies
>> /bal = Balance.BalanceOp()
>> /bal.NumberStreamsInMat = 1
>> /bal.NumberStreamsOutMat = 3
>> /bal.BalanceType = 2
>> 
>> 
>> cd /
/
>> feed = Stream.Stream_Material()
>> cd feed
/feed
>> /feed.Out -> /stab.Feed_5_f
>> CloneOut = Stream.ClonePort(0)
>> /feed.CloneOut -> /bal.In0
>> 
>> 
>> cd /overhead
/overhead
>> CloneIn = Stream.ClonePort()
>> /overhead.CloneIn -> /bal.Out0
>> 
>> cd /bottoms
/bottoms
>> CloneIn = Stream.ClonePort()
>> /bottoms.CloneIn -> /bal.Out1
>> 
>> /bal.Out2
Port: /bal.Out2 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = -2.27373675443e-013 = kgmole/h
MassFlow           = 0.0558256894146 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = -2.34995461593e-014 = m3/hr
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = 0.239501953125 = 
ISOBUTANE          = -0.28125 = 
n-BUTANE           = 6724937913.91 = 
ISOPENTANE         = -1.0 = 
n-PENTANE          = 1.0 = 
n-HEXANE           = 0.0625 = 
n-HEPTANE          = -0.1875 = 
n-OCTANE           = -0.0625 = 
n-NONANE           = 0.0 = 
n-DECANE           = 0.03125 = 

>> 
>> /stab.TryLastConverged = 1
/stab Inner Error 0.000014
/stab Iteration 1 Outer Error 0.000002
/stab Inner Error 0.000022
>> /stab.Efficiencies = 0.9
/stab Inner Error 0.024982
/stab Inner Error 0.004606
/stab Inner Error 0.000999
/stab Inner Error 0.000248
/stab Inner Error 0.000054
/stab Iteration 1 Outer Error 0.000614
/stab Inner Error 0.013895
/stab Inner Error 0.001837
/stab Inner Error 0.000301
/stab Inner Error 0.000035
/stab Iteration 2 Outer Error 0.000079
/stab Inner Error 0.000720
/stab Inner Error 0.000128
/stab Inner Error 0.000023
>> /bal.Out2
Port: /bal.Out2 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = 5.68434188608e-013 = kgmole/h
MassFlow           = 0.00167766786035 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 5.87488652312e-014 = m3/hr
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = 0.06337890625 = 
ISOBUTANE          = -0.0234375 = 
n-BUTANE           = -79892187.8219 = 
ISOPENTANE         = 0.4 = 
n-PENTANE          = 0.575 = 
n-HEXANE           = 0.375 = 
n-HEPTANE          = 0.05 = 
n-OCTANE           = 0.05 = 
n-NONANE           = 0.0125 = 
n-DECANE           = -0.025 = 

>> 
>> /stab.Efficiencies = 0.8
/stab Inner Error 0.017517
/stab Inner Error 0.001471
/stab Inner Error 0.000426
/stab Inner Error 0.000089
/stab Iteration 1 Outer Error 0.000789
/stab Inner Error 0.010033
/stab Inner Error 0.001446
/stab Inner Error 0.000513
/stab Inner Error 0.000116
/stab Inner Error 0.000027
/stab Iteration 2 Outer Error 0.000149
/stab Inner Error 0.000866
/stab Inner Error 0.000118
/stab Inner Error 0.000030
/stab Iteration 3 Outer Error 0.000021
/stab Inner Error 0.000090
>> /bal.Out2
Port: /bal.Out2 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = -1.13686837722e-013 = kgmole/h
MassFlow           = 0.0330074177109 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = -1.17497730787e-014 = m3/hr
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = 0.529296875 = 
ISOBUTANE          = 0.6796875 = 
n-BUTANE           = 7743672641.33 = 
ISOPENTANE         = -1.375 = 
n-PENTANE          = 1.125 = 
n-HEXANE           = -0.75 = 
n-HEPTANE          = 0.625 = 
n-OCTANE           = -0.375 = 
n-NONANE           = -0.1875 = 
n-DECANE           = -0.375 = 

>> 
>> /stab.Efficiencies = 1.0
/stab Inner Error 0.079306
/stab Inner Error 0.008595
/stab Inner Error 0.001743
/stab Inner Error 0.000294
/stab Inner Error 0.000041
/stab Iteration 1 Outer Error 0.001802
/stab Inner Error 0.015949
/stab Inner Error 0.002187
/stab Inner Error 0.000534
/stab Inner Error 0.000119
/stab Inner Error 0.000021
/stab Iteration 2 Outer Error 0.000193
/stab Inner Error 0.002214
/stab Inner Error 0.000258
/stab Inner Error 0.000017
/stab Iteration 3 Outer Error 0.000013
/stab Inner Error 0.000162
/stab Inner Error 0.000014
>> /stab.TryLastConverged = 0
Calculating Jacobian for /stab
Calculating disturbance 10 of 13 in jacobian of /stab
/stab Inner Error 0.877538
/stab Inner Error 0.210996
/stab Inner Error 0.047998
/stab Inner Error 0.013759
/stab Inner Error 0.004535
/stab Inner Error 0.000971
/stab Inner Error 0.000170
/stab Inner Error 0.000044
/stab Iteration 1 Outer Error 0.075096
/stab Inner Error 0.188744
/stab Inner Error 0.177619
/stab Inner Error 0.030180
/stab Inner Error 0.008546
/stab Inner Error 0.002922
/stab Inner Error 0.001188
/stab Inner Error 0.000343
/stab Inner Error 0.000041
/stab Iteration 2 Outer Error 0.002060
/stab Inner Error 0.029284
/stab Inner Error 0.006530
/stab Inner Error 0.002283
/stab Inner Error 0.000602
/stab Inner Error 0.000067
/stab Iteration 3 Outer Error 0.000188
/stab Inner Error 0.004649
/stab Inner Error 0.001661
/stab Inner Error 0.000211
/stab Inner Error 0.000042
/stab Iteration 4 Outer Error 0.000046
/stab Inner Error 0.000428
/stab Inner Error 0.000096
>> 
>> 
>> #Now play with vol fracs
>> /stab.TryToRestart = 1
/stab Inner Error 0.000014
/stab Iteration 1 Outer Error 0.000002
/stab Inner Error 0.000022
>> cd /stab.Stage_11.l
/stab.Stage_11.l
>> VolFracs = Tower.VolFractionSpec()
>> cd VolFracs
/stab.Stage_11.l.VolFracs
>> . +  n-HEPTANE n-OCTANE n-NONANE
/stab Inner Error 0.000004
/stab Iteration 1 Outer Error 0.000001
/stab Inner Error 0.000004
>> cd /stab
/stab
>> 
>> cd /stab.Stage_11.l
/stab.Stage_11.l
>> StdLiqVolFlows = Tower.ComponentStdVolFlowSpec()
>> cd StdLiqVolFlows
/stab.Stage_11.l.StdLiqVolFlows
>> . +  n-HEXANE n-HEPTANE n-OCTANE n-NONANE
/stab Inner Error 0.000000
/stab Iteration 1 Outer Error 0.000000
/stab Inner Error 0.000000
>> cd /stab.Stage_11.l
/stab.Stage_11.l
>> StdLiqVolRecovery = Tower.StdVolRecoverySpec()
>> cd StdLiqVolRecovery
/stab.Stage_11.l.StdLiqVolRecovery
>> . +  n-PENTANE n-HEXANE n-HEPTANE n-OCTANE n-NONANE
/stab Inner Error 0.000000
/stab Iteration 1 Outer Error 0.000000
/stab Inner Error 0.000000
>> . -  n-PENTANE n-HEXANE n-HEPTANE n-OCTANE n-NONANE
/stab Inner Error 0.000000
/stab Iteration 1 Outer Error 0.000000
/stab Inner Error 0.000000
>> . +  n-PENTANE n-HEXANE n-HEPTANE
/stab Inner Error 0.000000
/stab Iteration 1 Outer Error 0.000000
/stab Inner Error 0.000000
>> . -  n-PENTANE n-HEXANE n-HEPTANE
/stab Inner Error 0.000000
/stab Iteration 1 Outer Error 0.000000
/stab Inner Error 0.000000
>> 
>> 
>> cd /stab.Stage_11.l
/stab.Stage_11.l
>> StdLiqVolRatio = Tower.StdVolRatioSpec()
>> cd StdLiqVolRatio
/stab.Stage_11.l.StdLiqVolRatio
>> . +  n-BUTANE ISOPENTANE n-PENTANE n-HEXANE /  n-PENTANE n-HEXANE n-HEPTANE n-OCTANE
/stab Inner Error 0.000000
/stab Iteration 1 Outer Error 0.000000
/stab Inner Error 0.000000
>> . -  n-BUTANE ISOPENTANE n-PENTANE n-HEXANE / n-PENTANE n-HEXANE n-HEPTANE n-OCTANE / 
/stab Inner Error 0.000000
/stab Iteration 1 Outer Error 0.000000
/stab Inner Error 0.000000
>> . +  n-BUTANE ISOPENTANE n-PENTANE n-HEXANE / 
/stab Inner Error 0.000000
/stab Iteration 1 Outer Error 0.000000
/stab Inner Error 0.000000
>> . -  n-BUTANE ISOPENTANE n-PENTANE n-HEXANE / n-HEXANE n-HEPTANE n-OCTANE / 
/stab Inner Error 0.000000
/stab Iteration 1 Outer Error 0.000000
/stab Inner Error 0.000000
>> . +  n-BUTANE ISOPENTANE n-PENTANE n-HEXANE /  n-HEXANE n-HEPTANE n-OCTANE
/stab Inner Error 0.000000
/stab Iteration 1 Outer Error 0.000000
/stab Inner Error 0.000000
>> 
>> cd /stab
/stab
>> /stab.Variable_0_reflux.Generic = 
>> /stab.Variable_11_StdLiqVolRatio.Fraction = 0.986
/stab Inner Error 0.000527
/stab Inner Error 0.000341
/stab Iteration 1 Outer Error 0.000024
Calculating Jacobian for /stab
Calculating disturbance 10 of 13 in jacobian of /stab
/stab Inner Error 0.000012
>> TryToRestart = 0
Calculating Jacobian for /stab
Calculating disturbance 10 of 13 in jacobian of /stab
/stab Inner Error 1.221661
/stab Inner Error 1.133728
/stab Inner Error 1.094409
/stab Inner Error 1.047649
/stab Inner Error 1.037957
/stab Inner Error 0.603771
/stab Iteration 1 Outer Error 0.100336
Calculating Jacobian for /stab
Calculating disturbance 10 of 13 in jacobian of /stab
/stab Inner Error 0.896392
/stab Inner Error 0.896121
/stab Inner Error 0.895780
/stab Inner Error 0.895358
/stab Inner Error 0.894842
/stab Inner Error 0.894221
/stab Inner Error 0.893479
/stab Inner Error 0.892602
/stab Inner Error 0.891571
/stab Inner Error 0.890368
/stab Inner Error 0.888972
/stab Inner Error 0.888689
/stab Inner Error 0.888229
/stab Inner Error 0.882956
/stab Inner Error 0.879014
/stab Inner Error 0.716443
/stab Inner Error 0.469998
/stab Iteration 2 Outer Error 0.019035
Calculating Jacobian for /stab
Calculating disturbance 10 of 13 in jacobian of /stab
/stab Inner Error 0.169418
/stab Inner Error 0.118016
/stab Inner Error 0.052665
/stab Inner Error 0.025055
/stab Inner Error 0.021491
/stab Inner Error 0.007345
/stab Inner Error 0.002066
/stab Inner Error 0.000472
/stab Inner Error 0.000129
/stab Inner Error 0.000062
/stab Iteration 3 Outer Error 0.004888
/stab Inner Error 0.113991
/stab Inner Error 0.025443
/stab Inner Error 0.015144
/stab Inner Error 0.008023
/stab Inner Error 0.000674
/stab Inner Error 0.000274
/stab Inner Error 0.000030
/stab Iteration 4 Outer Error 0.000471
/stab Inner Error 0.015304
/stab Inner Error 0.006346
/stab Inner Error 0.002626
/stab Inner Error 0.000722
/stab Inner Error 0.000025
/stab Iteration 5 Outer Error 0.000078
/stab Inner Error 0.001013
/stab Inner Error 0.000295
/stab Inner Error 0.000044
>> L
[  889.41267422   851.3301074    830.6637782    806.40515393   729.84980984
       2160.64509075  2224.34581511  1964.55669241  1963.8689563 
       1903.73489696  2144.79446004   552.47639937]
>> V
[ 1.21155920e-040  1.33693627e+003  1.29885371e+003  1.27818738e+003
       1.25392875e+003  1.17737341e+003  1.60816869e+003  1.67186942e+003
       1.71207387e+003  1.71138613e+003  1.65125207e+003  1.59231806e+003]
>> T
[ 325.04104043  338.60946222  348.0792075   354.61570508  360.31256199
       371.13384754  380.54946488  387.89662925  394.44772266  401.39404624
       412.0741835   438.93988926]
>> /stab.Variable_11_StdLiqVolRatio.Fraction = 
>> /stab.Variable_0_reflux.Generic = 2
Calculating Jacobian for /stab
Calculating disturbance 10 of 13 in jacobian of /stab
/stab Inner Error 0.877538
/stab Inner Error 0.210996
/stab Inner Error 0.047998
/stab Inner Error 0.013759
/stab Inner Error 0.004535
/stab Inner Error 0.000971
/stab Inner Error 0.000170
/stab Inner Error 0.000044
/stab Iteration 1 Outer Error 0.075096
/stab Inner Error 0.188744
/stab Inner Error 0.177619
/stab Inner Error 0.030180
/stab Inner Error 0.008546
/stab Inner Error 0.002922
/stab Inner Error 0.001188
/stab Inner Error 0.000343
/stab Inner Error 0.000041
/stab Iteration 2 Outer Error 0.002060
/stab Inner Error 0.029284
/stab Inner Error 0.006530
/stab Inner Error 0.002283
/stab Inner Error 0.000602
/stab Inner Error 0.000067
/stab Iteration 3 Outer Error 0.000188
/stab Inner Error 0.004649
/stab Inner Error 0.001661
/stab Inner Error 0.000211
/stab Inner Error 0.000042
/stab Iteration 4 Outer Error 0.000046
/stab Inner Error 0.000428
/stab Inner Error 0.000096
>> L
[  894.61839239   856.3883845    835.59575253   811.22770539   734.41645072
       2165.41659632  2229.11107506  1969.27420774  1968.56030084
       1908.18947526  2148.49220453   552.69080381]
>> V
[ 1.21879874e-040  1.34192759e+003  1.30369758e+003  1.28290495e+003
       1.25853690e+003  1.18172565e+003  1.61272579e+003  1.67642027e+003
       1.71658705e+003  1.71587315e+003  1.65550232e+003  1.59580140e+003]
>> T
[ 325.02190076  338.56794828  348.04200533  354.59484767  360.30782058
       371.13770637  380.54505859  387.88460921  394.42850144  401.37061123
       412.05164104  438.91601659]
>> 
>> 
>> 
>> #Now delete try deleting the stages with the pump around
>> 
>> #The following should not work
>> #A stage with a feed from a pump around can not be deleted
>> /stab.Stage_9 - 1
Cannot remove a stage with a feed from a pump around unless the pump around is removed too. Feed is in stage 10, pump around from stage 7
>> /stab.Stage_7 - 3
Cannot remove a stage with a feed from a pump around unless the pump around is removed too. Feed is in stage 10, pump around from stage 7
>> 
>> #Finally do it right
>> /stab.Stage_6 - 4
Rename port /stab.LiquidDraw_11_l to LiquidDraw_7_l.  It is connected to /bottoms
Rename port /stab.Variable_11_StdLiqVolRatio to Variable_7_StdLiqVolRatio.  It is connected to 
Rename port /stab.Variable_11_StdLiqVolRecovery to Variable_7_StdLiqVolRecovery.  It is connected to 
Rename port /stab.Variable_11_VolFracs to Variable_7_VolFracs.  It is connected to 
Rename port /stab.Variable_11_StdLiqVolFlows to Variable_7_StdLiqVolFlows.  It is connected to 
Rename port /stab.EnergyFeed_11_reb to EnergyFeed_7_reb.  It is connected to 
Rename port /stab.Estimate_11_estT to Estimate_7_estT.  It is connected to 
Calculating Jacobian for /stab
/stab Inner Error 0.096911
/stab Inner Error 0.025159
/stab Inner Error 0.011541
/stab Inner Error 0.002757
/stab Inner Error 0.000469
/stab Inner Error 0.000108
/stab Inner Error 0.000014
/stab Iteration 1 Outer Error 0.039514
/stab Inner Error 0.087621
/stab Inner Error 0.023588
/stab Inner Error 0.006258
/stab Inner Error 0.002078
/stab Inner Error 0.000141
/stab Inner Error 0.000022
/stab Iteration 2 Outer Error 0.004037
/stab Inner Error 0.023256
/stab Inner Error 0.004927
/stab Inner Error 0.000458
/stab Inner Error 0.000051
/stab Iteration 3 Outer Error 0.000349
/stab Inner Error 0.003751
/stab Inner Error 0.000711
/stab Inner Error 0.000044
/stab Iteration 4 Outer Error 0.000053
/stab Inner Error 0.000291
/stab Inner Error 0.000041
>> 
>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
Calculating Jacobian for /RootClone.stab
/RootClone.stab Inner Error 0.096911
/RootClone.stab Inner Error 0.025159
/RootClone.stab Inner Error 0.011541
/RootClone.stab Inner Error 0.002757
/RootClone.stab Inner Error 0.000469
/RootClone.stab Inner Error 0.000108
/RootClone.stab Inner Error 0.000014
/RootClone.stab Iteration 1 Outer Error 0.039514
/RootClone.stab Inner Error 0.087621
/RootClone.stab Inner Error 0.023588
/RootClone.stab Inner Error 0.006258
/RootClone.stab Inner Error 0.002078
/RootClone.stab Inner Error 0.000141
/RootClone.stab Inner Error 0.000022
/RootClone.stab Iteration 2 Outer Error 0.004037
/RootClone.stab Inner Error 0.023256
/RootClone.stab Inner Error 0.004927
/RootClone.stab Inner Error 0.000458
/RootClone.stab Inner Error 0.000051
/RootClone.stab Iteration 3 Outer Error 0.000349
/RootClone.stab Inner Error 0.003751
/RootClone.stab Inner Error 0.000711
/RootClone.stab Inner Error 0.000044
/RootClone.stab Iteration 4 Outer Error 0.000053
/RootClone.stab Inner Error 0.000291
/RootClone.stab Inner Error 0.000041
>> /RootClone.stab.L
[ 1062.0548665   1025.2360666   1009.85953408   966.22205234   847.9312153 
       2159.28250595  2010.77789193   468.97256675]
>> /RootClone.stab.V
[ 9.93456251e-041  1.59308230e+003  1.55626350e+003  1.54088697e+003
       1.49724949e+003  1.37895865e+003  1.69030994e+003  1.54180533e+003]
>> /RootClone.stab.T
[ 331.95027205  350.855826    362.26706714  369.52689413  376.88034652
       390.31979265  415.25411225  449.79771615]
>> 
>> clear
>> read sstest.tst
Processing sstest.tst
>> # Depeopanizer test (from old Hysim manual)
>> units Field
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + Methane Ethane PROPANE
Methane Ethane PROPANE 
>> thermo + ISOBUTANE n-BUTANE ISOPENTANE n-PENTANE n-Hexane
ISOBUTANE n-BUTANE ISOPENTANE n-PENTANE n-Hexane 
>> thermo + n-Heptane n-Octane
n-Heptane n-Octane 
>> 
>> deprop = Tower.Tower()
>> deprop.Stage_0 + 9  # eleven stages`
>> 
>> cd deprop.Stage_0
/deprop.Stage_0
>> 
>> v = Tower.VapourDraw()
>> v.Port.P = 200
>> v.Port.Fraction.ISOBUTANE = .01
>> 
>> # add estimate of overhead
>> v.FlowEst = Tower.Estimate('MoleFlow')
>> v.FlowEst.Value = 400
>> 
>> cond = Tower.EnergyFeed(0)
>> 
>> estT = Tower.Estimate('T')
>> estT.Value = 25
>> 
>> cd ../Stage_5
/deprop.Stage_5
>> f = Tower.Feed()
>> f.Port.T = 50
>> f.Port.P = 480
>> f.Port.MoleFlow = 1000
>> f.Port.Fraction = .1702 .1473 .1132 .1166 .1066 .0963 .0829 .0694 .0558 .0417
>> f.Port
Port: /deprop.Feed_5_f + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0156862063356 = 
T                  = 50.0 * F
P                  = 480.0 * psia
MoleFlow           = 1000.0 * lbmole/h
MassFlow           = 54388.324404 = lb/h
VolumeFlow         = 0.452031963439 = ft3/s
StdLiqVolumeFlow   = 0.438228699383 = ft3/s
H                  = -1484.95388229 = Btu/lbmol
Energy             = -1484704.17098 = Btu/hr
MolecularWeight    = 54.388324404 = 
ZFactor            = 0.142810862978 = 
METHANE            = 0.1702 * 
ETHANE             = 0.1473 * 
PROPANE            = 0.1132 * 
ISOBUTANE          = 0.1166 * 
n-BUTANE           = 0.1066 * 
ISOPENTANE         = 0.0963 * 
n-PENTANE          = 0.0829 * 
n-HEXANE           = 0.0694 * 
n-HEPTANE          = 0.0558 * 
n-OCTANE           = 0.0417 * 

>> 
>> cd ../Stage_10
/deprop.Stage_10
>> l = Tower.LiquidDraw()
>> l.Port.P = 205
>> l.Port.Fraction.PROPANE = .02
>> 
>> reb = Tower.EnergyFeed(1)
>> estT = Tower.Estimate('T')
>> estT.Value = 250
>> 
>> # add two stage reboiler
>> . + 2
>> 
>> cd ../Stage_11
/deprop.Stage_11
>> SSLiqFeed = Tower.Feed()
>> SSRetVap = Tower.VapourDraw()
>> SSRetVap.Port.P = 200
>> 
>> cd ../Stage_12
/deprop.Stage_12
>> SSBtms = Tower.LiquidDraw()
>> SSBtms.Port.P = 200
>> 
>> SSVapFeed = Tower.Feed()
>> cd SSVapFeed.Port
/deprop.Feed_12_SSVapFeed
>> T = 250
>> P = 200
>> MoleFlow = 22
>> Fraction = 0 1 10 10 1 0 0 0 0 0
>> 
>> cd /deprop.Stage_6
/deprop.Stage_6
>> SSRet = Tower.Feed()
>> SSRet.Port -> /deprop.Stage_11.SSRetVap.Port
>> 
>> cd ../Stage_7
/deprop.Stage_7
>> LiqToSS = Tower.LiquidDraw()
>> #LiqToSS.Port.MoleFlow = 20
>> LiqToSS.Port.MassFlow = 1250
>> LiqToSS.Port -> /deprop.Stage_11.SSLiqFeed.Port
>> 
>> cd /deprop
/deprop
>> TryToSolve = 1  # start calculation
Calculating Jacobian for /deprop
Calculating disturbance 10 of 14 in jacobian of /deprop
/deprop Inner Error 0.468875
/deprop Inner Error 0.150382
/deprop Inner Error 0.115621
/deprop Inner Error 0.062243
/deprop Inner Error 0.051172
/deprop Inner Error 0.029937
/deprop Inner Error 0.017278
/deprop Inner Error 0.005922
/deprop Iteration 1 Outer Error 0.043115
Calculating Jacobian for /deprop
Calculating disturbance 10 of 14 in jacobian of /deprop
/deprop Inner Error 0.009038
/deprop Inner Error 0.000648
/deprop Inner Error 0.000038
/deprop Iteration 2 Outer Error 0.001212
/deprop Inner Error 0.001994
/deprop Inner Error 0.000088
/deprop Iteration 3 Outer Error 0.000246
/deprop Inner Error 0.000123
/deprop Inner Error 0.000014
/deprop Iteration 4 Outer Error 0.000042
/deprop Inner Error 0.000018
>> 
>> /deprop.Stage_0.v.Port
Port: /deprop.VapourDraw_0_v + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 27.5034665489 = F
P                  = 200.0 * psia
MoleFlow           = 432.418832937 = lbmole/h
MassFlow           = 12289.5309245 = lb/h
VolumeFlow         = 2.70465847018 = ft3/s
StdLiqVolumeFlow   = 0.140902216685 = ft3/s
H                  = 4126.09478726 = Btu/lbmol
Energy             = 1783901.05948 = Btu/hr
MolecularWeight    = 28.4204340523 = 
ZFactor            = 0.861378712531 = 
METHANE            = 0.393599358814 = 
ETHANE             = 0.342427652513 = 
PROPANE            = 0.251895867886 = 
ISOBUTANE          = 0.01 * 
n-BUTANE           = 0.00206240337048 = 
ISOPENTANE         = 1.0510642325e-005 = 
n-PENTANE          = 4.23961559889e-006 = 
n-HEXANE           = 2.26119282347e-009 = 
n-HEPTANE          = 8.14876916464e-012 = 
n-OCTANE           = 2.46203395917e-014 = 

>> /deprop.Stage_10.l.Port
Port: /deprop.LiquidDraw_10_l + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 8.2421936194e-007 = 
T                  = 253.823651268 = F
P                  = 205.0 * psia
MoleFlow           = 576.510871649 = lbmole/h
MassFlow           = 42406.254047 = lb/h
VolumeFlow         = 0.378798115744 = ft3/s
StdLiqVolumeFlow   = 0.300411780732 = ft3/s
H                  = 6087.71638948 = Btu/lbmol
Energy             = 3509044.49843 = Btu/hr
MolecularWeight    = 73.5567291657 = 
ZFactor            = 0.0633291966335 = 
METHANE            = 3.7290749187e-007 = 
ETHANE             = 0.000184317833304 = 
PROPANE            = 0.02 * 
ISOBUTANE          = 0.202468138483 = 
n-BUTANE           = 0.182468984315 = 
ISOPENTANE         = 0.16557378006 = 
n-PENTANE          = 0.142538596173 = 
n-HEXANE           = 0.119283426604 = 
n-HEPTANE          = 0.0958622691784 = 
n-OCTANE           = 0.0716202813127 = 

>> /deprop.Stage_11.SSLiqFeed.Port
Port: /deprop.Feed_11_SSLiqFeed + sim.solver.Ports.Port_Material
Connected to: /deprop.LiquidDraw_7_LiqToSS
VapFrac            = 2.79433587156e-007 | 
T                  = 193.881940593 | F
P                  = 203.5 | psia
MoleFlow           = 19.9874020741 | lbmole/h
MassFlow           = 1250.0 | lb/h
VolumeFlow         = 0.0111069325663 | ft3/s
StdLiqVolumeFlow   = 0.00940518210385 | ft3/s
H                  = 2999.12429853 | Btu/lbmol
Energy             = 59934.6228646 | Btu/hr
MolecularWeight    = 62.5384675266 | 
ZFactor            = 0.0580446257935 | 
METHANE            = 0.00023083603705 | 
ETHANE             = 0.00725364059925 | 
PROPANE            = 0.124740862976 | 
ISOBUTANE          = 0.35513510802 | 
n-BUTANE           = 0.230769173273 | 
ISOPENTANE         = 0.103625322946 | 
n-PENTANE          = 0.0808829550668 | 
n-HEXANE           = 0.0439383047694 | 
n-HEPTANE          = 0.0312895050976 | 
n-OCTANE           = 0.0221342912155 | 

>> /deprop.Stage_11.SSRetVap.Port
Port: /deprop.VapourDraw_11_SSRetVap + sim.solver.Ports.Port_Material
Connected to: /deprop.Feed_6_SSRet
VapFrac            = 1.0 = 
T                  = 182.491469967 = F
P                  = 200.0 * psia
MoleFlow           = 28.91710666 = lbmole/h
MassFlow           = 1557.44444624 = lb/h
VolumeFlow         = 0.214907731863 = ft3/s
StdLiqVolumeFlow   = 0.012490491067 = ft3/s
H                  = 8666.63414654 = Btu/lbmol
Energy             = 250571.840504 = Btu/hr
MolecularWeight    = 53.8589307899 = 
ZFactor            = 0.776466780928 = 
METHANE            = 0.000159219967493 = 
ETHANE             = 0.0353911109742 = 
PROPANE            = 0.337097495356 = 
ISOBUTANE          = 0.399330558039 = 
n-BUTANE           = 0.141772534703 = 
ISOPENTANE         = 0.0425640875431 = 
n-PENTANE          = 0.0308994868538 = 
n-HEXANE           = 0.00852110791852 = 
n-HEPTANE          = 0.00314818097068 = 
n-OCTANE           = 0.00111621767399 = 

>> /deprop.Stage_12.SSBtms.Port
Port: /deprop.LiquidDraw_12_SSBtms + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 177.797368046 = F
P                  = 200.0 * psia
MoleFlow           = 13.0702954141 = lbmole/h
MassFlow           = 802.906489307 = lb/h
VolumeFlow         = 0.00701257100017 = ft3/s
StdLiqVolumeFlow   = 0.00607266495504 = ft3/s
H                  = 2340.24956134 = Btu/lbmol
Energy             = 30582.6094428 = Btu/hr
MolecularWeight    = 61.429865498 = 
ZFactor            = 0.056468185215 = 
METHANE            = 7.3693080364e-007 = 
ETHANE             = 0.00930146538012 = 
PROPANE            = 0.21004586877 = 
ISOBUTANE          = 0.42468388658 = 
n-BUTANE           = 0.115745260312 = 
ISOPENTANE         = 0.0642962311695 = 
n-PENTANE          = 0.0553251754349 = 
n-HEXANE           = 0.0483391352162 = 
n-HEPTANE          = 0.04088351619 = 
n-OCTANE           = 0.0313787240166 = 

>> 
>> /deprop.L
[ 290.95189518  301.15922672  292.19288315  277.78138448  250.61268209
       770.60779564  872.12354605  893.01084377  894.09197608  851.51745067
       261.50097369    8.85945234    5.92858721]
>> /deprop.V
[ 196.14191408  487.09380926  497.3011408   488.33479723  473.92329856
       446.75459617  513.15726845  601.55643786  631.50987008  632.59100239
       590.01647698   13.116581     12.90989884]
>> /deprop.T
[ 270.65190365  296.14819395  305.63917694  312.84248421  320.43484332
       332.72300774  353.85789124  363.0843893   370.2971018   379.0870268 
       396.38533971  356.75635006  354.14851566]
>> 
>> 
>> #Add some pressure profile handling
>> cd /
/
>> /deprop.P_Profile.Values
[ ...
1378.9514
1382.3987785
1385.846157
1389.2935355
1392.740914
1396.1882925
1399.635671
1403.0830495
1406.530428
1409.9778065
1413.425185
1378.9514
1378.9514
 ... ]

>> 
>> #Get rid of the P in the last SS draw
>> /deprop.Stage_12.SSBtms.Port.P =
/deprop Inner Error 0.000001
/deprop Iteration 1 Outer Error 0.000008
/deprop Inner Error 0.000002
>> /deprop.P_Profile.Values
[ ...
1378.9514
1382.3987785
1385.846157
1389.2935355
1392.740914
1396.1882925
1399.635671
1403.0830495
1406.530428
1409.9778065
1413.425185
1378.9514
1378.9514
 ... ]

>> 
>> 
>> #Get rid of the P in the first SS draw
>> #The P in this stage is an average of the P of the connected stages
>> /deprop.Stage_11.SSRetVap.Port.P =
/deprop Inner Error 0.000000
/deprop Iteration 1 Outer Error 0.011568
/deprop Inner Error 0.000444
/deprop Inner Error 0.000021
/deprop Iteration 2 Outer Error 0.000522
/deprop Inner Error 0.000025
/deprop Iteration 3 Outer Error 0.000040
/deprop Inner Error 0.000007
>> /deprop.P_Profile.Values
[ ...
1378.9514
1382.3987785
1385.846157
1389.2935355
1392.740914
1396.1882925
1399.635671
1403.0830495
1406.530428
1409.9778065
1413.425185
1401.35936025
1401.35936025
 ... ]

>> 
>> 
>> #Get rid of the P at the top
>> /deprop.Stage_0.v.Port.P =
/deprop Inner Error 0.000000
/deprop Iteration 1 Outer Error 0.019919
/deprop Inner Error 0.000604
/deprop Inner Error 0.000025
/deprop Iteration 2 Outer Error 0.004298
/deprop Inner Error 0.000605
/deprop Inner Error 0.000027
/deprop Iteration 3 Outer Error 0.000422
/deprop Inner Error 0.000206
/deprop Inner Error 0.000007
/deprop Iteration 4 Outer Error 0.000085
/deprop Inner Error 0.000038
>> /deprop.P_Profile.Values
[ ...
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
 ... ]

>> 
>> 
>> #Get rid of the P at the bottom of main section
>> /deprop.Stage_10.l.Port.P =
No outlet pressures available for tower /deprop
>> /deprop.P_Profile.Values
[ ...
None
None
None
None
None
None
None
None
None
None
None
None
None
 ... ]

>> 
>> 
>> #Put a pressure in the side stripper
>> #It should not solve as there is no P in the main section yet
>> /deprop.Stage_11.SSRetVap.Port.P = 210
No outlet pressures available for tower /deprop
>> /deprop.P_Profile.Values
[ ...
None
None
None
None
None
None
None
None
None
None
None
1447.89897
None
 ... ]

>> 
>> 
>> #Put a pressure in a stage
>> /deprop.P_Profile.Item2 = 205.0
/deprop Inner Error 0.000002
/deprop Iteration 1 Outer Error 0.017070
/deprop Inner Error 0.000668
/deprop Inner Error 0.000018
/deprop Iteration 2 Outer Error 0.000784
/deprop Inner Error 0.000032
/deprop Iteration 3 Outer Error 0.000059
/deprop Inner Error 0.000007
>> /deprop.P_Profile.Values
[ ...
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1447.89897
1447.89897
 ... ]

>> 
>> 
>> #Add a stage to the side stripper and see if it does an  independent interpolation of P
>> /deprop.Stage_11 + 1
Rename port /deprop.LiquidDraw_12_SSBtms to LiquidDraw_13_SSBtms.  It is connected to 
Rename port /deprop.Feed_12_SSVapFeed to Feed_13_SSVapFeed.  It is connected to 
Calculating disturbance 10 of 15 in jacobian of /deprop
/deprop Inner Error 0.000099
/deprop Iteration 1 Outer Error 0.000570
/deprop Inner Error 0.000410
/deprop Inner Error 0.000005
/deprop Iteration 2 Outer Error 0.000063
/deprop Inner Error 0.000008
>> /deprop.P_Profile.Values
[ ...
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1447.89897
1447.89897
1447.89897
 ... ]

>> /deprop.TryToSolve = 0
>> /deprop.P_Profile.Item13 = 215.0
>> /deprop.TryToSolve = 1
/deprop Inner Error 0.000000
/deprop Iteration 1 Outer Error 0.016544
/deprop Inner Error 0.000147
/deprop Inner Error 0.000002
/deprop Iteration 2 Outer Error 0.000726
/deprop Inner Error 0.000008
/deprop Iteration 3 Outer Error 0.000040
/deprop Inner Error 0.000004
>> /deprop.P_Profile.Values
[ ...
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1413.425185
1447.89897
1465.1358625
1482.372755
 ... ]

>> 
>> copy /deprop
Copied /deprop to the clipboard
>> paste /
Pasting /deprop
Pasted /deprop as /depropClone
/depropClone Inner Error 0.000000
/depropClone Iteration 1 Outer Error 0.000003
/depropClone Inner Error 0.000000
>> 
>> /depropClone.Stage_0.v.Port
Port: /depropClone.VapourDraw_0_v + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 28.7370234248 = F
P                  = 205.0 = psia
MoleFlow           = 432.043726835 = lbmole/h
MassFlow           = 12273.3134091 = lb/h
VolumeFlow         = 2.63535702922 = ft3/s
StdLiqVolumeFlow   = 0.140757037448 = ft3/s
H                  = 4131.44127999 = Btu/lbmol
Energy             = 1784663.12663 = Btu/hr
MolecularWeight    = 28.4075723052 = 
ZFactor            = 0.858862519487 = 
METHANE            = 0.393941096445 = 
ETHANE             = 0.342686104879 = 
PROPANE            = 0.251271202989 = 
ISOBUTANE          = 0.01 * 
n-BUTANE           = 0.00208627173243 = 
ISOPENTANE         = 1.08997700285e-005 = 
n-PENTANE          = 4.42174305343e-006 = 
n-HEXANE           = 2.47101827288e-009 = 
n-HEPTANE          = 9.24075624633e-012 = 
n-OCTANE           = 2.8995498017e-014 = 

>> /depropClone.Stage_10.l.Port
Port: /depropClone.LiquidDraw_10_l + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.00015835586e-009 = 
T                  = 253.905397392 = F
P                  = 205.0 = psia
MoleFlow           = 576.183790212 = lbmole/h
MassFlow           = 42388.6115577 = lb/h
VolumeFlow         = 0.378650443433 = ft3/s
StdLiqVolumeFlow   = 0.300275442822 = ft3/s
H                  = 6092.48211289 = Btu/lbmol
Energy             = 3509799.12506 = Btu/hr
MolecularWeight    = 73.5678654586 = 
ZFactor            = 0.0633331878972 = 
METHANE            = 3.81346253424e-007 = 
ETHANE             = 0.000185251463103 = 
PROPANE            = 0.02 * 
ISOBUTANE          = 0.201660896272 = 
n-BUTANE           = 0.182789071467 = 
ISOPENTANE         = 0.165759459798 = 
n-PENTANE          = 0.142674557834 = 
n-HEXANE           = 0.119347161097 = 
n-HEPTANE          = 0.0959184087296 = 
n-OCTANE           = 0.0716648117626 = 

>> /depropClone.Stage_11.SSLiqFeed.Port
Port: /depropClone.Feed_11_SSLiqFeed + sim.solver.Ports.Port_Material
Connected to: /depropClone.LiquidDraw_7_LiqToSS
VapFrac            = 3.28987529287e-008 | 
T                  = 194.500049112 | F
P                  = 205.0 | psia
MoleFlow           = 19.9958330516 | lbmole/h
MassFlow           = 1250.0 | lb/h
VolumeFlow         = 0.0111258085591 | ft3/s
StdLiqVolumeFlow   = 0.00940710386431 | ft3/s
H                  = 3026.49141595 | Btu/lbmol
Energy             = 60507.0404505 | Btu/hr
MolecularWeight    = 62.5130249147 | 
ZFactor            = 0.058491830121 | 
METHANE            = 0.000235510782236 | 
ETHANE             = 0.00729962758409 | 
PROPANE            = 0.125097323084 | 
ISOBUTANE          = 0.354457761911 | 
n-BUTANE           = 0.231534419233 | 
ISOPENTANE         = 0.103632675618 | 
n-PENTANE          = 0.080838654834 | 
n-HEXANE           = 0.0437579569131 | 
n-HEPTANE          = 0.0311323840569 | 
n-OCTANE           = 0.0220136859848 | 

>> /depropClone.Stage_11.SSRetVap.Port
Port: /depropClone.VapourDraw_11_SSRetVap + sim.solver.Ports.Port_Material
Connected to: /depropClone.Feed_6_SSRet
VapFrac            = 1.0 = 
T                  = 187.289346323 = F
P                  = 210.0 * psia
MoleFlow           = 28.2233500987 = lbmole/h
MassFlow           = 1523.60056809 = lb/h
VolumeFlow         = 0.199005771581 = ft3/s
StdLiqVolumeFlow   = 0.0122108847319 = ft3/s
H                  = 8768.67258438 = Btu/lbmol
Energy             = 247439.699549 = Btu/hr
MolecularWeight    = 53.9836894896 = 
ZFactor            = 0.767784494496 = 
METHANE            = 0.000166827170629 = 
ETHANE             = 0.0357180458022 = 
PROPANE            = 0.332534871949 = 
ISOBUTANE          = 0.389813930489 = 
n-BUTANE           = 0.150626491878 = 
ISOPENTANE         = 0.0455241728104 = 
n-PENTANE          = 0.0327783246441 = 
n-HEXANE           = 0.00853468845656 = 
n-HEPTANE          = 0.00315874092559 = 
n-OCTANE           = 0.00114390587468 = 

>> /depropClone.Stage_13.SSBtms.Port
Port: /depropClone.LiquidDraw_13_SSBtms + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 181.179405578 = F
P                  = 215.0 = psia
MoleFlow           = 13.7724829528 = lbmole/h
MassFlow           = 836.768881658 = lb/h
VolumeFlow         = 0.00742909226829 = ft3/s
StdLiqVolumeFlow   = 0.00635419305064 = ft3/s
H                  = 2489.99430184 = Btu/lbmol
Energy             = 34287.6372621 = Btu/hr
MolecularWeight    = 60.756574143 = 
ZFactor            = 0.0607079975495 = 
METHANE            = 5.90046694863e-008 = 
ETHANE             = 0.0100112102853 = 
PROPANE            = 0.2262610952 = 
ISOBUTANE          = 0.441882790365 = 
n-BUTANE           = 0.100093743661 = 
ISOPENTANE         = 0.0571703022505 = 
n-PENTANE          = 0.0501958954287 = 
n-HEXANE           = 0.046041030001 = 
n-HEPTANE          = 0.0387270548754 = 
n-OCTANE           = 0.0296168189292 = 

>> 
>> 
>> clear
>> read thcase.tst
Processing thcase.tst
>> #Test thermo cases
>> 
>> 
>> #Create any dummy unit ops
>> 
>> s1_Lev1 = Flowsheet.SubFlowsheet()
>> s2_Lev1 = Flowsheet.SubFlowsheet()
>> 
>> 
>> #Now create a first thermo case
>> $thermo = VirtualMaterials.RK
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + METHANE ETHANE PROPANE
METHANE ETHANE PROPANE 
>> 
>> #See who got it
>> /thermo
Name: thermo
PropPkg: VirtualMaterials.RK
Using:
METHANE
ETHANE
PROPANE
>> s1_Lev1.thermo
None
>> s2_Lev1.thermo
None
>> 
>> 
>> #Create one more unit op at the same level and see its thermo
>> s3_Lev1 = Flowsheet.SubFlowsheet()
>> s3_Lev1.thermo
None
>> 
>> 
>> #Create a thermo case in the root with the same name
>> $thermo = VirtualMaterials.Peng-Robinson
Could not assign VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + WATER
WATER 
>> 
>> #See who got it
>> /thermo
Name: thermo
PropPkg: VirtualMaterials.RK
Using:
METHANE
ETHANE
PROPANE
WATER
>> s1_Lev1.thermo
None
>> s2_Lev1.thermo
None
>> s3_Lev1.thermo
None
>> 
>> 
>> #Now create separate thermo cases named thermo in one of the childs
>> s1_Lev1.thermo2 = VirtualMaterials.Advanced_Peng-Robinson
The usage of s1_Lev1.thermo2 = VirtualMaterials.Advanced_Peng-Robinson is obsolete and will be deprecated. Use $thermoname = opTypeDesc instead
>> s1_Lev1.thermo2 + METHANE n-HEXANE
METHANE n-HEXANE 
>> s2_Lev1.thermo = VirtualMaterials.IdealLiquid/Ideal/HC
Could not assign VirtualMaterials.IdealLiquid/Ideal/HC
>> s2_Lev1.thermo + n-BUTANE
>> 
>> #See...
>> /thermo
Name: thermo
PropPkg: VirtualMaterials.RK
Using:
METHANE
ETHANE
PROPANE
WATER
>> s1_Lev1.thermo2
Name: thermo2
PropPkg: VirtualMaterials.Advanced_Peng-Robinson
Using:
METHANE
n-HEXANE
>> s2_Lev1.thermo
None
>> s3_Lev1.thermo
None
>> 
>> 
>> #Now create a child unit ops
>> /s1_Lev1.s1_Lev2 = Flowsheet.SubFlowsheet()
>> /s1_Lev1.s2_Lev2 = Flowsheet.SubFlowsheet()
>> /s1_Lev1.s3_Lev2 = Flowsheet.SubFlowsheet()
>> 
>> /s2_Lev1.s1_Lev2 = Flowsheet.SubFlowsheet()
>> /s2_Lev1.s2_Lev2 = Flowsheet.SubFlowsheet()
>> /s2_Lev1.s3_Lev2 = Flowsheet.SubFlowsheet()
>> 
>> 
>> /s3_Lev1.s1_Lev2 = Flowsheet.SubFlowsheet()
>> /s3_Lev1.s2_Lev2 = Flowsheet.SubFlowsheet()
>> /s3_Lev1.s3_Lev2 = Flowsheet.SubFlowsheet()
>> 
>> 
>> 
>> #See their thermo
>> /s1_Lev1.s1_Lev2.thermo2
None
>> /s1_Lev1.s2_Lev2.thermo2
None
>> 
>> 
>> /s2_Lev1.s1_Lev2.thermo
None
>> /s2_Lev1.s2_Lev2.thermo
None
>> 
>> 
>> /s3_Lev1.s1_Lev2.thermo
None
>> /s3_Lev1.s2_Lev2.thermo
None
>> 
>> 
>> #This deletes the spec thermo in child AND parents. Mhhh kind of not consistent
>> /s2_Lev1.s1_Lev2.thermo =
Cannot delete object
>> /thermo
Name: thermo
PropPkg: VirtualMaterials.RK
Using:
METHANE
ETHANE
PROPANE
WATER
>> s1_Lev1.thermo2
Name: thermo2
PropPkg: VirtualMaterials.Advanced_Peng-Robinson
Using:
METHANE
n-HEXANE
>> s2_Lev1.thermo
None
>> s3_Lev1.thermo
None
>> 
>> /s1_Lev1.s1_Lev2.thermo2
None
>> /s1_Lev1.s2_Lev2.thermo2
None
>> 
>> 
>> /s2_Lev1.s1_Lev2.thermo
None
>> /s2_Lev1.s2_Lev2.thermo
None
>> 
>> 
>> /s3_Lev1.s1_Lev2.thermo
None
>> /s3_Lev1.s2_Lev2.thermo
None
>> 
>> 
>> /s3_Lev1.thermo = VirtualMaterials.SRK
Could not assign VirtualMaterials.SRK
>> /s3_Lev1.thermo + HYDROGEN
>> 
>> 
>> /thermo = VirtualMaterials.Wilson/Ideal/HC
Could not assign VirtualMaterials.Wilson/Ideal/HC
>> /thermo
Name: thermo
PropPkg: VirtualMaterials.RK
Using:
METHANE
ETHANE
PROPANE
WATER
>> s1_Lev1.thermo2
Name: thermo2
PropPkg: VirtualMaterials.Advanced_Peng-Robinson
Using:
METHANE
n-HEXANE
>> s2_Lev1.thermo
None
>> s3_Lev1.thermo
None
>> 
>> 
>> 
>> 
>> 
>> clear
>> read hxthreesides.tst
Processing hxthreesides.tst
>> # Heat exchanger test
>> units SI
>> 
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + WATER
WATER 
>> 
>> 
>> # lets have some streams for this test
>> hotInlet = Stream.Stream_Material()
>> coldInlet = Stream.Stream_Material()
>> hotOutlet = Stream.Stream_Material()
>> coldOutlet = Stream.Stream_Material()
>> hotInlet2 = Stream.Stream_Material()
>> hotOutlet2 = Stream.Stream_Material()
>> 
>> cd /hotInlet.In
/hotInlet.In
>> Fraction = 1.0
>> P = 101
>> MoleFlow = 800
>> 
>> cd /hotInlet2.In
/hotInlet2.In
>> Fraction = 1.0
>> P = 101
>> MoleFlow = 300
>> 
>> cd /coldInlet.In
/coldInlet.In
>> Fraction = 1.0
>> #VapFrac = 0
>> P = 101
>> MoleFlow = 1000
>> 
>> cd /
/
>> exch = Heater.MultiSidedHeatExchangerOp()
>> exch.NumberSides = 3
>> 
>> cd exch
/exch
>> DeltaP0 = 0.0
>> DeltaP1 = 0.0
>> DeltaP2 = 0.0
>> 
>> 
>> cd /
/
>> coldInlet.Out -> exch.In0
>> exch.Out0 -> coldOutlet.In
>> hotInlet.Out -> exch.In1
>> exch.Out1 -> hotOutlet.In
>> hotInlet2.Out -> exch.In2
>> exch.Out2 -> hotOutlet2.In
>> 
>> exch.IsCounterCurrent1 = 0
>> exch.IsCounterCurrent2 = 1
>> 
>> 
>> #spec UA and coldInlet.T
>> exch.UA0_1 = 8288.42280702 #Cold with the first hot side
>> exch.UA0_2 = 5000.42280702  #Cold with the second hot side
>> exch.UA1_2 = 0.0           #Ignore heat transfer between both hot sides
>> hotInlet.In.T = 573.15 K
>> hotInlet2.In.T = 500 K
>> coldInlet.In.T = 413.15 K
Calculating Jacobian for /exch
/exch Iteration 1 Max Error 2.788284
Calculating Jacobian for /exch
/exch Iteration 2 Max Error 2.119155
Calculating Jacobian for /exch
/exch Iteration 3 Max Error 0.427852
Calculating Jacobian for /exch
/exch Iteration 4 Max Error 0.021237
Calculating Jacobian for /exch
/exch Iteration 5 Max Error 0.000095
Calculating Jacobian for /exch
Converged /exch in 6 iterations
>> 
>> units sim42
>> coldInlet.In
Port: /coldInlet.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 413.15 * K
P                  = 101.0 * kPa
MoleFlow           = 1000.0 * kgmole/h
MassFlow           = 18015.28 = kg/h
VolumeFlow         = 33788.0788312 = m3/hr
StdLiqVolumeFlow   = 18.0323624005 = m3/hr
H                  = 13798.2329916 = kJ/kmol
Energy             = 3832842.49768 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.993451622796 = 
WATER              = 1.0 * 

>> coldOutlet.In
Port: /coldOutlet.In + sim.solver.Ports.Port_Material
Connected to: /exch.side0.Out
VapFrac            = 1.0 | 
T                  = 483.959136486 | K
P                  = 101.0 | kPa
MoleFlow           = 1000.0 | kgmole/h
MassFlow           = 18015.28 | kg/h
VolumeFlow         = 39671.9942292 | m3/hr
StdLiqVolumeFlow   = 18.0323624005 | m3/hr
H                  = 16270.3593157 | kJ/kmol
Energy             = 4519544.25435 | W
MolecularWeight    = 18.01528 | 
ZFactor            = 0.995786698566 | 
WATER              = 1.0 | 

>> hotInlet.In
Port: /hotInlet.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 573.15 * K
P                  = 101.0 * kPa
MoleFlow           = 800.0 * kgmole/h
MassFlow           = 14412.224 = kg/h
VolumeFlow         = 37649.2412079 = m3/hr
StdLiqVolumeFlow   = 14.4258899204 = m3/hr
H                  = 19447.652196 = kJ/kmol
Energy             = 4321700.48799 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.997444927009 = 
WATER              = 1.0 * 

>> hotOutlet.In
Port: /hotOutlet.In + sim.solver.Ports.Port_Material
Connected to: /exch.side1.Out
VapFrac            = 1.0 | 
T                  = 503.450856686 | K
P                  = 101.0 | kPa
MoleFlow           = 800.0 | kgmole/h
MassFlow           = 14412.224 | kg/h
VolumeFlow         = 33030.8604266 | m3/hr
StdLiqVolumeFlow   = 14.4258899204 | m3/hr
H                  = 16958.2426128 | kJ/kmol
Energy             = 3768498.35841 | W
MolecularWeight    = 18.01528 | 
ZFactor            = 0.996239592629 | 
WATER              = 1.0 | 

>> hotInlet2.In
Port: /hotInlet2.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 500.0 * K
P                  = 101.0 * kPa
MoleFlow           = 300.0 * kgmole/h
MassFlow           = 5404.584 = kg/h
VolumeFlow         = 12300.7354209 = m3/hr
StdLiqVolumeFlow   = 5.40970872014 = m3/hr
H                  = 16836.2075779 = kJ/kmol
Energy             = 1403017.29815 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.996163901789 = 
WATER              = 1.0 * 

>> hotOutlet2.In
Port: /hotOutlet2.In + sim.solver.Ports.Port_Material
Connected to: /exch.side2.Out
VapFrac            = 1.0 | 
T                  = 454.420147419 | K
P                  = 101.0 | kPa
MoleFlow           = 300.0 | kgmole/h
MassFlow           = 5404.584 | kg/h
VolumeFlow         = 11165.9496733 | m3/hr
StdLiqVolumeFlow   = 5.40970872014 | m3/hr
H                  = 15234.2120528 | kJ/kmol
Energy             = 1269517.67107 | W
MolecularWeight    = 18.01528 | 
ZFactor            = 0.994965025603 | 
WATER              = 1.0 | 

>> exch.UA0_1
Port: /exch.heatTransfer0_1.UA + sim.solver.Ports.Port_Signal
Connected to: None
UA   = 8288.42280702 * W/K

>> 
>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
Converged /RootClone.exch in 0 iterations
>> cd /RootClone
/RootClone
>> coldInlet.In
Port: /RootClone.coldInlet.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 413.15 * K
P                  = 101.0 * kPa
MoleFlow           = 1000.0 * kgmole/h
MassFlow           = 18015.28 = kg/h
VolumeFlow         = 33788.0788312 = m3/hr
StdLiqVolumeFlow   = 18.0323624005 = m3/hr
H                  = 13798.2329916 = kJ/kmol
Energy             = 3832842.49768 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.993451622796 = 
WATER              = 1.0 * 

>> coldOutlet.In
Port: /RootClone.coldOutlet.In + sim.solver.Ports.Port_Material
Connected to: /RootClone.exch.side0.Out
VapFrac            = 1.0 | 
T                  = 483.959136486 | K
P                  = 101.0 | kPa
MoleFlow           = 1000.0 | kgmole/h
MassFlow           = 18015.28 | kg/h
VolumeFlow         = 39671.9942292 | m3/hr
StdLiqVolumeFlow   = 18.0323624005 | m3/hr
H                  = 16270.3593157 | kJ/kmol
Energy             = 4519544.25435 | W
MolecularWeight    = 18.01528 | 
ZFactor            = 0.995786698566 | 
WATER              = 1.0 | 

>> hotInlet.In
Port: /RootClone.hotInlet.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 573.15 * K
P                  = 101.0 * kPa
MoleFlow           = 800.0 * kgmole/h
MassFlow           = 14412.224 = kg/h
VolumeFlow         = 37649.2412079 = m3/hr
StdLiqVolumeFlow   = 14.4258899204 = m3/hr
H                  = 19447.652196 = kJ/kmol
Energy             = 4321700.48799 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.997444927009 = 
WATER              = 1.0 * 

>> hotOutlet.In
Port: /RootClone.hotOutlet.In + sim.solver.Ports.Port_Material
Connected to: /RootClone.exch.side1.Out
VapFrac            = 1.0 | 
T                  = 503.450856686 | K
P                  = 101.0 | kPa
MoleFlow           = 800.0 | kgmole/h
MassFlow           = 14412.224 | kg/h
VolumeFlow         = 33030.8604266 | m3/hr
StdLiqVolumeFlow   = 14.4258899204 | m3/hr
H                  = 16958.2426128 | kJ/kmol
Energy             = 3768498.35841 | W
MolecularWeight    = 18.01528 | 
ZFactor            = 0.996239592629 | 
WATER              = 1.0 | 

>> hotInlet2.In
Port: /RootClone.hotInlet2.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 500.0 * K
P                  = 101.0 * kPa
MoleFlow           = 300.0 * kgmole/h
MassFlow           = 5404.584 = kg/h
VolumeFlow         = 12300.7354209 = m3/hr
StdLiqVolumeFlow   = 5.40970872014 = m3/hr
H                  = 16836.2075779 = kJ/kmol
Energy             = 1403017.29815 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.996163901789 = 
WATER              = 1.0 * 

>> hotOutlet2.In
Port: /RootClone.hotOutlet2.In + sim.solver.Ports.Port_Material
Connected to: /RootClone.exch.side2.Out
VapFrac            = 1.0 | 
T                  = 454.420147419 | K
P                  = 101.0 | kPa
MoleFlow           = 300.0 | kgmole/h
MassFlow           = 5404.584 | kg/h
VolumeFlow         = 11165.9496733 | m3/hr
StdLiqVolumeFlow   = 5.40970872014 | m3/hr
H                  = 15234.2120528 | kJ/kmol
Energy             = 1269517.67107 | W
MolecularWeight    = 18.01528 | 
ZFactor            = 0.994965025603 | 
WATER              = 1.0 | 

>> exch.UA0_1
Port: /RootClone.exch.heatTransfer0_1.UA + sim.solver.Ports.Port_Signal
Connected to: None
UA   = 8288.42280702 * W/K

>> 
>> 
>> 
>> clear
>> read hxplaywithsides.tst
Processing hxplaywithsides.tst
>> # Heat exchanger test
>> units SI
>> 
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + WATER
WATER 
>> 
>> 
>> # lets have some streams for this test
>> hotInlet = Stream.Stream_Material()
>> coldInlet = Stream.Stream_Material()
>> hotOutlet = Stream.Stream_Material()
>> coldOutlet = Stream.Stream_Material()
>> 
>> 
>> cd hotInlet.In
/hotInlet.In
>> Fraction = 1.0
>> T = 300 C
>> P = 101
>> MoleFlow = 800
>> 
>> 
>> cd /coldInlet.In
/coldInlet.In
>> Fraction
WATER                       = None

>> Fraction = 1.0
>> #VapFrac = 0
>> P = 101
>> MoleFlow = 1000
>> 
>> cd /
/
>> exch = Heater.MultiSidedHeatExchangerOp()
>> exch
Operation: exch = sim.unitop.Heater.MultiSidedHeatExchangerOp
Port: In0 = sim.solver.Ports.Port_Material (/exch.side0.In)
Port: In1 = sim.solver.Ports.Port_Material (/exch.side1.In)
Port: Out0 = sim.solver.Ports.Port_Material (/exch.side0.Out)
Port: Out1 = sim.solver.Ports.Port_Material (/exch.side1.Out)
Port: DeltaT1 = sim.solver.Ports.Port_Signal (/exch.side1.DeltaT)
Port: DeltaT0 = sim.solver.Ports.Port_Signal (/exch.side0.DeltaT)
Port: DeltaP1 = sim.solver.Ports.Port_Signal (/exch.side1.DeltaP)
Port: DeltaP0 = sim.solver.Ports.Port_Signal (/exch.side0.DeltaP)
Port: UA0_1 = sim.solver.Ports.Port_Signal (/exch.heatTransfer0_1.UA)
Port: DeltaT0_1_In = sim.solver.Ports.Port_Signal (/exch.heatTransfer0_1.DeltaT_In)
Port: DeltaT0_1_Out = sim.solver.Ports.Port_Signal (/exch.heatTransfer0_1.DeltaT_Out)
Child: heatTransfer0_1 = sim.unitop.Heater._HeatTransfer
Child: side0 = sim.unitop.Heater._Side
Child: side1 = sim.unitop.Heater._Side
Parameter: MaxError = 1e-005
Parameter: Ignored = None
Parameter: TrackPhaseChange = 0
Parameter: MonitorConvergence = 1
Parameter: DampingFactor = 1.0
Parameter: NumberSegments = 1
Parameter: IsCounterCurrent0 = 0
Parameter: IsCounterCurrent1 = 1
Parameter: ReferenceSide = 0
Parameter: FreqJacobianMsg = 10
Parameter: BaseForSegments = Energy
Parameter: NumberSides = 2
Parameter: TryLastConverged = 1
Parameter: MaxNumIterations = 20
Parameter: AvSolutionMethods = NewtonRaphson Secant Broyden
Parameter: SolutionMethod = NewtonRaphson
Parameter: TryToRestart = 0
Parameter: MinimizeError = 1
>> 
>> cd exch
/exch
>> DeltaP0 = 0.0
>> DeltaP1 = 0.0
>> 
>> cd /
/
>> coldInlet.Out -> exch.In1
>> exch.Out1 -> coldOutlet.In
>> hotInlet.Out -> exch.In0
>> exch.Out0 -> hotOutlet.In
>> 
>> 
>> #spec UA and coldInlet.T
>> exch.UA0_1 = 8288.42280702
>> coldInlet.In.T = 413.15 K
Calculating Jacobian for /exch
/exch Iteration 1 Max Error 0.069318
Calculating Jacobian for /exch
/exch Iteration 2 Max Error 0.000237
Calculating Jacobian for /exch
Converged /exch in 3 iterations
>> 
>> units sim42
>> coldInlet.Out
Port: /coldInlet.Out + sim.solver.Ports.Port_Material
Connected to: /exch.side1.In
VapFrac            = 1.0 = 
T                  = 413.15 = K
P                  = 101.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 18015.28 = kg/h
VolumeFlow         = 33788.0788312 = m3/hr
StdLiqVolumeFlow   = 18.0323624005 = m3/hr
H                  = 13798.2329916 = kJ/kmol
Energy             = 3832842.49768 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.993451622796 = 
WATER              = 1.0 = 

>> coldOutlet.Out
Port: /coldOutlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 483.150003433 = K
P                  = 101.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 18015.28 = kg/h
VolumeFlow         = 39604.862989 = m3/hr
StdLiqVolumeFlow   = 18.0323624005 = m3/hr
H                  = 16241.8776885 = kJ/kmol
Energy             = 4511632.69125 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.99576649685 = 
WATER              = 1.0 = 

>> hotInlet.Out
Port: /hotInlet.Out + sim.solver.Ports.Port_Material
Connected to: /exch.side0.In
VapFrac            = 1.0 = 
T                  = 573.15 = K
P                  = 101.0 = kPa
MoleFlow           = 800.0 = kgmole/h
MassFlow           = 14412.224 = kg/h
VolumeFlow         = 37649.2412079 = m3/hr
StdLiqVolumeFlow   = 14.4258899204 = m3/hr
H                  = 19447.652196 = kJ/kmol
Energy             = 4321700.48799 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.997444927009 = 
WATER              = 1.0 = 

>> hotOutlet.Out
Port: /hotOutlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 487.444077015 = K
P                  = 101.0 = kPa
MoleFlow           = 800.0 = kgmole/h
MassFlow           = 14412.224 = kg/h
VolumeFlow         = 31968.8847261 = m3/hr
StdLiqVolumeFlow   = 14.4258899204 = m3/hr
H                  = 16393.0963249 = kJ/kmol
Energy             = 3642910.29443 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.995872369185 = 
WATER              = 1.0 = 

>> exch.UA0_1
Port: /exch.heatTransfer0_1.UA + sim.solver.Ports.Port_Signal
Connected to: None
UA   = 8288.42280702 * W/K

>> 
>> exch.IsCounterCurrent1 = 0
Calculating Jacobian for /exch
/exch Iteration 1 Max Error 3.096229
Calculating Jacobian for /exch
/exch Iteration 2 Max Error 0.749644
Calculating Jacobian for /exch
/exch Iteration 3 Max Error 0.056427
Calculating Jacobian for /exch
/exch Iteration 4 Max Error 0.000246
Calculating Jacobian for /exch
Converged /exch in 5 iterations
>> 
>> coldInlet.Out
Port: /coldInlet.Out + sim.solver.Ports.Port_Material
Connected to: /exch.side1.In
VapFrac            = 1.0 = 
T                  = 413.15 = K
P                  = 101.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 18015.28 = kg/h
VolumeFlow         = 33788.0788312 = m3/hr
StdLiqVolumeFlow   = 18.0323624005 = m3/hr
H                  = 13798.2329916 = kJ/kmol
Energy             = 3832842.49768 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.993451622796 = 
WATER              = 1.0 = 

>> coldOutlet.Out
Port: /coldOutlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 474.411831379 = K
P                  = 101.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 18015.28 = kg/h
VolumeFlow         = 38879.7524329 = m3/hr
StdLiqVolumeFlow   = 18.0323624005 = m3/hr
H                  = 15934.6548577 = kJ/kmol
Energy             = 4426293.01601 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.99554056628 = 
WATER              = 1.0 = 

>> hotInlet.Out
Port: /hotInlet.Out + sim.solver.Ports.Port_Material
Connected to: /exch.side0.In
VapFrac            = 1.0 = 
T                  = 573.15 = K
P                  = 101.0 = kPa
MoleFlow           = 800.0 = kgmole/h
MassFlow           = 14412.224 = kg/h
VolumeFlow         = 37649.2412079 = m3/hr
StdLiqVolumeFlow   = 14.4258899204 = m3/hr
H                  = 19447.652196 = kJ/kmol
Energy             = 4321700.48799 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.997444927009 = 
WATER              = 1.0 = 

>> hotOutlet.Out
Port: /hotOutlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 498.328171253 = K
P                  = 101.0 = kPa
MoleFlow           = 800.0 = kgmole/h
MassFlow           = 14412.224 = kg/h
VolumeFlow         = 32691.057327 = m3/hr
StdLiqVolumeFlow   = 14.4258899204 = m3/hr
H                  = 16777.1248635 = kJ/kmol
Energy             = 3728249.96966 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.996126566618 = 
WATER              = 1.0 = 

>> exch.UA0_1
Port: /exch.heatTransfer0_1.UA + sim.solver.Ports.Port_Signal
Connected to: None
UA   = 8288.42280702 * W/K

>> 
>> #This should not be accepted
>> exch.IsCounterCurrent0 = 1
Can't set parameter IsCounterCurrent0 to value 1
>> exch.IsCounterCurrent0
/exch.IsCounterCurrent0 = 0 
>> coldInlet.Out
Port: /coldInlet.Out + sim.solver.Ports.Port_Material
Connected to: /exch.side1.In
VapFrac            = 1.0 = 
T                  = 413.15 = K
P                  = 101.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 18015.28 = kg/h
VolumeFlow         = 33788.0788312 = m3/hr
StdLiqVolumeFlow   = 18.0323624005 = m3/hr
H                  = 13798.2329916 = kJ/kmol
Energy             = 3832842.49768 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.993451622796 = 
WATER              = 1.0 = 

>> coldOutlet.Out
Port: /coldOutlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 474.411831379 = K
P                  = 101.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 18015.28 = kg/h
VolumeFlow         = 38879.7524329 = m3/hr
StdLiqVolumeFlow   = 18.0323624005 = m3/hr
H                  = 15934.6548577 = kJ/kmol
Energy             = 4426293.01601 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.99554056628 = 
WATER              = 1.0 = 

>> hotInlet.Out
Port: /hotInlet.Out + sim.solver.Ports.Port_Material
Connected to: /exch.side0.In
VapFrac            = 1.0 = 
T                  = 573.15 = K
P                  = 101.0 = kPa
MoleFlow           = 800.0 = kgmole/h
MassFlow           = 14412.224 = kg/h
VolumeFlow         = 37649.2412079 = m3/hr
StdLiqVolumeFlow   = 14.4258899204 = m3/hr
H                  = 19447.652196 = kJ/kmol
Energy             = 4321700.48799 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.997444927009 = 
WATER              = 1.0 = 

>> hotOutlet.Out
Port: /hotOutlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 498.328171253 = K
P                  = 101.0 = kPa
MoleFlow           = 800.0 = kgmole/h
MassFlow           = 14412.224 = kg/h
VolumeFlow         = 32691.057327 = m3/hr
StdLiqVolumeFlow   = 14.4258899204 = m3/hr
H                  = 16777.1248635 = kJ/kmol
Energy             = 3728249.96966 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.996126566618 = 
WATER              = 1.0 = 

>> 
>> exch.ReferenceSide = 1
Converged /exch in 0 iterations
>> exch.ReferenceSide
/exch.ReferenceSide = 1 
>> exch.IsCounterCurrent0
/exch.IsCounterCurrent0 = 0 
>> exch.IsCounterCurrent1
/exch.IsCounterCurrent1 = 0 
>> 
>> exch.IsCounterCurrent0 = 1
Calculating Jacobian for /exch
/exch Iteration 1 Max Error 5.570004
Calculating Jacobian for /exch
/exch Iteration 2 Max Error 5.419824
Calculating Jacobian for /exch
/exch Iteration 3 Max Error 1.070254
Calculating Jacobian for /exch
/exch Iteration 4 Max Error 0.060236
Calculating Jacobian for /exch
/exch Iteration 5 Max Error 0.000188
Calculating Jacobian for /exch
Converged /exch in 6 iterations
>> exch.IsCounterCurrent0
/exch.IsCounterCurrent0 = 1 
>> exch.IsCounterCurrent1
/exch.IsCounterCurrent1 = 0 
>> 
>> exch.ReferenceSide = 0
Converged /exch in 0 iterations
>> exch.ReferenceSide
/exch.ReferenceSide = 0 
>> exch.IsCounterCurrent0
/exch.IsCounterCurrent0 = 0 
>> exch.IsCounterCurrent1
/exch.IsCounterCurrent1 = 1 
>> 
>> exch.NumberSides = 5
>> exch.ReferenceSide = 4
>> exch.ReferenceSide
/exch.ReferenceSide = 4 
>> exch.IsCounterCurrent0
/exch.IsCounterCurrent0 = 1 
>> exch.IsCounterCurrent1
/exch.IsCounterCurrent1 = 0 
>> exch.IsCounterCurrent2
/exch.IsCounterCurrent2 = 0 
>> exch.IsCounterCurrent3
/exch.IsCounterCurrent3 = 0 
>> exch.IsCounterCurrent4
/exch.IsCounterCurrent4 = 0 
>> 
>> exch.IsCounterCurrent0 = 1
>> exch.IsCounterCurrent3 = 1
>> exch.IsCounterCurrent0
/exch.IsCounterCurrent0 = 1 
>> exch.IsCounterCurrent1
/exch.IsCounterCurrent1 = 0 
>> exch.IsCounterCurrent2
/exch.IsCounterCurrent2 = 0 
>> exch.IsCounterCurrent3
/exch.IsCounterCurrent3 = 1 
>> exch.IsCounterCurrent4
/exch.IsCounterCurrent4 = 0 
>> 
>> 
>> exch.NumberSides = 3
>> exch.ReferenceSide
/exch.ReferenceSide = 0 
>> exch.IsCounterCurrent0
/exch.IsCounterCurrent0 = 0 
>> exch.IsCounterCurrent1
/exch.IsCounterCurrent1 = 1 
>> exch.IsCounterCurrent2
/exch.IsCounterCurrent2 = 1 
>> exch.IsCounterCurrent3
None
>> exch.IsCounterCurrent4
None
>> 
>> hold
>> #Reconnect to different sides
>> coldInlet.Out -> exch.In0
>> exch.Out0 -> coldOutlet.In
>> hotInlet.Out -> exch.In1
>> exch.Out1 -> hotOutlet.In
>> go
>> 
>> coldInlet.Out
Port: /coldInlet.Out + sim.solver.Ports.Port_Material
Connected to: /exch.side0.In
VapFrac            = 1.0 = 
T                  = 413.15 = K
P                  = 101.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 18015.28 = kg/h
VolumeFlow         = 33788.0788312 = m3/hr
StdLiqVolumeFlow   = 18.0323624005 = m3/hr
H                  = 13798.2329916 = kJ/kmol
Energy             = 3832842.49768 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.993451622796 = 
WATER              = 1.0 = 

>> coldOutlet.Out
Port: /coldOutlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = 101.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 18015.28 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 18.0323624005 = m3/hr
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
WATER              = 1.0 = 

>> hotInlet.Out
Port: /hotInlet.Out + sim.solver.Ports.Port_Material
Connected to: /exch.side1.In
VapFrac            = 1.0 = 
T                  = 573.15 = K
P                  = 101.0 = kPa
MoleFlow           = 800.0 = kgmole/h
MassFlow           = 14412.224 = kg/h
VolumeFlow         = 37649.2412079 = m3/hr
StdLiqVolumeFlow   = 14.4258899204 = m3/hr
H                  = 19447.652196 = kJ/kmol
Energy             = 4321700.48799 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.997444927009 = 
WATER              = 1.0 = 

>> hotOutlet.Out
Port: /hotOutlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = 101.0 = kPa
MoleFlow           = 800.0 = kgmole/h
MassFlow           = 14412.224 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 14.4258899204 = m3/hr
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
WATER              = 1.0 = 

>> exch.UA0_1
Port: /exch.heatTransfer0_1.UA + sim.solver.Ports.Port_Signal
Connected to: None
UA   = 8288.42280702 * W/K

>> 
>> 
>> exch.NumberSegments = 3
>> coldInlet.Out
Port: /coldInlet.Out + sim.solver.Ports.Port_Material
Connected to: /exch.side0.In
VapFrac            = 1.0 = 
T                  = 413.15 = K
P                  = 101.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 18015.28 = kg/h
VolumeFlow         = 33788.0788312 = m3/hr
StdLiqVolumeFlow   = 18.0323624005 = m3/hr
H                  = 13798.2329916 = kJ/kmol
Energy             = 3832842.49768 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.993451622796 = 
WATER              = 1.0 = 

>> coldOutlet.Out
Port: /coldOutlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = 101.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 18015.28 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 18.0323624005 = m3/hr
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
WATER              = 1.0 = 

>> hotInlet.Out
Port: /hotInlet.Out + sim.solver.Ports.Port_Material
Connected to: /exch.side1.In
VapFrac            = 1.0 = 
T                  = 573.15 = K
P                  = 101.0 = kPa
MoleFlow           = 800.0 = kgmole/h
MassFlow           = 14412.224 = kg/h
VolumeFlow         = 37649.2412079 = m3/hr
StdLiqVolumeFlow   = 14.4258899204 = m3/hr
H                  = 19447.652196 = kJ/kmol
Energy             = 4321700.48799 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.997444927009 = 
WATER              = 1.0 = 

>> hotOutlet.Out
Port: /hotOutlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = 101.0 = kPa
MoleFlow           = 800.0 = kgmole/h
MassFlow           = 14412.224 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 14.4258899204 = m3/hr
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
WATER              = 1.0 = 

>> exch.UA0_1
Port: /exch.heatTransfer0_1.UA + sim.solver.Ports.Port_Signal
Connected to: None
UA   = 8288.42280702 * W/K

>> 
>> exch.NumberSides = 2
Calculating Jacobian for /exch
/exch Iteration 1 Max Error 0.060351
Calculating Jacobian for /exch
/exch Iteration 2 Max Error 0.000248
Calculating Jacobian for /exch
Converged /exch in 3 iterations
>> coldInlet.Out
Port: /coldInlet.Out + sim.solver.Ports.Port_Material
Connected to: /exch.side0.In
VapFrac            = 1.0 = 
T                  = 413.15 = K
P                  = 101.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 18015.28 = kg/h
VolumeFlow         = 33788.0788312 = m3/hr
StdLiqVolumeFlow   = 18.0323624005 = m3/hr
H                  = 13798.2329916 = kJ/kmol
Energy             = 3832842.49768 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.993451622796 = 
WATER              = 1.0 = 

>> coldOutlet.Out
Port: /coldOutlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 483.178601742 = K
P                  = 101.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 18015.28 = kg/h
VolumeFlow         = 39607.2357358 = m3/hr
StdLiqVolumeFlow   = 18.0323624005 = m3/hr
H                  = 16242.8842063 = kJ/kmol
Energy             = 4511912.27953 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.995767212889 = 
WATER              = 1.0 = 

>> hotInlet.Out
Port: /hotInlet.Out + sim.solver.Ports.Port_Material
Connected to: /exch.side1.In
VapFrac            = 1.0 = 
T                  = 573.15 = K
P                  = 101.0 = kPa
MoleFlow           = 800.0 = kgmole/h
MassFlow           = 14412.224 = kg/h
VolumeFlow         = 37649.2412079 = m3/hr
StdLiqVolumeFlow   = 14.4258899204 = m3/hr
H                  = 19447.652196 = kJ/kmol
Energy             = 4321700.48799 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.997444927009 = 
WATER              = 1.0 = 

>> hotOutlet.Out
Port: /hotOutlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 487.408361912 = K
P                  = 101.0 = kPa
MoleFlow           = 800.0 = kgmole/h
MassFlow           = 14412.224 = kg/h
VolumeFlow         = 31966.5145275 = m3/hr
StdLiqVolumeFlow   = 14.4258899204 = m3/hr
H                  = 16391.8381777 = kJ/kmol
Energy             = 3642630.70614 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.995871502073 = 
WATER              = 1.0 = 

>> exch.UA0_1
Port: /exch.heatTransfer0_1.UA + sim.solver.Ports.Port_Signal
Connected to: None
UA   = 8288.42280702 * W/K

>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
Converged /RootClone.exch in 0 iterations
>> cd /Rootclone
Cannot cd to object Rootclone
>> coldInlet.Out
Port: /coldInlet.Out + sim.solver.Ports.Port_Material
Connected to: /exch.side0.In
VapFrac            = 1.0 = 
T                  = 413.15 = K
P                  = 101.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 18015.28 = kg/h
VolumeFlow         = 33788.0788312 = m3/hr
StdLiqVolumeFlow   = 18.0323624005 = m3/hr
H                  = 13798.2329916 = kJ/kmol
Energy             = 3832842.49768 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.993451622796 = 
WATER              = 1.0 = 

>> coldOutlet.Out
Port: /coldOutlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 483.178601742 = K
P                  = 101.0 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 18015.28 = kg/h
VolumeFlow         = 39607.2357358 = m3/hr
StdLiqVolumeFlow   = 18.0323624005 = m3/hr
H                  = 16242.8842063 = kJ/kmol
Energy             = 4511912.27953 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.995767212889 = 
WATER              = 1.0 = 

>> hotInlet.Out
Port: /hotInlet.Out + sim.solver.Ports.Port_Material
Connected to: /exch.side1.In
VapFrac            = 1.0 = 
T                  = 573.15 = K
P                  = 101.0 = kPa
MoleFlow           = 800.0 = kgmole/h
MassFlow           = 14412.224 = kg/h
VolumeFlow         = 37649.2412079 = m3/hr
StdLiqVolumeFlow   = 14.4258899204 = m3/hr
H                  = 19447.652196 = kJ/kmol
Energy             = 4321700.48799 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.997444927009 = 
WATER              = 1.0 = 

>> hotOutlet.Out
Port: /hotOutlet.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 487.408361912 = K
P                  = 101.0 = kPa
MoleFlow           = 800.0 = kgmole/h
MassFlow           = 14412.224 = kg/h
VolumeFlow         = 31966.5145275 = m3/hr
StdLiqVolumeFlow   = 14.4258899204 = m3/hr
H                  = 16391.8381777 = kJ/kmol
Energy             = 3642630.70614 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.995871502073 = 
WATER              = 1.0 = 

>> exch.UA0_1
Port: /exch.heatTransfer0_1.UA + sim.solver.Ports.Port_Signal
Connected to: None
UA   = 8288.42280702 * W/K

>> 
>> clear
>> read hydrate.tst
Processing hydrate.tst
>> units SI
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + NITROGEN WATER METHANE ETHANE PROPANE ISOBUTANE CARBON_DIOXIDE HYDROGEN_SULFIDE n-BUTANE
NITROGEN WATER METHANE ETHANE PROPANE ISOBUTANE CARBON DIOXIDE HYDROGEN SULFIDE n-BUTANE 
>> 
>> Feed = Stream.Stream_Material()
>> Out = Stream.Stream_Material()
>> Hydrate = Hydrate.Hydrate()
>> 
>> Feed.Out -> Hydrate.In
>> Hydrate.Out -> Out.In
>> 
>> Feed.In.T = 40
>> Feed.In.P = 2000 kPa
>> Feed.In.Fraction = 0.094 0.0 0.784 0.06 0.036 0.005 0.002 0.0 0.019
>> Feed.In.MoleFlow = 100
>> 
>> 
>> # Results
>> Feed.In
Port: /Feed.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 40.0 * C
P                  = 2000.0 * kPa
MoleFlow           = 100.0 * kgmole/h
MassFlow           = 2008.50922425 = kg/h
VolumeFlow         = 124.067562982 = m3/hr
StdLiqVolumeFlow   = 6.10111441902 = m3/hr
H                  = 10552.7398362 = kJ/kmol
Energy             = 293131.662116 = W
MolecularWeight    = 20.0850922425 = 
ZFactor            = 0.953027514775 = 
NITROGEN           = 0.094 * 
WATER              = 0.0 * 
METHANE            = 0.784 * 
ETHANE             = 0.06 * 
PROPANE            = 0.036 * 
ISOBUTANE          = 0.005 * 
CARBON DIOXIDE     = 0.002 * 
HYDROGEN SULFIDE   = 0.0 * 
n-BUTANE           = 0.019 * 

>> Out.Out
Port: /Out.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 40.0 = C
P                  = 2000.0 = kPa
MoleFlow           = 100.0 = kgmole/h
MassFlow           = 2008.50922425 = kg/h
VolumeFlow         = 124.067562982 = m3/hr
StdLiqVolumeFlow   = 6.10111441902 = m3/hr
H                  = 10552.7398362 = kJ/kmol
Energy             = 293131.662116 = W
MolecularWeight    = 20.0850922425 = 
ZFactor            = 0.953027514775 = 
NITROGEN           = 0.094 = 
WATER              = 0.0 = 
METHANE            = 0.784 = 
ETHANE             = 0.06 = 
PROPANE            = 0.036 = 
ISOBUTANE          = 0.005 = 
CARBON DIOXIDE     = 0.002 = 
HYDROGEN SULFIDE   = 0.0 = 
n-BUTANE           = 0.019 = 

>> Hydrate.HydrateTemp
Port: /Hydrate.HydrateTemp + sim.solver.Ports.Port_Signal
Connected to: None
T   = 8.96209019106 = C

>> 
>> copy /Feed /Out /Hydrate
Copied /Feed /Out /Hydrate to the clipboard
>> paste /
Pasting /Feed /Out /Hydrate
Pasted /Feed /Out /Hydrate as /FeedClone /OutClone /HydrateClone
>> FeedClone.In
Port: /FeedClone.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 40.0 * C
P                  = 2000.0 * kPa
MoleFlow           = 100.0 * kgmole/h
MassFlow           = 2008.509228 = kg/h
VolumeFlow         = 124.067562982 = m3/hr
StdLiqVolumeFlow   = 6.10111441902 = m3/hr
H                  = 10552.7398362 = kJ/kmol
Energy             = 293131.662116 = W
MolecularWeight    = 20.0850922425 = 
ZFactor            = 0.953027514775 = 
NITROGEN           = 0.094 * 
WATER              = 0.0 * 
METHANE            = 0.784 * 
ETHANE             = 0.06 * 
PROPANE            = 0.036 * 
ISOBUTANE          = 0.005 * 
CARBON DIOXIDE     = 0.002 * 
HYDROGEN SULFIDE   = 0.0 * 
n-BUTANE           = 0.019 * 

>> OutClone.Out
Port: /OutClone.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 40.0 = C
P                  = 2000.0 = kPa
MoleFlow           = 100.0 = kgmole/h
MassFlow           = 2008.509228 = kg/h
VolumeFlow         = 124.067562982 = m3/hr
StdLiqVolumeFlow   = 6.10111441902 = m3/hr
H                  = 10552.7398362 = kJ/kmol
Energy             = 293131.662116 = W
MolecularWeight    = 20.0850922425 = 
ZFactor            = 0.953027514775 = 
NITROGEN           = 0.094 = 
WATER              = 0.0 = 
METHANE            = 0.784 = 
ETHANE             = 0.06 = 
PROPANE            = 0.036 = 
ISOBUTANE          = 0.005 = 
CARBON DIOXIDE     = 0.002 = 
HYDROGEN SULFIDE   = 0.0 = 
n-BUTANE           = 0.019 = 

>> HydrateClone.HydrateTemp
Port: /HydrateClone.HydrateTemp + sim.solver.Ports.Port_Signal
Connected to: None
T   = 8.96209019106 = C

>> 
>> clear
>> read ejector.tst
Processing ejector.tst
>> units PureSI
>> 
>> $th = VirtualMaterials.Peng-Robinson
>> / -> $th
Thermo case attached to a unit operation. / to /th
>> th + WATER
WATER 
>> 
>> ejector = Ejector.EjectorOp()
>> 
>> 
>> cd /ejector.Process
/ejector.Process
>> P = 20270.58558 Pa
>> T = 333.3333336 K
>> Fraction = 1.0
>> MoleFlow = 4.5359244127 kgmole/h
>> 
>> cd /ejector.Motive
/ejector.Motive
>> P = 689475.7 Pa
>> T = 333.3333336 K
>> Fraction = 1.0
>> MoleFlow = 45.359244127 kgmole/h
>> 
>> cd /ejector.Discharge
/ejector.Discharge
>> #P = 81107.4142866 Pa
>> #T = 333.3333354 K
>> #Fraction = 1.0
>> #MoleFlow = 49.8951685397 kgmole/h
>> 
>> cd /
/
>> ejector.NozzleDiameter = 0.48639
>> ejector.ThroatDiameter = 1.613175
Calculating Jacobian for /ejector
/ejector Iteration 1 Max Error 0.000044
Calculating Jacobian for /ejector
Converged /ejector in 2 iterations
>> 
>> 
>> ejector.Process
Port: /ejector.Process + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 333.3333336 * K
P                  = 20270.58558 * Pa
MoleFlow           = 4.5359244127 * kgmole/h
MassFlow           = 81.7159483536 = kg/h
VolumeFlow         = 2.74763398572e-005 = m3/s
StdLiqVolumeFlow   = 2.27203980086e-005 = m3/s
H                  = -31821795.5497 = J/kmol
Energy             = -40094.7942471 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.000159497077139 = 
WATER              = 1.0 * 

>> ejector.Motive
Port: /ejector.Motive + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 333.3333336 * K
P                  = 689475.7 * Pa
MoleFlow           = 45.359244127 * kgmole/h
MassFlow           = 817.159483536 = kg/h
VolumeFlow         = 0.00027472892395 = m3/s
StdLiqVolumeFlow   = 0.000227203980086 = m3/s
H                  = -31811168.5804 = J/kmol
Energy             = -400814.04489 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00542438996622 = 
WATER              = 1.0 * 

>> ejector.Discharge
Port: /ejector.Discharge + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 333.449755192 = K
P                  = 81107.2733997 = Pa
MoleFlow           = 49.8951685397 = kgmole/h
MassFlow           = 898.87543189 = kg/h
VolumeFlow         = 0.000302261343149 = m3/s
StdLiqVolumeFlow   = 0.000249924378095 = m3/s
H                  = -31812134.6685 = J/kmol
Energy             = -440908.839137 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.000638007261545 = 
WATER              = 1.0 = 

>> ejector.NozzleDiameter
Port: /ejector.NozzleDiameter + sim.solver.Ports.Port_Signal
Connected to: None
Length   = 0.48639 * m

>> ejector.ThroatDiameter
Port: /ejector.ThroatDiameter + sim.solver.Ports.Port_Signal
Connected to: None
Length   = 1.613175 * m

>> 
>> ejector.NozzleDiameter = None
>> ejector.Discharge.P = 81107.2733997
Converged /ejector in 0 iterations
>> ejector.Process
Port: /ejector.Process + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 333.3333336 * K
P                  = 20270.58558 * Pa
MoleFlow           = 4.5359244127 * kgmole/h
MassFlow           = 81.7159483536 = kg/h
VolumeFlow         = 2.74763398572e-005 = m3/s
StdLiqVolumeFlow   = 2.27203980086e-005 = m3/s
H                  = -31821795.5497 = J/kmol
Energy             = -40094.7942471 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.000159497077139 = 
WATER              = 1.0 * 

>> ejector.Motive
Port: /ejector.Motive + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 333.3333336 * K
P                  = 689475.7 * Pa
MoleFlow           = 45.359244127 * kgmole/h
MassFlow           = 817.159483536 = kg/h
VolumeFlow         = 0.00027472892395 = m3/s
StdLiqVolumeFlow   = 0.000227203980086 = m3/s
H                  = -31811168.5804 = J/kmol
Energy             = -400814.04489 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00542438996622 = 
WATER              = 1.0 * 

>> ejector.Discharge
Port: /ejector.Discharge + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 333.449755192 = K
P                  = 81107.2733997 * Pa
MoleFlow           = 49.8951685397 = kgmole/h
MassFlow           = 898.87543189 = kg/h
VolumeFlow         = 0.00030226134315 = m3/s
StdLiqVolumeFlow   = 0.000249924378095 = m3/s
H                  = -31812134.6685 = J/kmol
Energy             = -440908.839137 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.000638007261548 = 
WATER              = 1.0 = 

>> ejector.NozzleDiameter
Port: /ejector.NozzleDiameter + sim.solver.Ports.Port_Signal
Connected to: None
Length   = 0.48639 = m

>> ejector.ThroatDiameter
Port: /ejector.ThroatDiameter + sim.solver.Ports.Port_Signal
Connected to: None
Length   = 1.613175 * m

>> 
>> copy /ejector
Copied /ejector to the clipboard
>> paste /
Pasting /ejector
Pasted /ejector as /ejectorClone
Converged /ejectorClone in 0 iterations
>> ejectorClone.Process
Port: /ejectorClone.Process + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 333.3333336 * K
P                  = 20270.58558 * Pa
MoleFlow           = 4.5359244127 * kgmole/h
MassFlow           = 81.7159483536 = kg/h
VolumeFlow         = 2.74763398572e-005 = m3/s
StdLiqVolumeFlow   = 2.27203980086e-005 = m3/s
H                  = -31821795.5497 = J/kmol
Energy             = -40094.7942471 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.000159497077139 = 
WATER              = 1.0 * 

>> ejectorClone.Motive
Port: /ejectorClone.Motive + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 333.3333336 * K
P                  = 689475.7 * Pa
MoleFlow           = 45.359244127 * kgmole/h
MassFlow           = 817.159483536 = kg/h
VolumeFlow         = 0.00027472892395 = m3/s
StdLiqVolumeFlow   = 0.000227203980086 = m3/s
H                  = -31811168.5804 = J/kmol
Energy             = -400814.04489 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00542438996622 = 
WATER              = 1.0 * 

>> ejectorClone.Discharge
Port: /ejectorClone.Discharge + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 333.449755192 = K
P                  = 81107.2733997 * Pa
MoleFlow           = 49.8951685397 = kgmole/h
MassFlow           = 898.87543189 = kg/h
VolumeFlow         = 0.00030226134315 = m3/s
StdLiqVolumeFlow   = 0.000249924378095 = m3/s
H                  = -31812134.6685 = J/kmol
Energy             = -440908.839137 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.000638007261548 = 
WATER              = 1.0 = 

>> ejectorClone.NozzleDiameter
Port: /ejectorClone.NozzleDiameter + sim.solver.Ports.Port_Signal
Connected to: None
Length   = 0.48639 = m

>> ejectorClone.ThroatDiameter
Port: /ejectorClone.ThroatDiameter + sim.solver.Ports.Port_Signal
Connected to: None
Length   = 1.613175 * m

>> 
>> clear
>> read pipesegment.tst
Processing pipesegment.tst
>> clear
>> 
>> $th = VirtualMaterials.Advanced_Peng-Robinson
>> / -> $th
Thermo case attached to a unit operation. / to /th
>> th + WATER
WATER 
>> 
>> pipe = PipeSegment.PipeSegment()
>> 
>> 
>> cd /pipe.In
/pipe.In
>> P = 300 kPa
>> T = 300.0 K
>> Fraction = 1.0
>> MoleFlow = 1000.0
>> 
>> cd /pipe.Out
/pipe.Out
>> #P = 200.0
>> #T = 300.0
>> 
>> 
>> cd /
/
>> pipe.Diameter = 0.1
>> pipe.Length = 20.0
>> pipe.Roughness = 0.0001
>> pipe.Elevation0 = 0.0
>> pipe.Elevation1 = 0.0
>> pipe.OutQ = 0
SolveMode_OutP ('/pipe',)
SolvingSection (1, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 1 iterations
SolvingSection (2, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 1 iterations
>> 
>> 
>> pipe.In
Port: /pipe.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 26.85 * C
P                  = 300.0 * kPa
MoleFlow           = 1000.0 * kgmole/h
MassFlow           = 18015.28 = kg/h
VolumeFlow         = 18.0930007273 = m3/hr
StdLiqVolumeFlow   = 18.0323624005 = m3/hr
H                  = -34353.0182837 = kJ/kmol
Energy             = -9542505.0788 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00256147143709 = 
WATER              = 1.0 * 

>> pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 26.8502007484 = C
P                  = 299.070401883 = kPa
MoleFlow           = 1000.0 = kgmole/h
MassFlow           = 18015.28 = kg/h
VolumeFlow         = 18.0930041949 = m3/hr
StdLiqVolumeFlow   = 18.0323624005 = m3/hr
H                  = -34353.0188525 = kJ/kmol
Energy             = -9542505.2368 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00255353324312 = 
WATER              = 1.0 = 

>> 
>> #Calculate flow
>> pipe.In.MoleFlow =
>> pipe.Out.P = 280 kPa
Calculating Jacobian for /pipe
/pipe Iteration 1 Max Error 0.026581
Calculating Jacobian for /pipe
/pipe Iteration 2 Max Error 0.019159
Calculating Jacobian for /pipe
/pipe Iteration 3 Max Error 0.001669
Calculating Jacobian for /pipe
/pipe Iteration 4 Max Error 0.000019
Calculating Jacobian for /pipe
Converged /pipe in 5 iterations
>> pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 26.854468441 = C
P                  = 280.0 * kPa
MoleFlow           = 4898.66186718 = kgmole/h
MassFlow           = 88250.7651626 = kg/h
VolumeFlow         = 88.6318626018 = m3/hr
StdLiqVolumeFlow   = 88.3344460664 = m3/hr
H                  = -34353.0182844 = kJ/kmol
Energy             = -46745505.7479 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00239068429646 = 
WATER              = 1.0 = 

>> 
>> #Calculate from deltaP
>> pipe.Out.P =
>> pipe.DeltaP = 10
Calculating Jacobian for /pipe
/pipe Iteration 1 Max Error 0.002150
Calculating Jacobian for /pipe
/pipe Iteration 2 Max Error 0.000059
Calculating Jacobian for /pipe
Converged /pipe in 3 iterations
>> pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 26.8522392273 = C
P                  = 290.0 = kPa
MoleFlow           = 3437.80288689 = kgmole/h
MassFlow           = 61932.981592 = kg/h
VolumeFlow         = 62.2002999691 = m3/hr
StdLiqVolumeFlow   = 61.9917075177 = m3/hr
H                  = -34353.0182839 = kJ/kmol
Energy             = -32805251.5082 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00247607743214 = 
WATER              = 1.0 = 

>> 
>> #Back to 
>> pipe.In.P =
>> pipe.Out.P = 270
Calculating Jacobian for /pipe
Converged /pipe in 1 iterations
>> pipe.In
Port: /pipe.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 26.85 * C
P                  = 280.0 = kPa
MoleFlow           = 3437.795244 = kgmole/h
MassFlow           = 61932.8439034 = kg/h
VolumeFlow         = 62.2002041102 = m3/hr
StdLiqVolumeFlow   = 61.9915696985 = m3/hr
H                  = -34353.3587441 = kJ/kmol
Energy             = -32805503.6961 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00239071286537 = 
WATER              = 1.0 * 

>> pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 26.8522392273 = C
P                  = 270.0 * kPa
MoleFlow           = 3437.795244 = kgmole/h
MassFlow           = 61932.8439034 = kg/h
VolumeFlow         = 62.200334141 = m3/hr
StdLiqVolumeFlow   = 61.9915696985 = m3/hr
H                  = -34353.3587436 = kJ/kmol
Energy             = -32805503.6957 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00230531944768 = 
WATER              = 1.0 = 

>> 
>> #Negative deltaP -> Negative flow calc
>> pipe.DeltaP = -10
Calculating Jacobian for /pipe
/pipe Iteration 1 Max Error 0.019210
Calculating Jacobian for /pipe
/pipe Iteration 2 Max Error 0.008955
Calculating Jacobian for /pipe
/pipe Iteration 3 Max Error 0.002119
Calculating Jacobian for /pipe
/pipe Iteration 4 Max Error 0.000028
Calculating Jacobian for /pipe
Converged /pipe in 5 iterations
>> pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 26.8477688789 = C
P                  = 270.0 * kPa
MoleFlow           = -3437.78710596 = kgmole/h
MassFlow           = -61932.6972943 = kg/h
VolumeFlow         = -62.2000995491 = m3/hr
StdLiqVolumeFlow   = -61.9914229504 = m3/hr
H                  = -34353.6990038 = kJ/kmol
Energy             = 32805750.966 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00230534700842 = 
WATER              = 1.0 = 

>> 
>> #Calculate with negative flow
>> pipe.DeltaP.DP =
>> pipe.Out.P =
>> pipe.In.P = 300 kPa
>> pipe.In.MoleFlow = -5000.0
SolveMode_OutP ('/pipe',)
SolvingSection (1, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000023
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
SolvingSection (2, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000023
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
>> pipe.In
Port: /pipe.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 26.85 * C
P                  = 300.0 * kPa
MoleFlow           = -5000.0 * kgmole/h
MassFlow           = -90076.4 = kg/h
VolumeFlow         = -90.4650036364 = m3/hr
StdLiqVolumeFlow   = -90.1618120024 = m3/hr
H                  = -34353.0182837 = kJ/kmol
Energy             = 47712525.394 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00256147143709 = 
WATER              = 1.0 * 

>> pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 26.8453370094 = C
P                  = 320.820466984 = kPa
MoleFlow           = -5000.0 = kgmole/h
MassFlow           = -90076.4 = kg/h
VolumeFlow         = -90.4646108427 = m3/hr
StdLiqVolumeFlow   = -90.1618120024 = m3/hr
H                  = -34353.0181341 = kJ/kmol
Energy             = 47712525.1862 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00273926833291 = 
WATER              = 1.0 = 

>> 
>> #Play with elevation now
>> pipe.In.MoleFlow = 9000.0
SolveMode_OutP ('/pipe',)
SolvingSection (1, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000095
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
SolvingSection (2, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000107
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
>> pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 26.8648634911 = C
P                  = 233.656970834 = kPa
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = 162.839267535 = m3/hr
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -34353.0169521 = kJ/kmol
Energy             = -85882542.3802 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00199495674802 = 
WATER              = 1.0 = 

>> pipe.Elevation1 = 10
SolveMode_OutP ('/pipe',)
SolvingSection (1, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000075
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
SolvingSection (2, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000103
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
>> pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 26.8633376122 = C
P                  = 135.978777245 = kPa
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = 162.841446677 = m3/hr
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -34354.7854315 = kJ/kmol
Energy             = -85886963.5788 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00116100282061 = 
WATER              = 1.0 = 

>> pipe.Elevation0 = 10
SolveMode_OutP ('/pipe',)
SolvingSection (1, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000095
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
SolvingSection (2, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000107
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
>> pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 26.8648634911 = C
P                  = 233.656970834 = kPa
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = 162.839267535 = m3/hr
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -34353.0169521 = kJ/kmol
Energy             = -85882542.3802 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00199495674802 = 
WATER              = 1.0 = 

>> pipe.Elevation0 = 20
SolveMode_OutP ('/pipe',)
SolvingSection (1, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000115
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
SolvingSection (2, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000110
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
>> pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 26.866222477 = C
P                  = 331.33643688 = kPa
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = 162.837131395 = m3/hr
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -34351.2514137 = kJ/kmol
Energy             = -85878128.5342 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00282889521551 = 
WATER              = 1.0 = 

>> 
>> 
>> #Play with roughness
>> pipe.Elevation1 = 0
SolveMode_OutP ('/pipe',)
SolvingSection (1, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000134
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
SolvingSection (2, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000112
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
>> pipe.Elevation0 = 0
SolveMode_OutP ('/pipe',)
SolvingSection (1, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000095
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
SolvingSection (2, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000107
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
>> pipe.Roughness = 0.0001
>> pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 26.8648634911 = C
P                  = 233.656970834 = kPa
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = 162.839267535 = m3/hr
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -34353.0169521 = kJ/kmol
Energy             = -85882542.3802 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00199495674802 = 
WATER              = 1.0 = 

>> pipe.Roughness = 0.000001
SolveMode_OutP ('/pipe',)
SolvingSection (1, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000231
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
SolvingSection (2, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000248
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
>> pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 26.8593560219 = C
P                  = 258.201362119 = kPa
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = 162.838428918 = m3/hr
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -34353.0184042 = kJ/kmol
Energy             = -85882546.0105 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00220454150075 = 
WATER              = 1.0 = 

>> pipe.Roughness = 0.0
SolveMode_OutP ('/pipe',)
SolvingSection (1, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000236
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
SolvingSection (2, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000253
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
>> pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 26.8592487335 = C
P                  = 258.777136765 = kPa
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = 162.838410394 = m3/hr
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -34353.0167679 = kJ/kmol
Energy             = -85882541.9196 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00220945797397 = 
WATER              = 1.0 = 

>> 
>> 
>> #ignore kinetic and potential energy calcs
>> /pipe.In.T = 
>> /pipe.In.P = 
>> /pipe.In.H = -34353.018
>> /pipe.In
Port: /pipe.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = 9000.0 * kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -34353.018 * kJ/kmol
Energy             = -85882545.0 = W
MolecularWeight    = None
ZFactor            = None
WATER              = 1.0 * 

>> /pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
WATER              = 1.0 = 

>> 
>> /pipe.IgnoreKineticAndPotential = 1
>> #The enthalpy should be passed directly from the In to Out
>> /pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -34353.018 = kJ/kmol
Energy             = -85882545.0 = W
MolecularWeight    = None
ZFactor            = None
WATER              = 1.0 = 

>> 
>> #Solve
>> /pipe.In.P = 300
SolveMode_OutP ('/pipe',)
SolvingSection (1, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000236
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
SolvingSection (2, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000253
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
>> 
>> 
>> copy /pipe
Copied /pipe to the clipboard
>> paste /
Pasting /pipe
Pasted /pipe as /pipeClone
>> 
>> /pipeClone.In
Port: /pipeClone.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = 300.0 * kPa
MoleFlow           = 9000.0 * kgmole/h
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = -34353.018 * kJ/kmol
Energy             = None
MolecularWeight    = None
ZFactor            = None
WATER              = 1.0 * 

>> /pipeClone.Out
Port: /pipeClone.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
WATER              = None

>> 
>> 
>> #Resolve
>> /pipe.In.H = 
>> /pipe.In.T = 90
SolveMode_OutP ('/pipe',)
SolvingSection (1, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000055
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
SolvingSection (2, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000059
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
>> /pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 90.0070677757 = C
P                  = 264.128254153 = kPa
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = 167.938839966 = m3/hr
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -29533.5192979 = kJ/kmol
Energy             = -73833798.2446 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.0019544104885 = 
WATER              = 1.0 = 

>> 
>> 
>> 
>> #Get rid of this
>> IgnoreKineticAndPotential = 0
SolveMode_OutP ('/pipeClone',)
SolvingSection (1, '/pipeClone')
Calculating Jacobian for /pipeClone.SolveForOutP
/pipeClone.SolveForOutP Iteration 1 Max Error 0.000236
Calculating Jacobian for /pipeClone.SolveForOutP
Converged /pipeClone.SolveForOutP in 2 iterations
SolvingSection (2, '/pipeClone')
Calculating Jacobian for /pipeClone.SolveForOutP
/pipeClone.SolveForOutP Iteration 1 Max Error 0.000253
Calculating Jacobian for /pipeClone.SolveForOutP
Converged /pipeClone.SolveForOutP in 2 iterations
SolveMode_OutP ('/pipe',)
SolvingSection (1, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000055
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
SolvingSection (2, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.000059
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
>> 
>> 
>> #Remove energy
>> /pipe.OutQ.Energy = 1.0e7
SolveMode_OutP ('/pipe',)
SolvingSection (1, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.838020
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
SolvingSection (2, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 1.624718
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
>> /pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 37.6404176712 = C
P                  = 263.220302759 = kPa
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = 163.444288095 = m3/hr
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -33533.5184867 = kJ/kmol
Energy             = -83833798.2446 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00218525842441 = 
WATER              = 1.0 = 

>> /pipe.Energy
[ 5000000.  5000000.]
>> /pipe.T
[ 363.15001059  337.06034231  310.79041767]
>> 
>> 
>> #Solve with T out as a spec
>> /pipe.In.MoleFlow = 
>> /pipe.Out.T = 38
Calculating Jacobian for /pipe
/pipe Iteration 1 Max Error 4.997442
Calculating Jacobian for /pipe
/pipe Iteration 2 Max Error 4.981772
Calculating Jacobian for /pipe
/pipe Iteration 3 Max Error 4.963255
Calculating Jacobian for /pipe
/pipe Iteration 4 Max Error 4.665998
Calculating Jacobian for /pipe
/pipe Iteration 5 Max Error 3.575708
Calculating Jacobian for /pipe
Could not converge /pipe after 6 iterations
>> /pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = 38.0 * C
P                  = None
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
WATER              = 1.0 = 

>> 
>> 
>> #Did not work, solve with other numerical method
>> /pipe.SolutionMethod = Secant
Calculating Jacobian for /pipe
Calculating disturbance 10 of 12 in jacobian of /pipe
/pipe Iteration 1 Max Error 0.063546
Calculating Jacobian for /pipe
Calculating disturbance 10 of 12 in jacobian of /pipe
/pipe Iteration 2 Max Error 0.001265
Calculating Jacobian for /pipe
Calculating disturbance 10 of 12 in jacobian of /pipe
Converged /pipe in 3 iterations
>> /pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 38.0 * C
P                  = 262.771333321 = kPa
MoleFlow           = 9061.8974953 = kgmole/h
MassFlow           = 163252.620709 = kg/h
VolumeFlow         = 164.590615334 = m3/hr
StdLiqVolumeFlow   = 163.407419671 = m3/hr
H                  = -33506.1971479 = kJ/kmol
Energy             = -84341590.0031 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00217955120949 = 
WATER              = 1.0 = 

>> /pipe.Energy
[ 5000000.  5000000.]
>> /pipe.T
[ 363.15001059  337.23939466  311.14996481]
>> 
>> 
>> #Worked, now try again newton raphson but don't minimize error
>> /pipe.SolutionMethod = NewtonRaphson
Converged /pipe in 0 iterations
>> /pipe.MinimizeError = 0
Converged /pipe in 0 iterations
>> /pipe.TryLastConverged = 0
Calculating Jacobian for /pipe
/pipe Iteration 1 Max Error 0.063541
Calculating Jacobian for /pipe
/pipe Iteration 2 Max Error 0.028002
Calculating Jacobian for /pipe
/pipe Iteration 3 Max Error 0.005392
Calculating Jacobian for /pipe
/pipe Iteration 4 Max Error 0.060221
Calculating Jacobian for /pipe
/pipe Iteration 5 Max Error 0.001387
Calculating Jacobian for /pipe
/pipe Iteration 6 Max Error 0.001362
Calculating Jacobian for /pipe
/pipe Iteration 7 Max Error 0.001331
Calculating Jacobian for /pipe
/pipe Iteration 8 Max Error 0.001299
Calculating Jacobian for /pipe
/pipe Iteration 9 Max Error 0.000180
Calculating Jacobian for /pipe
/pipe Iteration 10 Max Error 0.000118
Calculating Jacobian for /pipe
/pipe Iteration 11 Max Error 0.000072
Calculating Jacobian for /pipe
Converged /pipe in 12 iterations
>> /pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 38.0 * C
P                  = 262.770202148 = kPa
MoleFlow           = 9062.0763367 = kgmole/h
MassFlow           = 163255.842587 = kg/h
VolumeFlow         = 164.593927201 = m3/hr
StdLiqVolumeFlow   = 163.410644604 = m3/hr
H                  = -33506.119962 = kJ/kmol
Energy             = -84343060.234 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00217953618958 = 
WATER              = 1.0 = 

>> /pipe.Energy
[ 5000000.  5000000.]
>> /pipe.T
[ 363.15001059  337.23989534  311.15099001]
>> 
>> 
>> #Different solve scheme
>> /pipe.In.T = 
>> /pipe.In.MoleFlow = 9000
Calculating Jacobian for /pipe
/pipe Iteration 1 Max Error 14.635793
Calculating Jacobian for /pipe
/pipe Iteration 2 Max Error 21.205624
Calculating Jacobian for /pipe
/pipe Iteration 3 Max Error 2.348188
Calculating Jacobian for /pipe
/pipe Iteration 4 Max Error 1.164603
Calculating Jacobian for /pipe
/pipe Iteration 5 Max Error 0.002102
Calculating Jacobian for /pipe
/pipe Iteration 6 Max Error 0.001322
Calculating Jacobian for /pipe
/pipe Iteration 7 Max Error 0.001285
Calculating Jacobian for /pipe
/pipe Iteration 8 Max Error 0.000239
Calculating Jacobian for /pipe
/pipe Iteration 9 Max Error 0.000050
Calculating Jacobian for /pipe
/pipe Iteration 10 Max Error 0.000041
Calculating Jacobian for /pipe
Converged /pipe in 11 iterations
>> /pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 38.0 * C
P                  = 263.251846691 = kPa
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = 163.466348674 = m3/hr
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -33506.2070821 = kJ/kmol
Energy             = -83765517.7053 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00218353797964 = 
WATER              = 1.0 = 

>> /pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 38.0 * C
P                  = 263.251846691 = kPa
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = 163.466348674 = m3/hr
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -33506.2070821 = kJ/kmol
Energy             = -83765517.7053 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00218353797964 = 
WATER              = 1.0 = 

>> /pipe.Energy
[ 5000000.  5000000.]
>> /pipe.T
[ 363.50437212  337.41823244  311.14972639]
>> 
>> 
>> #Flip specs around
>> /pipe.In.P = 
>> /pipe.Out.T = 
>> /pipe.Out.P = 150
>> /pipe.In.T = 90
Calculating Jacobian for /pipe
/pipe Iteration 1 Max Error 3.191207
Calculating Jacobian for /pipe
/pipe Iteration 2 Max Error 2.026415
Calculating Jacobian for /pipe
/pipe Iteration 3 Max Error 0.243188
Calculating Jacobian for /pipe
/pipe Iteration 4 Max Error 0.052885
Calculating Jacobian for /pipe
/pipe Iteration 5 Max Error 0.001869
Calculating Jacobian for /pipe
/pipe Iteration 6 Max Error 0.001187
Calculating Jacobian for /pipe
/pipe Iteration 7 Max Error 0.001152
Calculating Jacobian for /pipe
/pipe Iteration 8 Max Error 0.000181
Calculating Jacobian for /pipe
/pipe Iteration 9 Max Error 0.000160
Calculating Jacobian for /pipe
/pipe Iteration 10 Max Error 0.000073
Calculating Jacobian for /pipe
/pipe Iteration 11 Max Error 0.000022
Calculating Jacobian for /pipe
Converged /pipe in 12 iterations
>> /pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 37.6427422523 = C
P                  = 150.0 * kPa
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = 163.447301107 = m3/hr
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -33535.2338038 = kJ/kmol
Energy             = -83838084.5094 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00124531517611 = 
WATER              = 1.0 = 

>> /pipe.Energy
[ 5000000.  5000000.]
>> /pipe.T
[ 363.15003443  337.06167746  310.79274225]
>> /pipe.u
[ 3.13018396  6.81122905]
>> 
>> 
>> #Change energy model
>> /pipe.EnergyLossModel = LinearTemperature
Calculating Jacobian for /pipe
/pipe Iteration 1 Max Error 3.191207
Calculating Jacobian for /pipe
/pipe Iteration 2 Max Error 2.026273
Calculating Jacobian for /pipe
/pipe Iteration 3 Max Error 0.242018
Calculating Jacobian for /pipe
/pipe Iteration 4 Max Error 0.051399
Calculating Jacobian for /pipe
/pipe Iteration 5 Max Error 0.001209
Calculating Jacobian for /pipe
/pipe Iteration 6 Max Error 0.003179
Calculating Jacobian for /pipe
/pipe Iteration 7 Max Error 0.002017
Calculating Jacobian for /pipe
/pipe Iteration 8 Max Error 0.000081
Calculating Jacobian for /pipe
/pipe Iteration 9 Max Error 0.000030
Calculating Jacobian for /pipe
/pipe Iteration 10 Max Error 0.000033
Calculating Jacobian for /pipe
/pipe Iteration 11 Max Error 0.000017
Calculating Jacobian for /pipe
/pipe Iteration 12 Max Error 0.000016
Calculating Jacobian for /pipe
/pipe Iteration 13 Max Error 0.000015
Calculating Jacobian for /pipe
/pipe Iteration 14 Max Error 0.000015
Calculating Jacobian for /pipe
/pipe Iteration 15 Max Error 0.000013
Calculating Jacobian for /pipe
/pipe Iteration 16 Max Error 0.000025
Calculating Jacobian for /pipe
Converged /pipe in 17 iterations
>> 
>> #Didn't finish. Add iterations
>> /pipe.MaxNumIterations = 50
Calculating Jacobian for /pipe
/pipe Iteration 1 Max Error 3.191207
Calculating Jacobian for /pipe
/pipe Iteration 2 Max Error 2.026273
Calculating Jacobian for /pipe
/pipe Iteration 3 Max Error 0.242018
Calculating Jacobian for /pipe
/pipe Iteration 4 Max Error 0.051399
Calculating Jacobian for /pipe
/pipe Iteration 5 Max Error 0.001209
Calculating Jacobian for /pipe
/pipe Iteration 6 Max Error 0.003179
Calculating Jacobian for /pipe
/pipe Iteration 7 Max Error 0.002017
Calculating Jacobian for /pipe
/pipe Iteration 8 Max Error 0.000081
Calculating Jacobian for /pipe
/pipe Iteration 9 Max Error 0.000030
Calculating Jacobian for /pipe
/pipe Iteration 10 Max Error 0.000033
Calculating Jacobian for /pipe
/pipe Iteration 11 Max Error 0.000017
Calculating Jacobian for /pipe
/pipe Iteration 12 Max Error 0.000016
Calculating Jacobian for /pipe
/pipe Iteration 13 Max Error 0.000015
Calculating Jacobian for /pipe
/pipe Iteration 14 Max Error 0.000015
Calculating Jacobian for /pipe
/pipe Iteration 15 Max Error 0.000013
Calculating Jacobian for /pipe
/pipe Iteration 16 Max Error 0.000025
Calculating Jacobian for /pipe
Converged /pipe in 17 iterations
>> /pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 37.6436005592 = C
P                  = 150.0 * kPa
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = 163.447353689 = m3/hr
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -33535.1690083 = kJ/kmol
Energy             = -83837922.5206 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00124531247436 = 
WATER              = 1.0 = 

>> /pipe.Energy
[ 5017227.67188302  4982772.32811698]
>> /pipe.T
[ 363.15086889  336.97222281  310.79360056]
>> 
>> 
>> #add sections
>> NumberSections = 5
SolveMode_OutP ('/pipeClone',)
SolvingSection (1, '/pipeClone')
Calculating Jacobian for /pipeClone.SolveForOutP
/pipeClone.SolveForOutP Iteration 1 Max Error 0.000236
Calculating Jacobian for /pipeClone.SolveForOutP
Converged /pipeClone.SolveForOutP in 2 iterations
SolvingSection (2, '/pipeClone')
Calculating Jacobian for /pipeClone.SolveForOutP
/pipeClone.SolveForOutP Iteration 1 Max Error 0.000253
Calculating Jacobian for /pipeClone.SolveForOutP
Converged /pipeClone.SolveForOutP in 2 iterations
Calculating Jacobian for /pipe
/pipe Iteration 1 Max Error 3.191207
Calculating Jacobian for /pipe
/pipe Iteration 2 Max Error 2.026273
Calculating Jacobian for /pipe
/pipe Iteration 3 Max Error 0.242018
Calculating Jacobian for /pipe
/pipe Iteration 4 Max Error 0.051399
Calculating Jacobian for /pipe
/pipe Iteration 5 Max Error 0.001209
Calculating Jacobian for /pipe
/pipe Iteration 6 Max Error 0.003179
Calculating Jacobian for /pipe
/pipe Iteration 7 Max Error 0.002017
Calculating Jacobian for /pipe
/pipe Iteration 8 Max Error 0.000081
Calculating Jacobian for /pipe
/pipe Iteration 9 Max Error 0.000030
Calculating Jacobian for /pipe
/pipe Iteration 10 Max Error 0.000033
Calculating Jacobian for /pipe
/pipe Iteration 11 Max Error 0.000017
Calculating Jacobian for /pipe
/pipe Iteration 12 Max Error 0.000016
Calculating Jacobian for /pipe
/pipe Iteration 13 Max Error 0.000015
Calculating Jacobian for /pipe
/pipe Iteration 14 Max Error 0.000015
Calculating Jacobian for /pipe
/pipe Iteration 15 Max Error 0.000013
Calculating Jacobian for /pipe
/pipe Iteration 16 Max Error 0.000025
Calculating Jacobian for /pipe
Converged /pipe in 17 iterations
>> /pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 37.6436005592 = C
P                  = 150.0 * kPa
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = 163.447353689 = m3/hr
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -33535.1690083 = kJ/kmol
Energy             = -83837922.5206 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00124531247436 = 
WATER              = 1.0 = 

>> /pipe.Energy
[ 5017227.67188302  4982772.32811698]
>> /pipe.T
[ 363.15086889  336.97222281  310.79360056]
>> 
>> 
>> #all u are equal
>> /pipe.EnergyLossModel = EqualU
Calculating Jacobian for /pipe
/pipe Iteration 1 Max Error 3.191207
Calculating Jacobian for /pipe
/pipe Iteration 2 Max Error 1.504201
Calculating Jacobian for /pipe
/pipe Iteration 3 Max Error 0.537135
Calculating Jacobian for /pipe
/pipe Iteration 4 Max Error 0.054264
Calculating Jacobian for /pipe
/pipe Iteration 5 Max Error 0.039485
Calculating Jacobian for /pipe
/pipe Iteration 6 Max Error 0.034558
Calculating Jacobian for /pipe
/pipe Iteration 7 Max Error 0.001696
Calculating Jacobian for /pipe
/pipe Iteration 8 Max Error 0.001171
Calculating Jacobian for /pipe
/pipe Iteration 9 Max Error 0.001143
Calculating Jacobian for /pipe
/pipe Iteration 10 Max Error 0.001066
Calculating Jacobian for /pipe
/pipe Iteration 11 Max Error 0.006113
Calculating Jacobian for /pipe
/pipe Iteration 12 Max Error 0.000224
Calculating Jacobian for /pipe
/pipe Iteration 13 Max Error 0.001288
Calculating Jacobian for /pipe
/pipe Iteration 14 Max Error 0.004254
Calculating Jacobian for /pipe
/pipe Iteration 15 Max Error 0.001725
Calculating Jacobian for /pipe
/pipe Iteration 16 Max Error 0.000476
Calculating Jacobian for /pipe
/pipe Iteration 17 Max Error 0.007704
Calculating Jacobian for /pipe
/pipe Iteration 18 Max Error 0.001386
Calculating Jacobian for /pipe
/pipe Iteration 19 Max Error 0.001600
Calculating Jacobian for /pipe
/pipe Iteration 20 Max Error 0.001129
Calculating Jacobian for /pipe
/pipe Iteration 21 Max Error 1.408363
Calculating Jacobian for /pipe
/pipe Iteration 22 Max Error 0.007738
Calculating Jacobian for /pipe
/pipe Iteration 23 Max Error 0.059394
Calculating Jacobian for /pipe
/pipe Iteration 24 Max Error 0.002555
Calculating Jacobian for /pipe
/pipe Iteration 25 Max Error 0.002760
Calculating Jacobian for /pipe
/pipe Iteration 26 Max Error 0.001982
Calculating Jacobian for /pipe
/pipe Iteration 27 Max Error 0.000357
Calculating Jacobian for /pipe
/pipe Iteration 28 Max Error 0.000473
Calculating Jacobian for /pipe
/pipe Iteration 29 Max Error 0.000425
Calculating Jacobian for /pipe
/pipe Iteration 30 Max Error 0.000313
Calculating Jacobian for /pipe
/pipe Iteration 31 Max Error 0.000010
Calculating Jacobian for /pipe
/pipe Iteration 32 Max Error 0.000026
Calculating Jacobian for /pipe
/pipe Iteration 33 Max Error 0.000011
Calculating Jacobian for /pipe
/pipe Iteration 34 Max Error 0.000103
Calculating Jacobian for /pipe
Converged /pipe in 35 iterations
>> /pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 37.6418601036 = C
P                  = 150.0 * kPa
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = 163.447247066 = m3/hr
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -33535.3007924 = kJ/kmol
Energy             = -83838251.981 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00124531795294 = 
WATER              = 1.0 = 

>> /pipe.Energy
[ 6938858.48849749  3061141.51150251]
>> /pipe.T
[ 363.14908075  326.88579369  310.7918601 ]
>> /pipe.u
[ 4.97145499  4.97145499]
>> 
>> #Try secant method
>> /pipe.SolutionMethod = Secant
Calculating Jacobian for /pipe
Calculating disturbance 10 of 12 in jacobian of /pipe
/pipe Iteration 1 Max Error 3.197830
Calculating Jacobian for /pipe
Calculating disturbance 10 of 12 in jacobian of /pipe
/pipe Iteration 2 Max Error 0.447698
Calculating Jacobian for /pipe
Calculating disturbance 10 of 12 in jacobian of /pipe
/pipe Iteration 3 Max Error 0.001688
Calculating Jacobian for /pipe
Calculating disturbance 10 of 12 in jacobian of /pipe
Converged /pipe in 4 iterations
>> /pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 37.6428137779 = C
P                  = 150.0 * kPa
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = 163.447305489 = m3/hr
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -33535.2296727 = kJ/kmol
Energy             = -83838074.1817 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00124531495097 = 
WATER              = 1.0 = 

>> /pipe.Energy
[ 6938793.40362247  3061206.59637753]
>> /pipe.T
[ 363.15001059  326.88706923  310.79281378]
>> /pipe.u
[ 4.97126802  4.97126802]
>> 
>> 
>> #Now solve for energy
>> /pipe.OutQ.Energy = 
>> /pipe.Out.T = 38
Calculating Jacobian for /pipe
Calculating disturbance 10 of 12 in jacobian of /pipe
/pipe Iteration 1 Max Error 0.789860
Calculating Jacobian for /pipe
Calculating disturbance 10 of 12 in jacobian of /pipe
/pipe Iteration 2 Max Error 0.006236
Calculating Jacobian for /pipe
Calculating disturbance 10 of 12 in jacobian of /pipe
Converged /pipe in 3 iterations
>> /pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 38.0 * C
P                  = 150.0 * kPa
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = 163.469246548 = m3/hr
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -33508.0787686 = kJ/kmol
Energy             = -83770196.9214 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00124419216919 = 
WATER              = 1.0 = 

>> /pipe.Energy
[ 6862249.97586305  3069875.01208212]
>> /pipe.T
[ 363.15001059  327.289186    311.15000057]
>> /pipe.u
[ 4.88692081  4.88692081]
>> 
>> 
>> #Change numerical method
>> /pipe.SolutionMethod = NewtonRaphson
Calculating Jacobian for /pipe
/pipe Iteration 1 Max Error 0.784768
Calculating Jacobian for /pipe
/pipe Iteration 2 Max Error 0.133113
Calculating Jacobian for /pipe
/pipe Iteration 3 Max Error 0.002009
Calculating Jacobian for /pipe
/pipe Iteration 4 Max Error 0.001287
Calculating Jacobian for /pipe
/pipe Iteration 5 Max Error 0.001045
Calculating Jacobian for /pipe
/pipe Iteration 6 Max Error 0.000062
Calculating Jacobian for /pipe
Converged /pipe in 7 iterations
>> /pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 38.0 * C
P                  = 150.0 * kPa
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = 163.469246548 = m3/hr
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -33508.0787686 = kJ/kmol
Energy             = -83770196.9214 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00124419216919 = 
WATER              = 1.0 = 

>> 
>> /pipe.EnergyLossModel = LinearTemperature
Calculating Jacobian for /pipe
/pipe Iteration 1 Max Error 0.009424
Calculating Jacobian for /pipe
/pipe Iteration 2 Max Error 0.001325
Calculating Jacobian for /pipe
/pipe Iteration 3 Max Error 0.000847
Calculating Jacobian for /pipe
/pipe Iteration 4 Max Error 0.000035
Calculating Jacobian for /pipe
Converged /pipe in 5 iterations
>> /pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 38.0 * C
P                  = 150.0 * kPa
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = 163.469246548 = m3/hr
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -33508.0787686 = kJ/kmol
Energy             = -83770196.9214 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00124419216919 = 
WATER              = 1.0 = 

>> /pipe.T
[ 363.15002251  337.15001154  311.15000057]
>> 
>> /pipe.EnergyLossModel = LinearEnergy
Calculating Jacobian for /pipe
/pipe Iteration 1 Max Error 0.009559
Calculating Jacobian for /pipe
/pipe Iteration 2 Max Error 0.001325
Calculating Jacobian for /pipe
/pipe Iteration 3 Max Error 0.001083
Calculating Jacobian for /pipe
Converged /pipe in 4 iterations
>> /pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 38.0 * C
P                  = 150.0 * kPa
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = 163.469246548 = m3/hr
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -33508.0787686 = kJ/kmol
Energy             = -83770196.9214 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00124419216919 = 
WATER              = 1.0 = 

>> /pipe.Energy
[ 4965973.82603142  4965973.82603142]
>> 
>> 
>> /pipe.Out.P = 
>> /pipe.In.P = 300
Calculating Jacobian for /pipe
/pipe Iteration 1 Max Error 0.027652
Calculating Jacobian for /pipe
/pipe Iteration 2 Max Error 0.001394
Calculating Jacobian for /pipe
/pipe Iteration 3 Max Error 0.001348
Calculating Jacobian for /pipe
/pipe Iteration 4 Max Error 0.000203
Calculating Jacobian for /pipe
/pipe Iteration 5 Max Error 0.000039
Calculating Jacobian for /pipe
Converged /pipe in 6 iterations
>> /pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 38.0 * C
P                  = 263.234709254 = kPa
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = 163.46637259 = m3/hr
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -33506.1789884 = kJ/kmol
Energy             = -83765447.4711 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00218339373736 = 
WATER              = 1.0 = 

>> 
>> 
>> #Now spec u and change the energy models (nothing should change since u as a spec implies all u equal)
>> /pipe.Out.T = 
>> /pipe.U.U = 4.8846261
Calculating Jacobian for /pipe
/pipe Iteration 1 Max Error 9.890369
Calculating Jacobian for /pipe
/pipe Iteration 2 Max Error 5.913286
Calculating Jacobian for /pipe
/pipe Iteration 3 Max Error 5.843356
Calculating Jacobian for /pipe
/pipe Iteration 4 Max Error 4.695546
Calculating Jacobian for /pipe
/pipe Iteration 5 Max Error 3.321512
Calculating Jacobian for /pipe
/pipe Iteration 6 Max Error 2.422225
Calculating Jacobian for /pipe
/pipe Iteration 7 Max Error 1.470624
Calculating Jacobian for /pipe
/pipe Iteration 8 Max Error 0.932001
Calculating Jacobian for /pipe
/pipe Iteration 9 Max Error 0.551883
Calculating Jacobian for /pipe
/pipe Iteration 10 Max Error 0.332178
Calculating Jacobian for /pipe
/pipe Iteration 11 Max Error 0.194410
Calculating Jacobian for /pipe
/pipe Iteration 12 Max Error 0.114107
Calculating Jacobian for /pipe
/pipe Iteration 13 Max Error 0.066109
Calculating Jacobian for /pipe
/pipe Iteration 14 Max Error 0.038233
Calculating Jacobian for /pipe
/pipe Iteration 15 Max Error 0.021955
Calculating Jacobian for /pipe
/pipe Iteration 16 Max Error 0.012571
Calculating Jacobian for /pipe
/pipe Iteration 17 Max Error 0.007166
Calculating Jacobian for /pipe
/pipe Iteration 18 Max Error 0.004073
Calculating Jacobian for /pipe
/pipe Iteration 19 Max Error 0.002307
Calculating Jacobian for /pipe
/pipe Iteration 20 Max Error 0.001302
Calculating Jacobian for /pipe
/pipe Iteration 21 Max Error 0.000731
Calculating Jacobian for /pipe
/pipe Iteration 22 Max Error 0.000409
Calculating Jacobian for /pipe
/pipe Iteration 23 Max Error 0.000228
Calculating Jacobian for /pipe
/pipe Iteration 24 Max Error 0.000126
Calculating Jacobian for /pipe
/pipe Iteration 25 Max Error 0.000068
Calculating Jacobian for /pipe
/pipe Iteration 26 Max Error 0.000037
Calculating Jacobian for /pipe
/pipe Iteration 27 Max Error 0.000020
Calculating Jacobian for /pipe
Converged /pipe in 28 iterations
>> /pipe.u
[ 4.8846261  4.8846261]
>> /pipe.EnergyLossModel = LinearTemperature
Calculating Jacobian for /pipe
/pipe Iteration 1 Max Error 9.890369
Calculating Jacobian for /pipe
/pipe Iteration 2 Max Error 5.913286
Calculating Jacobian for /pipe
/pipe Iteration 3 Max Error 5.843356
Calculating Jacobian for /pipe
/pipe Iteration 4 Max Error 4.695546
Calculating Jacobian for /pipe
/pipe Iteration 5 Max Error 3.321512
Calculating Jacobian for /pipe
/pipe Iteration 6 Max Error 2.422225
Calculating Jacobian for /pipe
/pipe Iteration 7 Max Error 1.470624
Calculating Jacobian for /pipe
/pipe Iteration 8 Max Error 0.932001
Calculating Jacobian for /pipe
/pipe Iteration 9 Max Error 0.551883
Calculating Jacobian for /pipe
/pipe Iteration 10 Max Error 0.332178
Calculating Jacobian for /pipe
/pipe Iteration 11 Max Error 0.194410
Calculating Jacobian for /pipe
/pipe Iteration 12 Max Error 0.114107
Calculating Jacobian for /pipe
/pipe Iteration 13 Max Error 0.066109
Calculating Jacobian for /pipe
/pipe Iteration 14 Max Error 0.038233
Calculating Jacobian for /pipe
/pipe Iteration 15 Max Error 0.021955
Calculating Jacobian for /pipe
/pipe Iteration 16 Max Error 0.012571
Calculating Jacobian for /pipe
/pipe Iteration 17 Max Error 0.007166
Calculating Jacobian for /pipe
/pipe Iteration 18 Max Error 0.004073
Calculating Jacobian for /pipe
/pipe Iteration 19 Max Error 0.002307
Calculating Jacobian for /pipe
/pipe Iteration 20 Max Error 0.001302
Calculating Jacobian for /pipe
/pipe Iteration 21 Max Error 0.000731
Calculating Jacobian for /pipe
/pipe Iteration 22 Max Error 0.000409
Calculating Jacobian for /pipe
/pipe Iteration 23 Max Error 0.000228
Calculating Jacobian for /pipe
/pipe Iteration 24 Max Error 0.000126
Calculating Jacobian for /pipe
/pipe Iteration 25 Max Error 0.000068
Calculating Jacobian for /pipe
/pipe Iteration 26 Max Error 0.000037
Calculating Jacobian for /pipe
/pipe Iteration 27 Max Error 0.000020
Calculating Jacobian for /pipe
Converged /pipe in 28 iterations
>> /pipe.u
[ 4.8846261  4.8846261]
>> /pipe.EnergyLossModel = LinearEnergy
Calculating Jacobian for /pipe
/pipe Iteration 1 Max Error 9.890369
Calculating Jacobian for /pipe
/pipe Iteration 2 Max Error 5.913286
Calculating Jacobian for /pipe
/pipe Iteration 3 Max Error 5.843356
Calculating Jacobian for /pipe
/pipe Iteration 4 Max Error 4.695546
Calculating Jacobian for /pipe
/pipe Iteration 5 Max Error 3.321512
Calculating Jacobian for /pipe
/pipe Iteration 6 Max Error 2.422225
Calculating Jacobian for /pipe
/pipe Iteration 7 Max Error 1.470624
Calculating Jacobian for /pipe
/pipe Iteration 8 Max Error 0.932001
Calculating Jacobian for /pipe
/pipe Iteration 9 Max Error 0.551883
Calculating Jacobian for /pipe
/pipe Iteration 10 Max Error 0.332178
Calculating Jacobian for /pipe
/pipe Iteration 11 Max Error 0.194410
Calculating Jacobian for /pipe
/pipe Iteration 12 Max Error 0.114107
Calculating Jacobian for /pipe
/pipe Iteration 13 Max Error 0.066109
Calculating Jacobian for /pipe
/pipe Iteration 14 Max Error 0.038233
Calculating Jacobian for /pipe
/pipe Iteration 15 Max Error 0.021955
Calculating Jacobian for /pipe
/pipe Iteration 16 Max Error 0.012571
Calculating Jacobian for /pipe
/pipe Iteration 17 Max Error 0.007166
Calculating Jacobian for /pipe
/pipe Iteration 18 Max Error 0.004073
Calculating Jacobian for /pipe
/pipe Iteration 19 Max Error 0.002307
Calculating Jacobian for /pipe
/pipe Iteration 20 Max Error 0.001302
Calculating Jacobian for /pipe
/pipe Iteration 21 Max Error 0.000731
Calculating Jacobian for /pipe
/pipe Iteration 22 Max Error 0.000409
Calculating Jacobian for /pipe
/pipe Iteration 23 Max Error 0.000228
Calculating Jacobian for /pipe
/pipe Iteration 24 Max Error 0.000126
Calculating Jacobian for /pipe
/pipe Iteration 25 Max Error 0.000068
Calculating Jacobian for /pipe
/pipe Iteration 26 Max Error 0.000037
Calculating Jacobian for /pipe
/pipe Iteration 27 Max Error 0.000020
Calculating Jacobian for /pipe
Converged /pipe in 28 iterations
>> /pipe.u
[ 4.8846261  4.8846261]
>> 
>> 
>> #Back to energy spec but change nergy models
>> /pipe.U.U = 
>> /pipe.OutQ.Energy = 9931444.4
SolveMode_OutP ('/pipe',)
SolvingSection (1, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.823551
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
SolvingSection (2, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 1.583367
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
>> /pipe.Out
Port: /pipe.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 38.0011807442 = C
P                  = 263.234751729 = kPa
MoleFlow           = 9000.0 = kgmole/h
MassFlow           = 162137.52 = kg/h
VolumeFlow         = 163.466438643 = m3/hr
StdLiqVolumeFlow   = 162.291261604 = m3/hr
H                  = -33506.097078 = kJ/kmol
Energy             = -83765242.6446 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.00218338817923 = 
WATER              = 1.0 = 

>> /pipe.Energy
[ 4965722.2  4965722.2]
>> /pipe.T
[ 363.15001059  337.24001455  311.15118074]
>> /pipe.u
[ 3.1022278   6.66956072]
>> 
>> 
>> /pipe.SolutionMethod = Secant
SolveMode_OutP ('/pipe',)
SolvingSection (1, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 0.823551
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
SolvingSection (2, '/pipe')
Calculating Jacobian for /pipe.SolveForOutP
/pipe.SolveForOutP Iteration 1 Max Error 1.583367
Calculating Jacobian for /pipe.SolveForOutP
Converged /pipe.SolveForOutP in 2 iterations
>> /pipe.EnergyLossModel = LinearTemperature
Calculating Jacobian for /pipe
Calculating disturbance 10 of 12 in jacobian of /pipe
/pipe Iteration 1 Max Error 3.155231
Calculating Jacobian for /pipe
Calculating disturbance 10 of 12 in jacobian of /pipe
/pipe Iteration 2 Max Error 0.004512
Calculating Jacobian for /pipe
Calculating disturbance 10 of 12 in jacobian of /pipe
Converged /pipe in 3 iterations
>> /pipe.T
[ 363.15001059  337.1505599   311.15118074]
>> 
>> 
>> /pipe.EnergyLossModel = EqualU
Calculating Jacobian for /pipe
Calculating disturbance 10 of 12 in jacobian of /pipe
/pipe Iteration 1 Max Error 3.155210
Calculating Jacobian for /pipe
Calculating disturbance 10 of 12 in jacobian of /pipe
/pipe Iteration 2 Max Error 0.423551
Calculating Jacobian for /pipe
Calculating disturbance 10 of 12 in jacobian of /pipe
/pipe Iteration 3 Max Error 0.002501
Calculating Jacobian for /pipe
Calculating disturbance 10 of 12 in jacobian of /pipe
Converged /pipe in 4 iterations
>> /pipe.SolutionMethod = NewtonRaphson
Calculating Jacobian for /pipe
/pipe Iteration 1 Max Error 3.155207
Calculating Jacobian for /pipe
/pipe Iteration 2 Max Error 0.793414
Calculating Jacobian for /pipe
/pipe Iteration 3 Max Error 0.041945
Calculating Jacobian for /pipe
/pipe Iteration 4 Max Error 0.002130
Calculating Jacobian for /pipe
/pipe Iteration 5 Max Error 0.000107
Calculating Jacobian for /pipe
Converged /pipe in 6 iterations
>> /pipe.T
[ 363.15001059  327.29044962  311.15127611]
>> /pipe.u
[ 4.88641512  4.88641512]
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> clear
>> read oil.tst
Processing oil.tst
>> #..... VMG Oil Test
>> units Field
>> $thermo = VirtualMaterials.Advanced_Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + PROPANE n-BUTANE ISOBUTANE n-PENTANE
PROPANE n-BUTANE ISOBUTANE n-PENTANE 
>> 
>> #..... Create a crude stream
>> lightCrude = Stream.Stream_Material()
>> 
>> #..... Create an oil case
>> thermo.thOilCase = Oils.OilCase()
>> cd thermo.thOilCase
/thermo.thOilCase
>> 
>> #..... Create an oil
>> Watkins55 = Oils.Oil()
>> 
>> #..... Add several assays
>> Watkins55.Light_Naphtha = Oils.Assay()
>> Watkins55.Heavy_Naphtha = Oils.Assay()
>> Watkins55.Light_Distillate = Oils.Assay()
>> Watkins55.Heavy_Distillate = Oils.Assay()
>> Watkins55.Light = Oils.Assay()
>> 
>> #..... Add some bulk properties
>> Watkins55.Light_Naphtha.MW = Oils.OilParameter('MolecularWeight', 96.0)
>> Watkins55.Heavy_Naphtha.MW = Oils.OilParameter('MolecularWeight', 132.0)
>> Watkins55.Light_Distillate.MW = Oils.OilParameter('MolecularWeight', 190.0)
>> Watkins55.Heavy_Distillate.MW = Oils.OilParameter('MolecularWeight', 254.0)
>> Watkins55.Light.MW = Oils.OilParameter('MolecularWeight', 96.0)
>> 
>> Watkins55.Light_Naphtha.LD60 = Oils.OilParameter('MassDensity')
>> Watkins55.Heavy_Naphtha.LD60 = Oils.OilParameter('MassDensity')
>> Watkins55.Light_Distillate.LD60 = Oils.OilParameter('MassDensity')
>> Watkins55.Heavy_Distillate.LD60 = Oils.OilParameter('MassDensity')
>> Watkins55.Light.LD60 = Oils.OilParameter('MassDensity')
>> 
>> #..... Set the density values using the field units
>> Watkins55.Light_Naphtha.LD60 = 44.4
>> Watkins55.Heavy_Naphtha.LD60 = 48.3
>> Watkins55.Light_Distillate.LD60 = 51.4
>> Watkins55.Heavy_Distillate.LD60 = 53.5
>> Watkins55.Light.LD60 = 44.4
>> 
>> #..... Add the distillation curves to the assay
>> Watkins55.Light_Naphtha.EXPERIMENT = Oils.OilParameter('Generic','TBP')
>> Watkins55.Light_Naphtha.distCurve = Oils.OilExperiment('DistillationCurve')
>> Watkins55.Light_Naphtha.distCurve.Series0 = 0    10   30   50   70   90   100. 
>> Watkins55.Light_Naphtha.distCurve.Series1 = 183. 291. 327. 352. 372. 395. 416.5 K
>> 
>> Watkins55.Heavy_Naphtha.D86 = Oils.OilExperiment('D86')
>> Watkins55.Heavy_Naphtha.EXPERIMENT = Oils.OilParameter('Generic','D86')
>> Watkins55.Heavy_Naphtha.D86.Series0 = 0    10   30   50   70   90   100. 
>> Watkins55.Heavy_Naphtha.D86.Series1 = 404. 413. 422. 729. 437. 452. 467. K
>> 
>> Watkins55.Light_Distillate.D86 = Oils.OilExperiment('D86')
>> Watkins55.Light_Distillate.EXPERIMENT = Oils.OilParameter('Generic','D86')
>> Watkins55.Light_Distillate.D86.Series0 = 0    10   30   50   70   90   100. 
>> Watkins55.Light_Distillate.D86.Series1 = 470. 482. 495. 507. 520. 544. 567. K
>> 
>> Watkins55.Heavy_Distillate.EFV = Oils.OilExperiment('EFV')
>> Watkins55.Heavy_Distillate.EXPERIMENT = Oils.OilParameter('Generic','EFV')
>> Watkins55.Heavy_Distillate.EFV.Series0 = 0    10   30   50   70   90   100.
>> Watkins55.Heavy_Distillate.EFV.Series1 = 583. 586. 593. 597. 600. 606. 610. K
>> 
>> Watkins55.Light.distCurve = Oils.OilExperiment('DistillationCurve')
>> Watkins55.Light.EXPERIMENT = Oils.OilParameter('Generic','TBP')
>> Watkins55.Light.distCurve.Series0 = 0    10   30   50   70   90   100. 
>> Watkins55.Light.distCurve.Series1 = 183. 291. 327. 352. 372. 395. 416.5 K
>> 
>> #..... Add the light ends to the assay
>> Watkins55.Light.TBBASIS = Oils.OilParameter('Generic','VOLUMEPCT')
>> Watkins55.Light.LIGHTENDS = Oils.OilParameter('Generic','YES')
>> Watkins55.Light.LIGHTENDSBASIS = Oils.OilParameter('Generic','MOLEPCT')
>> Watkins55.Light.LightEndComp.CO2 = 3.0
>> Watkins55.Light.LightEndComp.METHANE = 0.1
>> Watkins55.Light.LightEndComp.ETHANE = 0.5
>> Watkins55.Light.LightEndComp.PROPANE = 1.0
>> Watkins55.Light.LightEndComp.n-BUTANE = 1.5
>> Watkins55.Light.LightEndComp.n-PENTANE = 2.0
>> 
>> #..... Test get settings
>> /thermo.thOilCase.CustomCommand + GetBulkPropertyUnitTypes
[0, 'Density;-12321;-12321;Temperature;Pressure;-12321;-12321;-12321;-12321;-12321;-12321;-12321;-12321;-12321;-12321;-12321;-12321;KinematicViscosity;KinematicViscosity;-12321;-12321;-12321;-12321;-12321;-12321;-12321;-12321;-12321;-12321;-12321;-12321;-12321;-12321;-12321;-12321']
>> /thermo.thOilCase.CustomCommand + GetList.EXPERIMENT
[0, 'TBP;D86;D1160;D2887;EFV;CHROMATOGRAPH']
>> /thermo.thOilCase.CustomCommand + GetAssayDefaults
[0, 'LD60:-12321; MW:-12321; UOPK:-12321; ABP:-12321; PRESSURE:101.325; CRACKCORRECTION:NO; FLOWTYPE:STDVOLUME; FLOWVALUE:-12321; EXPERIMENT:TBP; PREFIX:ABP; SUFFIX:K; CONVERSIOND86:EDMISTER; INTERPOLATION:CUBIC; LOWEXTRAPOLATION:CURVE; HIGHEXTRAPOLATION:CURVE; TBBASIS:VOLUMEPCT; NAME:-12321; VISC100:-12321; VISC210:-12321; LIGHTENDS:NO; LIGHTENDSBASIS:VOLUMEPCT; CONVERSIONEFV:API92; CONVERSIOND1160:EDMISTER; CONVERSIOND2887:API94; SLICESTYLE:REFINING; NUMBEROFCUTS:10; MWEXPERIMENT:VOLUMEPCT; LDEXPERIMENT:VOLUMEPCT; MWESTIMATION:NONE; MWCURVEINTERPOLATION:CUBIC; MWCURVELOWEXTRAPOLATION:CURVE; MWCURVEHIGHEXTRAPOLATION:CURVE; LDCURVEINTERPOLATION:CUBIC; LDCURVELOWINTERPOLATION:CURVE; LDCURVEHIGHINTERPOLATION:CURVE']
>> 
>> #..... Cut and install the assay, Light_Naphtha, use 5 hypo's
>> Watkins55.Light_Naphtha.PREFIX = Oils.OilParameter('Generic','LN')
>> Watkins55.Light_Naphtha.SUFFIX = Oils.OilParameter('Generic','F')
>> Watkins55.Light_Naphtha.SLICESTYLE = Oils.OilParameter('Generic','FIXEDCUTS')
>> Watkins55.Light_Naphtha.NUMBEROFCUTS = Oils.OilParameter('Generic',5)
>> 
>> Watkins55.Light_Naphtha.CustomCommand + Cut
[0, 'Cut assay Light_Naphtha from oil Watkins55']
>> Watkins55.Light_Naphtha.CustomCommand + InstallOil
[0, 'Installed pseudo components based on data from Watkins55 assay Light_Naphtha']
>> Watkins55.Light_Naphtha.CustomCommand + GetOilComposition
['0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '2.5749676e-001', '2.1470190e-001', '1.9159540e-001', '1.7589868e-001', '1.6030725e-001']
>> /lightCrude.In
Port: /lightCrude.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow is invalid
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = None
n-BUTANE           = None
ISOBUTANE          = None
n-PENTANE          = None
Watkins55_Light_Naphtha_LN[64]F = None
Watkins55_Light_Naphtha_LN[129]F = None
Watkins55_Light_Naphtha_LN[174]F = None
Watkins55_Light_Naphtha_LN[210]F = None
Watkins55_Light_Naphtha_LN[251]F = None

>> 
>> #..... Cut and install another assay, Heavy_Distillate
>> Watkins55.Heavy_Distillate.PREFIX = Oils.OilParameter('Generic','HD')
>> Watkins55.Heavy_Distillate.SUFFIX = Oils.OilParameter('Generic','F')
>> Watkins55.Heavy_Distillate.CustomCommand + Cut
[0, 'Cut assay Heavy_Distillate from oil Watkins55']
>> Watkins55.Heavy_Distillate.CustomCommand + InstallOil
[0, 'Installed pseudo components based on data from Watkins55 assay Heavy_Distillate']
>> Watkins55.Heavy_Distillate.CustomCommand + GetOilComposition
['0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '6.7250240e-002', '6.9927275e-002', '1.2535431e-001', '1.0610457e-001', '7.1859315e-002', '6.6172774e-002', '7.6517657e-002', '9.1535169e-002', '1.7331499e-001', '1.1455013e-001', '3.7413572e-002']
>> /lightCrude.In
Port: /lightCrude.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow is invalid
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = None
n-BUTANE           = None
ISOBUTANE          = None
n-PENTANE          = None
Watkins55_Light_Naphtha_LN[64]F = None
Watkins55_Light_Naphtha_LN[129]F = None
Watkins55_Light_Naphtha_LN[174]F = None
Watkins55_Light_Naphtha_LN[210]F = None
Watkins55_Light_Naphtha_LN[251]F = None
Watkins55_Heavy_Distillate_HD[517]F = None
Watkins55_Heavy_Distillate_HD[543]F = None
Watkins55_Heavy_Distillate_HD[568]F = None
Watkins55_Heavy_Distillate_HD[591]F = None
Watkins55_Heavy_Distillate_HD[617]F = None
Watkins55_Heavy_Distillate_HD[643]F = None
Watkins55_Heavy_Distillate_HD[668]F = None
Watkins55_Heavy_Distillate_HD[693]F = None
Watkins55_Heavy_Distillate_HD[721]F = None
Watkins55_Heavy_Distillate_HD[739]F = None
Watkins55_Heavy_Distillate_HD[762]F = None

>> 
>> #..... Cut and install another assay, Light
>> Watkins55.Light.PREFIX = Oils.OilParameter('Generic','LT')
>> Watkins55.Light.SUFFIX = Oils.OilParameter('Generic','F')
>> Watkins55.Light.CustomCommand + Cut
[0, 'Cut assay Light from oil Watkins55']
>> Watkins55.Light.CustomCommand + InstallOil
[0, 'Installed pseudo components based on data from Watkins55 assay Light']
>> Watkins55.Light.CustomCommand + GetOilComposition
['1.0000000e-002', '1.5000000e-002', '0.0000000E+00', '2.0000000e-002', '0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '1.0000000e-003', '5.0000000e-003', '3.0000000e-002', '1.1606826e-001', '1.7516666e-002', '1.6120913e-002', '1.9542234e-002', '4.3769321e-002', '1.0769290e-001', '1.0131743e-001', '1.0301581e-001', '1.1264726e-001', '1.0681962e-001', '8.9500830e-002', '5.0916085e-002', '3.4072677e-002']
>> /lightCrude.In
Port: /lightCrude.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = None
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow is invalid
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = None
n-BUTANE           = None
ISOBUTANE          = None
n-PENTANE          = None
Watkins55_Light_Naphtha_LN[64]F = None
Watkins55_Light_Naphtha_LN[129]F = None
Watkins55_Light_Naphtha_LN[174]F = None
Watkins55_Light_Naphtha_LN[210]F = None
Watkins55_Light_Naphtha_LN[251]F = None
Watkins55_Heavy_Distillate_HD[517]F = None
Watkins55_Heavy_Distillate_HD[543]F = None
Watkins55_Heavy_Distillate_HD[568]F = None
Watkins55_Heavy_Distillate_HD[591]F = None
Watkins55_Heavy_Distillate_HD[617]F = None
Watkins55_Heavy_Distillate_HD[643]F = None
Watkins55_Heavy_Distillate_HD[668]F = None
Watkins55_Heavy_Distillate_HD[693]F = None
Watkins55_Heavy_Distillate_HD[721]F = None
Watkins55_Heavy_Distillate_HD[739]F = None
Watkins55_Heavy_Distillate_HD[762]F = None
METHANE            = None
ETHANE             = None
CARBON DIOXIDE     = None
Watkins55_Light_LT[-68]F = None
Watkins55_Light_LT[8]F = None
Watkins55_Light_LT[33]F = None
Watkins55_Light_LT[60]F = None
Watkins55_Light_LT[84]F = None
Watkins55_Light_LT[110]F = None
Watkins55_Light_LT[132]F = None
Watkins55_Light_LT[158]F = None
Watkins55_Light_LT[183]F = None
Watkins55_Light_LT[207]F = None
Watkins55_Light_LT[232]F = None
Watkins55_Light_LT[257]F = None
Watkins55_Light_LT[280]F = None

>> 
>> #..... Assign the composition of the assay 'Light' to a stream 'lightCrude'
>> cd /
/
>> lightCrude.In.Fraction = /thermo.thOilCase.Watkins55.Light
>> lightCrude.In.T = 60 F
>> lightCrude.In.P = 14.7 psia
>> lightCrude.In
Port: /lightCrude.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.156369435327 = 
T                  = 60.0 * F
P                  = 14.7 * psia
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow is invalid
H                  = -4480.18689301 = Btu/lbmol
Energy             = None
MolecularWeight    = 92.4664369086 = 
ZFactor            = 0.158219199798 = 
PROPANE            = 0.00999999994 * 
n-BUTANE           = 0.01499999991 * 
ISOBUTANE          = 0.0 * 
n-PENTANE          = 0.01999999988 * 
Watkins55_Light_Naphtha_LN[64]F = 0.0 * 
Watkins55_Light_Naphtha_LN[129]F = 0.0 * 
Watkins55_Light_Naphtha_LN[174]F = 0.0 * 
Watkins55_Light_Naphtha_LN[210]F = 0.0 * 
Watkins55_Light_Naphtha_LN[251]F = 0.0 * 
Watkins55_Heavy_Distillate_HD[517]F = 0.0 * 
Watkins55_Heavy_Distillate_HD[543]F = 0.0 * 
Watkins55_Heavy_Distillate_HD[568]F = 0.0 * 
Watkins55_Heavy_Distillate_HD[591]F = 0.0 * 
Watkins55_Heavy_Distillate_HD[617]F = 0.0 * 
Watkins55_Heavy_Distillate_HD[643]F = 0.0 * 
Watkins55_Heavy_Distillate_HD[668]F = 0.0 * 
Watkins55_Heavy_Distillate_HD[693]F = 0.0 * 
Watkins55_Heavy_Distillate_HD[721]F = 0.0 * 
Watkins55_Heavy_Distillate_HD[739]F = 0.0 * 
Watkins55_Heavy_Distillate_HD[762]F = 0.0 * 
METHANE            = 0.000999999994 * 
ETHANE             = 0.00499999997 * 
CARBON DIOXIDE     = 0.02999999982 * 
Watkins55_Light_LT[-68]F = 0.116068259304 * 
Watkins55_Light_LT[8]F = 0.0175166658949 * 
Watkins55_Light_LT[33]F = 0.0161209129033 * 
Watkins55_Light_LT[60]F = 0.0195422338827 * 
Watkins55_Light_LT[84]F = 0.0437693207374 * 
Watkins55_Light_LT[110]F = 0.107692899354 * 
Watkins55_Light_LT[132]F = 0.101317429392 * 
Watkins55_Light_LT[158]F = 0.103015809382 * 
Watkins55_Light_LT[183]F = 0.112647259324 * 
Watkins55_Light_LT[207]F = 0.106819619359 * 
Watkins55_Light_LT[232]F = 0.089500829463 * 
Watkins55_Light_LT[257]F = 0.0509160846945 * 
Watkins55_Light_LT[280]F = 0.0340726767956 * 

>> 
>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
>> /RootClone.lightCrude.In
Port: /RootClone.lightCrude.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.156369435327 = 
T                  = 60.0 * F
P                  = 14.7 * psia
MoleFlow           = None
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow is invalid
H                  = -4480.18689301 = Btu/lbmol
Energy             = None
MolecularWeight    = 92.4664369086 = 
ZFactor            = 0.158219199798 = 
PROPANE            = 0.00999999994 * 
n-BUTANE           = 0.01499999991 * 
ISOBUTANE          = 0.0 * 
n-PENTANE          = 0.01999999988 * 
Watkins55_Light_Naphtha_LN[64]F = 0.0 * 
Watkins55_Light_Naphtha_LN[129]F = 0.0 * 
Watkins55_Light_Naphtha_LN[174]F = 0.0 * 
Watkins55_Light_Naphtha_LN[210]F = 0.0 * 
Watkins55_Light_Naphtha_LN[251]F = 0.0 * 
Watkins55_Heavy_Distillate_HD[517]F = 0.0 * 
Watkins55_Heavy_Distillate_HD[543]F = 0.0 * 
Watkins55_Heavy_Distillate_HD[568]F = 0.0 * 
Watkins55_Heavy_Distillate_HD[591]F = 0.0 * 
Watkins55_Heavy_Distillate_HD[617]F = 0.0 * 
Watkins55_Heavy_Distillate_HD[643]F = 0.0 * 
Watkins55_Heavy_Distillate_HD[668]F = 0.0 * 
Watkins55_Heavy_Distillate_HD[693]F = 0.0 * 
Watkins55_Heavy_Distillate_HD[721]F = 0.0 * 
Watkins55_Heavy_Distillate_HD[739]F = 0.0 * 
Watkins55_Heavy_Distillate_HD[762]F = 0.0 * 
METHANE            = 0.000999999994 * 
ETHANE             = 0.00499999997 * 
CARBON DIOXIDE     = 0.02999999982 * 
Watkins55_Light_LT[-68]F = 0.116068259304 * 
Watkins55_Light_LT[8]F = 0.0175166658949 * 
Watkins55_Light_LT[33]F = 0.0161209129033 * 
Watkins55_Light_LT[60]F = 0.0195422338827 * 
Watkins55_Light_LT[84]F = 0.0437693207374 * 
Watkins55_Light_LT[110]F = 0.107692899354 * 
Watkins55_Light_LT[132]F = 0.101317429392 * 
Watkins55_Light_LT[158]F = 0.103015809382 * 
Watkins55_Light_LT[183]F = 0.112647259324 * 
Watkins55_Light_LT[207]F = 0.106819619359 * 
Watkins55_Light_LT[232]F = 0.089500829463 * 
Watkins55_Light_LT[257]F = 0.0509160846945 * 
Watkins55_Light_LT[280]F = 0.0340726767956 * 

>> 
>> clear
>> 
>> #now create a unit operation before doing the oil
>> 
>> units SI
>> /LiquidPhases = 2
>> $VMGThermo = VirtualMaterials.Advanced_Peng-Robinson
>> / -> $VMGThermo
Thermo case attached to a unit operation. / to /VMGThermo
>> $VMGThermo + WATER
WATER 
>> $VMGThermo + HYDROGEN_SULFIDE
HYDROGEN SULFIDE 
>> $VMGThermo + CARBON_DIOXIDE
CARBON DIOXIDE 
>> /CSP1 = ComponentSplitter.ComponentSplitter()
>> /VMGThermo.thOilCase = Oils.OilCase()
>> /VMGThermo.thOilCase.test = Oils.Oil()
>> /VMGThermo.thOilCase.test.testt = Oils.Assay()
>> /VMGThermo.thOilCase.test.testt.DistillationCurve = Oils.OilExperiment('DistillationCurve')
>> /VMGThermo.thOilCase.test.testt.DistillationCurve.Series0 = 0
>> /VMGThermo.thOilCase.test.testt.DistillationCurve.Series0 = 0 20
>> /VMGThermo.thOilCase.test.testt.DistillationCurve.Series0 = 0 20 40
>> /VMGThermo.thOilCase.test.testt.DistillationCurve.Series0 = 0 20 40 60
>> /VMGThermo.thOilCase.test.testt.DistillationCurve.Series0 = 0 20 40 60 80
>> /VMGThermo.thOilCase.test.testt.DistillationCurve.Series0 = 0 20 40 60 80 100
>> /VMGThermo.thOilCase.test.testt.DistillationCurve.Series1 = 80 None None None None None
>> /VMGThermo.thOilCase.test.testt.DistillationCurve.Series1 = 80 None None None None 200
>> /VMGThermo.thOilCase.test.testt.DistillationCurve.Series1 = 80 140 None None None 200
>> /VMGThermo.thOilCase.test.testt.DistillationCurve.Series1 = 80 140 None None 195 200
>> /VMGThermo.thOilCase.test.testt.DistillationCurve.Series1 = 80 140 None 185 195 200
>> /VMGThermo.thOilCase.test.testt.DistillationCurve.Series1 = 80 140 165 185 195 200
>> /VMGThermo.thOilCase.test.testt.CustomCommand + Cut
[0, 'Cut assay testt from oil test']
>> /VMGThermo.thOilCase.test.testt.CustomCommand + InstallOil
[0, 'Installed pseudo components based on data from test assay testt']
>> /VMGThermo.thOilCase.test.testt.CustomCommand + GetOilComposition
['0.0000000E+00', '0.0000000E+00', '0.0000000E+00', '6.1758764e-002', '5.8233887e-002', '5.5017140e-002', '5.2187879e-002', '7.4067518e-002', '1.3300190e-001', '1.2465669e-001', '1.7813122e-001', '2.6294501e-001']
>> 
>> 
>> 
>> clear
>> read specialprops.tst
Processing specialprops.tst
>> units SI
>> LiquidPhases = 2
>> 
>> Prop-101 = Properties.SpecialProps()
>> $ThermoCase = VirtualMaterials.Advanced_Peng-Robinson
>> / -> $ThermoCase
Thermo case attached to a unit operation. / to /ThermoCase
>> ThermoCase + METHANE
METHANE 
>> ThermoCase + ETHANE
ETHANE 
>> ThermoCase + PROPANE
PROPANE 
>> ThermoCase + n-BUTANE
n-BUTANE 
>> ThermoCase + ISOBUTANE
ISOBUTANE 
>> ThermoCase + n-PENTANE
n-PENTANE 
>> ThermoCase + ISOPENTANE
ISOPENTANE 
>> ThermoCase + WATER
WATER 
>> Prop-101.In.T = 300
>> Prop-101.In.P = 200
>> Prop-101.In.MoleFlow = 10
>> Prop-101.In.Fraction =  4.54545454545455E-02 9.09090909090909E-02 0.136363636363636 0.181818181818182 0.136363636363636 0.136363636363636 0.136363636363636 0.136363636363636
>> 
>> Prop-101.BubblePoint_Active = 1
>> Prop-101.FlashPoint_Active = 1
>> Prop-101.PourPoint_Active = 1
Msg from thermo provider when solving /Prop-101:
PourPoint: Boiling point is less then 100 F. The predicted pour point is unreliable;

>> Prop-101.KinematicViscosity_Active = 1
Msg from thermo provider when solving /Prop-101:
PourPoint: Boiling point is less then 100 F. The predicted pour point is unreliable;

>> Prop-101.DynamicViscosity_Active = 1
Msg from thermo provider when solving /Prop-101:
PourPoint: Boiling point is less then 100 F. The predicted pour point is unreliable;

>> Prop-101.ParaffinMolPercent_Active = 1
Msg from thermo provider when solving /Prop-101:
ParaffinMolPercent: ;
PourPoint: Boiling point is less then 100 F. The predicted pour point is unreliable;

>> Prop-101.NapthleneMolPercent_Active = 1
Msg from thermo provider when solving /Prop-101:
NaphthaleneMolPercent: ;
ParaffinMolPercent: ;
PourPoint: Boiling point is less then 100 F. The predicted pour point is unreliable;

>> Prop-101.AromaticMolPercent_Active = 1
Msg from thermo provider when solving /Prop-101:
NaphthaleneMolPercent: ;
ParaffinMolPercent: ;
PourPoint: Boiling point is less then 100 F. The predicted pour point is unreliable;
AromaticMolPercent: ;

>> Prop-101.pH_Active = 1
Msg from thermo provider when solving /Prop-101:
NaphthaleneMolPercent: ;
ParaffinMolPercent: ;
PourPoint: Boiling point is less then 100 F. The predicted pour point is unreliable;
AromaticMolPercent: ;

>> 
>> Prop-101.BubblePoint
Port: /Prop-101.BubblePoint + sim.solver.Ports.Port_Signal
Connected to: None
T   = -91.409 = C

>> Prop-101.FlashPoint
Port: /Prop-101.FlashPoint + sim.solver.Ports.Port_Signal
Connected to: None
T   = -182.0499 = C

>> Prop-101.PourPoint
Port: /Prop-101.PourPoint + sim.solver.Ports.Port_Signal
Connected to: None
T   = -273.149892091 = C

>> Prop-101.KinematicViscosity
Port: /Prop-101.KinematicViscosity + sim.solver.Ports.Port_Signal
Connected to: None
KinematicViscosity   = 1.44678e-005 = m2/s

>> Prop-101.DynamicViscosity
Port: /Prop-101.DynamicViscosity + sim.solver.Ports.Port_Signal
Connected to: None
Viscosity   = 1.3543e-005 = Pa-s

>> Prop-101.ParaffinMolPercent
Port: /Prop-101.ParaffinMolPercent + sim.solver.Ports.Port_Signal
Connected to: None
Fraction   = None

>> Prop-101.NapthleneMolPercent
None
>> Prop-101.AromaticMolPercent
Port: /Prop-101.AromaticMolPercent + sim.solver.Ports.Port_Signal
Connected to: None
Fraction   = None

>> Prop-101.pH
Port: /Prop-101.pH + sim.solver.Ports.Port_Signal
Connected to: None
pH   = None

>> 
>> copy /Prop-101
Copied /Prop-101 to the clipboard
>> paste /
Pasting /Prop-101
Pasted /Prop-101 as /Prop-101Clone
Msg from thermo provider when solving /Prop-101Clone:
ParaffinMolPercent: ;
NaphthaleneMolPercent: ;
PourPoint: Boiling point is less then 100 F. The predicted pour point is unreliable;
AromaticMolPercent: ;

>> /Prop-101Clone.BubblePoint
Port: /Prop-101Clone.BubblePoint + sim.solver.Ports.Port_Signal
Connected to: None
T   = -91.409 = C

>> /Prop-101Clone.FlashPoint
Port: /Prop-101Clone.FlashPoint + sim.solver.Ports.Port_Signal
Connected to: None
T   = -182.0499 = C

>> /Prop-101Clone.PourPoint
Port: /Prop-101Clone.PourPoint + sim.solver.Ports.Port_Signal
Connected to: None
T   = -273.149892091 = C

>> /Prop-101Clone.KinematicViscosity
Port: /Prop-101Clone.KinematicViscosity + sim.solver.Ports.Port_Signal
Connected to: None
KinematicViscosity   = 1.44678e-005 = m2/s

>> /Prop-101Clone.DynamicViscosity
Port: /Prop-101Clone.DynamicViscosity + sim.solver.Ports.Port_Signal
Connected to: None
Viscosity   = 1.3543e-005 = Pa-s

>> /Prop-101Clone.ParaffinMolPercent
Port: /Prop-101Clone.ParaffinMolPercent + sim.solver.Ports.Port_Signal
Connected to: None
Fraction   = None

>> /Prop-101Clone.NapthleneMolPercent
None
>> /Prop-101Clone.AromaticMolPercent
Port: /Prop-101Clone.AromaticMolPercent + sim.solver.Ports.Port_Signal
Connected to: None
Fraction   = None

>> /Prop-101Clone.pH
Port: /Prop-101Clone.pH + sim.solver.Ports.Port_Signal
Connected to: None
pH   = None

>> 
>> 
>> #$thermo2 = VirtualMaterials.Advanced_Peng-Robinson
>> #/ -> $thermo2
>> #thermo + METHANE ETHANE PROPANE n-BUTANE n-PENTANE n-OCTANE n-NONANE n-TETRADECANE n-PENTADECANE n-OCTADECANE ETHYLENE CYCLOPROPANE BENZENE WATER CARBON_DIOXIDE HYDROGEN_SULFIDE
>> #Prop-101.In.Fraction = None
>> #Prop-101.In.Fraction = .0625  .0625  .0625  .0625  .0625  .0625  .0625  .0625  .0625  .0625  .0625  .0625  .0625  .0625  .0625  .0625
>> 
>> clear
>> read solidflash.tst
Processing solidflash.tst
>> # Simple flash test
>> units SI
>> $thermo = VirtualMaterials.Peng-Robinson SimpleSolid
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + PROPANE n-BUTANE ISOBUTANE n-PENTANE WATER INERTSOLID
PROPANE n-BUTANE ISOBUTANE n-PENTANE WATER INERTSOLID 
>> flash = Flash.SimpleFlash()
>> LiquidPhases = 2
>> SolidPhases = 1
>> cd flash.In
/flash.In
>> Fraction = .25 .25 .25 .25 .25 .25
>> T = 0 C
>> P = 101.325
>> MoleFlow = 10
>> cd ..
/flash
>> # dump the results
>> In
Port: /flash.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.475482689958 = 
T                  = 0.0 * C
P                  = 101.325 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 50417.5068 = kg/h
VolumeFlow         = 160.252757288 = m3/hr
StdLiqVolumeFlow   = 63.0571904448 = m3/hr
H                  = 2521394.42347 = kJ/kmol
Energy             = 7003873.39852 = W
MolecularWeight    = 5041.75068 = 
ZFactor            = 0.714974456527 = 
PROPANE            = 0.166666666667 * 
n-BUTANE           = 0.166666666667 * 
ISOBUTANE          = 0.166666666667 * 
n-PENTANE          = 0.166666666667 * 
WATER              = 0.166666666667 * 
INERTSOLID         = 0.166666666667 * 

>> Vap   # Vapour stream
Port: /flash.Vap + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 4.75482689958 = kgmole/h
MassFlow           = 262.879640671 = kg/h
VolumeFlow         = 103.206263581 = m3/hr
StdLiqVolumeFlow   = 0.46684765817 = m3/hr
H                  = 14645.6638992 = kJ/kmol
Energy             = 19343.7768528 = W
MolecularWeight    = 55.2869002853 = 
ZFactor            = 0.968403521484 = 
PROPANE            = 0.323755165504 = 
n-BUTANE           = 0.257009892165 = 
ISOBUTANE          = 0.275543887304 = 
n-PENTANE          = 0.137971564066 = 
WATER              = 0.0057194909609 = 
INERTSOLID         = 0.0 = 

>> Liq0  # Liquid stream
Port: /flash.Liq0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 1.93927517944 = kgmole/h
MassFlow           = 125.095949298 = kg/h
VolumeFlow         = 0.193980164481 = m3/hr
StdLiqVolumeFlow   = 0.208103823218 = m3/hr
H                  = -7209.00516208 = kJ/kmol
Energy             = -3883.40132758 = W
MolecularWeight    = 64.5065489539 = 
ZFactor            = 0.00446275350613 = 
PROPANE            = 0.0656260123366 = 
n-BUTANE           = 0.229275928788 = 
ISOBUTANE          = 0.183833208964 = 
n-PENTANE          = 0.521140977403 = 
WATER              = 0.000123872508087 = 
INERTSOLID         = 0.0 = 

>> Liq1
Port: /flash.Liq1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 1.63923125431 = kgmole/h
MassFlow           = 29.5312100312 = kg/h
VolumeFlow         = 0.0343317246002 = m3/hr
StdLiqVolumeFlow   = 0.029559212036 = m3/hr
H                  = -36400.9901294 = kJ/kmol
Energy             = -16574.9001967 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.000934416308796 = 
PROPANE            = 1.46527735732e-015 = 
n-BUTANE           = 7.57534202165e-018 = 
ISOBUTANE          = 2.66313701146e-018 = 
n-PENTANE          = 5.34513346855e-021 = 
WATER              = 1.0 = 
INERTSOLID         = 0.0 = 

>> Solid0
Port: /flash.Solid0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 1.66666666667 = kgmole/h
MassFlow           = 50000.0 = kg/h
VolumeFlow         = 56.8181818182 = m3/hr
StdLiqVolumeFlow   = 62.3526797514 = m3/hr
H                  = 15130773.9141 = kJ/kmol
Energy             = 7004987.92319 = W
MolecularWeight    = 30000.0 = 
ZFactor            = 1.52098033209 = 
PROPANE            = 0.0 = 
n-BUTANE           = 0.0 = 
ISOBUTANE          = 0.0 = 
n-PENTANE          = 0.0 = 
WATER              = 0.0 = 
INERTSOLID         = 1.0 = 

>> 
>> #Lets play with phase arragement
>> KeyCmp_Liq0 = WATER 0.5
>> In
Port: /flash.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.475482689958 = 
T                  = 0.0 * C
P                  = 101.325 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 50417.5068 = kg/h
VolumeFlow         = 160.252757288 = m3/hr
StdLiqVolumeFlow   = 63.0571904448 = m3/hr
H                  = 2521394.42347 = kJ/kmol
Energy             = 7003873.39852 = W
MolecularWeight    = 5041.75068 = 
ZFactor            = 0.714974456527 = 
PROPANE            = 0.166666666667 * 
n-BUTANE           = 0.166666666667 * 
ISOBUTANE          = 0.166666666667 * 
n-PENTANE          = 0.166666666667 * 
WATER              = 0.166666666667 * 
INERTSOLID         = 0.166666666667 * 

>> Vap   # Vapour stream
Port: /flash.Vap + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 4.75482689958 = kgmole/h
MassFlow           = 262.879640671 = kg/h
VolumeFlow         = 103.206263581 = m3/hr
StdLiqVolumeFlow   = 0.46684765817 = m3/hr
H                  = 14645.6638992 = kJ/kmol
Energy             = 19343.7768528 = W
MolecularWeight    = 55.2869002853 = 
ZFactor            = 0.968403521484 = 
PROPANE            = 0.323755165504 = 
n-BUTANE           = 0.257009892165 = 
ISOBUTANE          = 0.275543887304 = 
n-PENTANE          = 0.137971564066 = 
WATER              = 0.0057194909609 = 
INERTSOLID         = 0.0 = 

>> Liq0  # Liquid stream
Port: /flash.Liq0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 1.63923125431 = kgmole/h
MassFlow           = 29.5312100312 = kg/h
VolumeFlow         = 0.0343317246002 = m3/hr
StdLiqVolumeFlow   = 0.029559212036 = m3/hr
H                  = -36400.9901294 = kJ/kmol
Energy             = -16574.9001967 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.000934416308796 = 
PROPANE            = 1.46527735732e-015 = 
n-BUTANE           = 7.57534202165e-018 = 
ISOBUTANE          = 2.66313701146e-018 = 
n-PENTANE          = 5.34513346855e-021 = 
WATER              = 1.0 = 
INERTSOLID         = 0.0 = 

>> Liq1
Port: /flash.Liq1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 1.93927517944 = kgmole/h
MassFlow           = 125.095949298 = kg/h
VolumeFlow         = 0.193980164481 = m3/hr
StdLiqVolumeFlow   = 0.208103823218 = m3/hr
H                  = -7209.00516208 = kJ/kmol
Energy             = -3883.40132758 = W
MolecularWeight    = 64.5065489539 = 
ZFactor            = 0.00446275350613 = 
PROPANE            = 0.0656260123366 = 
n-BUTANE           = 0.229275928788 = 
ISOBUTANE          = 0.183833208964 = 
n-PENTANE          = 0.521140977403 = 
WATER              = 0.000123872508087 = 
INERTSOLID         = 0.0 = 

>> Solid0
Port: /flash.Solid0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 1.66666666667 = kgmole/h
MassFlow           = 50000.0 = kg/h
VolumeFlow         = 56.8181818182 = m3/hr
StdLiqVolumeFlow   = 62.3526797514 = m3/hr
H                  = 15130773.9141 = kJ/kmol
Energy             = 7004987.92319 = W
MolecularWeight    = 30000.0 = 
ZFactor            = 1.52098033209 = 
PROPANE            = 0.0 = 
n-BUTANE           = 0.0 = 
ISOBUTANE          = 0.0 = 
n-PENTANE          = 0.0 = 
WATER              = 0.0 = 
INERTSOLID         = 1.0 = 

>> 
>> KeyCmp_Liq1 = WATER 0.5
>> In
Port: /flash.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.475482689958 = 
T                  = 0.0 * C
P                  = 101.325 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 50417.5068 = kg/h
VolumeFlow         = 160.252757288 = m3/hr
StdLiqVolumeFlow   = 63.0571904448 = m3/hr
H                  = 2521394.42347 = kJ/kmol
Energy             = 7003873.39852 = W
MolecularWeight    = 5041.75068 = 
ZFactor            = 0.714974456527 = 
PROPANE            = 0.166666666667 * 
n-BUTANE           = 0.166666666667 * 
ISOBUTANE          = 0.166666666667 * 
n-PENTANE          = 0.166666666667 * 
WATER              = 0.166666666667 * 
INERTSOLID         = 0.166666666667 * 

>> Vap   # Vapour stream
Port: /flash.Vap + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 4.75482689958 = kgmole/h
MassFlow           = 262.879640671 = kg/h
VolumeFlow         = 103.206263581 = m3/hr
StdLiqVolumeFlow   = 0.46684765817 = m3/hr
H                  = 14645.6638992 = kJ/kmol
Energy             = 19343.7768528 = W
MolecularWeight    = 55.2869002853 = 
ZFactor            = 0.968403521484 = 
PROPANE            = 0.323755165504 = 
n-BUTANE           = 0.257009892165 = 
ISOBUTANE          = 0.275543887304 = 
n-PENTANE          = 0.137971564066 = 
WATER              = 0.0057194909609 = 
INERTSOLID         = 0.0 = 

>> Liq0  # Liquid stream
Port: /flash.Liq0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 1.93927517944 = kgmole/h
MassFlow           = 125.095949298 = kg/h
VolumeFlow         = 0.193980164481 = m3/hr
StdLiqVolumeFlow   = 0.208103823218 = m3/hr
H                  = -7209.00516208 = kJ/kmol
Energy             = -3883.40132758 = W
MolecularWeight    = 64.5065489539 = 
ZFactor            = 0.00446275350613 = 
PROPANE            = 0.0656260123366 = 
n-BUTANE           = 0.229275928788 = 
ISOBUTANE          = 0.183833208964 = 
n-PENTANE          = 0.521140977403 = 
WATER              = 0.000123872508087 = 
INERTSOLID         = 0.0 = 

>> Liq1
Port: /flash.Liq1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 1.63923125431 = kgmole/h
MassFlow           = 29.5312100312 = kg/h
VolumeFlow         = 0.0343317246002 = m3/hr
StdLiqVolumeFlow   = 0.029559212036 = m3/hr
H                  = -36400.9901294 = kJ/kmol
Energy             = -16574.9001967 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.000934416308796 = 
PROPANE            = 1.46527735732e-015 = 
n-BUTANE           = 7.57534202165e-018 = 
ISOBUTANE          = 2.66313701146e-018 = 
n-PENTANE          = 5.34513346855e-021 = 
WATER              = 1.0 = 
INERTSOLID         = 0.0 = 

>> Solid0
Port: /flash.Solid0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 1.66666666667 = kgmole/h
MassFlow           = 50000.0 = kg/h
VolumeFlow         = 56.8181818182 = m3/hr
StdLiqVolumeFlow   = 62.3526797514 = m3/hr
H                  = 15130773.9141 = kJ/kmol
Energy             = 7004987.92319 = W
MolecularWeight    = 30000.0 = 
ZFactor            = 1.52098033209 = 
PROPANE            = 0.0 = 
n-BUTANE           = 0.0 = 
ISOBUTANE          = 0.0 = 
n-PENTANE          = 0.0 = 
WATER              = 0.0 = 
INERTSOLID         = 1.0 = 

>> 
>> KeyCmp_Liq0 = WATER 0.5
>> KeyCmp_Liq1 = INERTSOLID 0.5
>> In
Port: /flash.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.475482689958 = 
T                  = 0.0 * C
P                  = 101.325 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 50417.5068 = kg/h
VolumeFlow         = 160.252757288 = m3/hr
StdLiqVolumeFlow   = 63.0571904448 = m3/hr
H                  = 2521394.42347 = kJ/kmol
Energy             = 7003873.39852 = W
MolecularWeight    = 5041.75068 = 
ZFactor            = 0.714974456527 = 
PROPANE            = 0.166666666667 * 
n-BUTANE           = 0.166666666667 * 
ISOBUTANE          = 0.166666666667 * 
n-PENTANE          = 0.166666666667 * 
WATER              = 0.166666666667 * 
INERTSOLID         = 0.166666666667 * 

>> Vap   # Vapour stream
Port: /flash.Vap + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 4.75482689958 = kgmole/h
MassFlow           = 262.879640671 = kg/h
VolumeFlow         = 103.206263581 = m3/hr
StdLiqVolumeFlow   = 0.46684765817 = m3/hr
H                  = 14645.6638992 = kJ/kmol
Energy             = 19343.7768528 = W
MolecularWeight    = 55.2869002853 = 
ZFactor            = 0.968403521484 = 
PROPANE            = 0.323755165504 = 
n-BUTANE           = 0.257009892165 = 
ISOBUTANE          = 0.275543887304 = 
n-PENTANE          = 0.137971564066 = 
WATER              = 0.0057194909609 = 
INERTSOLID         = 0.0 = 

>> Liq0  # Liquid stream
Port: /flash.Liq0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 1.63923125431 = kgmole/h
MassFlow           = 29.5312100312 = kg/h
VolumeFlow         = 0.0343317246002 = m3/hr
StdLiqVolumeFlow   = 0.029559212036 = m3/hr
H                  = -36400.9901294 = kJ/kmol
Energy             = -16574.9001967 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.000934416308796 = 
PROPANE            = 1.46527735732e-015 = 
n-BUTANE           = 7.57534202165e-018 = 
ISOBUTANE          = 2.66313701146e-018 = 
n-PENTANE          = 5.34513346855e-021 = 
WATER              = 1.0 = 
INERTSOLID         = 0.0 = 

>> Liq1
Port: /flash.Liq1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 1.66666666667 = kgmole/h
MassFlow           = 50000.0 = kg/h
VolumeFlow         = 56.8181818182 = m3/hr
StdLiqVolumeFlow   = 62.3526797514 = m3/hr
H                  = 15130773.9141 = kJ/kmol
Energy             = 7004987.92319 = W
MolecularWeight    = 30000.0 = 
ZFactor            = 1.52098033209 = 
PROPANE            = 0.0 = 
n-BUTANE           = 0.0 = 
ISOBUTANE          = 0.0 = 
n-PENTANE          = 0.0 = 
WATER              = 0.0 = 
INERTSOLID         = 1.0 = 

>> Solid0
Port: /flash.Solid0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 1.93927517944 = kgmole/h
MassFlow           = 125.095949298 = kg/h
VolumeFlow         = 0.193980164481 = m3/hr
StdLiqVolumeFlow   = 0.208103823218 = m3/hr
H                  = -7209.00516208 = kJ/kmol
Energy             = -3883.40132758 = W
MolecularWeight    = 64.5065489539 = 
ZFactor            = 0.00446275350613 = 
PROPANE            = 0.0656260123366 = 
n-BUTANE           = 0.229275928788 = 
ISOBUTANE          = 0.183833208964 = 
n-PENTANE          = 0.521140977403 = 
WATER              = 0.000123872508087 = 
INERTSOLID         = 0.0 = 

>> 
>> KeyCmp_Liq0 = None
>> KeyCmp_Liq1 = INERTSOLID 0.5
>> In
Port: /flash.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.475482689958 = 
T                  = 0.0 * C
P                  = 101.325 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 50417.5068 = kg/h
VolumeFlow         = 160.252757288 = m3/hr
StdLiqVolumeFlow   = 63.0571904448 = m3/hr
H                  = 2521394.42347 = kJ/kmol
Energy             = 7003873.39852 = W
MolecularWeight    = 5041.75068 = 
ZFactor            = 0.714974456527 = 
PROPANE            = 0.166666666667 * 
n-BUTANE           = 0.166666666667 * 
ISOBUTANE          = 0.166666666667 * 
n-PENTANE          = 0.166666666667 * 
WATER              = 0.166666666667 * 
INERTSOLID         = 0.166666666667 * 

>> Vap   # Vapour stream
Port: /flash.Vap + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 4.75482689958 = kgmole/h
MassFlow           = 262.879640671 = kg/h
VolumeFlow         = 103.206263581 = m3/hr
StdLiqVolumeFlow   = 0.46684765817 = m3/hr
H                  = 14645.6638992 = kJ/kmol
Energy             = 19343.7768528 = W
MolecularWeight    = 55.2869002853 = 
ZFactor            = 0.968403521484 = 
PROPANE            = 0.323755165504 = 
n-BUTANE           = 0.257009892165 = 
ISOBUTANE          = 0.275543887304 = 
n-PENTANE          = 0.137971564066 = 
WATER              = 0.0057194909609 = 
INERTSOLID         = 0.0 = 

>> Liq0  # Liquid stream
Port: /flash.Liq0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 1.93927517944 = kgmole/h
MassFlow           = 125.095949298 = kg/h
VolumeFlow         = 0.193980164481 = m3/hr
StdLiqVolumeFlow   = 0.208103823218 = m3/hr
H                  = -7209.00516208 = kJ/kmol
Energy             = -3883.40132758 = W
MolecularWeight    = 64.5065489539 = 
ZFactor            = 0.00446275350613 = 
PROPANE            = 0.0656260123366 = 
n-BUTANE           = 0.229275928788 = 
ISOBUTANE          = 0.183833208964 = 
n-PENTANE          = 0.521140977403 = 
WATER              = 0.000123872508087 = 
INERTSOLID         = 0.0 = 

>> Liq1
Port: /flash.Liq1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 1.66666666667 = kgmole/h
MassFlow           = 50000.0 = kg/h
VolumeFlow         = 56.8181818182 = m3/hr
StdLiqVolumeFlow   = 62.3526797514 = m3/hr
H                  = 15130773.9141 = kJ/kmol
Energy             = 7004987.92319 = W
MolecularWeight    = 30000.0 = 
ZFactor            = 1.52098033209 = 
PROPANE            = 0.0 = 
n-BUTANE           = 0.0 = 
ISOBUTANE          = 0.0 = 
n-PENTANE          = 0.0 = 
WATER              = 0.0 = 
INERTSOLID         = 1.0 = 

>> Solid0
Port: /flash.Solid0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 1.63923125431 = kgmole/h
MassFlow           = 29.5312100312 = kg/h
VolumeFlow         = 0.0343317246002 = m3/hr
StdLiqVolumeFlow   = 0.029559212036 = m3/hr
H                  = -36400.9901294 = kJ/kmol
Energy             = -16574.9001967 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.000934416308796 = 
PROPANE            = 1.46527735732e-015 = 
n-BUTANE           = 7.57534202165e-018 = 
ISOBUTANE          = 2.66313701146e-018 = 
n-PENTANE          = 5.34513346855e-021 = 
WATER              = 1.0 = 
INERTSOLID         = 0.0 = 

>> 
>> KeyCmp_Liq1 = None
>> KeyCmp_Solid0 = INERTSOLID 0.5
>> In
Port: /flash.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.475482689958 = 
T                  = 0.0 * C
P                  = 101.325 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 50417.5068 = kg/h
VolumeFlow         = 160.252757288 = m3/hr
StdLiqVolumeFlow   = 63.0571904448 = m3/hr
H                  = 2521394.42347 = kJ/kmol
Energy             = 7003873.39852 = W
MolecularWeight    = 5041.75068 = 
ZFactor            = 0.714974456527 = 
PROPANE            = 0.166666666667 * 
n-BUTANE           = 0.166666666667 * 
ISOBUTANE          = 0.166666666667 * 
n-PENTANE          = 0.166666666667 * 
WATER              = 0.166666666667 * 
INERTSOLID         = 0.166666666667 * 

>> Vap   # Vapour stream
Port: /flash.Vap + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 4.75482689958 = kgmole/h
MassFlow           = 262.879640671 = kg/h
VolumeFlow         = 103.206263581 = m3/hr
StdLiqVolumeFlow   = 0.46684765817 = m3/hr
H                  = 14645.6638992 = kJ/kmol
Energy             = 19343.7768528 = W
MolecularWeight    = 55.2869002853 = 
ZFactor            = 0.968403521484 = 
PROPANE            = 0.323755165504 = 
n-BUTANE           = 0.257009892165 = 
ISOBUTANE          = 0.275543887304 = 
n-PENTANE          = 0.137971564066 = 
WATER              = 0.0057194909609 = 
INERTSOLID         = 0.0 = 

>> Liq0  # Liquid stream
Port: /flash.Liq0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 1.93927517944 = kgmole/h
MassFlow           = 125.095949298 = kg/h
VolumeFlow         = 0.193980164481 = m3/hr
StdLiqVolumeFlow   = 0.208103823218 = m3/hr
H                  = -7209.00516208 = kJ/kmol
Energy             = -3883.40132758 = W
MolecularWeight    = 64.5065489539 = 
ZFactor            = 0.00446275350613 = 
PROPANE            = 0.0656260123366 = 
n-BUTANE           = 0.229275928788 = 
ISOBUTANE          = 0.183833208964 = 
n-PENTANE          = 0.521140977403 = 
WATER              = 0.000123872508087 = 
INERTSOLID         = 0.0 = 

>> Liq1
Port: /flash.Liq1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 1.63923125431 = kgmole/h
MassFlow           = 29.5312100312 = kg/h
VolumeFlow         = 0.0343317246002 = m3/hr
StdLiqVolumeFlow   = 0.029559212036 = m3/hr
H                  = -36400.9901294 = kJ/kmol
Energy             = -16574.9001967 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.000934416308796 = 
PROPANE            = 1.46527735732e-015 = 
n-BUTANE           = 7.57534202165e-018 = 
ISOBUTANE          = 2.66313701146e-018 = 
n-PENTANE          = 5.34513346855e-021 = 
WATER              = 1.0 = 
INERTSOLID         = 0.0 = 

>> Solid0
Port: /flash.Solid0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 1.66666666667 = kgmole/h
MassFlow           = 50000.0 = kg/h
VolumeFlow         = 56.8181818182 = m3/hr
StdLiqVolumeFlow   = 62.3526797514 = m3/hr
H                  = 15130773.9141 = kJ/kmol
Energy             = 7004987.92319 = W
MolecularWeight    = 30000.0 = 
ZFactor            = 1.52098033209 = 
PROPANE            = 0.0 = 
n-BUTANE           = 0.0 = 
ISOBUTANE          = 0.0 = 
n-PENTANE          = 0.0 = 
WATER              = 0.0 = 
INERTSOLID         = 1.0 = 

>> 
>> #Finally lets make the solid phases = to 0
>> SolidPhases = 0
VMG error with command:
SolidPhases = 0
vmg.VMGerror
VMGerror_-2 Maximum allowable phase reached and yet phase is unstable.  Activated only when 'myCheckStability' in the flash setting = IsTrue
Feed Fluid feed: FlashPTn(20)  Error @ P = 101.325, T = 273.15, flash type = 0(init=0)

>> 
>> cd ..
VMG error with command:
cd ..
vmg.VMGerror
VMGerror_-2 Maximum allowable phase reached and yet phase is unstable.  Activated only when 'myCheckStability' in the flash setting = IsTrue
Feed Fluid feed: FlashPTn(21)  Error @ P = 101.325, T = 273.15, flash type = 0(init=0)

/
>> #To clear the error, delete the solid compound
>> thermo - INERTSOLID
>> 
>> cd flash
/flash
>> In
Port: /flash.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.570579227949 = 
T                  = 0.0 * C
P                  = 101.325 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 501.00816 = kg/h
VolumeFlow         = 124.121490564 = m3/hr
StdLiqVolumeFlow   = 0.845412832108 = m3/hr
H                  = -481.474658082 = kJ/kmol
Energy             = -1337.42960578 = W
MolecularWeight    = 50.100816 = 
ZFactor            = 0.553773281415 = 
PROPANE            = 0.2 * 
n-BUTANE           = 0.2 * 
ISOBUTANE          = 0.2 * 
n-PENTANE          = 0.2 * 
WATER              = 0.2 * 

>> Vap   # Vapour stream
Port: /flash.Vap + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 5.70579227949 = kgmole/h
MassFlow           = 315.455568805 = kg/h
VolumeFlow         = 123.847516297 = m3/hr
StdLiqVolumeFlow   = 0.560217189803 = m3/hr
H                  = 14645.6638992 = kJ/kmol
Energy             = 23212.5322233 = W
MolecularWeight    = 55.2869002853 = 
ZFactor            = 0.968403521484 = 
PROPANE            = 0.323755165504 = 
n-BUTANE           = 0.257009892165 = 
ISOBUTANE          = 0.275543887304 = 
n-PENTANE          = 0.137971564066 = 
WATER              = 0.0057194909609 = 

>> Liq0  # Liquid stream
Port: /flash.Liq0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 2.32713021533 = kgmole/h
MassFlow           = 150.115139157 = kg/h
VolumeFlow         = 0.232776197377 = m3/hr
StdLiqVolumeFlow   = 0.249724587861 = m3/hr
H                  = -7209.00516208 = kJ/kmol
Energy             = -4660.08159309 = W
MolecularWeight    = 64.5065489539 = 
ZFactor            = 0.00446275350613 = 
PROPANE            = 0.0656260123366 = 
n-BUTANE           = 0.229275928788 = 
ISOBUTANE          = 0.183833208964 = 
n-PENTANE          = 0.521140977403 = 
WATER              = 0.000123872508087 = 

>> Liq1
Port: /flash.Liq1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 1.96707750518 = kgmole/h
MassFlow           = 35.4374520375 = kg/h
VolumeFlow         = 0.0411980695202 = m3/hr
StdLiqVolumeFlow   = 0.0354710544432 = m3/hr
H                  = -36400.9901294 = kJ/kmol
Energy             = -19889.880236 = W
MolecularWeight    = 18.01528 = 
ZFactor            = 0.000934416308796 = 
PROPANE            = 1.46527735732e-015 = 
n-BUTANE           = 7.57534202165e-018 = 
ISOBUTANE          = 2.66313701146e-018 = 
n-PENTANE          = 5.34513346855e-021 = 
WATER              = 1.0 = 

>> Solid0
None
>> 
>> copy /flash
Copied /flash to the clipboard
>> paste /
Pasting /flash
Pasted /flash as /flashClone
>> /flashClone.Solid0
None
>> /flashClone.Vap
Port: /flashClone.Vap + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 5.70579227949 = kgmole/h
MassFlow           = 315.455568805 = kg/h
VolumeFlow         = 123.847516297 = m3/hr
StdLiqVolumeFlow   = 0.560217189803 = m3/hr
H                  = 14645.6638992 = kJ/kmol
Energy             = 23212.5322233 = W
MolecularWeight    = 55.2869002853 = 
ZFactor            = 0.968403521484 = 
PROPANE            = 0.323755165504 = 
n-BUTANE           = 0.257009892165 = 
ISOBUTANE          = 0.275543887304 = 
n-PENTANE          = 0.137971564066 = 
WATER              = 0.0057194909609 = 

>> /flashClone.Liq0
Port: /flashClone.Liq0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 0.0 = C
P                  = 101.325 = kPa
MoleFlow           = 2.32713021533 = kgmole/h
MassFlow           = 150.115139157 = kg/h
VolumeFlow         = 0.232776197377 = m3/hr
StdLiqVolumeFlow   = 0.249724587861 = m3/hr
H                  = -7209.00516208 = kJ/kmol
Energy             = -4660.08159309 = W
MolecularWeight    = 64.5065489539 = 
ZFactor            = 0.00446275350613 = 
PROPANE            = 0.0656260123366 = 
n-BUTANE           = 0.229275928788 = 
ISOBUTANE          = 0.183833208964 = 
n-PENTANE          = 0.521140977403 = 
WATER              = 0.000123872508087 = 

>> 
>> 
>> 
>> 
>> 
>> clear
>> read oldcase.tst
Processing oldcase.tst
>> # test ability to recall old cases
>> # oldcase_v1 is a gas plant created with an old version of VMGSim
>> # and is a file version 1 case
>> recall oldcase_v1.s42
Recalling case created in an older version. Updating from: FlowsheetVersion = 1; ReleaseVersion = V0.0.0.0. To: FlowsheetVersion 78; ReleaseVersion V1.1.7.9
Finished recallling case C:\sim\cmd\test\oldcase_v1.s42
>> 
>> #print a couple of product streams
>> units Field
>> /S6.Out
Port: /S6.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 47.2701073653 = F
P                  = 570.0 = psia
MoleFlow           = 141.383855646 = lbmole/h
MassFlow           = 2682.66972849 = lb/h
VolumeFlow is invalid
StdLiqVolumeFlow is invalid
H                  = 3730.23839452 = Btu/lbmol
Energy             = 527306.799351 = Btu/hr
MolecularWeight    = 18.9743709863 = 
ZFactor            = 0.854821465427 = 
METHANE            = 0.841736278349 = 
ETHANE             = 0.122186805683 = 
PROPANE            = 0.0231930539931 = 
ISOBUTANE          = 0.00694494019013 = 
n-BUTANE           = 0.00423374541794 = 
ISOPENTANE         = 0.00103165085953 = 
n-PENTANE          = 0.000625901175295 = 
n-HEXANE           = 4.22448051424e-005 = 
n-HEPTANE          = 4.87953657374e-006 = 
n-OCTANE           = 4.99990684777e-007 = 

>> /T1.LiquidDraw_9_reboilerL
Port: /T1.LiquidDraw_9_reboilerL + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 228.486388444 = F
P                  = 155.0 * psia
MoleFlow           = 90.789514801 = lbmole/h
MassFlow           = 6713.88712122 = lb/h
VolumeFlow is invalid
StdLiqVolumeFlow is invalid
H                  = 4759.75346685 = Btu/lbmol
Energy             = 432063.039462 = Btu/hr
MolecularWeight    = 73.9500275548 = 
ZFactor            = 0.0472165883972 = 
METHANE            = 4.36891590347e-007 = 
ETHANE             = 0.000109010459609 = 
PROPANE            = 0.01 * 
ISOBUTANE          = 0.199307586782 = 
n-BUTANE           = 0.186175682473 = 
ISOPENTANE         = 0.168367745194 = 
n-PENTANE          = 0.144720277533 = 
n-HEXANE           = 0.121348137922 = 
n-HEPTANE          = 0.0971235415578 = 
n-OCTANE           = 0.0728475766198 = 

>> 
>> # change feed temperature - HX1 has temp cross
>> S1.In.T = 55
/T1 Inner Error 0.001982
/T1 Inner Error 0.000262
/T1 Inner Error 0.000012
/T1 Iteration 1 Outer Error 0.005021
/T1 Inner Error 0.001840
/T1 Inner Error 0.000134
/T1 Inner Error 0.000004
/T1 Iteration 2 Outer Error 0.001471
/T1 Inner Error 0.001874
/T1 Inner Error 0.000154
/T1 Inner Error 0.000006
/T1 Iteration 3 Outer Error 0.000109
/T1 Inner Error 0.000140
/T1 Inner Error 0.000013
/T1 Iteration 4 Outer Error 0.000013
/T1 Inner Error 0.000003
Temperature cross (-1.455075 10.000000) in /Hx1
>> /S6.Out
Port: /S6.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 57.6191351123 = F
P                  = 570.0 = psia
MoleFlow           = 142.297540774 = lbmole/h
MassFlow           = 2701.98741441 = lb/h
VolumeFlow         = 0.332857331094 = ft3/s
StdLiqVolumeFlow   = 0.0372021442809 = ft3/s
H                  = 3846.97538777 = Btu/lbmol
Energy             = 547323.083232 = Btu/hr
MolecularWeight    = 18.9882931196 = 
ZFactor            = 0.864441836945 = 
METHANE            = 0.840793256595 = 
ETHANE             = 0.122973208061 = 
PROPANE            = 0.023352783089 = 
ISOBUTANE          = 0.00708813610324 = 
n-BUTANE           = 0.00415041603839 = 
ISOPENTANE         = 0.000978115026403 = 
n-PENTANE          = 0.000615532430867 = 
n-HEXANE           = 4.2952726909e-005 = 
n-HEPTANE          = 5.06625104057e-006 = 
n-OCTANE           = 5.3367802283e-007 = 

>> /T1.LiquidDraw_9_reboilerL
Port: /T1.LiquidDraw_9_reboilerL + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 227.954646084 = F
P                  = 155.0 * psia
MoleFlow           = 90.6766080753 = lbmole/h
MassFlow           = 6707.31312597 = lb/h
VolumeFlow         = 0.0561850124639 = ft3/s
StdLiqVolumeFlow   = 0.0474244503558 = ft3/s
H                  = 4760.51319953 = Btu/lbmol
Energy             = 431594.600052 = Btu/hr
MolecularWeight    = 73.9696076897 = 
ZFactor            = 0.0472842001625 = 
METHANE            = 4.40480246671e-007 = 
ETHANE             = 0.000113586967468 = 
PROPANE            = 0.01 * 
ISOBUTANE          = 0.198245719442 = 
n-BUTANE           = 0.186399745401 = 
ISOPENTANE         = 0.168650381839 = 
n-PENTANE          = 0.144910009465 = 
n-HEXANE           = 0.121497698572 = 
n-HEPTANE          = 0.0972441335578 = 
n-OCTANE           = 0.0729382254769 = 

>> 
>> # Fix temp cross
>> /Hx1.DeltaTHO = None
/T1 Inner Error 0.000000
/T1 Iteration 1 Outer Error 0.000001
/T1 Inner Error 0.000000
>> /Hx1.DeltaTHI = 5
>> 
>> /S6.Out
Port: /S6.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 50.0 = F
P                  = 570.0 = psia
MoleFlow           = 142.297540774 = lbmole/h
MassFlow           = 2701.98741441 = lb/h
VolumeFlow         = 0.32519712346 = ft3/s
StdLiqVolumeFlow   = 0.0372021442809 = ft3/s
H                  = 3760.95937851 = Btu/lbmol
Energy             = 535085.274913 = Btu/hr
MolecularWeight    = 18.9882931196 = 
ZFactor            = 0.8572511048 = 
METHANE            = 0.840793256595 = 
ETHANE             = 0.122973208061 = 
PROPANE            = 0.023352783089 = 
ISOBUTANE          = 0.00708813610324 = 
n-BUTANE           = 0.00415041603839 = 
ISOPENTANE         = 0.000978115026403 = 
n-PENTANE          = 0.000615532430867 = 
n-HEXANE           = 4.2952726909e-005 = 
n-HEPTANE          = 5.06625104057e-006 = 
n-OCTANE           = 5.3367802283e-007 = 

>> /T1.LiquidDraw_9_reboilerL
Port: /T1.LiquidDraw_9_reboilerL + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 227.954667342 = F
P                  = 155.0 * psia
MoleFlow           = 90.6765955146 = lbmole/h
MassFlow           = 6707.31232067 = lb/h
VolumeFlow         = 0.0561850068439 = ft3/s
StdLiqVolumeFlow   = 0.0474244443706 = ft3/s
H                  = 4760.51431762 = Btu/lbmol
Energy             = 431594.641634 = Btu/hr
MolecularWeight    = 73.9696090552 = 
ZFactor            = 0.0472842009019 = 
METHANE            = 4.40479309942e-007 = 
ETHANE             = 0.000113586753985 = 
PROPANE            = 0.01 * 
ISOBUTANE          = 0.198245687485 = 
n-BUTANE           = 0.186399747741 = 
ISOPENTANE         = 0.168650405116 = 
n-PENTANE          = 0.144910029494 = 
n-HEXANE           = 0.121497715402 = 
n-HEPTANE          = 0.0972441470283 = 
n-OCTANE           = 0.0729382355805 = 

>> 
>> clear
>> # oldcase_v1 is the gasplant.tst case stored at file version 8
>> recall oldcase_v8.s42
Recalling case created in an older version. Updating from: FlowsheetVersion = 8; ReleaseVersion = V1.0.0.146. To: FlowsheetVersion 78; ReleaseVersion V1.1.7.9
Rename port /K-100.Efficiency to AdiabaticEff.  It is connected to 
Finished recallling case C:\sim\cmd\test\oldcase_v8.s42
>> /overhead.Out
Port: /overhead.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = -8.66595448464 = C
P                  = 1378.9514 = kPa
MoleFlow           = 15.8404441827 = kgmole/h
MassFlow           = 427.279786388 = kg/h
VolumeFlow is invalid
StdLiqVolumeFlow is invalid
H                  = 9166.23769587 = kJ/kmol
Energy             = 40332.5768297 = W
MolecularWeight    = 26.9739775892 = 
ZFactor            = 0.866733599814 = 
METHANE            = 0.445248381097 = 
ETHANE             = 0.336432457222 = 
PROPANE            = 0.212100596583 = 
ISOBUTANE          = 0.00505668216042 = 
n-BUTANE           = 0.00115445126161 = 
ISOPENTANE         = 5.46668761094e-006 = 
n-PENTANE          = 1.96410858262e-006 = 
n-HEXANE           = 8.78273688266e-010 = 
n-HEPTANE          = 1.63552940041e-012 = 
n-OCTANE           = 3.893543634e-015 = 

>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 4.42784561925e-007 = 
T                  = 126.098163855 = C
P                  = 1413.425185 = kPa
MoleFlow           = 19.7445870718 = kgmole/h
MassFlow           = 1465.33978512 = kg/h
VolumeFlow is invalid
StdLiqVolumeFlow is invalid
H                  = 14784.0831709 = kJ/kmol
Energy             = 81084.8937345 = W
MolecularWeight    = 74.214759711 = 
ZFactor            = 0.0635244749957 = 
METHANE            = 7.66841795561e-008 = 
ETHANE             = 0.000101142765726 = 
PROPANE            = 0.02 = 
ISOBUTANE          = 0.1892890799 = 
n-BUTANE           = 0.174362691675 = 
ISOPENTANE         = 0.158444335429 = 
n-PENTANE          = 0.136360884755 = 
n-HEXANE           = 0.160646732633 = 
n-HEPTANE          = 0.0918776691044 = 
n-OCTANE           = 0.0689174642383 = 

>> /Gas-Gas.OutC
Port: /Gas-Gas.ColdSide.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 7.22220002 = C
P                  = 3930.01149 = kPa
MoleFlow           = 29.7322802884 = kgmole/h
MassFlow           = 574.088199412 = kg/h
VolumeFlow is invalid
StdLiqVolumeFlow is invalid
H                  = 8622.67622432 = kJ/kmol
Energy             = 71214.3962049 = W
MolecularWeight    = 19.3085829221 = 
ZFactor            = 0.846909410655 = 
METHANE            = 0.830697713295 = 
ETHANE             = 0.125809800227 = 
PROPANE            = 0.0262767109139 = 
ISOBUTANE          = 0.00890604950361 = 
n-BUTANE           = 0.00564144962705 = 
ISOPENTANE         = 0.00156875008448 = 
n-PENTANE          = 0.000979883573007 = 
n-HEXANE           = 0.00010909606232 = 
n-HEPTANE          = 9.52256157048e-006 = 
n-OCTANE           = 1.02415256299e-006 = 

>> 
>> # change feed temp
>> /Feed.In.T = 60
Controller solver for /ContFS error - 0.000007
/deprop Inner Error 0.090507
/deprop Inner Error 0.012625
/deprop Inner Error 0.002148
/deprop Inner Error 0.000196
/deprop Inner Error 0.000031
/deprop Iteration 1 Outer Error 0.017260
/deprop Inner Error 0.045609
/deprop Inner Error 0.005375
/deprop Inner Error 0.000575
/deprop Inner Error 0.000045
/deprop Iteration 2 Outer Error 0.003281
/deprop Inner Error 0.008782
/deprop Inner Error 0.001066
/deprop Inner Error 0.000055
/deprop Iteration 3 Outer Error 0.000380
/deprop Inner Error 0.000794
/deprop Inner Error 0.000138
/deprop Inner Error 0.000004
/deprop Iteration 4 Outer Error 0.000076
/deprop Inner Error 0.000082
>> /overhead.Out
Port: /overhead.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = -3.40910405797 = C
P                  = 1378.9514 = kPa
MoleFlow           = 14.4159883443 = kgmole/h
MassFlow           = 402.92417967 = kg/h
VolumeFlow         = 20.2827075242 = m3/hr
StdLiqVolumeFlow   = 1.04683397154 = m3/hr
H                  = 9509.70670248 = kJ/kmol
Energy             = 38081.0613836 = W
MolecularWeight    = 27.9498130857 = 
ZFactor            = 0.865074037417 = 
METHANE            = 0.413659472727 = 
ETHANE             = 0.34044012535 = 
PROPANE            = 0.229255266686 = 
ISOBUTANE          = 0.0135276915205 = 
n-BUTANE           = 0.00309001625715 = 
ISOPENTANE         = 1.96953755811e-005 = 
n-PENTANE          = 7.72649218916e-006 = 
n-HEXANE           = 5.57863150384e-009 = 
n-HEPTANE          = 1.29337956194e-011 = 
n-OCTANE           = 3.54723688313e-014 = 

>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 126.129473145 = C
P                  = 1413.425185 = kPa
MoleFlow           = 19.5976305221 = kgmole/h
MassFlow           = 1456.7829775 = kg/h
VolumeFlow         = 2.9304228312 = m3/hr
StdLiqVolumeFlow   = 2.31052247727 = m3/hr
H                  = 14867.7777047 = kJ/kmol
Energy             = 80937.0039277 = W
MolecularWeight    = 74.3346485619 = 
ZFactor            = 0.0636637437105 = 
METHANE            = 1.13835551953e-007 = 
ETHANE             = 0.00014370479101 = 
PROPANE            = 0.02 = 
ISOBUTANE          = 0.18450169289 = 
n-BUTANE           = 0.174457240459 = 
ISOPENTANE         = 0.159718491349 = 
n-PENTANE          = 0.137374984661 = 
n-HEXANE           = 0.161811368595 = 
n-HEPTANE          = 0.0925590977547 = 
n-OCTANE           = 0.0694328211148 = 

>> /Gas-Gas.OutC
Port: /Gas-Gas.ColdSide.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 54.44444444 = C
P                  = 3930.01149 = kPa
MoleFlow           = 31.3036926765 = kgmole/h
MassFlow           = 606.947619199 = kg/h
VolumeFlow         = 19.7543111995 = m3/hr
StdLiqVolumeFlow   = 1.85834478918 = m3/hr
H                  = 10871.4051613 = kJ/kmol
Energy             = 94531.9794812 = W
MolecularWeight    = 19.389010283 = 
ZFactor            = 0.910527820702 = 
METHANE            = 0.82380567038 = 
ETHANE             = 0.132931658058 = 
PROPANE            = 0.0268026205723 = 
ISOBUTANE          = 0.00867376228669 = 
n-BUTANE           = 0.00527877697206 = 
ISOPENTANE         = 0.00142983171168 = 
n-PENTANE          = 0.000933401666093 = 
n-HEXANE           = 0.000128654860235 = 
n-HEPTANE          = 1.37565096299e-005 = 
n-OCTANE           = 1.86698313141e-006 = 

>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
/RootClone.deprop Inner Error 0.000004
/RootClone.deprop Iteration 1 Outer Error 0.000011
/RootClone.deprop Inner Error 0.000010
>> 
>> /RootClone.overhead.Out
Port: /RootClone.overhead.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.999999192843 = 
T                  = -3.4088134701 = C
P                  = 1378.9514 = kPa
MoleFlow           = 14.4160428768 = kgmole/h
MassFlow           = 402.927200976 = kg/h
VolumeFlow         = 20.2827810978 = m3/hr
StdLiqVolumeFlow   = 1.04683931023 = m3/hr
H                  = 9509.71803669 = kJ/kmol
Energy             = 38081.2508232 = W
MolecularWeight    = 27.9499169376 = 
ZFactor            = 0.865072971079 = 
METHANE            = 0.413657907951 = 
ETHANE             = 0.340438837544 = 
PROPANE            = 0.229255141112 = 
ISOBUTANE          = 0.013530024847 = 
n-BUTANE           = 0.00309065267194 = 
ISOPENTANE         = 1.97013593625e-005 = 
n-PENTANE          = 7.72892069622e-006 = 
n-HEXANE           = 5.58101823445e-009 = 
n-HEPTANE          = 1.29401321982e-011 = 
n-OCTANE           = 3.54918933614e-014 = 

>> 
>> clear
>> read cstr.tst
Processing cstr.tst
>> $thermo = VirtualMaterials.NRTL/Ideal/HC
>>  . -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> 
>> /thermo + 1,2-PROPYLENE_OXIDE METHANOL WATER 1,2-PROPYLENE_GLYCOL SULFURIC_ACID
1,2-PROPYLENE OXIDE METHANOL WATER 1,2-PROPYLENE GLYCOL SULFURIC ACID 
>> 
>> mycstr = KineticReactor.CSTR()
>> mycstr.NumberRxn = 1
>> /mycstr.Rxn0.Formula = theRxn:1.0*'1,2-PROPYLENE GLYCOL'-1.0*!'1,2-PROPYLENE OXIDE'-1.0*WATER
>> /mycstr.CustomEquationUnitSet = British
>> /mycstr.Rxn0.ReactionRateEq = R = 1.987
k = 16.96E12*exp(-32400.0/(R*T))
r = k*rxnCmp['1,2-PROPYLENE_OXIDE'].Concentration/3600.0
>> 
>> units British
>> /mycstr.In.T = 75 F
>> 
>> /mycstr.In.Fraction = 43.04 71.87 802.8 0 0
>> /mycstr.In.MassFlow = None
>> /mycstr.In.MoleFlow = 917.7099999999999
>> /mycstr.Out.T = 613 R
>> /mycstr.DeltaP.DP = 0
>> /mycstr.Volume.Volume = 300 gallon
>> /mycstr.In.P = 200 kPa
Calculating Jacobian for /mycstr
Calculating disturbance 10 of 14 in jacobian of /mycstr
/mycstr Iteration 1 Max Error 0.037243
Calculating Jacobian for /mycstr
Calculating disturbance 10 of 14 in jacobian of /mycstr
/mycstr Iteration 2 Max Error 0.000026
Calculating Jacobian for /mycstr
Calculating disturbance 10 of 14 in jacobian of /mycstr
Converged /mycstr in 3 iterations
>> 
>> mycstr.Out
Port: /mycstr.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 613.0 * R
P                  = 29.0075487795 = psia
MoleFlow           = 880.981986974 = lbmole/h
MassFlow           = 19265.2414478 = lb/h
VolumeFlow         = 0.0910158890467 = ft3/s
StdLiqVolumeFlow   = 0.0882440276933 = ft3/s
H                  = -13262.7635079 = Btu/lbmol
Energy             = -11682290.912 = Btu/hr
MolecularWeight    = 21.8679175427 = 
ZFactor            = 0.0016399878909 = 
1,2-PROPYLENE OXIDE = 0.00716471740349 = 
METHANOL           = 0.081579420536 = 
WATER              = 0.869566005095 = 
1,2-PROPYLENE GLYCOL = 0.0416898569651 = 
SULFURIC ACID      = 0.0 = 

>> mycstr.OutQ
Port: /mycstr.OutQ + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 78131.026583 = Btu/hr

>> 
>> #Solve for energy now
>> /mycstr.Out.T = None
>> /mycstr.OutQ.Energy = 0
Calculating Jacobian for /mycstr
Calculating disturbance 10 of 14 in jacobian of /mycstr
/mycstr Iteration 1 Max Error 0.014035
Calculating Jacobian for /mycstr
Calculating disturbance 10 of 14 in jacobian of /mycstr
/mycstr Iteration 2 Max Error 0.000633
Calculating Jacobian for /mycstr
Calculating disturbance 10 of 14 in jacobian of /mycstr
Converged /mycstr in 3 iterations
>> 
>> mycstr.Out
Port: /mycstr.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 620.626131185 = R
P                  = 29.0075487795 = psia
MoleFlow           = 879.423943211 = lbmole/h
MassFlow           = 19265.2414478 = lb/h
VolumeFlow         = 0.0911837856558 = ft3/s
StdLiqVolumeFlow   = 0.0881444947195 = ft3/s
H                  = -13136.4175967 = Btu/lbmol
Energy             = -11550537.4862 = Btu/hr
MolecularWeight    = 21.9066601456 = 
ZFactor            = 0.00162569924754 = 
1,2-PROPYLENE OXIDE = 0.00540574685018 = 
METHANOL           = 0.0817239518606 = 
WATER              = 0.869334919879 = 
1,2-PROPYLENE GLYCOL = 0.0435353814103 = 
SULFURIC ACID      = 0.0 = 

>> mycstr.OutQ
Port: /mycstr.OutQ + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 0.0 * Btu/hr

>> 
>> copy /mycstr
Copied /mycstr to the clipboard
>> paste /
Pasting /mycstr
Pasted /mycstr as /mycstrClone
Converged /mycstrClone in 0 iterations
>> mycstrClone.Out
Port: /mycstrClone.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 620.626131185 = R
P                  = 29.0075487795 = psia
MoleFlow           = 879.423943211 = lbmole/h
MassFlow           = 19265.2414478 = lb/h
VolumeFlow         = 0.0911837856558 = ft3/s
StdLiqVolumeFlow   = 0.0881444947195 = ft3/s
H                  = -13136.4175967 = Btu/lbmol
Energy             = -11550537.4862 = Btu/hr
MolecularWeight    = 21.9066601456 = 
ZFactor            = 0.00162569924754 = 
1,2-PROPYLENE OXIDE = 0.00540574685018 = 
METHANOL           = 0.0817239518606 = 
WATER              = 0.869334919879 = 
1,2-PROPYLENE GLYCOL = 0.0435353814103 = 
SULFURIC ACID      = 0.0 = 

>> mycstrClone.OutQ
Port: /mycstrClone.OutQ + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 0.0 * Btu/hr

>> 
>> clear
>> read compressorwcurve.tst
Processing compressorwcurve.tst
>> optimizecode 1
>> maxversions 0
>> units Field
>> /LiquidPhases = 2
>> /StdLiqVolRefT = 288.15 
>>  /StdLiqVolRefT = 60 F
>> /RecycleDetails = 1
>> displayproperties
VapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow H Energy MolecularWeight ZFactor 
>> displayproperties VapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow StdGasVolumeFlow Energy H S MolecularWeight MassDensity Cp ThermalConductivity Viscosity molarV ZFactor
>> commonproperties
T P H S molarV ZFactor MolecularWeight StdLiqMolarVol 
>> commonproperties + ZFactor P T MolecularWeight MassDensity StdLiqMolarVolVapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow StdGasVolumeFlow Energy H S MolecularWeight MassDensity Cp ThermalConductivity Viscosity molarV ZFactor
>> units SI
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + METHANE ETHANE PROPANE n-BUTANE
METHANE ETHANE PROPANE n-BUTANE 
>> realcomp = Compressor.CompressorWithCurve()
>> cd realcomp
/realcomp
>> NumberTables = 1
>> CompressorSpeed0 = 1800.0
>> FlowCurve0 = 0.0 1000.0 2000.0 3000.0 4000.0 5000.0 6000.0 7000.0
>> HeadCurve0 = 700.0  600.0   500.0   400.0   300.0   200.0   100.0   0.0
>> EfficiencyCurve0 = 0.0 0.5 0.7 0.8 0.8 0.7 0.5 0.0
>> CompressorSpeed = 1800
>> In.Fraction = .4 .3 .2 .1
>> In.P = 101.325
>> In.T = 30
>> Out.P = 106
>> Out
Port: /realcomp.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 32.5449927082 = C
P                     = 106.0 * kPa
MoleFlow              = 125.060152855 = kgmole/h
MassFlow              = 3760.4387386 = kg/h
VolumeFlow            = 2975.51991854 = m3/hr
StdLiqVolumeFlow      = 9.32645004203 = m3/hr
StdGasVolumeFlow      = 71105.146442 = SCMD
Energy                = 440382.365712 = W
H                     = 12676.9117131 = kJ/kmol
S                     = 201.918538491 = kJ/kmol-K
MolecularWeight       = 30.06904 = 
MassDensity           = 1.26379215786 = kg/m3
Cp                    = 56.7313990984 = kJ/kmol-K
ThermalConductivity   = 0.0238770739545 = W/m-K
Viscosity             = 9.84871705852e-006 = Pa-s
molarV                = 23.792709753 = m3/kmol
ZFactor               = 0.99227272747 = 
METHANE               = 0.4 = 
ETHANE                = 0.3 = 
PROPANE               = 0.2 = 
n-BUTANE              = 0.1 = 

>> InQ
Port: /realcomp.TotalQ.In + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 4915.51258643 = W

>> /realcomp.EfficiencyCurveType = Polytropic
>> Out
Port: /realcomp.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 32.547088526 = C
P                     = 106.0 * kPa
MoleFlow              = 125.060152855 = kgmole/h
MassFlow              = 3760.4387386 = kg/h
VolumeFlow            = 2975.54077771 = m3/hr
StdLiqVolumeFlow      = 9.32645004203 = m3/hr
StdGasVolumeFlow      = 71105.146442 = SCMD
Energy                = 440386.496143 = W
H                     = 12677.0306123 = kJ/kmol
S                     = 201.918927436 = kJ/kmol-K
MolecularWeight       = 30.06904 = 
MassDensity           = 1.26378329841 = kg/m3
Cp                    = 56.731623537 = kJ/kmol-K
ThermalConductivity   = 0.0238773262693 = W/m-K
Viscosity             = 9.84877821064e-006 = Pa-s
molarV                = 23.792876546 = m3/kmol
ZFactor               = 0.992272880624 = 
METHANE               = 0.4 = 
ETHANE                = 0.3 = 
PROPANE               = 0.2 = 
n-BUTANE              = 0.1 = 

>> AdiabaticEff
Port: /realcomp.EfficiencySig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.799328336463 = 

>> PolytropicEff
Port: /realcomp.PolytropicEffSig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.8 = 

>> /realcomp.EfficiencyCurveType = Adiabatic
>> AdiabaticEff
Port: /realcomp.EfficiencySig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.8 = 

>> PolytropicEff
Port: /realcomp.PolytropicEffSig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.800669417634 = 

>> '/realcomp.Out.P' =
>> '/realcomp.In.VolumeFlow' =  2500
>> AdiabaticEff
Port: /realcomp.EfficiencySig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.75 = 

>> PolytropicEff
Port: /realcomp.PolytropicEffSig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.750957986125 = 

>> cd /
/
>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
>> /RootClone.realcomp.Out
Port: /RootClone.realcomp.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = None
T                     = None
P                     = None
MoleFlow              = None
MassFlow              = None
VolumeFlow            = None
StdLiqVolumeFlow      = None
StdGasVolumeFlow      = None
Energy                = None
H                     = None
S                     = None
MolecularWeight       = None
MassDensity           = None
Cp                    = None
ThermalConductivity   = None
Viscosity             = None
molarV                = None
ZFactor               = None
METHANE               = None
ETHANE                = None
PROPANE               = None
n-BUTANE              = None

>> 
>> clear
>> read expanderwcurve.tst
Processing expanderwcurve.tst
>> optimizecode 1
>> maxversions 0
>> units Field
>> /LiquidPhases = 2
>> /StdLiqVolRefT = 288.15 
>>  /StdLiqVolRefT = 60 F
>> /RecycleDetails = 1
>> displayproperties
VapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow H Energy MolecularWeight ZFactor 
>> displayproperties VapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow StdGasVolumeFlow Energy H S MolecularWeight MassDensity Cp ThermalConductivity Viscosity molarV ZFactor
>> commonproperties
T P H S molarV ZFactor MolecularWeight StdLiqMolarVol 
>> commonproperties + ZFactor P T MolecularWeight MassDensity StdLiqMolarVolVapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow StdGasVolumeFlow Energy H S MolecularWeight MassDensity Cp ThermalConductivity Viscosity molarV ZFactor
>> units SI
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + METHANE ETHANE PROPANE n-BUTANE
METHANE ETHANE PROPANE n-BUTANE 
>> realExpander = Compressor.ExpanderWithCurve()
>> cd realExpander
/realExpander
>> NumberTables = 1
>> ExpanderSpeed0 = 1800.0
>> FlowCurve0 = 0.0 1000.0 2000.0 3000.0 4000.0 5000.0 6000.0 7000.0
>> HeadCurve0 = 0.0  5637.0   11273.0   16910.0   22546.0   28184.0   33821.0   39457.0
>> EfficiencyCurve0 = 0.0 0.5 0.7 0.78 0.8 0.7 0.6 0.55
>> ExpanderSpeed = 1800
>> In.Fraction = .4 .3 .2 .1
>> In.P = 206
>> In.T = 30
>> In.MassFlow = 1000
>> In
Port: /realExpander.FlowSensor.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 30.0 * C
P                     = 206.0 * kPa
MoleFlow              = 33.2567983547 = kgmole/h
MassFlow              = 1000.0 * kg/h
VolumeFlow            = 400.632941405 = m3/hr
StdLiqVolumeFlow      = 2.48014944275 = m3/hr
StdGasVolumeFlow      = 18908.7368216 = SCMD
Energy                = 115275.068462 = W
H                     = 12478.3583205 = kJ/kmol
S                     = 195.803355069 = kJ/kmol-K
MolecularWeight       = 30.06904 = 
MassDensity           = 2.49605036594 = kg/m3
Cp                    = 56.7349509677 = kJ/kmol-K
ThermalConductivity   = 0.0235713133614 = W/m-K
Viscosity             = 9.79162900726e-006 = Pa-s
molarV                = 12.0466479404 = m3/kmol
ZFactor               = 0.984567451031 = 
METHANE               = 0.4 * 
ETHANE                = 0.3 * 
PROPANE               = 0.2 * 
n-BUTANE              = 0.1 * 

>> Out
Port: /realExpander.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = 1.0 = 
T                     = 26.7703140137 = C
P                     = 150.70103 = kPa
MoleFlow              = 33.2567983547 = kgmole/h
MassFlow              = 1000.0 = kg/h
VolumeFlow            = 543.904654256 = m3/hr
StdLiqVolumeFlow      = 2.48014944275 = m3/hr
StdGasVolumeFlow      = 18908.7368216 = SCMD
Energy                = 113871.153197 = W
H                     = 12326.3865372 = kJ/kmol
S                     = 197.863308787 = kJ/kmol-K
MolecularWeight       = 30.06904 = 
MassDensity           = 1.83855753426 = kg/m3
Cp                    = 56.2396505888 = kJ/kmol-K
ThermalConductivity   = 0.0231851009671 = W/m-K
Viscosity             = 9.6875287999e-006 = Pa-s
molarV                = 16.354690805 = m3/kmol
ZFactor               = 0.988376212319 = 
METHANE               = 0.4 = 
ETHANE                = 0.3 = 
PROPANE               = 0.2 = 
n-BUTANE              = 0.1 = 

>> OutQ
Port: /realExpander.TotalQ.Out + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 1403.91526547 = W

>> '/realExpander.In.MassFlow' =
>> '/realExpander.In.VolumeFlow' =  1000
>> AdiabaticEff
Port: /realExpander.EfficiencySig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.5 = 

>> PolytropicEff
Port: /realExpander.PolytropicEffSig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.477835055231 = 

>> /realExpander.EfficiencyCurveType = Polytropic
>> AdiabaticEff
Port: /realExpander.EfficiencySig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.522202379406 = 

>> PolytropicEff
Port: /realExpander.PolytropicEffSig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.5 = 

>> /realExpander.EfficiencyCurveType = Adiabatic
>> AdiabaticEff
Port: /realExpander.EfficiencySig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.5 = 

>> PolytropicEff
Port: /realExpander.PolytropicEffSig.effClone + sim.solver.Ports.Port_Signal
Connected to: None
Generic   = 0.477835055231 = 

>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
>> /RootClone.realExpander.Out
Port: /RootClone.realExpander.OutPSensor.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac               = None
T                     = None
P                     = None
MoleFlow              = None
MassFlow              = None
VolumeFlow            = None
StdLiqVolumeFlow      = None
StdGasVolumeFlow      = None
Energy                = None
H                     = None
S                     = None
MolecularWeight       = None
MassDensity           = None
Cp                    = None
ThermalConductivity   = None
Viscosity             = None
molarV                = None
ZFactor               = None
METHANE               = None
ETHANE                = None
PROPANE               = None
n-BUTANE              = None

>> 
>> clear
>> read pfr2.tst
Processing pfr2.tst
>> 
>> $thermo = VirtualMaterials.Advanced_Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> 
>> thermo + n-BUTANE ISOBUTANE
n-BUTANE ISOBUTANE 
>> 
>> pfr = KineticReactor.PFR()
>> pfr.In.T = 330 K
>> pfr.In.P = 3000 kPa
>> pfr.In.Fraction = 0.9 0.1
>> pfr.In.MoleFlow = 163
>> 
>> pfr.Length = 12.9 m
>> pfr.Diameter = 0.6 m
>> pfr.OutQ = 0
>> pfr.NumberSections = 40
>> 
>> pfr.NumberRxn = 1
>> pfr.Rxn0.Formula = theRxn0:1.0*ISOBUTANE-1.0*!'n-BUTANE'
>> pfr.CustomEquationUnitSet = sim42
>> 
>> pfr.Rxn0.ReactionRateEq = 
#The following are plain Python lines with the final goal of defining a variable called r
#which will be interpreted as the reaction rate in the CustomEquationUnitSet units.

#Define some constants
E = 65700.0                           #J/mol = kJ/kmol
T1 = 360.0                            #K
kRef = 31.1                           #1/h


#R is automatically loaded in sim42 units as kJ/kmolK
k = kRef*exp( (E/R)*(1.0/T1 - 1/T) )  #1/h

T2 = 60.0 + 273.15                    #K
KcRef = 3.03
Kc = KcRef*exp( (-6900.0/R)*(1/T2 - 1/T) )

#The unit set defined is sim42, hence concentration comes in kmol/m3
r = k*(rxnCmp['n-BUTANE'].Concentration - rxnCmp['ISOBUTANE'].Concentration/Kc)

#The unit set defined is sim42, hence r has to be returned in kmol/(s*m3)
r = r/3600.0                          #kmol/(s*m3)

>> 
>> pfr.DeltaP = 0.0
Calculating step 1 in /pfr. Currently in 0. Going from 0 to 12.9
Calculating step 2 in /pfr. Currently in 0.3225. Going from 0 to 12.9
Calculating step 3 in /pfr. Currently in 0.645. Going from 0 to 12.9
Calculating step 4 in /pfr. Currently in 0.9675. Going from 0 to 12.9
Calculating step 5 in /pfr. Currently in 1.29. Going from 0 to 12.9
Calculating step 6 in /pfr. Currently in 1.6125. Going from 0 to 12.9
Calculating step 7 in /pfr. Currently in 1.935. Going from 0 to 12.9
Calculating step 8 in /pfr. Currently in 2.2575. Going from 0 to 12.9
Calculating step 9 in /pfr. Currently in 2.58. Going from 0 to 12.9
Calculating step 10 in /pfr. Currently in 2.9025. Going from 0 to 12.9
Calculating step 11 in /pfr. Currently in 3.225. Going from 0 to 12.9
Calculating step 12 in /pfr. Currently in 3.5475. Going from 0 to 12.9
Calculating step 13 in /pfr. Currently in 3.87. Going from 0 to 12.9
Calculating step 14 in /pfr. Currently in 4.1925. Going from 0 to 12.9
Calculating step 15 in /pfr. Currently in 4.515. Going from 0 to 12.9
Calculating step 16 in /pfr. Currently in 4.8375. Going from 0 to 12.9
Calculating step 17 in /pfr. Currently in 5.16. Going from 0 to 12.9
Calculating step 18 in /pfr. Currently in 5.4825. Going from 0 to 12.9
Calculating step 19 in /pfr. Currently in 5.805. Going from 0 to 12.9
Calculating step 20 in /pfr. Currently in 6.1275. Going from 0 to 12.9
Calculating step 21 in /pfr. Currently in 6.45. Going from 0 to 12.9
Calculating step 22 in /pfr. Currently in 6.7725. Going from 0 to 12.9
Calculating step 23 in /pfr. Currently in 7.095. Going from 0 to 12.9
Calculating step 24 in /pfr. Currently in 7.4175. Going from 0 to 12.9
Calculating step 25 in /pfr. Currently in 7.74. Going from 0 to 12.9
Calculating step 26 in /pfr. Currently in 8.0625. Going from 0 to 12.9
Calculating step 27 in /pfr. Currently in 8.385. Going from 0 to 12.9
Calculating step 28 in /pfr. Currently in 8.7075. Going from 0 to 12.9
Calculating step 29 in /pfr. Currently in 9.03. Going from 0 to 12.9
Calculating step 30 in /pfr. Currently in 9.3525. Going from 0 to 12.9
Calculating step 31 in /pfr. Currently in 9.675. Going from 0 to 12.9
Calculating step 32 in /pfr. Currently in 9.9975. Going from 0 to 12.9
Calculating step 33 in /pfr. Currently in 10.32. Going from 0 to 12.9
Calculating step 34 in /pfr. Currently in 10.6425. Going from 0 to 12.9
Calculating step 35 in /pfr. Currently in 10.965. Going from 0 to 12.9
Calculating step 36 in /pfr. Currently in 11.2875. Going from 0 to 12.9
Calculating step 37 in /pfr. Currently in 11.61. Going from 0 to 12.9
Calculating step 38 in /pfr. Currently in 11.9325. Going from 0 to 12.9
Calculating step 39 in /pfr. Currently in 12.255. Going from 0 to 12.9
Calculating step 40 in /pfr. Currently in 12.5775. Going from 0 to 12.9
Calculating step 41 in /pfr. Currently in 12.9. Going from 0 to 12.9
>> 
>> pfr.T
Profile: T
[56.849997286990742, 57.688742808472625, 58.547191994451737, 59.424680683563508, 60.320252308515023, 61.232645794352493, 62.160158296154123, 63.100700677358645, 64.051727899531045, 65.01023622437117, 65.972703409557482, 66.935185025332373, 67.89324509921579, 68.84212453345549, 69.776768772782589, 70.691996400840594, 71.582664214393901, 72.443753645272295, 73.270610474101204, 74.059145574031277, 74.805848797557132, 75.508023929071328, 76.163790601836013, 76.772112488678999, 77.332792983346906, 77.84635859047637, 78.314060992753411, 78.737687617254778, 79.119440379395598, 79.461902413685152, 79.76778905381741, 80.039969943451979, 80.281334901697562, 80.494712021535008, 80.682802253475757, 80.848215996385079, 80.993346917464123, 81.120469421472649, 81.231596607482857, 81.328628489476841, 81.413233946116804, 81.413233946117032]
>> pfr.f
Profile: f
[[ 146.7          16.3       ]
 [ 143.4873432    19.5126568 ]
 [ 140.18965974   22.81034026]
 [ 136.80861009   26.19138991]
 [ 133.34696184   29.65303816]
 [ 129.80876981   33.19123019]
 [ 126.19958584   36.80041416]
 [ 122.52662448   40.47337552]
 [ 118.79895311   44.20104689]
 [ 115.02760096   47.97239904]
 [ 111.2256759    51.7743241 ]
 [ 107.40831409   55.59168591]
 [ 103.59262357   59.40737643]
 [  99.79745209   63.20254791]
 [  96.0430494    66.9569506 ]
 [  92.3505898    70.6494102 ]
 [  88.74157655   74.25842345]
 [  85.23717641   77.76282359]
 [  81.85749285   81.14250715]
 [  78.62085578   84.37914422]
 [  75.54317927   87.45682073]
 [  72.63744044   90.36255956]
 [  69.91332029   93.08667971]
 [  67.3770497    95.6229503 ]
 [  65.03134176   97.96865824]
 [  62.87570069  100.12429931]
 [  60.90666412  102.09333588]
 [  59.11824309  103.88175691]
 [  57.5024066   105.4975934 ]
 [  56.04957369  106.95042631]
 [  54.74909457  108.25090543]
 [  53.58968815  109.41031185]
 [  52.55981866  110.44018134]
 [  51.64801117  111.35198883]
 [  50.84309873  112.15690127]
 [  50.13440183  112.86559817]
 [  49.51186614  113.48813386]
 [  48.96613696  114.03386304]
 [  48.48860237  114.51139763]
 [  48.07140455  114.92859545]
 [  47.7074282   115.2925718 ]
 [  47.7074282   115.2925718 ]]
>> pfr.r
Profile: r
[[ 0.00952551]
 [ 0.00978675]
 [ 0.01004577]
 [ 0.01029973]
 [ 0.01054527]
 [ 0.01077845]
 [ 0.01099472]
 [ 0.011189  ]
 [ 0.01135567]
 [ 0.01148872]
 [ 0.01158188]
 [ 0.0116289 ]
 [ 0.01162381]
 [ 0.0115613 ]
 [ 0.01143709]
 [ 0.01124837]
 [ 0.01099413]
 [ 0.01067541]
 [ 0.01029543]
 [ 0.00985962]
 [ 0.00937532]
 [ 0.00885149]
 [ 0.00829818]
 [ 0.00772595]
 [ 0.00714534]
 [ 0.00656631]
 [ 0.00599784]
 [ 0.00544763]
 [ 0.0049219 ]
 [ 0.00442536]
 [ 0.00396127]
 [ 0.00353155]
 [ 0.00313697]
 [ 0.00277735]
 [ 0.00245175]
 [ 0.00215867]
 [ 0.00189622]
 [ 0.00166227]
 [ 0.00145455]
 [ 0.00127077]
 [ 0.00110866]
 [ 0.00110866]]
>> 
>> pfr.Ignored = 1
>> 
>> #Now solve it by providing r in different units
>> 
>> pfr.CustomEquationUnitSet = Field
>> 
>> pfr.Rxn0.ReactionRateEq = 
#The following are plain Python lines with the final goal of defining a variable called r
#which will be interpreted as the reaction rate in the CustomEquationUnitSet units.

#Define some constants
E = 65700.0 * 0.43                    #Btu/lbmol
T1 = 360.0 * 1.8                      #R
kRef = 31.1                           #1/h

#T came in F. Make it R
T = T + 459.67                        #R


#R is automatically loaded in Field units as psia-ft3/lbmolR
R = 1.987                         #Btu/lbmolR
k = kRef*exp( (E/R)*(1.0/T1 - 1/T) )  #1/h

T2 = (60.0 + 273.15) * 1.8            #R
KcRef = 3.03
Kc = KcRef*exp( ((-6900.0*0.43)/R)*(1/T2 - 1/T) )

#The unit set defined is sim42, hence concentration comes in lbmol/ft3
r = k*(rxnCmp['n-BUTANE'].Concentration - rxnCmp['ISOBUTANE'].Concentration/Kc)

#The unit set defined is Field, hence r has to be returned in lbmol/(s*ft3)
r = r/3600.0                          #lbmol/(s*ft3)

>> pfr.Ignored = None
Calculating step 1 in /pfr. Currently in 0. Going from 0 to 12.9
Calculating step 2 in /pfr. Currently in 0.3225. Going from 0 to 12.9
Calculating step 3 in /pfr. Currently in 0.645. Going from 0 to 12.9
Calculating step 4 in /pfr. Currently in 0.9675. Going from 0 to 12.9
Calculating step 5 in /pfr. Currently in 1.29. Going from 0 to 12.9
Calculating step 6 in /pfr. Currently in 1.6125. Going from 0 to 12.9
Calculating step 7 in /pfr. Currently in 1.935. Going from 0 to 12.9
Calculating step 8 in /pfr. Currently in 2.2575. Going from 0 to 12.9
Calculating step 9 in /pfr. Currently in 2.58. Going from 0 to 12.9
Calculating step 10 in /pfr. Currently in 2.9025. Going from 0 to 12.9
Calculating step 11 in /pfr. Currently in 3.225. Going from 0 to 12.9
Calculating step 12 in /pfr. Currently in 3.5475. Going from 0 to 12.9
Calculating step 13 in /pfr. Currently in 3.87. Going from 0 to 12.9
Calculating step 14 in /pfr. Currently in 4.1925. Going from 0 to 12.9
Calculating step 15 in /pfr. Currently in 4.515. Going from 0 to 12.9
Calculating step 16 in /pfr. Currently in 4.8375. Going from 0 to 12.9
Calculating step 17 in /pfr. Currently in 5.16. Going from 0 to 12.9
Calculating step 18 in /pfr. Currently in 5.4825. Going from 0 to 12.9
Calculating step 19 in /pfr. Currently in 5.805. Going from 0 to 12.9
Calculating step 20 in /pfr. Currently in 6.1275. Going from 0 to 12.9
Calculating step 21 in /pfr. Currently in 6.45. Going from 0 to 12.9
Calculating step 22 in /pfr. Currently in 6.7725. Going from 0 to 12.9
Calculating step 23 in /pfr. Currently in 7.095. Going from 0 to 12.9
Calculating step 24 in /pfr. Currently in 7.4175. Going from 0 to 12.9
Calculating step 25 in /pfr. Currently in 7.74. Going from 0 to 12.9
Calculating step 26 in /pfr. Currently in 8.0625. Going from 0 to 12.9
Calculating step 27 in /pfr. Currently in 8.385. Going from 0 to 12.9
Calculating step 28 in /pfr. Currently in 8.7075. Going from 0 to 12.9
Calculating step 29 in /pfr. Currently in 9.03. Going from 0 to 12.9
Calculating step 30 in /pfr. Currently in 9.3525. Going from 0 to 12.9
Calculating step 31 in /pfr. Currently in 9.675. Going from 0 to 12.9
Calculating step 32 in /pfr. Currently in 9.9975. Going from 0 to 12.9
Calculating step 33 in /pfr. Currently in 10.32. Going from 0 to 12.9
Calculating step 34 in /pfr. Currently in 10.6425. Going from 0 to 12.9
Calculating step 35 in /pfr. Currently in 10.965. Going from 0 to 12.9
Calculating step 36 in /pfr. Currently in 11.2875. Going from 0 to 12.9
Calculating step 37 in /pfr. Currently in 11.61. Going from 0 to 12.9
Calculating step 38 in /pfr. Currently in 11.9325. Going from 0 to 12.9
Calculating step 39 in /pfr. Currently in 12.255. Going from 0 to 12.9
Calculating step 40 in /pfr. Currently in 12.5775. Going from 0 to 12.9
Calculating step 41 in /pfr. Currently in 12.9. Going from 0 to 12.9
>> 
>> pfr.T
Profile: T
[56.849997286990742, 57.689411218811074, 58.548537301066403, 59.426707668668882, 60.322961241355983, 61.236031560849426, 62.164209498852756, 63.105398742971772, 64.057046252697376, 65.016136957587946, 65.979144742598976, 66.942127780449823, 67.900598305479889, 68.849830818901978, 69.784750030430416, 70.700169249581847, 71.590942227973812, 72.452049926552263, 73.278853128935225, 74.067229431623161, 74.813714305521557, 75.515602792528057, 76.171036891586255, 76.778990369887026, 77.339268053737442, 77.85241323326693, 78.319687881369703, 78.742888444807477, 79.124249006200102, 79.466297198268705, 79.771789823568213, 80.04361198710194, 80.284643173020072, 80.497712424984456, 80.685520826635525, 80.850678259731467, 80.995577417335426, 81.122503722534475, 81.23344411237656, 81.330296939970594, 81.414754108271723, 81.414754108271609]
>> pfr.f
Profile: f
[[ 146.7          16.3       ]
 [ 143.48477904   19.51522096]
 [ 140.18448357   22.81551643]
 [ 136.80078695   26.19921305]
 [ 133.33647296   29.66352704]
 [ 129.79561612   33.20438388]
 [ 126.1837918    36.8162082 ]
 [ 122.50824192   40.49175808]
 [ 118.778065     44.221935  ]
 [ 115.00433514   47.99566486]
 [ 111.20017649   51.79982351]
 [ 107.38077062   55.61922938]
 [ 103.56327068   59.43672932]
 [  99.76655751   63.23344249]
 [  96.01091313   66.98908687]
 [  92.31753783   70.68246217]
 [  88.70795242   74.29204758]
 [  85.20333116   77.79666884]
 [  81.82377394   81.17622606]
 [  78.58759577   84.41240423]
 [  75.5106852    87.4893148 ]
 [  72.60600704   90.39399296]
 [  69.88315287   93.11684713]
 [  67.34831356   95.65168644]
 [  65.00419747   97.99580253]
 [  62.85023901  100.14976099]
 [  60.88293222  102.11706778]
 [  59.09624918  103.90375082]
 [  57.48212558  105.51787442]
 [  56.03095333  106.96904667]
 [  54.73206163  108.26793837]
 [  53.57415421  109.42584579]
 [  52.54568528  110.45431472]
 [  51.63517438  111.36482562]
 [  50.83145266  112.16854734]
 [  50.12384167  112.87615833]
 [  49.50229029  113.49770971]
 [  48.9574486   114.0425514 ]
 [  48.48071051  114.51928949]
 [  48.06422473  114.93577527]
 [  47.70088257  115.29911743]
 [  47.70088257  115.29911743]]
>> pfr.r
Profile: r
[[ 0.00953314]
 [ 0.00979456]
 [ 0.01005373]
 [ 0.0103078 ]
 [ 0.01055339]
 [ 0.01078656]
 [ 0.01100277]
 [ 0.01119689]
 [ 0.01136331]
 [ 0.011496  ]
 [ 0.01158868]
 [ 0.01163513]
 [ 0.01162932]
 [ 0.01156599]
 [ 0.01144087]
 [ 0.01125116]
 [ 0.01099588]
 [ 0.01067608]
 [ 0.01029505]
 [ 0.00985822]
 [ 0.00937299]
 [ 0.00884833]
 [ 0.00829431]
 [ 0.00772152]
 [ 0.00714049]
 [ 0.00656118]
 [ 0.00599257]
 [ 0.00544234]
 [ 0.00491669]
 [ 0.0044203 ]
 [ 0.00395643]
 [ 0.00352698]
 [ 0.0031327 ]
 [ 0.0027734 ]
 [ 0.00244812]
 [ 0.00215536]
 [ 0.00189323]
 [ 0.00165957]
 [ 0.00145213]
 [ 0.0012686 ]
 [ 0.00110673]
 [ 0.00110673]]
>> 
>> copy /pfr
Copied /pfr to the clipboard
>> paste /
Pasting /pfr
Pasted /pfr as /pfrClone
Calculating step 1 in /pfrClone. Currently in 0. Going from 0 to 12.9
Calculating step 2 in /pfrClone. Currently in 0.3225. Going from 0 to 12.9
Calculating step 3 in /pfrClone. Currently in 0.645. Going from 0 to 12.9
Calculating step 4 in /pfrClone. Currently in 0.9675. Going from 0 to 12.9
Calculating step 5 in /pfrClone. Currently in 1.29. Going from 0 to 12.9
Calculating step 6 in /pfrClone. Currently in 1.6125. Going from 0 to 12.9
Calculating step 7 in /pfrClone. Currently in 1.935. Going from 0 to 12.9
Calculating step 8 in /pfrClone. Currently in 2.2575. Going from 0 to 12.9
Calculating step 9 in /pfrClone. Currently in 2.58. Going from 0 to 12.9
Calculating step 10 in /pfrClone. Currently in 2.9025. Going from 0 to 12.9
Calculating step 11 in /pfrClone. Currently in 3.225. Going from 0 to 12.9
Calculating step 12 in /pfrClone. Currently in 3.5475. Going from 0 to 12.9
Calculating step 13 in /pfrClone. Currently in 3.87. Going from 0 to 12.9
Calculating step 14 in /pfrClone. Currently in 4.1925. Going from 0 to 12.9
Calculating step 15 in /pfrClone. Currently in 4.515. Going from 0 to 12.9
Calculating step 16 in /pfrClone. Currently in 4.8375. Going from 0 to 12.9
Calculating step 17 in /pfrClone. Currently in 5.16. Going from 0 to 12.9
Calculating step 18 in /pfrClone. Currently in 5.4825. Going from 0 to 12.9
Calculating step 19 in /pfrClone. Currently in 5.805. Going from 0 to 12.9
Calculating step 20 in /pfrClone. Currently in 6.1275. Going from 0 to 12.9
Calculating step 21 in /pfrClone. Currently in 6.45. Going from 0 to 12.9
Calculating step 22 in /pfrClone. Currently in 6.7725. Going from 0 to 12.9
Calculating step 23 in /pfrClone. Currently in 7.095. Going from 0 to 12.9
Calculating step 24 in /pfrClone. Currently in 7.4175. Going from 0 to 12.9
Calculating step 25 in /pfrClone. Currently in 7.74. Going from 0 to 12.9
Calculating step 26 in /pfrClone. Currently in 8.0625. Going from 0 to 12.9
Calculating step 27 in /pfrClone. Currently in 8.385. Going from 0 to 12.9
Calculating step 28 in /pfrClone. Currently in 8.7075. Going from 0 to 12.9
Calculating step 29 in /pfrClone. Currently in 9.03. Going from 0 to 12.9
Calculating step 30 in /pfrClone. Currently in 9.3525. Going from 0 to 12.9
Calculating step 31 in /pfrClone. Currently in 9.675. Going from 0 to 12.9
Calculating step 32 in /pfrClone. Currently in 9.9975. Going from 0 to 12.9
Calculating step 33 in /pfrClone. Currently in 10.32. Going from 0 to 12.9
Calculating step 34 in /pfrClone. Currently in 10.6425. Going from 0 to 12.9
Calculating step 35 in /pfrClone. Currently in 10.965. Going from 0 to 12.9
Calculating step 36 in /pfrClone. Currently in 11.2875. Going from 0 to 12.9
Calculating step 37 in /pfrClone. Currently in 11.61. Going from 0 to 12.9
Calculating step 38 in /pfrClone. Currently in 11.9325. Going from 0 to 12.9
Calculating step 39 in /pfrClone. Currently in 12.255. Going from 0 to 12.9
Calculating step 40 in /pfrClone. Currently in 12.5775. Going from 0 to 12.9
Calculating step 41 in /pfrClone. Currently in 12.9. Going from 0 to 12.9
>> pfrClone.T
Profile: T
[56.849997286990742, 57.689411218811074, 58.548537301066403, 59.426707668668882, 60.322961241355983, 61.236031560849426, 62.164209498852756, 63.105398742971772, 64.057046252697376, 65.016136957587946, 65.979144742598976, 66.942127780449823, 67.900598305479889, 68.849830818901978, 69.784750030430416, 70.700169249581847, 71.590942227973812, 72.452049926552263, 73.278853128935225, 74.067229431623161, 74.813714305521557, 75.515602792528057, 76.171036891586255, 76.778990369887026, 77.339268053737442, 77.85241323326693, 78.319687881369703, 78.742888444807477, 79.124249006200102, 79.466297198268705, 79.771789823568213, 80.04361198710194, 80.284643173020072, 80.497712424984456, 80.685520826635525, 80.850678259731467, 80.995577417335426, 81.122503722534475, 81.23344411237656, 81.330296939970594, 81.414754108271723, 81.414754108271609]
>> pfrClone.f
Profile: f
[[ 146.7          16.3       ]
 [ 143.48477904   19.51522096]
 [ 140.18448357   22.81551643]
 [ 136.80078695   26.19921305]
 [ 133.33647296   29.66352704]
 [ 129.79561612   33.20438388]
 [ 126.1837918    36.8162082 ]
 [ 122.50824192   40.49175808]
 [ 118.778065     44.221935  ]
 [ 115.00433514   47.99566486]
 [ 111.20017649   51.79982351]
 [ 107.38077062   55.61922938]
 [ 103.56327068   59.43672932]
 [  99.76655751   63.23344249]
 [  96.01091313   66.98908687]
 [  92.31753783   70.68246217]
 [  88.70795242   74.29204758]
 [  85.20333116   77.79666884]
 [  81.82377394   81.17622606]
 [  78.58759577   84.41240423]
 [  75.5106852    87.4893148 ]
 [  72.60600704   90.39399296]
 [  69.88315287   93.11684713]
 [  67.34831356   95.65168644]
 [  65.00419747   97.99580253]
 [  62.85023901  100.14976099]
 [  60.88293222  102.11706778]
 [  59.09624918  103.90375082]
 [  57.48212558  105.51787442]
 [  56.03095333  106.96904667]
 [  54.73206163  108.26793837]
 [  53.57415421  109.42584579]
 [  52.54568528  110.45431472]
 [  51.63517438  111.36482562]
 [  50.83145266  112.16854734]
 [  50.12384167  112.87615833]
 [  49.50229029  113.49770971]
 [  48.9574486   114.0425514 ]
 [  48.48071051  114.51928949]
 [  48.06422473  114.93577527]
 [  47.70088257  115.29911743]
 [  47.70088257  115.29911743]]
>> pfrClone.r
Profile: r
[[ 0.00953314]
 [ 0.00979456]
 [ 0.01005373]
 [ 0.0103078 ]
 [ 0.01055339]
 [ 0.01078656]
 [ 0.01100277]
 [ 0.01119689]
 [ 0.01136331]
 [ 0.011496  ]
 [ 0.01158868]
 [ 0.01163513]
 [ 0.01162932]
 [ 0.01156599]
 [ 0.01144087]
 [ 0.01125116]
 [ 0.01099588]
 [ 0.01067608]
 [ 0.01029505]
 [ 0.00985822]
 [ 0.00937299]
 [ 0.00884833]
 [ 0.00829431]
 [ 0.00772152]
 [ 0.00714049]
 [ 0.00656118]
 [ 0.00599257]
 [ 0.00544234]
 [ 0.00491669]
 [ 0.0044203 ]
 [ 0.00395643]
 [ 0.00352698]
 [ 0.0031327 ]
 [ 0.0027734 ]
 [ 0.00244812]
 [ 0.00215536]
 [ 0.00189323]
 [ 0.00165957]
 [ 0.00145213]
 [ 0.0012686 ]
 [ 0.00110673]
 [ 0.00110673]]
>> 
>> 
>> 
>> clear
>> read stab.tst
Processing stab.tst
>> # Depropanizer test (from old Hysim manual)
>> units SI
>> thermo = VirtualMaterials.Peng-Robinson
The usage of thermo = VirtualMaterials.Peng-Robinson is obsolete and will be deprecated. Use $thermoname = opTypeDesc instead
>> thermo + propane isobutane n-butane isopentane n-pentane
propane isobutane n-butane isopentane n-pentane 
>> thermo + n-hexane n-heptane n-octane
n-hexane n-heptane n-octane 
>> thermo + n-nonane n-decane
n-nonane n-decane 
>> thermo + water
water 
>> 
>> stab = Tower.Tower()
>> stab.Stage_0 + 10  # twelve stages
>> stab.LiquidPhases = 2
>> 
>> cd stab.Stage_0
/stab.Stage_0
>> 
>> l = Tower.LiquidDraw()
>> l.Port.P = 1000
>> 
>> cond = Tower.EnergyFeed(0)
>> 
>> wd = Tower.WaterDraw()
>> 
>> estT = Tower.Estimate('T')
>> estT.Value = 25
>> 
>> reflux = Tower.StageSpecification('Reflux')
>> reflux.Value = 2
>> 
>> cd ../Stage_5
/stab.Stage_5
>> f = Tower.Feed()
>> f.Port.T = 50
>> f.Port.P = 2000
>> f.Port.MoleFlow = 1000
>> f.Port.Fraction = .1702 .1473 .1132 .1166 .1066 .0963 .0829 .0694 .0558 .0417 .005
>> f.Port
Port: /stab.Feed_5_f + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 50.0 * C
P                  = 2000.0 * kPa
MoleFlow           = 1000.0 * kgmole/h
MassFlow           = 76081.8503861 = kg/h
VolumeFlow         = 124.063835754 = m3/hr
StdLiqVolumeFlow   = 120.054711602 = m3/hr
H                  = -174.394880345 = kJ/kmol
Energy             = -48443.0223181 = W
MolecularWeight    = 76.0818503861 = 
ZFactor            = 0.0923507970059 = 
PROPANE            = 0.169353233831 * 
ISOBUTANE          = 0.146567164179 * 
n-BUTANE           = 0.11263681592 * 
ISOPENTANE         = 0.116019900498 * 
n-PENTANE          = 0.106069651741 * 
n-HEXANE           = 0.0958208955224 * 
n-HEPTANE          = 0.0824875621891 * 
n-OCTANE           = 0.0690547263682 * 
n-NONANE           = 0.0555223880597 * 
n-DECANE           = 0.0414925373134 * 
WATER              = 0.00497512437811 * 

>> 
>> cd ../Stage_11
/stab.Stage_11
>> l = Tower.LiquidDraw()
>> l.Port.P = 1100
>> l.Port.Fraction.n-BUTANE = .02
>> 
>> reb = Tower.EnergyFeed(1)
>> estT = Tower.Estimate('T')
>> estT.Value = 100
>> 
>> cd ..
/stab
>> 
>> /overhead = Stream.Stream_Material()
>> /overhead.In -> Stage_0.l.Port
>> 
>> /bottoms = Stream.Stream_Material()
>> /bottoms.In -> Stage_11.l.Port
>> 
>> 
>> /stab.MaxOuterLoops = 40
>> TryToSolve = 1  # start calculation
Calculating Jacobian for /stab
Calculating disturbance 10 of 12 in jacobian of /stab
/stab Inner Error 0.314887
/stab Inner Error 0.075632
/stab Inner Error 0.020048
/stab Inner Error 0.006883
/stab Inner Error 0.001487
/stab Inner Error 0.000397
/stab Inner Error 0.000058
/stab Iteration 1 Outer Error 0.056709
/stab Inner Error 0.166253
/stab Inner Error 0.051585
/stab Inner Error 0.015755
/stab Inner Error 0.003345
/stab Inner Error 0.000373
/stab Inner Error 0.000079
/stab Iteration 2 Outer Error 0.020455
/stab Inner Error 0.029520
/stab Inner Error 0.020111
/stab Inner Error 0.003398
/stab Inner Error 0.000929
/stab Inner Error 0.000073
/stab Iteration 3 Outer Error 0.014240
/stab Inner Error 0.004554
/stab Inner Error 0.000864
/stab Inner Error 0.000098
/stab Iteration 4 Outer Error 0.002115
/stab Inner Error 0.001752
/stab Inner Error 0.000236
/stab Inner Error 0.000057
/stab Iteration 5 Outer Error 0.001840
/stab Inner Error 0.000806
/stab Inner Error 0.000228
/stab Inner Error 0.000040
/stab Iteration 6 Outer Error 0.001540
/stab Inner Error 0.000113
/stab Inner Error 0.000019
/stab Iteration 7 Outer Error 0.001467
/stab Inner Error 0.000015
/stab Iteration 8 Outer Error 0.001009
/stab Inner Error 0.000009
/stab Iteration 9 Outer Error 0.000910
/stab Inner Error 0.000008
/stab Iteration 10 Outer Error 0.000652
/stab Inner Error 0.000006
/stab Iteration 11 Outer Error 0.000565
/stab Inner Error 0.000004
/stab Iteration 12 Outer Error 0.000417
/stab Inner Error 0.000004
/stab Iteration 13 Outer Error 0.000352
/stab Inner Error 0.000003
/stab Iteration 14 Outer Error 0.000264
/stab Inner Error 0.000002
/stab Iteration 15 Outer Error 0.000219
/stab Inner Error 0.000002
/stab Iteration 16 Outer Error 0.000166
/stab Inner Error 0.000001
/stab Iteration 17 Outer Error 0.000137
/stab Inner Error 0.000001
/stab Iteration 18 Outer Error 0.000105
/stab Inner Error 0.000001
/stab Iteration 19 Outer Error 0.000086
/stab Inner Error 0.000001
>> 
>> /overhead.Out
Port: /overhead.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 50.8426825299 = C
P                  = 1000.0 = kPa
MoleFlow           = 441.141315187 = kgmole/h
MassFlow           = 23627.8270622 = kg/h
VolumeFlow         = 45.1126992036 = m3/hr
StdLiqVolumeFlow   = 42.6305938069 = m3/hr
H                  = 934.45334777 = kJ/kmol
Energy             = 114507.216338 = W
MolecularWeight    = 53.560676021 = 
ZFactor            = 0.0379625594961 = 
PROPANE            = 0.383709607329 = 
ISOBUTANE          = 0.3226091215 = 
n-BUTANE           = 0.230192730369 = 
ISOPENTANE         = 0.0411859174117 = 
n-PENTANE          = 0.0208939905511 = 
n-HEXANE           = 9.05966241769e-005 = 
n-HEPTANE          = 1.92245153668e-006 = 
n-OCTANE           = 3.63155295293e-008 = 
n-NONANE           = 7.72113729748e-010 = 
n-DECANE           = 1.61497231153e-011 = 
WATER              = 0.00131607665975 = 

>> /bottoms.Out
Port: /bottoms.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 165.337490864 = C
P                  = 1100.0 = kPa
MoleFlow           = 554.464137677 = kgmole/h
MassFlow           = 52374.8546663 = kg/h
VolumeFlow         = 103.072652484 = m3/hr
StdLiqVolumeFlow   = 77.3448740667 = m3/hr
H                  = 28050.2380577 = kJ/kmol
Energy             = 4320236.40453 = W
MolecularWeight    = 94.4603106086 = 
ZFactor            = 0.0560886614422 = 
PROPANE            = 0.000149825747204 = 
ISOBUTANE          = 0.00766677543335 = 
n-BUTANE           = 0.02 = 
ISOPENTANE         = 0.176478664848 = 
n-PENTANE          = 0.174677571891 = 
n-HEXANE           = 0.17274503994 = 
n-HEPTANE          = 0.148768348593 = 
n-OCTANE           = 0.124543150143 = 
n-NONANE           = 0.1001370223 = 
n-DECANE           = 0.0748335816272 = 
WATER              = 2.62209917439e-009 = 

>> 
>> copy /stab /overhead /bottoms
Copied /stab /overhead /bottoms to the clipboard
>> paste /
Pasting /stab /overhead /bottoms
Pasted /stab /overhead /bottoms as /stabClone /overheadClone /bottomsClone
/stabClone Inner Error 0.000000
/stabClone Iteration 1 Outer Error 0.003276
/stabClone Inner Error 0.000004
/stabClone Iteration 2 Outer Error 0.000143
/stabClone Inner Error 0.000002
/stabClone Iteration 3 Outer Error 0.000118
/stabClone Inner Error 0.000002
/stabClone Iteration 4 Outer Error 0.000096
/stabClone Inner Error 0.000001
>> /overheadClone.Out
Port: /overheadClone.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 50.8445321439 = C
P                  = 1000.0 = kPa
MoleFlow           = 441.139729228 = kgmole/h
MassFlow           = 23627.8147132 = kg/h
VolumeFlow         = 45.1129304015 = m3/hr
StdLiqVolumeFlow   = 42.6305939946 = m3/hr
H                  = 934.707560148 = kJ/kmol
Energy             = 114537.955553 = W
MolecularWeight    = 53.5608405856 = 
ZFactor            = 0.0379626738097 = 
PROPANE            = 0.383710985004 = 
ISOBUTANE          = 0.322610244085 = 
n-BUTANE           = 0.230193554329 = 
ISOPENTANE         = 0.0411864683439 = 
n-PENTANE          = 0.0208943707437 = 
n-HEXANE           = 9.05989068264e-005 = 
n-HEPTANE          = 1.92249673715e-006 = 
n-OCTANE           = 3.63162896449e-008 = 
n-NONANE           = 7.72127344979e-010 = 
n-DECANE           = 1.61499387655e-011 = 
WATER              = 0.00131181898661 = 

>> /bottomsClone.Out
Port: /bottomsClone.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 165.337514785 = C
P                  = 1100.0 = kPa
MoleFlow           = 554.46384332 = kgmole/h
MassFlow           = 52374.8334128 = kg/h
VolumeFlow         = 103.072610463 = m3/hr
StdLiqVolumeFlow   = 77.3448402428 = m3/hr
H                  = 28050.24765 = kJ/kmol
Energy             = 4320235.58835 = W
MolecularWeight    = 94.4603224247 = 
ZFactor            = 0.0560886652927 = 
PROPANE            = 0.000149827270219 = 
ISOBUTANE          = 0.00766680913198 = 
n-BUTANE           = 0.02 = 
ISOPENTANE         = 0.176478438014 = 
n-PENTANE          = 0.174677421902 = 
n-HEXANE           = 0.172745130091 = 
n-HEPTANE          = 0.148768427542 = 
n-OCTANE           = 0.124543216261 = 
n-NONANE           = 0.100137075461 = 
n-DECANE           = 0.0748336213554 = 
WATER              = 2.6221272558e-009 = 

>> 
>> 
>> clear
>> read langs.tst
Processing langs.tst
>> language Spanish
>> $thermo = VirtualMaterials.Advanced_Peng-Robinson
>>  . -> $thermo
Caso termodinmico conectado a operacin unitaria. / a /thermo
>> cd thermo
/thermo
>> /thermo + PROPANE ISOBUTANE n-BUTANE
PROPANE ISOBUTANE n-BUTANE 
>> language Portuguese
>> /thermo - ISOBUTANE n-BUTANE
>> /thermo + ETHANE ISOBUTANE
ETHANE ISOBUTANE 
>> language French
>> /thermo + n-BUTANE ISOPENTANE
n-BUTANE ISOPENTANE 
>> cd $
$
>> cd $
$
>> thermo2 = VirtualMaterials.RK
>> cd thermo2
$thermo2
>> $thermo2 + PROPANE ISOBUTANE n-BUTANE
PROPANE ISOBUTANE n-BUTANE 
>> language Malay
>> $thermo2 - ISOBUTANE
>> cd /
/
>> language Spanish
>> stream = Stream.Stream_Material()
>> cd stream
/stream
>> language Malay
>> /stream.In.T = 20
>> /stream.In.P = 101
>> cd /stream.In.Fraction
/stream.In.Fraction
>> /stream.In.Fraction = 0.0 2 3 0.0 0.0
>> cd /
/
>> language Portuguese
>> mix = Mixer.Mixer()
>> cd mix
/mix
>> /mix.In0 -> /stream.Out
>> language English
>> 
>> clear
>> read hxprofiles.tst
Processing hxprofiles.tst
>> hx = Heater.HeatExchangerUA()
>> cd /
/
>> $thermo = VirtualMaterials.Advanced_Peng-Robinson
>>  . -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> cd thermo
/thermo
>> /thermo + WATER HYDROGEN_SULFIDE METHANE ETHANE PROPANE VALERIC_ACID
WATER HYDROGEN SULFIDE METHANE ETHANE PROPANE VALERIC ACID 
>> cd /hx
/hx
>> /hx.side1.In.T = 200
>> /hx.side1.In.P = 1000
>> /hx.side1.In.MoleFlow = 500
>> cd /hx.side1.In.Fraction
/hx.side1.In.Fraction
>> /hx.side1.In.Fraction = 0.0 0.0 1 1 1 0.0
>> cd /hx
/hx
>> /hx.side0.Out.T = 105
>> /hx.side0.Out.P = 100
>> /hx.side0.Out.MoleFlow = 1000
>> cd /hx.side0.Out.Fraction
/hx.side0.Out.Fraction
>> /hx.side0.Out.Fraction = 1 0.0 0.0 0.0 0.0 0.0
>> cd /hx
/hx
>> /hx.side0.DeltaP.DP = 0
>> /hx.side1.DeltaP.DP = 0
>> /hx.side1.Out.T = 150.0
>> /hx.heatTransfer0_1.Energy
[-506518.69336439]
>> /hx.heatTransfer0_1.Energy_Acum
None
>> /hx.heatTransfer0_1.LMTD
None
>> /hx.side0.T
[ 372.79323425  378.15      ]
>> /hx.side1.T
[ 423.15  473.15]
>> 
>> /hx.NumberSegments = 7
>> /hx.heatTransfer0_1.Energy
[-72359.81333777 -72359.81333777 -72359.81333777 -72359.81333777
      -72359.81333777 -72359.81333777 -72359.81333777]
>> /hx.heatTransfer0_1.Energy_Acum
None
>> /hx.heatTransfer0_1.LMTD
None
>> /hx.side0.T
[ 372.79323425  372.79323425  372.79323425  372.79323425  372.79323425
       372.79323425  372.79323425  378.15      ]
>> /hx.side1.T
[ 423.15        430.52573923  437.82013354  445.03548061  452.17400208
       459.23786161  466.22918442  473.15      ]
>> 
>> copy /hx
Copied /hx to the clipboard
>> paste /
Pasting /hx
Pasted /hx as /hxClone
>> /hxClone.side0.T
[ 372.79323425  372.79323425  372.79323425  372.79323425  372.79323425
       372.79323425  372.79323425  378.15      ]
>> 
>> clear
>> read massvolfracsignal.tst
Processing massvolfracsignal.tst
>> units SI
>> /LiquidPhases = 2
>> 
>> displayproperties
VapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow H Energy MolecularWeight ZFactor 
>> commonproperties  VapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow Energy H S MolecularWeight MassDensity Cp ThermalConductivity Viscosity molarV ZFactor  StdLiqMolarVol
>> displayproperties  VapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow Energy H S MolecularWeight MassDensity Cp ThermalConductivity Viscosity molarV ZFactor
>> $VMGThermo = VirtualMaterials.Advanced_Peng-Robinson
>> / -> $VMGThermo
Thermo case attached to a unit operation. / to /VMGThermo
>> $VMGThermo + METHANE
METHANE 
>> $VMGThermo + ETHANE
ETHANE 
>> $VMGThermo + PROPANE
PROPANE 
>> 
>> /S1 = Stream.Stream_Material()
>> 
>> '/S1.In.T' = 30
>> '/S1.In.P' = 100
>> '/S1.In.MoleFlow' = 100
>> 
>> '/S1.In.Fraction' =  0.2 0.5 0.3
>> /S1.In.MassFraction
METHANE                     = 0.101948487177
ETHANE                      = 0.477715565268
PROPANE                     = 0.420335947555

>> 
>> 
>> #Play with mass fraction signals
>> /S1.MassFrac_C1 = Stream.SensorPort('MassFraction_METHANE')
>> /S1.MassFrac_C1
Port: /S1.MassFrac_C1 + sim.solver.Ports.Port_Signal
Connected to: None
MassFraction_METHANE   = 0.101948487177 = 

>> '/S1.In.T' = 40
>> /S1.MassFrac_C1
Port: /S1.MassFrac_C1 + sim.solver.Ports.Port_Signal
Connected to: None
MassFraction_METHANE   = 0.101948487177 = 

>> '/S1.In.Fraction' =  1 2 3
>> /S1.MassFrac_C1
Port: /S1.MassFrac_C1 + sim.solver.Ports.Port_Signal
Connected to: None
MassFraction_METHANE   = 0.0769542863776 = 

>> /S1.In.MassFraction
METHANE                     = 0.0769542863776
ETHANE                      = 0.288477143189
PROPANE                     = 0.634568570434

>> 
>> /S1.MassFrac_C1_Copy = Stream.SensorPort('MassFraction_METHANE')
>> /S1.MassFrac_C1_Copy
Port: /S1.MassFrac_C1_Copy + sim.solver.Ports.Port_Signal
Connected to: None
MassFraction_METHANE   = 0.0769542863776 = 

>> /S1.MassFrac_C1
Port: /S1.MassFrac_C1 + sim.solver.Ports.Port_Signal
Connected to: None
MassFraction_METHANE   = 0.0769542863776 = 

>> '/S1.In.T' = 30
>> 
>> 
>> /S1.MassFrac_C2 = Stream.SensorPort('MassFraction_ETHANE')
>> /S1.MassFrac_C2
Port: /S1.MassFrac_C2 + sim.solver.Ports.Port_Signal
Connected to: None
MassFraction_ETHANE   = 0.288477143189 = 

>> '/S1.In.Fraction' =  3 2 1
>> /S1.In.MassFraction
METHANE                     = 0.315877125576
ETHANE                      = 0.394707624808
PROPANE                     = 0.289415249616

>> /S1.MassFrac_C2
Port: /S1.MassFrac_C2 + sim.solver.Ports.Port_Signal
Connected to: None
MassFraction_ETHANE   = 0.394707624808 = 

>> 
>> 
>> 
>> #Now with volume fractions
>> /S1.VolFracOfEthane = Stream.SensorPort('StdVolFraction_ETHANE')
>> /S1.StdVolFraction
None
>> /S1.VolFracOfEthane
Port: /S1.VolFracOfEthane + sim.solver.Ports.Port_Signal
Connected to: None
StdVolFraction_ETHANE   = 0.405309996121 = 

>> '/S1.In.T' = 40
>> /S1.VolFracOfEthane
Port: /S1.VolFracOfEthane + sim.solver.Ports.Port_Signal
Connected to: None
StdVolFraction_ETHANE   = 0.405309996121 = 

>> '/S1.In.Fraction' =  1 2 3
>> /S1.VolFracOfEthane
Port: /S1.VolFracOfEthane + sim.solver.Ports.Port_Signal
Connected to: None
StdVolFraction_ETHANE   = 0.34863330791 = 

>> /S1.In.StdVolFraction
METHANE                     = 0.110403395451
ETHANE                      = 0.34863330791
PROPANE                     = 0.540963296639

>> 
>> 
>> #now attemt setting values. It should fail !
>> '/S1.In.Fraction' =  None
>> /S1.MassFrac_C1_Copy = .1
>> /S1.VolFracOfEthane = .3
>> /S1.VolFracOfEthane
Port: /S1.VolFracOfEthane + sim.solver.Ports.Port_Signal
Connected to: None
StdVolFraction_ETHANE   = 0.3 * 

>> 
>> '/S1.In.Fraction' =  1 2 3
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/S1.MassFrac_C1_Copy.MassFraction: 0.0769543 Vs 0.1

ConsistencyError: /S1.VolFracOfEthane - StdVolFraction 0.34863330791 vs 0.3
>> /S1.VolFracOfEthane
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/S1.MassFrac_C1_Copy.MassFraction: 0.0769543 Vs 0.1

Port: /S1.VolFracOfEthane + sim.solver.Ports.Port_Signal
Connected to: None
StdVolFraction_ETHANE   = 0.3 * 

>> /S1.MassFrac_C1_Copy
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/S1.MassFrac_C1_Copy.MassFraction: 0.0769543 Vs 0.1

Port: /S1.MassFrac_C1_Copy + sim.solver.Ports.Port_Signal
Connected to: None
MassFraction_METHANE   = 0.1 * 

>> /S1.VolFracOfEthane = None
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/S1.MassFrac_C1_Copy.MassFraction: 0.0769543 Vs 0.1

ConsistencyError: /S1.MassFrac_C1_Copy - MassFraction 0.0769542863776 vs 0.1
>> /S1.MassFrac_C1_Copy = None
>> 
>> 
>> copy /S1
Copied /S1 to the clipboard
>> paste /
Pasting /S1
Pasted /S1 as /S1Clone
>> /S1Clone.Out.StdVolFraction
METHANE                     = 0.110403395451
ETHANE                      = 0.34863330791
PROPANE                     = 0.540963296639

>> /S1Clone.VolFracOfEthane
Port: /S1Clone.VolFracOfEthane + sim.solver.Ports.Port_Signal
Connected to: None
StdVolFraction_ETHANE   = 0.34863330791 = 

>> /S1Clone.MassFrac_C2
Port: /S1Clone.MassFrac_C2 + sim.solver.Ports.Port_Signal
Connected to: None
MassFraction_ETHANE   = 0.288477143189 = 

>> 
>> 
>> 
>> 
>> 
>> 
>> clear
>> read signalstream.tst
Processing signalstream.tst
>> 
>> #Test signal stream
>> s1 = Stream.Stream_Signal()
>> 
>> #Should not be accepted. Type not set yet
>> s1.In = 100.0
Could not assign 100.0
>> 
>> #Set type
>> s1.SignalType = P
>> 
>> 
>> #set a value
>> s1.In = 100.0
>> s1.In
Port: /s1.In + sim.solver.Ports.Port_Signal
Connected to: None
P   = 100.0 * kPa

>> s1.Out
Port: /s1.Out + sim.solver.Ports.Port_Signal
Connected to: None
P   = 100.0 = kPa

>> 
>> 
>> #Set thermo below
>> $thermo = VirtualMaterials.RK
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + WATER
WATER 
>> 
>> 
>> #Add a clone
>> s1.pPort = Stream.ClonePort(0)
>> s1.pPort
Port: /s1.pPort + sim.solver.Ports.Port_Signal
Connected to: None
P   = 100.0 = kPa

>> 
>> 
>> #Clear value
>> s1.In = None
>> s1.In
Port: /s1.In + sim.solver.Ports.Port_Signal
Connected to: None
P   = None

>> s1.Out
Port: /s1.Out + sim.solver.Ports.Port_Signal
Connected to: None
P   = None

>> s1.pPort
Port: /s1.pPort + sim.solver.Ports.Port_Signal
Connected to: None
P   = None

>> 
>> 
>> #Put a value to the clone
>> s1.pPort = 90
>> s1.In
Port: /s1.In + sim.solver.Ports.Port_Signal
Connected to: None
P   = 90.0 = kPa

>> s1.Out
Port: /s1.Out + sim.solver.Ports.Port_Signal
Connected to: None
P   = 90.0 = kPa

>> s1.pPort
Port: /s1.pPort + sim.solver.Ports.Port_Signal
Connected to: None
P   = 90.0 * kPa

>> 
>> #Delete the clone
>> delete s1.pPort
>> 
>> #Try deleting the in and out ports
>> delete s1.In
>> delete s1.Out
>> 
>> #The In and Out ports are still there
>> s1.In
Port: /s1.In + sim.solver.Ports.Port_Signal
Connected to: None
P   = None

>> s1.Out
Port: /s1.Out + sim.solver.Ports.Port_Signal
Connected to: None
P   = None

>> s1.pPort
None
>> 
>> 
>> #Create a new signal with an init script
>> s2 = Stream.Stream_Signal("SignalType = T")
>> SignalType = T

>> s2.tPort = Stream.ClonePort(1)
>> s2.tPort = 230.0
>> s2.tPort
Port: /s2.tPort + sim.solver.Ports.Port_Signal
Connected to: None
T   = 230.0 * C

>> s2.In
Port: /s2.In + sim.solver.Ports.Port_Signal
Connected to: None
T   = 230.0 = C

>> s2.Out
Port: /s2.Out + sim.solver.Ports.Port_Signal
Connected to: None
T   = 230.0 = C

>> 
>> #A new clone
>> s2.tPort2 = Stream.ClonePort(1)
>> s2.tPort
Port: /s2.tPort + sim.solver.Ports.Port_Signal
Connected to: None
T   = 230.0 * C

>> s2.tPort2
Port: /s2.tPort2 + sim.solver.Ports.Port_Signal
Connected to: None
T   = 230.0 = C

>> s2.In
Port: /s2.In + sim.solver.Ports.Port_Signal
Connected to: None
T   = 230.0 = C

>> s2.Out
Port: /s2.Out + sim.solver.Ports.Port_Signal
Connected to: None
T   = 230.0 = C

>> 
>> #Delete the new clone
>> delete s2.tPort2
>> s2.tPort
Port: /s2.tPort + sim.solver.Ports.Port_Signal
Connected to: None
T   = 230.0 * C

>> s2.tPort2
None
>> s2.In
Port: /s2.In + sim.solver.Ports.Port_Signal
Connected to: None
T   = 230.0 = C

>> s2.Out
Port: /s2.Out + sim.solver.Ports.Port_Signal
Connected to: None
T   = 230.0 = C

>> 
>> 
>> #Now lets propagate the types
>> h = Heater.Heater()
>> s3 = Stream.Stream_Signal("c = Stream.ClonePort(0)
>> c = Stream.ClonePort(0

>> ctrl = Controller.Controller()
>> 
>> h.DeltaP
Port: /h.DeltaP + sim.solver.Ports.Port_Signal
Connected to: None
DP   = None

>> s3.In
Port: /s3.In + sim.solver.Ports.Port_Signal
Connected to: None

>> s3.c
Port: /s3.c + sim.solver.Ports.Port_Signal
Connected to: None

>> s3.Out
Port: /s3.Out + sim.solver.Ports.Port_Signal
Connected to: None

>> ctrl.In
Port: /ctrl.In + sim.solver.Ports.Port_Signal
Connected to: None

>> 
>> 
>> #Get the deltap type from the heater by connecting
>> h.DeltaP -> s3.In
>> h.DeltaP
Port: /h.DeltaP + sim.solver.Ports.Port_Signal
Connected to: /s3.In
DP   = None

>> s3.In
Port: /s3.In + sim.solver.Ports.Port_Signal
Connected to: /h.DeltaP
DP   = None

>> s3.c
Port: /s3.c + sim.solver.Ports.Port_Signal
Connected to: None

>> s3.Out
Port: /s3.Out + sim.solver.Ports.Port_Signal
Connected to: None

>> ctrl.In
Port: /ctrl.In + sim.solver.Ports.Port_Signal
Connected to: None

>> 
>> #Connect to the controller.
>> #Right now the type does not get propagated all the way to the controller
>> #which is a bug
>> s3.Out -> ctrl.In
>> h.DeltaP
Port: /h.DeltaP + sim.solver.Ports.Port_Signal
Connected to: /s3.In
DP   = None

>> s3.In
Port: /s3.In + sim.solver.Ports.Port_Signal
Connected to: /h.DeltaP
DP   = None

>> s3.c
Port: /s3.c + sim.solver.Ports.Port_Signal
Connected to: None

>> s3.Out
Port: /s3.Out + sim.solver.Ports.Port_Signal
Connected to: /ctrl.In

>> ctrl.In
Port: /ctrl.In + sim.solver.Ports.Port_Signal
Connected to: /s3.Out

>> 
>> 
>> #Put a value in s3.Out. This fails. is it a bug ??
>> s3.Out = 10.0
Could not assign 10.0
>> h.DeltaP
Port: /h.DeltaP + sim.solver.Ports.Port_Signal
Connected to: /s3.In
DP   = None

>> s3.In
Port: /s3.In + sim.solver.Ports.Port_Signal
Connected to: /h.DeltaP
DP   = None

>> s3.c
Port: /s3.c + sim.solver.Ports.Port_Signal
Connected to: None

>> s3.Out
Port: /s3.Out + sim.solver.Ports.Port_Signal
Connected to: /ctrl.In

>> ctrl.In
Port: /ctrl.In + sim.solver.Ports.Port_Signal
Connected to: /s3.Out

>> 
>> 
>> #Now set it in the in port
>> s3.In = 10.0
>> h.DeltaP
Port: /h.DeltaP + sim.solver.Ports.Port_Signal
Connected to: /s3.In
DP   = 10.0 | Kpa

>> s3.In
Port: /s3.In + sim.solver.Ports.Port_Signal
Connected to: /h.DeltaP
DP   = 10.0 * Kpa

>> s3.c
Port: /s3.c + sim.solver.Ports.Port_Signal
Connected to: None
DP   = 10.0 = Kpa

>> s3.Out
Port: /s3.Out + sim.solver.Ports.Port_Signal
Connected to: /ctrl.In
DP   = 10.0 = Kpa

>> ctrl.In
Port: /ctrl.In + sim.solver.Ports.Port_Signal
Connected to: /s3.Out
DP   = 10.0 | Kpa

>> 
>> 
>> #Clear it
>> s3.In = None
>> h.DeltaP
Port: /h.DeltaP + sim.solver.Ports.Port_Signal
Connected to: /s3.In
DP   = None

>> s3.In
Port: /s3.In + sim.solver.Ports.Port_Signal
Connected to: /h.DeltaP
DP   = None

>> s3.c
Port: /s3.c + sim.solver.Ports.Port_Signal
Connected to: None
DP   = None

>> s3.Out
Port: /s3.Out + sim.solver.Ports.Port_Signal
Connected to: /ctrl.In
DP   = None

>> ctrl.In
Port: /ctrl.In + sim.solver.Ports.Port_Signal
Connected to: /s3.Out
DP   = None

>> 
>> 
>> #Set in hx
>> h.DeltaP = 5.0
>> h.DeltaP
Port: /h.DeltaP + sim.solver.Ports.Port_Signal
Connected to: /s3.In
DP   = 5.0 * Kpa

>> s3.In
Port: /s3.In + sim.solver.Ports.Port_Signal
Connected to: /h.DeltaP
DP   = 5.0 | Kpa

>> s3.c
Port: /s3.c + sim.solver.Ports.Port_Signal
Connected to: None
DP   = 5.0 = Kpa

>> s3.Out
Port: /s3.Out + sim.solver.Ports.Port_Signal
Connected to: /ctrl.In
DP   = 5.0 = Kpa

>> ctrl.In
Port: /ctrl.In + sim.solver.Ports.Port_Signal
Connected to: /s3.Out
DP   = 5.0 | Kpa

>> 
>> 
>> #Disconnect
>> h.DeltaP ->
>> h.DeltaP
Port: /h.DeltaP + sim.solver.Ports.Port_Signal
Connected to: None
DP   = 5.0 * Kpa

>> s3.In
Port: /s3.In + sim.solver.Ports.Port_Signal
Connected to: None
DP   = None

>> s3.c
Port: /s3.c + sim.solver.Ports.Port_Signal
Connected to: None
DP   = None

>> s3.Out
Port: /s3.Out + sim.solver.Ports.Port_Signal
Connected to: /ctrl.In
DP   = None

>> ctrl.In
Port: /ctrl.In + sim.solver.Ports.Port_Signal
Connected to: /s3.Out
DP   = None

>> 
>> #The types remained... what to do??
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> clear
>> read hxphasechange.tst
Processing hxphasechange.tst
>> units SI
>> /LiquidPhases = 2
>> /RecycleDetails = 1
>> displayproperties
VapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow H Energy MolecularWeight ZFactor 
>> commonproperties  VapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow Energy H S MolecularWeight MassDensity Cp ThermalConductivity Viscosity molarV ZFactor SurfaceTension  StdLiqMolarVol
>> displayproperties  VapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow Energy H S MolecularWeight MassDensity Cp ThermalConductivity Viscosity molarV ZFactor SurfaceTension
>> $VMGThermo = VirtualMaterials.Advanced_Peng-Robinson
>> / -> $VMGThermo
Thermo case attached to a unit operation. / to /VMGThermo
>> $VMGThermo + WATER
WATER 
>> $VMGThermo + NITROGEN
NITROGEN 
>> $VMGThermo + CARBON_DIOXIDE
CARBON DIOXIDE 
>> $VMGThermo + METHANE
METHANE 
>> $VMGThermo + ETHANE
ETHANE 
>> $VMGThermo + PROPANE
PROPANE 
>> $VMGThermo + ISOBUTANE
ISOBUTANE 
>> $VMGThermo + n-BUTANE
n-BUTANE 
>> $VMGThermo + ISOPENTANE
ISOPENTANE 
>> $VMGThermo + n-PENTANE
n-PENTANE 
>> $VMGThermo + n-HEXANE
n-HEXANE 
>> /Hx1 = Heater.HeatExchangerUA()
>> '/Hx1.DeltaP0.DP' = 20
>> '/Hx1.DeltaP1.DP' = 5
>> '/Hx1.In0.T' = 150
>> '/Hx1.In0.P' = 200
>> '/Hx1.In0.MassFlow' = 80
>> '/Hx1.In0.Fraction' =  0 1.56701856206534E-02 3.10201631060189E-04 5.52959423625356E-02 0.622104367839095 0.255756241557012 3.45624656026417E-02 1.38289888427478E-02 1.2508130284685E-03 9.10591884725071E-04 3.10201631060189E-04
>> '/Hx1.In1.T' = 90
>> '/Hx1.In1.P' = 200
>> '/Hx1.UA0_1.UA' = 45
>> '/Hx1.In1.Fraction' =  1 0 0 0 0 0 0 0 0 0 0
>> '/Hx1.Out0.T' = 130
Calculating Jacobian for /Hx1
/Hx1 Iteration 1 Max Error 0.011630
Calculating Jacobian for /Hx1
/Hx1 Iteration 2 Max Error 0.008310
Calculating Jacobian for /Hx1
/Hx1 Iteration 3 Max Error 0.004489
Calculating Jacobian for /Hx1
/Hx1 Iteration 4 Max Error 0.000568
Calculating Jacobian for /Hx1
/Hx1 Iteration 5 Max Error 0.000013
Calculating Jacobian for /Hx1
Converged /Hx1 in 6 iterations
>> /Hx1.NumberSegments = 5
Calculating Jacobian for /Hx1
/Hx1 Iteration 1 Max Error 0.001263
Calculating Jacobian for /Hx1
/Hx1 Iteration 2 Max Error 0.000206
Calculating Jacobian for /Hx1
Converged /Hx1 in 3 iterations
>> cd /
/
>> 
>> 
>> #Now play with segments and phase change tracking
>> /Hx1.UA0_1.UA = None
>> /Hx1.Out1.T = 125
>> /Hx1.UA0_1.UA
/Hx1.heatTransfer0_1.UA.UA= 44.9735031226 = W/K
>> 
>> #As the number of segments increases, the ua converges to a single
>> #ua but the hx becomes slower
>> /Hx1.NumberSegments = 10
>> /Hx1.UA0_1.UA
/Hx1.heatTransfer0_1.UA.UA= 48.4083116163 = W/K
>> /Hx1.NumberSegments = 50
>> /Hx1.UA0_1.UA
/Hx1.heatTransfer0_1.UA.UA= 50.0220253713 = W/K
>> 
>> 
>> #Now back to 5 segments
>> /Hx1.NumberSegments = 5
>> /Hx1.UA0_1.UA
/Hx1.heatTransfer0_1.UA.UA= 44.9735031226 = W/K
>> 
>> #Track phase change
>> #The UA is already the converged one with 100 segments
>> /Hx1.TrackPhaseChange = 1
>> /Hx1.UA0_1.UA
/Hx1.heatTransfer0_1.UA.UA= 49.8519273521 = W/K
>> /Hx1.NumberSegments = 3
>> /Hx1.UA0_1.UA
/Hx1.heatTransfer0_1.UA.UA= 49.8995044148 = W/K
>> /Hx1.NumberSegments = 10
>> /Hx1.UA0_1.UA
/Hx1.heatTransfer0_1.UA.UA= 49.9538438382 = W/K
>> 
>> #Lets get a bunch of profiles
>> /Hx1.side0.T
[ 423.15        423.06513311  419.20676112  417.22475419  415.23574474
       413.23965458  411.23638583  409.22585856  407.20801317  404.25019223
       403.15      ]
>> /Hx1.side0.EnergyAcum
[   0.            4.19603901  194.30731128  291.46096692  388.61462256
       485.7682782   582.92193384  680.07558947  777.22924511  918.99829713
       971.53655639]
>> /Hx1.side0.L_Cp
Calculating profile in side0. Segment 0. Properties ['Cp', 'MolecularWeight']
Calculating profile in side0. Segment 1. Properties ['Cp', 'MolecularWeight']
Calculating profile in side0. Segment 2. Properties ['Cp', 'MolecularWeight']
Calculating profile in side0. Segment 3. Properties ['Cp', 'MolecularWeight']
Calculating profile in side0. Segment 4. Properties ['Cp', 'MolecularWeight']
Calculating profile in side0. Segment 5. Properties ['Cp', 'MolecularWeight']
Calculating profile in side0. Segment 6. Properties ['Cp', 'MolecularWeight']
Calculating profile in side0. Segment 7. Properties ['Cp', 'MolecularWeight']
Calculating profile in side0. Segment 8. Properties ['Cp', 'MolecularWeight']
Calculating profile in side0. Segment 9. Properties ['Cp', 'MolecularWeight']
Calculating profile in side0. Segment 10. Properties ['Cp', 'MolecularWeight']
Done calculating profile in side0
[ 76.7844775   76.77315262  76.25814396  75.9935015   75.72786994  75.4612427 
       75.1936107   74.92496732  74.65530873  74.25997685  74.1129136 ]
>> /Hx1.side0.L_Viscosity
Calculating profile in side0. Segment 0. Properties ['Viscosity']
Calculating profile in side0. Segment 1. Properties ['Viscosity']
Calculating profile in side0. Segment 2. Properties ['Viscosity']
Calculating profile in side0. Segment 3. Properties ['Viscosity']
Calculating profile in side0. Segment 4. Properties ['Viscosity']
Calculating profile in side0. Segment 5. Properties ['Viscosity']
Calculating profile in side0. Segment 6. Properties ['Viscosity']
Calculating profile in side0. Segment 7. Properties ['Viscosity']
Calculating profile in side0. Segment 8. Properties ['Viscosity']
Calculating profile in side0. Segment 9. Properties ['Viscosity']
Calculating profile in side0. Segment 10. Properties ['Viscosity']
Done calculating profile in side0
[ 3.46962402e-005  3.46970508e-005  3.47335231e-005  3.47519704e-005
       3.47702877e-005  3.47884747e-005  3.48065313e-005  3.48244572e-005
       3.48656800e-005  3.49647801e-005  3.50011541e-005]
>> /Hx1.side0.V_Viscosity
[ 1.24926606e-005  1.24904375e-005  1.23892320e-005  1.23371430e-005
       1.22848012e-005  1.22322038e-005  1.21793474e-005  1.21262292e-005
       1.20728468e-005  1.19944690e-005  1.19652766e-005]
>> /Hx1.side0.Viscosity
[ 1.24926606e-005  1.24904375e-005  1.23892320e-005  1.23371430e-005
       1.22848012e-005  1.22322038e-005  1.21793474e-005  1.21262292e-005
       1.20728468e-005  1.19944690e-005  1.19652766e-005]
>> 
>> /Hx1.side1.T
[ 398.15        392.8368907   392.64508192  392.72489942  392.80455131
       392.88403837  392.96336135  393.04252102  393.12151814  392.88364458
       363.15      ]
>> /Hx1.side1.EnergyAcum
[   0.            4.19603901  194.30731128  291.46096692  388.61462256
       485.7682782   582.92193384  680.07558947  777.22924511  918.99829713
       971.53655639]
>> /Hx1.side1.L_Cp
Calculating profile in side1. Segment 0. Properties ['Cp', 'MolecularWeight']
Calculating profile in side1. Segment 1. Properties ['Cp', 'MolecularWeight']
Calculating profile in side1. Segment 2. Properties ['Cp', 'MolecularWeight']
Calculating profile in side1. Segment 3. Properties ['Cp', 'MolecularWeight']
Calculating profile in side1. Segment 4. Properties ['Cp', 'MolecularWeight']
Calculating profile in side1. Segment 5. Properties ['Cp', 'MolecularWeight']
Calculating profile in side1. Segment 6. Properties ['Cp', 'MolecularWeight']
Calculating profile in side1. Segment 7. Properties ['Cp', 'MolecularWeight']
Calculating profile in side1. Segment 8. Properties ['Cp', 'MolecularWeight']
Calculating profile in side1. Segment 9. Properties ['Cp', 'MolecularWeight']
Calculating profile in side1. Segment 10. Properties ['Cp', 'MolecularWeight']
Done calculating profile in side1
[ 78.90913612  78.56253013  78.55044868  78.55542024  78.56038714  78.56534941
       78.57030705  78.57526009  78.58020854  78.56519715  77.07125081]
>> /Hx1.side1.L_Viscosity
Calculating profile in side1. Segment 0. Properties ['Viscosity']
Calculating profile in side1. Segment 1. Properties ['Viscosity']
Calculating profile in side1. Segment 2. Properties ['Viscosity']
Calculating profile in side1. Segment 3. Properties ['Viscosity']
Calculating profile in side1. Segment 4. Properties ['Viscosity']
Calculating profile in side1. Segment 5. Properties ['Viscosity']
Calculating profile in side1. Segment 6. Properties ['Viscosity']
Calculating profile in side1. Segment 7. Properties ['Viscosity']
Calculating profile in side1. Segment 8. Properties ['Viscosity']
Calculating profile in side1. Segment 9. Properties ['Viscosity']
Calculating profile in side1. Segment 10. Properties ['Viscosity']
Done calculating profile in side1
[ 0.00022207  0.0002327   0.00023311  0.00023294  0.00023277  0.00023261
       0.00023244  0.00023228  0.00023211  0.00023261  0.00031443]
>> /Hx1.side1.V_Viscosity
[ 1.31528063e-005  1.29464940e-005  1.29383926e-005  1.29411420e-005
       1.29438856e-005  1.29466237e-005  1.29493562e-005  1.29520830e-005
       1.29548044e-005  1.29450813e-005  1.18063710e-005]
>> /Hx1.side1.Viscosity
[ 1.31528063e-005  1.29464940e-005  2.86704317e-005  4.08097054e-005
       5.64375541e-005  7.61614500e-005  1.00636308e-004  1.30564206e-004
       1.66694111e-004  2.32607056e-004  3.14434029e-004]
>> 
>> #Now unspec T and spec ua
>> #Unfortunately, the track phase change thing does not work for rating mode :(
>> /Hx1.Out1.T = None
>> /Hx1.TryLastConverged = 0
>> /Hx1.UA0_1.UA = 49.9
Calculating Jacobian for /Hx1
Converged /Hx1 in 1 iterations
>> /Hx1.Out1.T
/Hx1.side1.Out.T= 119.523287868 = C
>> 
>> #Test vap frac profiles
>> /Hx1.side1.VapFrac
Calculating profile in side1. Segment 0. Properties ['MolecularWeight']
Calculating profile in side1. Segment 1. Properties ['MolecularWeight']
Calculating profile in side1. Segment 2. Properties ['MolecularWeight']
Calculating profile in side1. Segment 3. Properties ['MolecularWeight']
Calculating profile in side1. Segment 4. Properties ['MolecularWeight']
Calculating profile in side1. Segment 5. Properties ['MolecularWeight']
Calculating profile in side1. Segment 6. Properties ['MolecularWeight']
Calculating profile in side1. Segment 7. Properties ['MolecularWeight']
Calculating profile in side1. Segment 8. Properties ['MolecularWeight']
Calculating profile in side1. Segment 9. Properties ['MolecularWeight']
Calculating profile in side1. Segment 10. Properties ['MolecularWeight']
Done calculating profile in side1
[ 1.          1.          0.78864296  0.68285322  0.57704353  0.47121396
       0.36536454  0.25949533  0.15360637  0.          0.        ]
>> /Hx1.side1.MassVapFrac
[ 1.          1.          0.78864296  0.68285322  0.57704353  0.47121396
       0.36536454  0.25949533  0.15360637  0.          0.        ]
>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
>> /RootClone.Hx1.side1.VapFrac
Calculating profile in side1. Segment 0. Properties ['MolecularWeight']
Calculating profile in side1. Segment 1. Properties ['MolecularWeight']
Calculating profile in side1. Segment 2. Properties ['MolecularWeight']
Calculating profile in side1. Segment 3. Properties ['MolecularWeight']
Calculating profile in side1. Segment 4. Properties ['MolecularWeight']
Calculating profile in side1. Segment 5. Properties ['MolecularWeight']
Calculating profile in side1. Segment 6. Properties ['MolecularWeight']
Calculating profile in side1. Segment 7. Properties ['MolecularWeight']
Calculating profile in side1. Segment 8. Properties ['MolecularWeight']
Calculating profile in side1. Segment 9. Properties ['MolecularWeight']
Calculating profile in side1. Segment 10. Properties ['MolecularWeight']
Done calculating profile in side1
[ 1.          1.          0.78864296  0.68285322  0.57704353  0.47121396
       0.36536454  0.25949533  0.15360637  0.          0.        ]
>> 
>> 
>> 
>> 
>> 
>> clear
>> read degsubcool.tst
Processing degsubcool.tst
>> # Simple distilation column test
>> units SI
>> $thermo = VirtualMaterials.Peng-Robinson
>> / -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> thermo + PROPANE n-BUTANE ISOBUTANE n-PENTANE
PROPANE n-BUTANE ISOBUTANE n-PENTANE 
>> 
>> col = Tower.Tower()
>> col.Stage_0 + 20  # twenty two stages`
>> 
>> /col.MaxOuterLoops = 50
>> /col.Damping = 0.9
>> cd col.Stage_10
/col.Stage_10
>> f = Tower.Feed()
>> f.Port.T = 30
>> f.Port.P = 720
>> f.Port.MoleFlow = 10
>> f.Port.Fraction = .4 .05 .4 .15
>> f.Port
Port: /col.Feed_10_f + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 30.0 * C
P                  = 720.0 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 546.15555 = kg/h
VolumeFlow         = 0.966808338121 = m3/hr
StdLiqVolumeFlow   = 0.97123450098 = m3/hr
H                  = -2007.05063418 = kJ/kmol
Energy             = -5575.14065049 = W
MolecularWeight    = 54.615555 = 
ZFactor            = 0.0276175353897 = 
PROPANE            = 0.4 * 
n-BUTANE           = 0.05 * 
ISOBUTANE          = 0.4 * 
n-PENTANE          = 0.15 * 

>> 
>> cd ../Stage_0
/col.Stage_0
>> l = Tower.LiquidDraw()
>> l.Port.P = 700
>> 
>> l.Port.MoleFlow = 5
>> 
>> cond = Tower.EnergyFeed(0)
>> 
>> reflux = Tower.StageSpecification('Reflux')
>> reflux.Value = 1
>> 
>> cd ../Stage_21
/col.Stage_21
>> l = Tower.LiquidDraw()
>> l.Port.P = 720
>> reb = Tower.EnergyFeed(1)
>> 
>> cd ..
/col
>> TryToSolve = 1  # start calculation
Calculating Jacobian for /col
Calculating disturbance 10 of 22 in jacobian of /col
Calculating disturbance 20 of 22 in jacobian of /col
/col Inner Error 0.122806
/col Inner Error 0.030711
/col Inner Error 0.001230
/col Inner Error 0.000067
/col Iteration 1 Outer Error 0.026094
/col Inner Error 0.052625
/col Inner Error 0.005441
/col Inner Error 0.000630
/col Inner Error 0.000024
/col Iteration 2 Outer Error 0.000336
/col Inner Error 0.006642
/col Inner Error 0.000350
/col Inner Error 0.000017
/col Iteration 3 Outer Error 0.000042
/col Inner Error 0.000527
/col Inner Error 0.000043
>> 
>> # since there was little output here, I will put some profile stuff here
>> L_MassFraction.PROPANE
[ 0.74492266  0.55379408  0.44593133  0.39146173  0.36501925  0.35201308
       0.34486092  0.33931487  0.33199767  0.31869033  0.29399281  0.25243531
       0.2068951   0.16166445  0.12075827  0.08667272  0.06009695  0.04039358
       0.02628311  0.01635686  0.00935738  0.00440218]
>> V_MoleFraction.ISOBUTANE
[ 0.0919201   0.19729105  0.27702513  0.32347196  0.3464813   0.3565119 
       0.36000179  0.36006705  0.35765882  0.35202414  0.34056503  0.39290347
       0.45779634  0.53116619  0.60618292  0.67554082  0.73385935  0.77857769
       0.80904817  0.82418259  0.81762393  0.76557923]
>> L_MassFlow
[ 234.94043517  239.21358413  242.9202795   245.14794731  246.21909069
       246.56309791  246.36490815  245.49467923  243.4187558   239.14695513
       819.28736239  829.06853132  841.27036706  855.12200168  869.33281258
       882.54291713  893.74778292  902.3991424   908.03137579  909.25932125
       902.43098469  311.21511483]
>> L_Viscosity
[ 0.00012576  0.00012725  0.00012705  0.00012656  0.00012619  0.00012595
       0.00012584  0.00012588  0.0001262   0.00012704  0.00012875  0.00012762
       0.00012613  0.00012437  0.0001225   0.00012074  0.00011922  0.00011799
       0.00011704  0.00011635  0.00011591  0.00011528]
>> L_StdVolFraction.PROPANE
[ 0.77128414  0.58892685  0.48153463  0.42599594  0.39869942  0.38520053
       0.3778088   0.37221273  0.36505377  0.35218179  0.32811517  0.28349514
       0.23395065  0.18406007  0.13834326  0.09980998  0.0694863   0.04684577
       0.03055233  0.01905884  0.01095093  0.00520854]
>> V_StdVolFraction.PROPANE
[ 0.89256784  0.77128414  0.68050248  0.62703491  0.59926464  0.58560576
       0.5789212   0.57543069  0.57312694  0.57067619  0.56669892  0.50842605
       0.43753315  0.35905221  0.28045411  0.20897518  0.14924608  0.10264136
       0.06810877  0.04341881  0.02610113  0.01392381]
>> L_VolumeFlow
[ 0.43390469  0.43956711  0.44576858  0.44977057  0.45175259  0.45238523
       0.45195209  0.45012464  0.44573236  0.43661087  1.48714066  1.50653121
       1.53118819  1.55971283  1.5894813   1.6175614   1.64167856  1.66052048
       1.67299521  1.67608924  1.66181555  0.57116882]
>> L_StdLiqVolumeFlow
[ 0.44981224  0.44591236  0.44594464  0.44656926  0.44685703  0.44665966
       0.44578708  0.44363978  0.43884278  0.42898643  1.45520233  1.4634289 
       1.47481744  1.48888012  1.50425563  1.51922124  1.53230409  1.54247215
       1.54849562  1.54692014  1.52860035  0.52142226]
>> V_StdLiqVolumeFlow
[ 8.61284139e-042  8.99624479e-001  8.95724595e-001  8.95756884e-001
       8.96381498e-001  8.96669271e-001  8.96471896e-001  8.95599315e-001
       8.93452015e-001  8.88655021e-001  8.78798672e-001  9.33780067e-001
       9.42006642e-001  9.53395183e-001  9.67457854e-001  9.82833372e-001
       9.97798980e-001  1.01088183e+000  1.02104989e+000  1.02707336e+000
       1.02549788e+000  1.00717809e+000]
>> 
>> 
>> cd /
/
>> 
>> #Create streams
>> s_feed = Stream.Stream_Material()
>> s_liqdraw_0 = Stream.Stream_Material()
>> s_liqdraw_21 = Stream.Stream_Material()
>> s_vapdraw_0 = Stream.Stream_Material()
>> ene_cond = Stream.Stream_Energy()
>> ene_reb = Stream.Stream_Energy()
>> s_intvap_1 = Stream.Stream_Material()
>> s_intliq_0 = Stream.Stream_Material()
>> 
>> 
>> 
>> #Create clones in streams
>> cd /s_feed
/s_feed
>> clone = Stream.ClonePort(0)
>> cd /s_liqdraw_0
/s_liqdraw_0
>> clone = Stream.ClonePort()
>> cd /s_liqdraw_21
/s_liqdraw_21
>> clone = Stream.ClonePort()
>> cd /s_vapdraw_0
/s_vapdraw_0
>> clone = Stream.ClonePort()
>> cd /ene_cond
/ene_cond
>> clone = Stream.ClonePort()
>> cd clone
/ene_cond.clone
>> cd /ene_reb
/ene_reb
>> clone = Stream.ClonePort(0)
>> cd /s_intvap_1
/s_intvap_1
>> clone = Stream.ClonePort(0)
>> cd /s_intliq_0
/s_intliq_0
>> clone = Stream.ClonePort()
>> cd /s_liqdraw_0
/s_liqdraw_0
>> clone2 = Stream.ClonePort()
>> cd /ene_cond
/ene_cond
>> clone2 = Stream.ClonePort()
>> 
>> #Create clones in tower
>> cd /col.Stage_1
/col.Stage_1
>> vaporclone = Tower.InternalVapourClone()
/col Inner Error 0.000002
/col Iteration 1 Outer Error 0.000004
/col Inner Error 0.000012
>> cd /col.Stage_0
/col.Stage_0
>> liquidclone = Tower.InternalLiquidClone()
/col Inner Error 0.000001
/col Iteration 1 Outer Error 0.000000
/col Inner Error 0.000003
>> 
>> 
>> 
>> #Create a balance for the overall tower
>> cd /
/
>> bal = Balance.BalanceOp()
>> cd bal
/bal
>> NumberStreamsInMat = 1
>> NumberStreamsOutMat = 2
>> NumberStreamsInEne = 1
>> NumberStreamsOutEne = 2
>> BalanceType = 4
>> 
>> 
>> #Create a balance for the top stage
>> cd /
/
>> stagebalance = Balance.BalanceOp()
>> cd stagebalance
/stagebalance
>> BalanceType = 4
>> NumberStreamsInMat = 1
>> NumberStreamsOutMat = 2
>> NumberStreamsOutEne = 2
>> 
>> 
>> 
>> #Connect the streams to the tower and the clones to the balance
>> /s_feed.Out -> /col.Feed_10_f
>> /s_liqdraw_0.In -> /col.LiquidDraw_0_l
>> /s_liqdraw_21.In -> /col.LiquidDraw_21_l
>> /ene_cond.In -> /col.EnergyFeed_0_cond
>> /ene_reb.Out -> /col.EnergyFeed_21_reb
>> 
>> /bal.In0 -> /s_feed.clone
>> /bal.Out0 -> /s_liqdraw_0.clone
>> /bal.Out1 -> /s_liqdraw_21.clone
>> /bal.InQ0 -> /ene_reb.clone
>> /bal.OutQ0 -> /ene_cond.clone
>> 
>> /stagebalance.In0 -> /s_intvap_1.clone
>> /stagebalance.Out0 -> /s_intliq_0.clone
>> /stagebalance.Out1 -> /s_liqdraw_0.clone2
>> /stagebalance.OutQ0 -> /ene_cond.clone2
>> 
>> /s_intliq_0.In -> /col.InternalLiquid_0_liquidclone
>> /s_intvap_1.In -> /col.InternalVapour_1_vaporclone
>> 
>> 
>> 
>> cd /col
/col
>> MaxOuterError = 1e-6
/col Inner Error 0.000000
/col Iteration 1 Outer Error 0.000000
/col Inner Error 0.000000
>> MaxInnerError = 1e-6
/col Inner Error 0.000000
/col Iteration 1 Outer Error 0.000000
/col Inner Error 0.000000
>> TryToRestart = 1
/col Inner Error 0.000000
/col Iteration 1 Outer Error 0.000000
/col Inner Error 0.000000
>> /col.LiquidDraw_0_l
Port: /col.LiquidDraw_0_l + sim.solver.Ports.Port_Material
Connected to: /s_liqdraw_0.In
VapFrac            = 0.0 = 
T                  = 19.3668677429 = C
P                  = 700.0 * kPa
MoleFlow           = 5.0 * kgmole/h
MassFlow           = 234.940792475 = kg/h
VolumeFlow         = 0.433905373803 = m3/hr
StdLiqVolumeFlow   = 0.449812905706 = m3/hr
H                  = -2491.79555962 = kJ/kmol
Energy             = -3460.82716614 = W
MolecularWeight    = 46.988158495 = 
ZFactor            = 0.0249770853653 = 
PROPANE            = 0.793787191943 = 
n-BUTANE           = 0.00891554369992 = 
ISOBUTANE          = 0.197291700223 = 
n-PENTANE          = 5.56413431633e-006 = 

>> 
>> 
>> #Add degrees of subcooling
>> cd /col.Stage_0
/col.Stage_0
>> degsubcool = Tower.DegSubCooling()
>> 
>> 
>> /col.DegSubCool_0_degsubcool.DT = 2
/col Inner Error 0.005521
/col Inner Error 0.000305
/col Inner Error 0.000012
/col Inner Error 0.000001
/col Iteration 1 Outer Error 0.000065
/col Inner Error 0.000787
/col Inner Error 0.000041
/col Inner Error 0.000002
/col Inner Error 0.000000
/col Iteration 2 Outer Error 0.000005
/col Inner Error 0.000099
/col Inner Error 0.000005
/col Inner Error 0.000000
/col Iteration 3 Outer Error 0.000001
/col Inner Error 0.000007
/col Inner Error 0.000000
>> /col.LiquidDraw_0_l
Port: /col.LiquidDraw_0_l + sim.solver.Ports.Port_Material
Connected to: /s_liqdraw_0.In
VapFrac            = 0.0 = 
T                  = 17.3584644665 = C
P                  = 700.0 * kPa
MoleFlow           = 5.0 * kgmole/h
MassFlow           = 234.922427991 = kg/h
VolumeFlow         = 0.430835309373 = m3/hr
StdLiqVolumeFlow   = 0.449794075941 = m3/hr
H                  = -2739.86923279 = kJ/kmol
Energy             = -3805.37393444 = W
MolecularWeight    = 46.9844855983 = 
ZFactor            = 0.0249718168975 = 
PROPANE            = 0.794048747349 = 
n-BUTANE           = 0.00876313554798 = 
ISOBUTANE          = 0.197182850182 = 
n-PENTANE          = 5.26692051047e-006 = 

>> /bal.OutQ1
Port: /bal.OutQ1 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 0.00671780985431 = W

>> /stagebalance.OutQ1
Port: /stagebalance.OutQ1 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = -0.00230053615087 = W

>> 
>> 
>> /col.DegSubCool_0_degsubcool.DT = 4
/col Inner Error 0.002869
/col Inner Error 0.000113
/col Inner Error 0.000006
/col Inner Error 0.000000
/col Iteration 1 Outer Error 0.000064
/col Inner Error 0.000817
/col Inner Error 0.000040
/col Inner Error 0.000001
/col Inner Error 0.000000
/col Iteration 2 Outer Error 0.000005
/col Inner Error 0.000111
/col Inner Error 0.000008
/col Inner Error 0.000000
/col Iteration 3 Outer Error 0.000001
/col Inner Error 0.000007
/col Inner Error 0.000000
>> /col.LiquidDraw_0_l
Port: /col.LiquidDraw_0_l + sim.solver.Ports.Port_Material
Connected to: /s_liqdraw_0.In
VapFrac            = 0.0 = 
T                  = 15.3506310997 = C
P                  = 700.0 * kPa
MoleFlow           = 5.0 * kgmole/h
MassFlow           = 234.905329307 = kg/h
VolumeFlow         = 0.427869452714 = m3/hr
StdLiqVolumeFlow   = 0.449776446722 = m3/hr
H                  = -2985.67996443 = kJ/kmol
Energy             = -4146.77772837 = W
MolecularWeight    = 46.9810658614 = 
ZFactor            = 0.0249725078212 = 
PROPANE            = 0.794292279296 = 
n-BUTANE           = 0.00861601657663 = 
ISOBUTANE          = 0.197086709301 = 
n-PENTANE          = 4.99482640337e-006 = 

>> /bal.OutQ1
Port: /bal.OutQ1 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 0.00286163634883 = W

>> /stagebalance.OutQ1
Port: /stagebalance.OutQ1 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = -0.00230681108951 = W

>> 
>> /col.DegSubCool_0_degsubcool.DT = 0
/col Inner Error 0.002089
/col Inner Error 0.000066
/col Inner Error 0.000003
/col Inner Error 0.000000
/col Iteration 1 Outer Error 0.000132
/col Inner Error 0.001296
/col Inner Error 0.000041
/col Inner Error 0.000002
/col Inner Error 0.000000
/col Iteration 2 Outer Error 0.000011
/col Inner Error 0.000195
/col Inner Error 0.000003
/col Inner Error 0.000000
/col Iteration 3 Outer Error 0.000001
/col Inner Error 0.000006
/col Inner Error 0.000000
>> /col.LiquidDraw_0_l
Port: /col.LiquidDraw_0_l + sim.solver.Ports.Port_Material
Connected to: /s_liqdraw_0.In
VapFrac            = 1.66963649178e-007 = 
T                  = 19.3668669715 = C
P                  = 700.0 * kPa
MoleFlow           = 5.0 * kgmole/h
MassFlow           = 234.940789483 = kg/h
VolumeFlow         = 0.433907790981 = m3/hr
StdLiqVolumeFlow   = 0.449812902856 = m3/hr
H                  = -2491.79290708 = kJ/kmol
Energy             = -3460.82348206 = W
MolecularWeight    = 46.9881578967 = 
ZFactor            = 0.0249772245723 = 
PROPANE            = 0.793787234585 = 
n-BUTANE           = 0.0089155304866 = 
ISOBUTANE          = 0.197291670808 = 
n-PENTANE          = 5.56411987944e-006 = 

>> /bal.OutQ1
Port: /bal.OutQ1 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = -0.00497149175499 = W

>> /stagebalance.OutQ1
Port: /stagebalance.OutQ1 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = -0.0158750375849 = W

>> 
>> 
>> /col.DegSubCool_0_degsubcool.DT = 
>> /col.LiquidDraw_0_l.T = 18
/col Inner Error 0.000736
/col Inner Error 0.000051
/col Inner Error 0.000002
/col Inner Error 0.000000
/col Iteration 1 Outer Error 0.000044
/col Inner Error 0.000484
/col Inner Error 0.000019
/col Inner Error 0.000001
/col Inner Error 0.000000
/col Iteration 2 Outer Error 0.000004
/col Inner Error 0.000033
/col Inner Error 0.000001
/col Iteration 3 Outer Error 0.000000
/col Inner Error 0.000002
/col Inner Error 0.000000
>> /col.DegSubCool_0_degsubcool
Port: /col.DegSubCool_0_degsubcool + sim.solver.Ports.Port_Signal
Connected to: None
DT   = 1.36108483275 = C

>> /bal.OutQ1
Port: /bal.OutQ1 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = -0.000708695042704 = W

>> /stagebalance.OutQ1
Port: /stagebalance.OutQ1 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = -0.00166761827859 = W

>> 
>> 
>> /col.LiquidDraw_0_l.MoleFlow = 
>> /col.DegSubCool_0_degsubcool.DT = 2
/col Inner Error 0.002110
/col Inner Error 0.002110
/col Inner Error 0.002053
/col Inner Error 0.002027
/col Inner Error 0.001991
/col Inner Error 0.001944
/col Inner Error 0.001889
/col Inner Error 0.001829
/col Inner Error 0.001764
/col Inner Error 0.001696
/col Inner Error 0.001665
/col Inner Error 0.001635
/col Inner Error 0.001429
/col Inner Error 0.001077
/col Inner Error 0.000098
/col Inner Error 0.000043
/col Inner Error 0.000002
/col Inner Error 0.000000
/col Iteration 1 Outer Error 0.000666
/col Inner Error 0.010735
/col Inner Error 0.005994
/col Inner Error 0.003603
/col Inner Error 0.002265
/col Inner Error 0.001759
/col Inner Error 0.001375
/col Inner Error 0.000981
/col Inner Error 0.000084
/col Inner Error 0.000035
/col Inner Error 0.000007
/col Inner Error 0.000000
/col Iteration 2 Outer Error 0.000075
/col Inner Error 0.001052
/col Inner Error 0.000239
/col Inner Error 0.000044
/col Inner Error 0.000002
/col Inner Error 0.000001
/col Iteration 3 Outer Error 0.000009
/col Inner Error 0.000075
/col Inner Error 0.000038
/col Inner Error 0.000002
/col Inner Error 0.000000
/col Iteration 4 Outer Error 0.000001
/col Inner Error 0.000016
/col Inner Error 0.000007
/col Inner Error 0.000000
>> /col.DegSubCool_0_degsubcool
Port: /col.DegSubCool_0_degsubcool + sim.solver.Ports.Port_Signal
Connected to: None
DT   = 2.0 * C

>> /col.LiquidDraw_0_l
Port: /col.LiquidDraw_0_l + sim.solver.Ports.Port_Material
Connected to: /s_liqdraw_0.In
VapFrac            = 0.0 = 
T                  = 18.0 * C
P                  = 700.0 * kPa
MoleFlow           = 5.1463970028 = kgmole/h
MassFlow           = 243.285222821 = kg/h
VolumeFlow         = 0.445823125765 = m3/hr
StdLiqVolumeFlow   = 0.464274631716 = m3/hr
H                  = -2713.99712212 = kJ/kmol
Energy             = -3879.80740413 = W
MolecularWeight    = 47.2729217525 = 
ZFactor            = 0.0250501401878 = 
PROPANE            = 0.773486294452 = 
n-BUTANE           = 0.00975850180343 = 
ISOBUTANE          = 0.216748848632 = 
n-PENTANE          = 6.35511324456e-006 = 

>> /bal.OutQ1
Port: /bal.OutQ1 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 0.00297435415268 = W

>> /stagebalance.OutQ1
Port: /stagebalance.OutQ1 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = -0.00389200077188 = W

>> 
>> 
>> #Now add a vapour draw and make sure it doesnt break anything
>> /col.TryToSolve = 0
>> /col.TryToRestart = 0
>> cd /col.Stage_0
/col.Stage_0
>> vap = Tower.VapourDraw()
>> cd /
/
>> 
>> #Should solve fine even for vap flow > 0.0
>> /col.DegSubCool_0_degsubcool.DT = 0
>> /col.TryToSolve = 1
>> /col.VapourDraw_0_vap.MoleFlow = 1
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Inner Error 0.233228
/col Inner Error 0.159017
/col Inner Error 0.150655
/col Inner Error 0.145632
/col Inner Error 0.121423
/col Inner Error 0.100837
/col Inner Error 0.088285
/col Inner Error 0.087179
/col Inner Error 0.085091
/col Inner Error 0.082643
/col Inner Error 0.081108
/col Inner Error 0.081072
/col Inner Error 0.081049
/col Inner Error 0.080949
/col Inner Error 0.080938
/col Inner Error 0.080930
/col Iteration 1 Outer Error 0.047991
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Inner Error 0.794128
/col Inner Error 0.396453
/col Iteration 2 Outer Error 0.001981
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Inner Error 0.455923
/col Inner Error 0.427076
/col Iteration 3 Outer Error 0.000674
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Inner Error 0.383948
/col Iteration 4 Outer Error 0.000150
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Inner Error 0.391624
/col Inner Error 0.391552
/col Iteration 5 Outer Error 0.000037
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Inner Error 0.386502
/col Inner Error 0.386478
/col Iteration 6 Outer Error 0.000043
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 7 Outer Error 0.000018
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 8 Outer Error 0.000006
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 9 Outer Error 0.000002
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 10 Outer Error 0.000001
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 11 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 12 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 13 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 14 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 15 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 16 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 17 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 18 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 19 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 20 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 21 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 22 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 23 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 24 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 25 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 26 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 27 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 28 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 29 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 30 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 31 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 32 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 33 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 34 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 35 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 36 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 37 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 38 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 39 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 40 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 41 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 42 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 43 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 44 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 45 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 46 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 47 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 48 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 49 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Iteration 50 Outer Error 0.000000
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col failed to converge in 51 iterations - error = 0.000000
>> /bal.OutQ1
Port: /bal.OutQ1 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = None

>> /stagebalance.OutQ1
Port: /stagebalance.OutQ1 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = None

>> 
>> 
>> #Solve with an inconcistency
>> /col.LiquidDraw_0_l.T = 
>> /col.LiquidDraw_0_l.MoleFlow = 5
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Inner Error 0.138940
/col Inner Error 0.019365
/col Inner Error 0.001350
/col Inner Error 0.000353
/col Inner Error 0.000021
/col Inner Error 0.000004
/col Inner Error 0.000000
/col Iteration 1 Outer Error 0.026381
/col Inner Error 0.065625
/col Inner Error 0.004835
/col Inner Error 0.000360
/col Inner Error 0.000030
/col Inner Error 0.000002
/col Inner Error 0.000000
/col Iteration 2 Outer Error 0.000554
/col Inner Error 0.013685
/col Inner Error 0.000520
/col Inner Error 0.000044
/col Inner Error 0.000002
/col Inner Error 0.000000
/col Iteration 3 Outer Error 0.000029
/col Inner Error 0.000794
/col Inner Error 0.000038
/col Inner Error 0.000002
/col Inner Error 0.000000
/col Iteration 4 Outer Error 0.000001
/col Inner Error 0.000014
/col Inner Error 0.000000
>> /col.DegSubCool_0_degsubcool.DT = 1
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Inner Error 0.141229
/col Inner Error 0.019648
/col Inner Error 0.001299
/col Inner Error 0.000329
/col Inner Error 0.000020
/col Inner Error 0.000003
/col Inner Error 0.000000
/col Iteration 1 Outer Error 0.026375
/col Inner Error 0.062802
/col Inner Error 0.004246
/col Inner Error 0.000294
/col Inner Error 0.000026
/col Inner Error 0.000002
/col Inner Error 0.000000
/col Iteration 2 Outer Error 0.000552
/col Inner Error 0.014831
/col Inner Error 0.000635
/col Inner Error 0.000048
/col Inner Error 0.000002
/col Inner Error 0.000000
/col Iteration 3 Outer Error 0.000029
/col Inner Error 0.000814
/col Inner Error 0.000037
/col Inner Error 0.000002
/col Inner Error 0.000000
/col Iteration 4 Outer Error 0.000001
/col Inner Error 0.000013
/col Inner Error 0.000000
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/col.VapourDraw_0_vap.MoleFlow: 0 Vs 1

ConsistencyError: /col.VapourDraw_0_vap - MoleFlow 0.0 vs 1.0
>> /bal.OutQ1
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/col.VapourDraw_0_vap.MoleFlow: 0 Vs 1

Port: /bal.OutQ1 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 3910.09780505 = W

>> /stagebalance.OutQ1
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/col.VapourDraw_0_vap.MoleFlow: 0 Vs 1

Port: /stagebalance.OutQ1 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 3910.1002357 = W

>> 
>> #Solve fine again
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/col.VapourDraw_0_vap.MoleFlow: 0 Vs 1

>> /col.DegSubCool_0_degsubcool.DT = 0
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Inner Error 0.138940
/col Inner Error 0.019365
/col Inner Error 0.001350
/col Inner Error 0.000353
/col Inner Error 0.000021
/col Inner Error 0.000004
/col Inner Error 0.000000
/col Iteration 1 Outer Error 0.026381
/col Inner Error 0.065625
/col Inner Error 0.004835
/col Inner Error 0.000360
/col Inner Error 0.000030
/col Inner Error 0.000002
/col Inner Error 0.000000
/col Iteration 2 Outer Error 0.000554
/col Inner Error 0.013685
/col Inner Error 0.000520
/col Inner Error 0.000044
/col Inner Error 0.000002
/col Inner Error 0.000000
/col Iteration 3 Outer Error 0.000029
/col Inner Error 0.000794
/col Inner Error 0.000038
/col Inner Error 0.000002
/col Inner Error 0.000000
/col Iteration 4 Outer Error 0.000001
/col Inner Error 0.000014
/col Inner Error 0.000000
>> 
>> 
>> #Should attempt to solve for vapour draw even if TryToSolve = 0
>> /col.DegSubCool_0_degsubcool.DT =
>> /col.TryToSolve = 0
>> /col.DegSubCool_0_degsubcool.DT = 1
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/col.VapourDraw_0_vap.MoleFlow: 0 Vs 1

ConsistencyError: /col.VapourDraw_0_vap - MoleFlow 0.0 vs 1.0
>> /col.VapourDraw_0_vap.MoleFlow =
>> /col.VapourDraw_0_vap.MoleFlow
/col.VapourDraw_0_vap.MoleFlow= 1e-040 = kgmole/h
>> /col.TryToSolve = 1
Calculating Jacobian for /col
Calculating disturbance 10 of 22 in jacobian of /col
Calculating disturbance 20 of 22 in jacobian of /col
/col Inner Error 0.129882
/col Inner Error 0.032037
/col Inner Error 0.001307
/col Inner Error 0.000072
/col Inner Error 0.000006
/col Inner Error 0.000000
/col Iteration 1 Outer Error 0.026075
/col Inner Error 0.040104
/col Inner Error 0.002612
/col Inner Error 0.000282
/col Inner Error 0.000026
/col Inner Error 0.000001
/col Inner Error 0.000000
/col Iteration 2 Outer Error 0.000335
/col Inner Error 0.004431
/col Inner Error 0.000416
/col Inner Error 0.000023
/col Inner Error 0.000002
/col Inner Error 0.000000
/col Iteration 3 Outer Error 0.000042
/col Inner Error 0.000641
/col Inner Error 0.000039
/col Inner Error 0.000003
/col Inner Error 0.000000
/col Iteration 4 Outer Error 0.000004
/col Inner Error 0.000014
/col Inner Error 0.000001
/col Iteration 5 Outer Error 0.000000
/col Inner Error 0.000003
/col Inner Error 0.000000
>> 
>> 
>> #Solve fine. A DegSubcooling > 0.0 puts a zero lfow in the vap flow
>> /col.VapourDraw_0_vap.MoleFlow = 
Calculating Jacobian for /col
Calculating disturbance 10 of 22 in jacobian of /col
Calculating disturbance 20 of 22 in jacobian of /col
/col Inner Error 0.129882
/col Inner Error 0.032037
/col Inner Error 0.001307
/col Inner Error 0.000072
/col Inner Error 0.000006
/col Inner Error 0.000000
/col Iteration 1 Outer Error 0.026075
/col Inner Error 0.040104
/col Inner Error 0.002612
/col Inner Error 0.000282
/col Inner Error 0.000026
/col Inner Error 0.000001
/col Inner Error 0.000000
/col Iteration 2 Outer Error 0.000335
/col Inner Error 0.004431
/col Inner Error 0.000416
/col Inner Error 0.000023
/col Inner Error 0.000002
/col Inner Error 0.000000
/col Iteration 3 Outer Error 0.000042
/col Inner Error 0.000641
/col Inner Error 0.000039
/col Inner Error 0.000003
/col Inner Error 0.000000
/col Iteration 4 Outer Error 0.000004
/col Inner Error 0.000014
/col Inner Error 0.000001
/col Iteration 5 Outer Error 0.000000
/col Inner Error 0.000003
/col Inner Error 0.000000
>> /bal.OutQ1
Port: /bal.OutQ1 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = -0.00110636717727 = W

>> /stagebalance.OutQ1
Port: /stagebalance.OutQ1 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 0.000451259489637 = W

>> 
>> 
>> # Can not solve because the liquid is subcooled and the vap is > 0.0
>> /col.DegSubCool_0_degsubcool.DT = 
>> /col.LiquidDraw_0_l.T = 18 C
>> /col.VapourDraw_0_vap.MoleFlow = 1
Calculating Jacobian for /col
Calculating disturbance 10 of 23 in jacobian of /col
Calculating disturbance 20 of 23 in jacobian of /col
/col Inner Error 0.155608
/col Inner Error 0.023107
/col Inner Error 0.001388
/col Inner Error 0.000244
/col Inner Error 0.000019
/col Inner Error 0.000002
/col Inner Error 0.000000
/col Iteration 1 Outer Error 0.026344
/col Inner Error 0.079963
/col Inner Error 0.005787
/col Inner Error 0.000406
/col Inner Error 0.000054
/col Inner Error 0.000004
/col Inner Error 0.000000
/col Iteration 2 Outer Error 0.000538
/col Inner Error 0.016701
/col Inner Error 0.000780
/col Inner Error 0.000064
/col Inner Error 0.000003
/col Inner Error 0.000000
/col Iteration 3 Outer Error 0.000028
/col Inner Error 0.000696
/col Inner Error 0.000044
/col Inner Error 0.000002
/col Inner Error 0.000000
/col Iteration 4 Outer Error 0.000001
/col Inner Error 0.000020
/col Inner Error 0.000000
Tower failed to converge due to a sub cooled solution at the top where there is a vapour draw. Degrees of subcooling = 6.446835
>> /bal.OutQ1
Port: /bal.OutQ1 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = None

>> /stagebalance.OutQ1
Port: /stagebalance.OutQ1 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = None

>> 
>> 
>> #Solve fine
>> /col.VapourDraw_0_vap.MoleFlow = 0
Calculating Jacobian for /col
Calculating disturbance 10 of 22 in jacobian of /col
Calculating disturbance 20 of 22 in jacobian of /col
/col Inner Error 0.128042
/col Inner Error 0.031305
/col Inner Error 0.001283
/col Inner Error 0.000074
/col Inner Error 0.000006
/col Inner Error 0.000000
/col Iteration 1 Outer Error 0.026077
/col Inner Error 0.039332
/col Inner Error 0.002640
/col Inner Error 0.000275
/col Inner Error 0.000027
/col Inner Error 0.000001
/col Inner Error 0.000000
/col Iteration 2 Outer Error 0.000320
/col Inner Error 0.004767
/col Inner Error 0.000442
/col Inner Error 0.000024
/col Inner Error 0.000002
/col Inner Error 0.000000
/col Iteration 3 Outer Error 0.000041
/col Inner Error 0.000540
/col Inner Error 0.000034
/col Inner Error 0.000002
/col Inner Error 0.000000
/col Iteration 4 Outer Error 0.000004
/col Inner Error 0.000017
/col Inner Error 0.000001
/col Iteration 5 Outer Error 0.000000
/col Inner Error 0.000003
/col Inner Error 0.000000
>> /bal.OutQ1
Port: /bal.OutQ1 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = -0.000829900316603 = W

>> /stagebalance.OutQ1
Port: /stagebalance.OutQ1 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 0.000366214109818 = W

>> 
>> 
>> 
>> #Get rid of the vapour draw wich should not have been there at all to begin with
>> delete /col.Stage_0.vap
Calculating Jacobian for /col
Calculating disturbance 10 of 22 in jacobian of /col
Calculating disturbance 20 of 22 in jacobian of /col
/col Inner Error 0.128042
/col Inner Error 0.031305
/col Inner Error 0.001283
/col Inner Error 0.000074
/col Inner Error 0.000006
/col Inner Error 0.000000
/col Iteration 1 Outer Error 0.026077
/col Inner Error 0.039332
/col Inner Error 0.002640
/col Inner Error 0.000275
/col Inner Error 0.000027
/col Inner Error 0.000001
/col Inner Error 0.000000
/col Iteration 2 Outer Error 0.000320
/col Inner Error 0.004767
/col Inner Error 0.000442
/col Inner Error 0.000024
/col Inner Error 0.000002
/col Inner Error 0.000000
/col Iteration 3 Outer Error 0.000041
/col Inner Error 0.000540
/col Inner Error 0.000034
/col Inner Error 0.000002
/col Inner Error 0.000000
/col Iteration 4 Outer Error 0.000004
/col Inner Error 0.000017
/col Inner Error 0.000001
/col Iteration 5 Outer Error 0.000000
/col Inner Error 0.000003
/col Inner Error 0.000000
>> /bal.OutQ1
Port: /bal.OutQ1 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = -0.000829900316603 = W

>> /stagebalance.OutQ1
Port: /stagebalance.OutQ1 + sim.solver.Ports.Port_Energy
Connected to: None
Energy   = 0.000366214109818 = W

>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
Calculating Jacobian for /RootClone.col
Calculating disturbance 10 of 22 in jacobian of /RootClone.col
Calculating disturbance 20 of 22 in jacobian of /RootClone.col
/RootClone.col Inner Error 0.128042
/RootClone.col Inner Error 0.031305
/RootClone.col Inner Error 0.001283
/RootClone.col Inner Error 0.000074
/RootClone.col Inner Error 0.000006
/RootClone.col Inner Error 0.000000
/RootClone.col Iteration 1 Outer Error 0.026077
/RootClone.col Inner Error 0.039332
/RootClone.col Inner Error 0.002640
/RootClone.col Inner Error 0.000275
/RootClone.col Inner Error 0.000027
/RootClone.col Inner Error 0.000001
/RootClone.col Inner Error 0.000000
/RootClone.col Iteration 2 Outer Error 0.000320
/RootClone.col Inner Error 0.004767
/RootClone.col Inner Error 0.000442
/RootClone.col Inner Error 0.000024
/RootClone.col Inner Error 0.000002
/RootClone.col Inner Error 0.000000
/RootClone.col Iteration 3 Outer Error 0.000041
/RootClone.col Inner Error 0.000540
/RootClone.col Inner Error 0.000034
/RootClone.col Inner Error 0.000002
/RootClone.col Inner Error 0.000000
/RootClone.col Iteration 4 Outer Error 0.000004
/RootClone.col Inner Error 0.000017
/RootClone.col Inner Error 0.000001
/RootClone.col Iteration 5 Outer Error 0.000000
/RootClone.col Inner Error 0.000003
/RootClone.col Inner Error 0.000000
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> clear
>> read consisterrs.tst
Processing consisterrs.tst
>> #Play with consistency errors
>> 
>> 
>> s = Stream.Stream_Material()
>> s2 = Stream.Stream_Material()
>> s3 = Stream.Stream_Material()
>> 
>> s.In.T = 11
>> s.In.P = 11
>> s.In.MoleFlow = 3
>> 
>> s2.In.T = 22
>> s2.In.P = 222
>> 
>> #Create a Consist error
>> s.Out -> s2.In
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s.Out.T: 295.15 Vs 284.15

ConsistencyError: /s.Out - P 222.0 vs 11.0
>> s.In.MoleFlow =
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s.Out.T: 295.15 Vs 284.15
/s2.In.T: 284.15 Vs 295.15

ConsistencyError: /s.Out - P 222.0 vs 11.0
>> s.In.MoleFlow = 4
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s2.In.T: 284.15 Vs 295.15
/s.Out.T: 295.15 Vs 284.15

ConsistencyError: /s2.In - P 11.0 vs 222.0
>> 
>> #Get rid of Consist error
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s2.In.T: 284.15 Vs 295.15
/s.Out.T: 295.15 Vs 284.15

>> s.Out ->
>> 
>> #Shouldn't make a difference the order of connections
>> s2.In -> s.Out
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s.Out.T: 295.15 Vs 284.15

ConsistencyError: /s.Out - P 222.0 vs 11.0
>> s.Out ->
>> 
>> 
>> #A solve will not be triggered in both sides, but the const error should still be passed on
>> s.In.MoleFlow =
>> s2.In -> s.Out
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s.Out.T: 295.15 Vs 284.15

ConsistencyError: /s.Out - P 222.0 vs 11.0
>> 
>> #Anythins should still pass the message of consist errors
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s.Out.T: 295.15 Vs 284.15

>> cd /s
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s.Out.T: 295.15 Vs 284.15

/s
>> cd /
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s.Out.T: 295.15 Vs 284.15

/
>> 
>> 
>> #This should clear the consist error message
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s.Out.T: 295.15 Vs 284.15

>> s2.In -> 
>> 
>> 
>> #Put it back
>> s.Out -> s2.In
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s2.In.T: 284.15 Vs 295.15

ConsistencyError: /s2.In - P 11.0 vs 222.0
>> 
>> #Reconnect. Consist error message should go away
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s2.In.T: 284.15 Vs 295.15

>> s.Out -> s3.In
>> 
>> #Put it back
>> s.Out -> s2.In
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s2.In.T: 284.15 Vs 295.15

ConsistencyError: /s2.In - P 11.0 vs 222.0
>> 
>> s3.Out.T = 33
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s2.In.T: 284.15 Vs 295.15

>> s3.Out.P = 333
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s2.In.T: 284.15 Vs 295.15

>> 
>> 
>> #Reconnect, but now a new consist error should get created
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s2.In.T: 284.15 Vs 295.15

>> s.Out -> s3.In
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s3.In.T: 284.15 Vs 306.15

ConsistencyError: /s3.In - P 11.0 vs 333.0
>> 
>> 
>> #The consistency error messages should get stored too
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s3.In.T: 284.15 Vs 306.15

>> store consisterrs.s42
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s3.In.T: 284.15 Vs 306.15

>> 
>> #Clear and errors should go away
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s3.In.T: 284.15 Vs 306.15

>> clear
>> 
>> #recall and errors should come back
>> recall consisterrs.s42
Finished recallling case C:\sim\cmd\test\consisterrs.s42
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s3.In.T: 284.15 Vs 306.15

>> cd /
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s3.In.T: 284.15 Vs 306.15

/
The following consistency errors in flowsheet / have not been resolved (only lists one per unit operation):
/s3.In.T: 284.15 Vs 306.15

>> 
>> clear 
>> read set_valves.tst
Processing set_valves.tst
>> units SI
>> /LiquidPhases = 2
>> /RecycleDetails = 1
>> displayproperties
VapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow H Energy MolecularWeight ZFactor 
>> commonproperties  VapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow Energy H S MolecularWeight MassDensity Cp ThermalConductivity Viscosity molarV ZFactor Cv SpeedOfSound SurfaceTension IdealGasCp  StdLiqMolarVol
>> displayproperties  VapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow Energy H S MolecularWeight MassDensity Cp ThermalConductivity Viscosity molarV ZFactor Cv SpeedOfSound SurfaceTension IdealGasCp
>> $VMGThermo = VirtualMaterials.Advanced_Peng-Robinson
>> / -> $VMGThermo
Thermo case attached to a unit operation. / to /VMGThermo
>> /SolidPhases = 0
>> $VMGThermo + METHANE
METHANE 
>> $VMGThermo + ETHANE
ETHANE 
>> $VMGThermo + PROPANE
PROPANE 
>> /V1 = Valve.Valve()
>> '/V1.In.T' = 30
>> '/V1.In.P' = 3000
>> '/V1.In.MoleFlow' = 500
>> '/V1.In.Fraction' =  0.7 0.2 0.1
>> '/V1.Out.P' = 1000
>> /V2 = Valve.Valve()
>> '/V2.In.T' = 30
>> '/V2.In.P' = 3e3
>> '/V2.In.MoleFlow' = 500
>> '/V2.In.Fraction' =  0.7 0.2 0.1
>> '/V2.Out.T' = 15
>> '/V2.Out.T' =
>> /Set1 = Set.Set()
>> '/Set1.multiplier.Generic' = 1
>> '/Set1.addition.Generic' = -1
>> delete '/Set1'
>> '/V2.Out.T' = 15
>> units SI
>> '/V2.In.P' =
>> '/V2.Out.P' = 1e3
>> '/V2.Out.P' =
>> /V2Out = Stream.Stream_Material()
>> /V2.Out -> /V2Out.In
>> /V1Out = Stream.Stream_Material()
>> /V1.Out -> /V1Out.In
>> /V1in = Stream.Stream_Material()
>> /V1.In -> /V1in.Out
>> /V12In = Stream.Stream_Material()
>> /V2.In -> /V12In.Out
>> /Set1 = Set.Set()
>> '/Set1.multiplier.Generic' = 1
>> '/Set1.addition.Generic' = 0
>> /V2Out.T = Stream.SensorPort('T')
>> /V2Out.T -> /Set1.Signal0
>> /Set1.Signal0 ->
>> /V1Out.T = Stream.SensorPort('T')
>> /V1Out.T -> /Set1.Signal0
>> /V1Out.P = Stream.SensorPort('P')
>> /V1Out.T ->
>> /V1Out.P -> /Set1.Signal0
>> /V2Out.P = Stream.SensorPort('P')
>> /V2Out.P -> /Set1.Signal1
>> '/V2.Out.T' = 12
>> /V2.In
Port: /V2.In + sim.solver.Ports.Port_Material
Connected to: /V12In.Out
VapFrac               = 1.0 = 
T                     = 30.0 * C
P                     = 3492.93953247 = kPa
MoleFlow              = 500.0 * kgmole/h
MassFlow              = 10826.546 = kg/h
VolumeFlow            = 311.398011001 = m3/hr
StdLiqVolumeFlow      = 31.5524157 = m3/hr
Energy                = 1381705.31293 = W
H                     = 9948.27825312 = kJ/kmol
S                     = 165.023428291 = kJ/kmol-K
MolecularWeight       = 21.6530918921 = 
MassDensity           = 34.7675500922 = kg/m3
Cp                    = 51.381136634 = kJ/kmol-K
ThermalConductivity   = 0.0342034030102 = W/m-K
Viscosity             = 1.21526118466e-005 = Pa-s
molarV                = 0.622796022001 = m3/kmol
ZFactor               = 0.863484606421 = 
Cv                    = 36.4679784784 = kJ/kmol-K
SpeedOfSound          = 350.056667268 = m/s
SurfaceTension        = 0.0 = N/m
IdealGasCp            = 44.0947296518 = kJ/kmol-K
METHANE               = 0.7 * 
ETHANE                = 0.2 * 
PROPANE               = 0.1 * 

>> /V2.Out
Port: /V2.Out + sim.solver.Ports.Port_Material
Connected to: /V2Out.In
VapFrac               = 1.0 = 
T                     = 12.0 * C
P                     = 1000.0 | kPa
MoleFlow              = 500.0 = kgmole/h
MassFlow              = 10826.546 = kg/h
VolumeFlow            = 1129.23183215 = m3/hr
StdLiqVolumeFlow      = 31.5524157 = m3/hr
Energy                = 1381705.31293 = W
H                     = 9948.27825312 = kJ/kmol
S                     = 174.526939696 = kJ/kmol-K
MolecularWeight       = 21.6530920129 = 
MassDensity           = 9.58753171689 = kg/m3
Cp                    = 44.8556140114 = kJ/kmol-K
ThermalConductivity   = 0.0288756102154 = W/m-K
Viscosity             = 1.02439346657e-005 = Pa-s
molarV                = 2.2584636643 = m3/kmol
ZFactor               = 0.952470966236 = 
Cv                    = 34.8172202948 = kJ/kmol-K
SpeedOfSound          = 357.663778777 = m/s
SurfaceTension        = 0.0 = N/m
IdealGasCp            = 42.9290026207 = kJ/kmol-K
METHANE               = 0.7 = 
ETHANE                = 0.2 = 
PROPANE               = 0.1 = 

>> /V1.In
Port: /V1.In + sim.solver.Ports.Port_Material
Connected to: /V1in.Out
VapFrac               = 1.0 = 
T                     = 30.0 * C
P                     = 3000.0 * kPa
MoleFlow              = 500.0 * kgmole/h
MassFlow              = 10826.546 = kg/h
VolumeFlow            = 370.657120356 = m3/hr
StdLiqVolumeFlow      = 31.5524157 = m3/hr
Energy                = 1404933.65514 = W
H                     = 10115.522317 = kJ/kmol
S                     = 166.679655261 = kJ/kmol-K
MolecularWeight       = 21.6530919745 = 
MassDensity           = 29.2090597824 = kg/m3
Cp                    = 50.0584959706 = kJ/kmol-K
ThermalConductivity   = 0.0335991548972 = W/m-K
Viscosity             = 1.18358993575e-005 = Pa-s
molarV                = 0.741314240712 = m3/kmol
ZFactor               = 0.882530636926 = 
Cv                    = 36.3625260124 = kJ/kmol-K
SpeedOfSound          = 353.487620292 = m/s
SurfaceTension        = 0.0 = N/m
IdealGasCp            = 44.0947297616 = kJ/kmol-K
METHANE               = 0.7 * 
ETHANE                = 0.2 * 
PROPANE               = 0.1 * 

>> /V1.In
Port: /V1.In + sim.solver.Ports.Port_Material
Connected to: /V1in.Out
VapFrac               = 1.0 = 
T                     = 30.0 * C
P                     = 3000.0 * kPa
MoleFlow              = 500.0 * kgmole/h
MassFlow              = 10826.546 = kg/h
VolumeFlow            = 370.657120356 = m3/hr
StdLiqVolumeFlow      = 31.5524157 = m3/hr
Energy                = 1404933.65514 = W
H                     = 10115.522317 = kJ/kmol
S                     = 166.679655261 = kJ/kmol-K
MolecularWeight       = 21.6530919745 = 
MassDensity           = 29.2090597824 = kg/m3
Cp                    = 50.0584959706 = kJ/kmol-K
ThermalConductivity   = 0.0335991548972 = W/m-K
Viscosity             = 1.18358993575e-005 = Pa-s
molarV                = 0.741314240712 = m3/kmol
ZFactor               = 0.882530636926 = 
Cv                    = 36.3625260124 = kJ/kmol-K
SpeedOfSound          = 353.487620292 = m/s
SurfaceTension        = 0.0 = N/m
IdealGasCp            = 44.0947297616 = kJ/kmol-K
METHANE               = 0.7 * 
ETHANE                = 0.2 * 
PROPANE               = 0.1 * 

>> 
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
>> /RootClone.V1.In
Port: /RootClone.V1.In + sim.solver.Ports.Port_Material
Connected to: /RootClone.V1in.Out
VapFrac               = 1.0 | 
T                     = 30.0 * C
P                     = 3000.0 * kPa
MoleFlow              = 500.0 * kgmole/h
MassFlow              = 10826.546 | kg/h
VolumeFlow            = 370.657120356 | m3/hr
StdLiqVolumeFlow      = 31.5524157 | m3/hr
Energy                = 1404933.65514 | W
H                     = 10115.522317 | kJ/kmol
S                     = 166.679655261 | kJ/kmol-K
MolecularWeight       = 21.6530919745 | 
MassDensity           = 29.2090597824 | kg/m3
Cp                    = 50.0584959706 | kJ/kmol-K
ThermalConductivity   = 0.0335991548972 | W/m-K
Viscosity             = 1.18358993575e-005 | Pa-s
molarV                = 0.741314240712 | m3/kmol
ZFactor               = 0.882530636926 | 
Cv                    = 36.3625260124 | kJ/kmol-K
SpeedOfSound          = 353.487620292 | m/s
SurfaceTension        = 0.0 | N/m
IdealGasCp            = 44.0947297616 | kJ/kmol-K
METHANE               = 0.7 * 
ETHANE                = 0.2 * 
PROPANE               = 0.1 * 

>> 
>> clear
>> read proptable.tst
Processing proptable.tst
>> optimizecode 1
>> maxversions 0
>> units Field
>> /LiquidPhases = 2
>> /StdLiqVolRefT = 288.15 
>>  /StdLiqVolRefT = 60 F
>> /RecycleDetails = 1
>> displayproperties
VapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow H Energy MolecularWeight ZFactor 
>> displayproperties VapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow StdGasVolumeFlow Energy H S MolecularWeight MassDensity Cp ThermalConductivity Viscosity molarV ZFactor
>> commonproperties
T P H S molarV ZFactor MolecularWeight StdLiqMolarVol 
>> commonproperties + ZFactor P T MolecularWeight MassDensity StdLiqMolarVolVapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow StdGasVolumeFlow Energy H S MolecularWeight MassDensity Cp ThermalConductivity Viscosity molarV ZFactor
>> $VMGThermo = VirtualMaterials.Advanced_Peng-Robinson
>> / -> $VMGThermo
Thermo case attached to a unit operation. / to /VMGThermo
>> /SolidPhases = 0
>> $VMGThermo + METHANE
METHANE 
>> $VMGThermo + ETHANE
ETHANE 
>> $VMGThermo + PROPANE
PROPANE 
>> $VMGThermo + n-BUTANE
n-BUTANE 
>> $VMGThermo + n-PENTANE
n-PENTANE 
>> $VMGThermo + n-HEXANE
n-HEXANE 
>> $VMGThermo + n-HEPTANE
n-HEPTANE 
>> $VMGThermo + WATER
WATER 
>> $VMGThermo + CARBON_DIOXIDE
CARBON DIOXIDE 
>> /PT1 = Properties.PropertyTable()
>> '/PT1.In.Fraction' =   .1  .1  .2  .1  .1  .1  .1  .1  .1
>> /PT1.XProperty = PRESSURE
>> /PT1.XMin =  10
>> /PT1.XMax =  20
>> /PT1.XPoints = 4
>> /PT1.YProperty = TEMPERATURE
>> /PT1.YMin =  60
>> /PT1.YMax =  100
>> /PT1.YPoints = 3
>> /PT1.Phase = FEED
>> 
>> #One property
>> /PT1.ZProperty = CP
>> valueOf /PT1.TableXYZCP.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435   22.61361899   22.0471243    21.04323111]
 [  13.3333343    23.09713863   22.73949078   21.92691316]
 [  16.66672226   23.4477644    23.20590905   22.63683481]
 [  19.99997969   23.72530333   23.55744244   23.13494793]]
>> 
>> #More than one property
>> /PT1.ZProperty = CP CV ENTHALPY ENTROPY ZFACTOR
>> valueOf /PT1.TableXYZCP.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435   22.61361899   22.0471243    21.04323111]
 [  13.3333343    23.09713863   22.73949078   21.92691316]
 [  16.66672226   23.4477644    23.20590905   22.63683481]
 [  19.99997969   23.72530333   23.55744244   23.13494793]]
>> valueOf /PT1.TableXYZCV.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435   19.55319098   19.37295787   18.94293972]
 [  13.3333343    19.81799943   19.76803287   19.46075762]
 [  16.66672226   20.00007165   20.02183051   19.8622098 ]
 [  19.99997969   20.13755135   20.20485813   20.13368205]]
>> valueOf /PT1.TableXYZENTHALPY.convertedArrayRep
[[    0.            60.00083995    80.00063994   100.00043992]
 [   10.00000435  2822.43292054  4793.34365325  7459.83832129]
 [   13.3333343   2213.72119023  3868.22325421  6196.25043   ]
 [   16.66672226  1793.94134847  3273.70141039  5236.24011008]
 [   19.99997969  1475.89439284  2844.39284486  4587.50429997]]
>> valueOf /PT1.TableXYZENTROPY.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435   47.85946307   51.57614407   56.42877615]
 [  13.3333343    46.2806917    49.40145218   53.63117417]
 [  16.66672226   45.1748352    47.96646604   51.53291296]
 [  19.99997969   44.3307538    46.91267794   50.08072991]]
>> valueOf /PT1.TableXYZZFACTOR.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.737497      0.839952      0.979878  ]
 [  13.3333343     0.690288      0.775115      0.898418  ]
 [  16.66672226    0.655481      0.730828      0.833222  ]
 [  19.99997969    0.627614      0.697095      0.787131  ]]
>> 
>> #Change phases
>> /PT1.Phase = LIQUID
>> valueOf /PT1.TableXYZCP.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435   45.58779975   48.00706984   18.15649183]
 [  13.3333343    44.64244769   47.04046049   49.49221362]
 [  16.66672226   43.88029044   46.25537403   48.69422948]
 [  19.99997969   43.23851151   45.59257667   48.01351868]]
>> valueOf /PT1.TableXYZCV.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435   39.18051973   41.36524315   12.79012611]
 [  13.3333343    38.18309926   40.34417694   42.54561957]
 [  16.66672226   37.37532244   39.5113213    41.69771663]
 [  19.99997969   36.69246202   38.80553167   40.97186395]]
>> valueOf /PT1.TableXYZENTHALPY.convertedArrayRep
[[ 0.00000000e+000  6.00008400e+001  8.00006399e+001  1.00000440e+002]
 [ 1.00000044e+001 -3.16081871e+003 -2.32864637e+003 -1.44158497e+004]
 [ 1.33333343e+001 -3.06579807e+003 -2.25789044e+003 -1.36695476e+003]
 [ 1.66667223e+001 -2.98720330e+003 -2.19711042e+003 -1.32704678e+003]
 [ 1.99999797e+001 -2.91994324e+003 -2.14400585e+003 -1.29037668e+003]]
>> valueOf /PT1.TableXYZENTROPY.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435   44.68376803   47.20048725   17.66179421]
 [  13.3333343    44.12033056   46.63681093   49.16260629]
 [  16.66672226   43.64860992   46.15792491   48.68993026]
 [  19.99997969   43.24161651   45.74089997   48.26884494]]
>> valueOf /PT1.TableXYZZFACTOR.convertedArrayRep
[[ 0.00000000e+000  6.00008400e+001  8.00006399e+001  1.00000440e+002]
 [ 1.00000044e+001  3.79046000e-003  3.79811000e-003  5.72231000e-004]
 [ 1.33333343e+001  4.95005000e-003  4.96334000e-003  4.97892000e-003]
 [ 1.66667223e+001  6.08346000e-003  6.10251000e-003  6.12542000e-003]
 [ 1.99999797e+001  7.19547000e-003  7.22057000e-003  7.25053000e-003]]
>> 
>> 
>> /PT1.Phase = VAPOR
>> valueOf /PT1.TableXYZCP.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435   17.7684389    19.50167192   21.06613643]
 [  13.3333343    17.12331614   18.72996083   20.52868539]
 [  16.66672226   16.64643642   18.16778924   19.86032292]
 [  19.99997969   16.27023025   17.72805006   19.34484571]]
>> valueOf /PT1.TableXYZCV.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435   15.69981848   17.42918219   18.99173593]
 [  13.3333343    15.03401166   16.63657208   18.42997038]
 [  16.66672226   14.5373555    16.05443298   17.74142543]
 [  19.99997969   14.14206554   15.59544282   17.20645839]]
>> valueOf /PT1.TableXYZENTHALPY.convertedArrayRep
[[    0.            60.00083995    80.00063994   100.00043992]
 [   10.00000435  6173.41761266  6900.67079463  7633.38493292]
 [   13.3333343   5984.5631235   6662.96869625  7443.62745098]
 [   16.66672226  5843.56725146  6488.43309254  7225.40419677]
 [   19.99997969  5731.08015136  6350.61919505  7055.8995528 ]]
>> valueOf /PT1.TableXYZENTROPY.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435   52.04284895   54.41028948   56.73640967]
 [  13.3333343    50.66566351   52.82339734   55.3174262 ]
 [  16.66672226   49.64101462   51.65090284   53.96866342]
 [  19.99997969   48.83061049   50.72656922   52.91224802]]
>> valueOf /PT1.TableXYZZFACTOR.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.988226      0.987793      0.987647  ]
 [  13.3333343     0.98545       0.985026      0.984431  ]
 [  16.66672226    0.982843      0.982426      0.98184   ]
 [  19.99997969    0.980366      0.979957      0.979374  ]]
>> 
>> 
>> /PT1.Phase = LIQUID2
>> valueOf /PT1.TableXYZCP.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435   18.17992261   18.15845037   34.15353014]
 [  13.3333343    18.180878     18.1590236    18.15677845]
 [  16.66672226   18.18190503   18.15962071   18.15711283]
 [  19.99997969   18.18297984   18.16024171   18.15749498]]
>> valueOf /PT1.TableXYZCV.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435   13.14839496   12.96398204   22.01717302]
 [  13.3333343    13.14932645   12.96455527   12.79050826]
 [  16.66672226   13.15030572   12.96517627   12.7909143 ]
 [  19.99997969   13.15133276   12.96582115   12.79136811]]
>> valueOf /PT1.TableXYZENTHALPY.convertedArrayRep
[[ 0.00000000e+000  6.00008400e+001  8.00006399e+001  1.00000440e+002]
 [ 1.00000044e+001 -1.51420279e+004 -1.47788528e+004  1.78713020e+002]
 [ 1.33333343e+001 -1.51415979e+004 -1.47785088e+004 -1.44155487e+004]
 [ 1.66667223e+001 -1.51411249e+004 -1.47781218e+004 -1.44152047e+004]
 [ 1.99999797e+001 -1.51406519e+004 -1.47776918e+004 -1.44148607e+004]]
>> valueOf /PT1.TableXYZENTROPY.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435   16.31534824   17.00126588   38.76421133]
 [  13.3333343    16.31544378   17.00133754   17.66184198]
 [  16.66672226   16.31551543   17.00138531   17.66188975]
 [  19.99997969   16.31558708   17.00145696   17.66193752]]
>> valueOf /PT1.TableXYZZFACTOR.convertedArrayRep
[[ 0.00000000e+000  6.00008400e+001  8.00006399e+001  1.00000440e+002]
 [ 1.00000044e+001  6.07328000e-004  5.89012000e-004  2.55061000e-003]
 [ 1.33333343e+001  8.09779000e-004  7.85354000e-004  7.62977000e-004]
 [ 1.66667223e+001  1.01224000e-003  9.81700000e-004  9.53726000e-004]
 [ 1.99999797e+001  1.21470000e-003  1.17805000e-003  1.14448000e-003]]
>> 
>> 
>> /PT1.Phase = FEED
>> valueOf /PT1.TableXYZCP.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435   22.61361899   22.0471243    21.04323111]
 [  13.3333343    23.09713863   22.73949078   21.92691316]
 [  16.66672226   23.4477644    23.20590905   22.63683481]
 [  19.99997969   23.72530333   23.55744244   23.13494793]]
>> valueOf /PT1.TableXYZCV.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435   19.55319098   19.37295787   18.94293972]
 [  13.3333343    19.81799943   19.76803287   19.46075762]
 [  16.66672226   20.00007165   20.02183051   19.8622098 ]
 [  19.99997969   20.13755135   20.20485813   20.13368205]]
>> valueOf /PT1.TableXYZENTHALPY.convertedArrayRep
[[    0.            60.00083995    80.00063994   100.00043992]
 [   10.00000435  2822.43292054  4793.34365325  7459.83832129]
 [   13.3333343   2213.72119023  3868.22325421  6196.25043   ]
 [   16.66672226  1793.94134847  3273.70141039  5236.24011008]
 [   19.99997969  1475.89439284  2844.39284486  4587.50429997]]
>> valueOf /PT1.TableXYZENTROPY.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435   47.85946307   51.57614407   56.42877615]
 [  13.3333343    46.2806917    49.40145218   53.63117417]
 [  16.66672226   45.1748352    47.96646604   51.53291296]
 [  19.99997969   44.3307538    46.91267794   50.08072991]]
>> valueOf /PT1.TableXYZZFACTOR.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.737497      0.839952      0.979878  ]
 [  13.3333343     0.690288      0.775115      0.898418  ]
 [  16.66672226    0.655481      0.730828      0.833222  ]
 [  19.99997969    0.627614      0.697095      0.787131  ]]
>> 
>> 
>> #With VF at the end BULK
>> /PT1.ZProperty = CP CV ENTHALPY ENTROPY ZFACTOR VF
>> valueOf /PT1.TableXYZCP.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435   22.61361899   22.0471243    21.04323111]
 [  13.3333343    23.09713863   22.73949078   21.92691316]
 [  16.66672226   23.4477644    23.20590905   22.63683481]
 [  19.99997969   23.72530333   23.55744244   23.13494793]]
>> valueOf /PT1.TableXYZCV.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435   19.55319098   19.37295787   18.94293972]
 [  13.3333343    19.81799943   19.76803287   19.46075762]
 [  16.66672226   20.00007165   20.02183051   19.8622098 ]
 [  19.99997969   20.13755135   20.20485813   20.13368205]]
>> valueOf /PT1.TableXYZENTHALPY.convertedArrayRep
[[    0.            60.00083995    80.00063994   100.00043992]
 [   10.00000435  2822.43292054  4793.34365325  7459.83832129]
 [   13.3333343   2213.72119023  3868.22325421  6196.25043   ]
 [   16.66672226  1793.94134847  3273.70141039  5236.24011008]
 [   19.99997969  1475.89439284  2844.39284486  4587.50429997]]
>> valueOf /PT1.TableXYZENTROPY.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435   47.85946307   51.57614407   56.42877615]
 [  13.3333343    46.2806917    49.40145218   53.63117417]
 [  16.66672226   45.1748352    47.96646604   51.53291296]
 [  19.99997969   44.3307538    46.91267794   50.08072991]]
>> valueOf /PT1.TableXYZZFACTOR.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.737497      0.839952      0.979878  ]
 [  13.3333343     0.690288      0.775115      0.898418  ]
 [  16.66672226    0.655481      0.730828      0.833222  ]
 [  19.99997969    0.627614      0.697095      0.787131  ]]
>> valueOf /PT1.TableXYZVF.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.745571      0.849944      0.99213   ]
 [  13.3333343     0.699334      0.786121      0.912339  ]
 [  16.66672226    0.665317      0.742709      0.847962  ]
 [  19.99997969    0.638088      0.709721      0.802637  ]]
>> 
>> 
>> #With VF in the middle BULK
>> /PT1.ZProperty = CP CV ENTHALPY ENTROPY ZFACTOR VF VISCOSITY
>> valueOf /PT1.TableXYZCP.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435   22.61361899   22.0471243    21.04323111]
 [  13.3333343    23.09713863   22.73949078   21.92691316]
 [  16.66672226   23.4477644    23.20590905   22.63683481]
 [  19.99997969   23.72530333   23.55744244   23.13494793]]
>> valueOf /PT1.TableXYZCV.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435   19.55319098   19.37295787   18.94293972]
 [  13.3333343    19.81799943   19.76803287   19.46075762]
 [  16.66672226   20.00007165   20.02183051   19.8622098 ]
 [  19.99997969   20.13755135   20.20485813   20.13368205]]
>> valueOf /PT1.TableXYZENTHALPY.convertedArrayRep
[[    0.            60.00083995    80.00063994   100.00043992]
 [   10.00000435  2822.43292054  4793.34365325  7459.83832129]
 [   13.3333343   2213.72119023  3868.22325421  6196.25043   ]
 [   16.66672226  1793.94134847  3273.70141039  5236.24011008]
 [   19.99997969  1475.89439284  2844.39284486  4587.50429997]]
>> valueOf /PT1.TableXYZENTROPY.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435   47.85946307   51.57614407   56.42877615]
 [  13.3333343    46.2806917    49.40145218   53.63117417]
 [  16.66672226   45.1748352    47.96646604   51.53291296]
 [  19.99997969   44.3307538    46.91267794   50.08072991]]
>> valueOf /PT1.TableXYZZFACTOR.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.737497      0.839952      0.979878  ]
 [  13.3333343     0.690288      0.775115      0.898418  ]
 [  16.66672226    0.655481      0.730828      0.833222  ]
 [  19.99997969    0.627614      0.697095      0.787131  ]]
>> valueOf /PT1.TableXYZVF.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.745571      0.849944      0.99213   ]
 [  13.3333343     0.699334      0.786121      0.912339  ]
 [  16.66672226    0.665317      0.742709      0.847962  ]
 [  19.99997969    0.638088      0.709721      0.802637  ]]
>> valueOf /PT1.TableXYZVISCOSITY.convertedArrayRep
[[ 0.00000000e+000  6.00008400e+001  8.00006399e+001  1.00000440e+002]
 [ 1.00000044e+001  3.81802000e-002  2.15524000e-002  9.07335000e-003]
 [ 1.33333343e+001  4.63486000e-002  2.95955000e-002  1.48971000e-002]
 [ 1.66667223e+001  5.27342000e-002  3.58740000e-002  2.09797000e-002]
 [ 1.99999797e+001  5.80162000e-002  4.10213000e-002  2.60626000e-002]]
>> 
>> 
>> 
>> #With VF at the beginning BULK
>> /PT1.ZProperty = VF VISCOSITY
>> valueOf /PT1.TableXYZVF.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.745571      0.849944      0.99213   ]
 [  13.3333343     0.699334      0.786121      0.912339  ]
 [  16.66672226    0.665317      0.742709      0.847962  ]
 [  19.99997969    0.638088      0.709721      0.802637  ]]
>> valueOf /PT1.TableXYZVISCOSITY.convertedArrayRep
[[ 0.00000000e+000  6.00008400e+001  8.00006399e+001  1.00000440e+002]
 [ 1.00000044e+001  3.81802000e-002  2.15524000e-002  9.07335000e-003]
 [ 1.33333343e+001  4.63486000e-002  2.95955000e-002  1.48971000e-002]
 [ 1.66667223e+001  5.27342000e-002  3.58740000e-002  2.09797000e-002]
 [ 1.99999797e+001  5.80162000e-002  4.10213000e-002  2.60626000e-002]]
>> 
>> 
>> #Now only VF in all phases
>> /PT1.ZProperty = VF
>> /PT1.Phase = VAPOR
>> valueOf /PT1.TableXYZVF.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.745571      0.849944      0.99213   ]
 [  13.3333343     0.699334      0.786121      0.912339  ]
 [  16.66672226    0.665317      0.742709      0.847962  ]
 [  19.99997969    0.638088      0.709721      0.802637  ]]
>> 
>> /PT1.Phase = LIQUID
>> valueOf /PT1.TableXYZVF.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.745571      0.849944      0.99213   ]
 [  13.3333343     0.699334      0.786121      0.912339  ]
 [  16.66672226    0.665317      0.742709      0.847962  ]
 [  19.99997969    0.638088      0.709721      0.802637  ]]
>> 
>> /PT1.Phase = LIQUID2
>> valueOf /PT1.TableXYZVF.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.745571      0.849944      0.99213   ]
 [  13.3333343     0.699334      0.786121      0.912339  ]
 [  16.66672226    0.665317      0.742709      0.847962  ]
 [  19.99997969    0.638088      0.709721      0.802637  ]]
>> 
>> /PT1.Phase = VAPOR
>> valueOf /PT1.TableXYZVF.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.745571      0.849944      0.99213   ]
 [  13.3333343     0.699334      0.786121      0.912339  ]
 [  16.66672226    0.665317      0.742709      0.847962  ]
 [  19.99997969    0.638088      0.709721      0.802637  ]]
>> 
>> 
>> #With VF at the beginning all phases
>> /PT1.ZProperty = VF VISCOSITY
>> valueOf /PT1.TableXYZVF.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.745571      0.849944      0.99213   ]
 [  13.3333343     0.699334      0.786121      0.912339  ]
 [  16.66672226    0.665317      0.742709      0.847962  ]
 [  19.99997969    0.638088      0.709721      0.802637  ]]
>> valueOf /PT1.TableXYZVISCOSITY.convertedArrayRep
[[ 0.00000000e+000  6.00008400e+001  8.00006399e+001  1.00000440e+002]
 [ 1.00000044e+001  8.50814000e-003  8.50528000e-003  8.52660000e-003]
 [ 1.33333343e+001  8.69519000e-003  8.71642000e-003  8.69838000e-003]
 [ 1.66667223e+001  8.84504000e-003  8.88057000e-003  8.88483000e-003]
 [ 1.99999797e+001  8.97278000e-003  9.01757000e-003  9.03653000e-003]]
>> 
>> /PT1.Phase = LIQUID
>> valueOf /PT1.TableXYZVF.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.745571      0.849944      0.99213   ]
 [  13.3333343     0.699334      0.786121      0.912339  ]
 [  16.66672226    0.665317      0.742709      0.847962  ]
 [  19.99997969    0.638088      0.709721      0.802637  ]]
>> valueOf /PT1.TableXYZVISCOSITY.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.336936      0.319795      0.681125  ]
 [  13.3333343     0.321922      0.306271      0.291667  ]
 [  16.66672226    0.309937      0.29543       0.281868  ]
 [  19.99997969    0.299891      0.286323      0.273591  ]]
>> 
>> /PT1.Phase = LIQUID2
>> valueOf /PT1.TableXYZVF.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.745571      0.849944      0.99213   ]
 [  13.3333343     0.699334      0.786121      0.912339  ]
 [  16.66672226    0.665317      0.742709      0.847962  ]
 [  19.99997969    0.638088      0.709721      0.802637  ]]
>> valueOf /PT1.TableXYZVISCOSITY.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    1.12084       0.857219      0.119101  ]
 [  13.3333343     1.12074       0.857172      0.681104  ]
 [  16.66672226    1.12064       0.857122      0.68108   ]
 [  19.99997969    1.12054       0.857071      0.681055  ]]
>> 
>> 
>> #With VF in the middle all phases
>> /PT1.ZProperty = ENTHALPY VF VISCOSITY
>> valueOf /PT1.TableXYZVF.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.745571      0.849944      0.99213   ]
 [  13.3333343     0.699334      0.786121      0.912339  ]
 [  16.66672226    0.665317      0.742709      0.847962  ]
 [  19.99997969    0.638088      0.709721      0.802637  ]]
>> valueOf /PT1.TableXYZVISCOSITY.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    1.12084       0.857219      0.119101  ]
 [  13.3333343     1.12074       0.857172      0.681104  ]
 [  16.66672226    1.12064       0.857122      0.68108   ]
 [  19.99997969    1.12054       0.857071      0.681055  ]]
>> 
>> /PT1.Phase = LIQUID
>> valueOf /PT1.TableXYZVF.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.745571      0.849944      0.99213   ]
 [  13.3333343     0.699334      0.786121      0.912339  ]
 [  16.66672226    0.665317      0.742709      0.847962  ]
 [  19.99997969    0.638088      0.709721      0.802637  ]]
>> valueOf /PT1.TableXYZVISCOSITY.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.336936      0.319795      0.681125  ]
 [  13.3333343     0.321922      0.306271      0.291667  ]
 [  16.66672226    0.309937      0.29543       0.281868  ]
 [  19.99997969    0.299891      0.286323      0.273591  ]]
>> 
>> /PT1.Phase = LIQUID2
>> valueOf /PT1.TableXYZVF.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.745571      0.849944      0.99213   ]
 [  13.3333343     0.699334      0.786121      0.912339  ]
 [  16.66672226    0.665317      0.742709      0.847962  ]
 [  19.99997969    0.638088      0.709721      0.802637  ]]
>> valueOf /PT1.TableXYZVISCOSITY.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    1.12084       0.857219      0.119101  ]
 [  13.3333343     1.12074       0.857172      0.681104  ]
 [  16.66672226    1.12064       0.857122      0.68108   ]
 [  19.99997969    1.12054       0.857071      0.681055  ]]
>> 
>> #With VF at the end all phases
>> /PT1.ZProperty = VISCOSITY VF
>> valueOf /PT1.TableXYZVF.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.745571      0.849944      0.99213   ]
 [  13.3333343     0.699334      0.786121      0.912339  ]
 [  16.66672226    0.665317      0.742709      0.847962  ]
 [  19.99997969    0.638088      0.709721      0.802637  ]]
>> valueOf /PT1.TableXYZVISCOSITY.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    1.12084       0.857219      0.119101  ]
 [  13.3333343     1.12074       0.857172      0.681104  ]
 [  16.66672226    1.12064       0.857122      0.68108   ]
 [  19.99997969    1.12054       0.857071      0.681055  ]]
>> 
>> /PT1.Phase = LIQUID
>> valueOf /PT1.TableXYZVF.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.745571      0.849944      0.99213   ]
 [  13.3333343     0.699334      0.786121      0.912339  ]
 [  16.66672226    0.665317      0.742709      0.847962  ]
 [  19.99997969    0.638088      0.709721      0.802637  ]]
>> valueOf /PT1.TableXYZVISCOSITY.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.336936      0.319795      0.681125  ]
 [  13.3333343     0.321922      0.306271      0.291667  ]
 [  16.66672226    0.309937      0.29543       0.281868  ]
 [  19.99997969    0.299891      0.286323      0.273591  ]]
>> 
>> /PT1.Phase = LIQUID2
>> valueOf /PT1.TableXYZVF.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    0.745571      0.849944      0.99213   ]
 [  13.3333343     0.699334      0.786121      0.912339  ]
 [  16.66672226    0.665317      0.742709      0.847962  ]
 [  19.99997969    0.638088      0.709721      0.802637  ]]
>> valueOf /PT1.TableXYZVISCOSITY.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    1.12084       0.857219      0.119101  ]
 [  13.3333343     1.12074       0.857172      0.681104  ]
 [  16.66672226    1.12064       0.857122      0.68108   ]
 [  19.99997969    1.12054       0.857071      0.681055  ]]
>> 
>> copy /PT1
Copied /PT1 to the clipboard
>> paste /
Pasting /PT1
Pasted /PT1 as /PT1Clone
>> valueOf /PT1Clone.TableXYZVISCOSITY.convertedArrayRep
[[   0.           60.00083995   80.00063994  100.00043992]
 [  10.00000435    1.12084       0.857219      0.119101  ]
 [  13.3333343     1.12074       0.857172      0.681104  ]
 [  16.66672226    1.12064       0.857122      0.68108   ]
 [  19.99997969    1.12054       0.857071      0.681055  ]]
>> 
>> clear
>> read envelope_hydrate.tst
Processing envelope_hydrate.tst
>> optimizecode 1
>> maxversions 0
>> units SI
>> /LiquidPhases = 2
>> /StdLiqVolRefT = 288.15 
>> /StdLiqVolRefT = 60 F
>> /RecycleDetails = 1
>> displayproperties VapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow StdGasVolumeFlow Energy H S MolecularWeight MassDensity Cp ThermalConductivity Viscosity molarV ZFactor S
>> commonproperties + ZFactor P T MolecularWeight MassDensity StdLiqMolarVolVapFrac T P MoleFlow MassFlow VolumeFlow StdLiqVolumeFlow StdGasVolumeFlow Energy H S MolecularWeight MassDensity Cp ThermalConductivity Viscosity molarV ZFactor S
>> $VMGThermo = VirtualMaterials.Advanced_Peng-Robinson
>> / -> $VMGThermo
Thermo case attached to a unit operation. / to /VMGThermo
>> /SolidPhases = 0
>> $VMGThermo + NITROGEN CARBON_DIOXIDE METHANE ETHANE PROPANE ISOBUTANE n-BUTANE ISOPENTANE n-PENTANE n-HEXANE
NITROGEN CARBON DIOXIDE METHANE ETHANE PROPANE ISOBUTANE n-BUTANE ISOPENTANE n-PENTANE n-HEXANE 
>> $VMGThermo
Name: VMGThermo
PropPkg: VirtualMaterials.Advanced_Peng-Robinson
Using:
NITROGEN
CARBON DIOXIDE
METHANE
ETHANE
PROPANE
ISOBUTANE
n-BUTANE
ISOPENTANE
n-PENTANE
n-HEXANE
>> $VMGThermo + n-HEPTANE  n-OCTANE n-NONANE n-DECANE n-UNDECANE n-DODECANE n-TRIDECANE n-TETRADECANE n-PENTADECANE
n-HEPTANE n-OCTANE n-NONANE n-DECANE n-UNDECANE n-DODECANE n-TRIDECANE n-TETRADECANE n-PENTADECANE 
>> $VMGThermo + n-HEXADECANE n-HEPTADECANE n-OCTADECANE n-NONADECANE WATER TRIETHYLENE_GLYCOL
n-HEXADECANE n-HEPTADECANE n-OCTADECANE n-NONADECANE WATER TRIETHYLENE GLYCOL 
>> 
>> 
>> /S1 = Stream.Stream_Material()
>> '/S1.In.Fraction' =   6.31739960943069E-03  1.78491608012486E-02  .776137666301484  9.30061609166184E-02  3.33919693641336E-02  6.9992776625121E-03  1.04989164937681E-02  5.60042489185243E-03  4.30034416270531E-03  6.40052856619604E-03  7.40038239961881E-03  7.90066028297515E-03  5.40046415278631E-03  3.90033644705459E-03  2.60022162400481E-03  2.09577225138256E-03  1.70008242822679E-03  1.30008072914712E-03  1.20010537342328E-03  9.00079030067458E-04  6.9992776625121E-04  6.00052686711638E-04  4.9977650243496E-04  3.30020955596659E-03  0
>> 
>> 
>> #An evelope
>> /Env1 = Envelope.PTEnvelope("InitPressures = 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000 11000 12000")
>> InitPressures = 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000 11000 12000

>> /Env1.In -> /S1.Out
>> /Env1.Q1.Results
PT: 
Total 28 points: pointType, P kPa, T C
 Point 0: 	 0 	 500.0	 171.547547298
 Point 1: 	 0 	 726.58968722	 179.946880022
 Point 2: 	 7 	 1000.00000001	 187.109114522
 Point 3: 	 0 	 1588.09404503	 197.177885279
 Point 4: 	 7 	 2000.0	 202.044814867
 Point 5: 	 7 	 3000.0	 209.617045577
 Point 6: 	 7 	 4000.0	 213.47241441
 Point 7: 	 7 	 5000.0	 215.192842587
 Point 8: 	 4 	 5908.83919427	 215.60240205
 Point 9: 	 7 	 6000.0	 215.598838329
 Point 10: 	 0 	 6608.59355476	 215.40871804
 Point 11: 	 7 	 6999.9999948	 215.160744488
 Point 12: 	 7 	 7999.99962977	 214.147007651
 Point 13: 	 7 	 8999.99909564	 212.547604336
 Point 14: 	 7 	 9999.99971339	 210.264969778
 Point 15: 	 0 	 10873.4245926	 207.566547629
 Point 16: 	 7 	 11000.0	 207.121944173
 Point 17: 	 7 	 11999.9999955	 203.813789098
 Point 18: 	 0 	 16507.5121563	 184.935483269
 Point 19: 	 0 	 19916.1548032	 165.21094096
 Point 20: 	 0 	 21773.4685203	 151.943077346
 Point 21: 	 0 	 23440.3724441	 137.764071219
 Point 22: 	 3 	 24472.0661731	 127.597537833
 Point 23: 	 0 	 24471.3198306	 127.351366475
 Point 24: 	 0 	 24939.3000289	 122.004636158
 Point 25: 	 0 	 25160.6066042	 119.29765023
 Point 26: 	 0 	 25267.9340072	 117.935624977
 Point 27: 	 0 	 25320.7759659	 117.25262916
>> 
>> #Add hydrate curve
>> /Env1.Hydrate = 1
>> /Env1.Q1.Results
PT: 
Total 28 points: pointType, P kPa, T C
 Point 0: 	 0 	 500.0	 171.547547298
 Point 1: 	 0 	 726.58968722	 179.946880022
 Point 2: 	 7 	 1000.00000001	 187.109114522
 Point 3: 	 0 	 1588.09404503	 197.177885279
 Point 4: 	 7 	 2000.0	 202.044814867
 Point 5: 	 7 	 3000.0	 209.617045577
 Point 6: 	 7 	 4000.0	 213.47241441
 Point 7: 	 7 	 5000.0	 215.192842587
 Point 8: 	 4 	 5908.83919427	 215.60240205
 Point 9: 	 7 	 6000.0	 215.598838329
 Point 10: 	 0 	 6608.59355476	 215.40871804
 Point 11: 	 7 	 6999.9999948	 215.160744488
 Point 12: 	 7 	 7999.99962977	 214.147007651
 Point 13: 	 7 	 8999.99909564	 212.547604336
 Point 14: 	 7 	 9999.99971339	 210.264969778
 Point 15: 	 0 	 10873.4245926	 207.566547629
 Point 16: 	 7 	 11000.0	 207.121944173
 Point 17: 	 7 	 11999.9999955	 203.813789098
 Point 18: 	 0 	 16507.5121563	 184.935483269
 Point 19: 	 0 	 19916.1548032	 165.21094096
 Point 20: 	 0 	 21773.4685203	 151.943077346
 Point 21: 	 0 	 23440.3724441	 137.764071219
 Point 22: 	 3 	 24472.0661731	 127.597537833
 Point 23: 	 0 	 24471.3198306	 127.351366475
 Point 24: 	 0 	 24939.3000289	 122.004636158
 Point 25: 	 0 	 25160.6066042	 119.29765023
 Point 26: 	 0 	 25267.9340072	 117.935624977
 Point 27: 	 0 	 25320.7759659	 117.25262916
>> /Env1.HydrateResults
[[   260.       313.231]
 [   265.       414.471]
 [   270.       535.867]
 [   275.       796.434]
 [   280.      1498.34 ]
 [   285.      2795.41 ]
 [   290.      5410.63 ]
 [   295.     12427.8  ]
 [   297.5    21318.5  ]
 [   298.125  24228.9  ]
 [   298.164  24531.1  ]]
>> 
>> 
>> #Add TEG
>> '/S1.In.Fraction' =   3.15869980471534E-03  8.9245804006243E-03  .388068833150742  4.65030804583092E-02  1.66959846820668E-02  3.49963883125605E-03  5.24945824688405E-03  2.80021244592621E-03  2.15017208135265E-03  3.20026428309802E-03  3.7001911998094E-03  3.95033014148757E-03  2.70023207639315E-03  1.95016822352729E-03  1.3001108120024E-03  1.04788612569128E-03  8.50041214113395E-04  6.5004036457356E-04  6.0005268671164E-04  4.50039515033729E-04  3.49963883125605E-04  3.00026343355819E-04  2.4988825121748E-04  1.65010477798329E-03  .5
Msg from thermo provider when solving /Env1:
Hydrate sI or sII can not form for the specified mixture
>> /Env1.Q1.Results
PT: 
Total 28 points: pointType, P kPa, T C
 Point 0: 	 0 	 500.0	 171.547547298
 Point 1: 	 0 	 726.58968722	 179.946880022
 Point 2: 	 7 	 1000.00000001	 187.109114522
 Point 3: 	 0 	 1588.09404503	 197.177885279
 Point 4: 	 7 	 2000.0	 202.044814867
 Point 5: 	 7 	 3000.0	 209.617045577
 Point 6: 	 7 	 4000.0	 213.47241441
 Point 7: 	 7 	 5000.0	 215.192842587
 Point 8: 	 4 	 5908.83919427	 215.60240205
 Point 9: 	 7 	 6000.0	 215.598838329
 Point 10: 	 0 	 6608.59355476	 215.40871804
 Point 11: 	 7 	 6999.9999948	 215.160744488
 Point 12: 	 7 	 7999.99962977	 214.147007651
 Point 13: 	 7 	 8999.99909564	 212.547604336
 Point 14: 	 7 	 9999.99971339	 210.264969778
 Point 15: 	 0 	 10873.4245926	 207.566547629
 Point 16: 	 7 	 11000.0	 207.121944173
 Point 17: 	 7 	 11999.9999955	 203.813789098
 Point 18: 	 0 	 16507.5121563	 184.935483269
 Point 19: 	 0 	 19916.1548032	 165.21094096
 Point 20: 	 0 	 21773.4685204	 151.943077346
 Point 21: 	 0 	 23440.3724441	 137.764071219
 Point 22: 	 3 	 24472.0661731	 127.597537833
 Point 23: 	 0 	 24471.3198306	 127.351366475
 Point 24: 	 0 	 24939.3000289	 122.004636158
 Point 25: 	 0 	 25160.6066042	 119.29765023
 Point 26: 	 0 	 25267.9340072	 117.935624977
 Point 27: 	 0 	 25320.7759659	 117.25262916
>> /Env1.HydrateResults
[[ 2.60000000e+002  3.11092000e+002]
 [ 2.65000000e+002  4.11609000e+002]
 [ 2.70000000e+002  1.14624000e+006]]
>> 
>> 
>> #Remove TEG
>> '/S1.In.Fraction' =   6.31739960943068E-03  1.78491608012486E-02  .776137666301484  9.30061609166184E-02  3.33919693641336E-02  6.9992776625121E-03  1.04989164937681E-02  5.60042489185242E-03  4.3003441627053E-03  6.40052856619604E-03  7.4003823996188E-03  7.90066028297514E-03  5.4004641527863E-03  3.90033644705458E-03  2.6002216240048E-03  2.09577225138256E-03  1.70008242822679E-03  1.30008072914712E-03  1.20010537342328E-03  9.00079030067458E-04  6.9992776625121E-04  6.00052686711638E-04  4.9977650243496E-04  3.30020955596658E-03  0
Msg from thermo provider when solving /Env1:
Hydrate sI or sII can not form for the specified mixture
>> /Env1.Q1.Results
PT: 
Total 28 points: pointType, P kPa, T C
 Point 0: 	 0 	 500.0	 171.547547298
 Point 1: 	 0 	 726.58968722	 179.946880022
 Point 2: 	 7 	 1000.00000001	 187.109114522
 Point 3: 	 0 	 1588.09404503	 197.177885279
 Point 4: 	 7 	 2000.0	 202.044814867
 Point 5: 	 7 	 3000.0	 209.617045577
 Point 6: 	 7 	 4000.0	 213.47241441
 Point 7: 	 7 	 5000.0	 215.192842587
 Point 8: 	 4 	 5908.83919427	 215.60240205
 Point 9: 	 7 	 6000.0	 215.598838329
 Point 10: 	 0 	 6608.59355476	 215.40871804
 Point 11: 	 7 	 6999.9999948	 215.160744488
 Point 12: 	 7 	 7999.99962977	 214.147007651
 Point 13: 	 7 	 8999.99909564	 212.547604336
 Point 14: 	 7 	 9999.99971339	 210.264969778
 Point 15: 	 0 	 10873.4245926	 207.566547629
 Point 16: 	 7 	 11000.0	 207.121944173
 Point 17: 	 7 	 11999.9999955	 203.813789098
 Point 18: 	 0 	 16507.5121563	 184.935483269
 Point 19: 	 0 	 19916.1548032	 165.21094096
 Point 20: 	 0 	 21773.4685204	 151.943077346
 Point 21: 	 0 	 23440.3724441	 137.764071219
 Point 22: 	 3 	 24472.0661731	 127.597537833
 Point 23: 	 0 	 24471.3198306	 127.351366475
 Point 24: 	 0 	 24939.3000289	 122.004636158
 Point 25: 	 0 	 25160.6066042	 119.29765023
 Point 26: 	 0 	 25267.9340072	 117.935624977
 Point 27: 	 0 	 25320.7759659	 117.25262916
>> /Env1.HydrateResults
[[   260.       313.231]
 [   265.       414.471]
 [   270.       535.867]
 [   275.       796.434]
 [   280.      1498.34 ]
 [   285.      2795.41 ]
 [   290.      5410.63 ]
 [   295.     12427.8  ]
 [   297.5    21318.5  ]
 [   298.125  24228.9  ]
 [   298.164  24531.1  ]]
>> 
>> 
>> #Only N2
>> '/S1.In.Fraction' =   1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
Msg from thermo provider when solving /Env1:
Hydrate sI or sII can not form for the specified mixture
>> /Env1.Q1.Results
PT: 
Total 11 points: pointType, P kPa, T C
 Point 0: 	 0 	 500.0	 -179.184947322
 Point 1: 	 0 	 745.912348821	 -173.807400675
 Point 2: 	 7 	 1000.0	 -169.475720065
 Point 3: 	 0 	 1229.80155558	 -166.200049844
 Point 4: 	 7 	 2000.0	 -157.706900574
 Point 5: 	 0 	 2297.57178465	 -155.063364616
 Point 6: 	 0 	 2484.26743033	 -153.528252422
 Point 7: 	 0 	 2793.13695107	 -151.161478449
 Point 8: 	 7 	 3000.0	 -149.680124279
 Point 9: 	 0 	 3329.91430504	 -147.462711269
 Point 10: 	 2 	 3394.0	 -147.05
>> /Env1.HydrateResults
[[  260.    4901.08]
 [  265.    7779.18]]
>> 
>> #All normalized
>> '/S1.In.Fraction' =   4.34782608695652E-02  4.34782608695652E-02  4.34782608695652E-02  4.34782608695652E-02  4.34782608695652E-02  4.34782608695652E-02  4.34782608695652E-02  4.34782608695652E-02  0  4.34782608695652E-02  4.34782608695652E-02  4.34782608695652E-02  4.34782608695652E-02  4.34782608695652E-02  4.34782608695652E-02  4.34782608695652E-02  4.34782608695652E-02  4.34782608695652E-02  4.34782608695652E-02  4.34782608695652E-02  4.34782608695652E-02  4.34782608695652E-02  4.34782608695652E-02  4.34782608695652E-02  0
>> /Env1.Q1.Results
PT: [PTEnvelop::Terminate] Max allowable point reached :           100
Total 100 points: pointType, P kPa, T C
 Point 0: 	 0 	 500.0	 314.482062571
 Point 1: 	 0 	 674.387148222	 328.236936922
 Point 2: 	 7 	 999.999999995	 346.68458827
 Point 3: 	 0 	 1206.38154562	 355.423904767
 Point 4: 	 7 	 1999.99998891	 377.378762448
 Point 5: 	 0 	 2849.14678187	 388.657232614
 Point 6: 	 7 	 2999.99999993	 389.755862439
 Point 7: 	 4 	 3787.67580007	 392.402256579
 Point 8: 	 7 	 3999.99994817	 392.191206623
 Point 9: 	 2 	 4891.74467775	 385.163956179
 Point 10: 	 7 	 4999.999834	 383.260975168
 Point 11: 	 0 	 5842.94640862	 351.62116897
 Point 12: 	 7 	 5999.99999973	 344.099323214
 Point 13: 	 0 	 6404.27102711	 313.186426054
 Point 14: 	 0 	 6688.69024328	 258.094552907
 Point 15: 	 3 	 6702.76775016	 242.650461987
 Point 16: 	 0 	 6603.83840162	 196.768971719
 Point 17: 	 0 	 6324.83466096	 148.848813751
 Point 18: 	 7 	 6000.0	 111.174632261
 Point 19: 	 0 	 5998.49116061	 111.004593788
 Point 20: 	 0 	 5677.12957909	 80.3551512677
 Point 21: 	 0 	 5377.07874289	 54.9194855282
 Point 22: 	 0 	 5236.25584752	 43.7259777814
 Point 23: 	 0 	 5147.97411066	 36.9107150435
 Point 24: 	 0 	 5036.90628818	 28.5384884963
 Point 25: 	 7 	 4999.999997	 25.7201792079
 Point 26: 	 0 	 4908.88571967	 19.1490913662
 Point 27: 	 0 	 4762.32842327	 8.72214041734
 Point 28: 	 0 	 4677.83144301	 2.86023924815
 Point 29: 	 0 	 4579.59208805	 -3.82091836646
 Point 30: 	 0 	 4465.93335312	 -11.3733920606
 Point 31: 	 0 	 4399.80031206	 -15.6809695075
 Point 32: 	 0 	 4322.34752386	 -20.6448457746
 Point 33: 	 0 	 4231.98124195	 -26.3258919522
 Point 34: 	 0 	 4126.98229994	 -32.7771903268
 Point 35: 	 0 	 4065.65965111	 -36.4703473857
 Point 36: 	 7 	 4000.0	 -40.3126603303
 Point 37: 	 0 	 3993.62442	 -40.7382189821
 Point 38: 	 0 	 3909.28479401	 -45.6381993044
 Point 39: 	 0 	 3859.72030049	 -48.4689944439
 Point 40: 	 0 	 3801.21815418	 -51.7637418024
 Point 41: 	 0 	 3732.35413409	 -55.5776020259
 Point 42: 	 0 	 3651.53968484	 -59.9646327199
 Point 43: 	 0 	 3603.95677163	 -62.5030572867
 Point 44: 	 0 	 3547.71334809	 -65.4610715363
 Point 45: 	 0 	 3481.40210387	 -68.8898762693
 Point 46: 	 0 	 3403.4492632	 -72.8401144679
 Point 47: 	 0 	 3357.48938771	 -75.1287372639
 Point 48: 	 0 	 3303.1108424	 -77.7983225232
 Point 49: 	 0 	 3238.93122957	 -80.8963177874
 Point 50: 	 0 	 3200.96865695	 -82.702242532
 Point 51: 	 0 	 3155.93796742	 -84.8191282042
 Point 52: 	 0 	 3102.63780466	 -87.2897627046
 Point 53: 	 0 	 3039.70843737	 -90.1586791274
 Point 54: 	 0 	 3002.47693238	 -91.8319414655
 Point 55: 	 7 	 2999.99995656	 -91.9614450593
 Point 56: 	 0 	 2958.30809404	 -93.7941265551
 Point 57: 	 0 	 2906.02420084	 -96.0852898665
 Point 58: 	 0 	 2844.29541919	 -98.7472355995
 Point 59: 	 0 	 2807.77753816	 -100.300482912
 Point 60: 	 0 	 2764.46116126	 -102.122574837
 Point 61: 	 0 	 2713.19797539	 -104.25102796
 Point 62: 	 0 	 2652.69619107	 -106.725093345
 Point 63: 	 0 	 2616.91806841	 -108.169282722
 Point 64: 	 0 	 2574.49500744	 -109.863971347
 Point 65: 	 0 	 2524.31431029	 -111.84432331
 Point 66: 	 0 	 2465.13049583	 -114.147214922
 Point 67: 	 0 	 2430.15477791	 -115.491969767
 Point 68: 	 0 	 2388.70750238	 -117.070433745
 Point 69: 	 0 	 2339.717858	 -118.915600577
 Point 70: 	 0 	 2281.99459484	 -121.062154303
 Point 71: 	 0 	 2247.91253191	 -122.31605399
 Point 72: 	 0 	 2207.5556363	 -123.788288821
 Point 73: 	 0 	 2159.90068734	 -125.509867936
 Point 74: 	 0 	 2131.7096382	 -126.519976951
 Point 75: 	 0 	 2095.5084585	 -127.808335967
 Point 76: 	 0 	 2052.72985524	 -129.318525061
 Point 77: 	 0 	 2002.34160086	 -131.081078272
 Point 78: 	 7 	 1999.99998676	 -131.173116771
 Point 79: 	 0 	 1972.59992665	 -132.113533499
 Point 80: 	 0 	 1934.48194581	 -133.428591746
 Point 81: 	 0 	 1889.54899007	 -134.967532194
 Point 82: 	 0 	 1863.00919882	 -135.871082801
 Point 83: 	 0 	 1828.97448629	 -137.024196712
 Point 84: 	 0 	 1788.82425557	 -138.37683955
 Point 85: 	 0 	 1741.62953681	 -139.956920539
 Point 86: 	 0 	 1713.82364414	 -140.883219111
 Point 87: 	 0 	 1678.24305631	 -142.063876731
 Point 88: 	 0 	 1636.38409401	 -143.446741604
 Point 89: 	 0 	 1611.70291134	 -144.259286648
 Point 90: 	 0 	 1580.09925562	 -145.296960622
 Point 91: 	 0 	 1539.82007637	 -146.61546287
 Point 92: 	 0 	 1514.12143839	 -147.454625171
 Point 93: 	 0 	 1481.27541725	 -148.525199934
 Point 94: 	 0 	 1460.2628343	 -149.209087254
 Point 95: 	 0 	 1431.28677863	 -150.151126635
 Point 96: 	 0 	 1394.3791754	 -151.349736358
 Point 97: 	 0 	 1370.84485974	 -152.113552268
 Point 98: 	 0 	 1338.49150133	 -153.163351703
 Point 99: 	 0 	 1317.82957775	 -153.833837537
>> /Env1.HydrateResults
[[   260.       241.073]
 [   265.       350.117]
 [   270.       492.015]
 [   275.       866.658]
 [   280.      2245.14 ]
 [   285.     14628.1  ]]
>> 
>> 
>> cd /
/
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
Msg from thermo provider when solving /RootClone.Env1:
Hydrate sI or sII can not form for the specified mixture
>> /RootClone.Env1.HydrateResults
[[   260.       241.073]
 [   265.       350.117]
 [   270.       492.015]
 [   275.       866.658]
 [   280.      2245.14 ]
 [   285.     14628.1  ]]
>> 
>> clear
>> read volumebalance.tst
Processing volumebalance.tst
>> $thermo = VirtualMaterials.Advanced_Peng-Robinson
>>  . -> $thermo
Thermo case attached to a unit operation. / to /thermo
>> cd thermo
/thermo
>> cd $
$
>> cd /thermo
/thermo
>> /thermo + METHANE ETHANE PROPANE n-HEXANE n-HEPTANE n-OCTANE n-NONANE
METHANE ETHANE PROPANE n-HEXANE n-HEPTANE n-OCTANE n-NONANE 
>> cd /
/
>> mixer1 = Mixer.Mixer()
>> cd mixer1
/mixer1
>> NumberStreamsIn = 3
>> /mixer1.In0.P = 100
>> /mixer1.In1.P = 110
>> /mixer1.In2.P = 105
>> cd /mixer1.In0.Fraction
/mixer1.In0.Fraction
>> /mixer1.In0.Fraction = 0 0 0 1 1 1 1
>> cd /mixer1
/mixer1
>> /mixer1.In0.T = 30
>> cd /mixer1.In1.Fraction
/mixer1.In1.Fraction
>> /mixer1.In1.Fraction = 0.0 0.0 0.0 2 3 1 2
>> cd /mixer1
/mixer1
>> /mixer1.In1.T = 20
>> cd /mixer1.In2.Fraction
/mixer1.In2.Fraction
>> /mixer1.In2.Fraction = 0.0 0.0 0.0 5 6 3 5
>> cd /mixer1
/mixer1
>> /mixer1.Out.T = 40
>> /mixer1.In0.VolumeFlow = 20
>> /mixer1.In1.VolumeFlow = 40
>> /mixer1.Out.VolumeFlow = 150
>> /mixer1.Out.T = 
>> 
>> #Solve for vol in In2 and composition in Out
>> /mixer1.In2.T = 40
>> /mixer1.In0
Port: /mixer1.In0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 30.0 * C
P                  = 100.0 * kPa
MoleFlow           = 128.575995587 = kgmole/h
MassFlow           = 13785.3049394 = kg/h
VolumeFlow         = 20.0 * m3/hr
StdLiqVolumeFlow   = 19.7330796697 = m3/hr
H                  = -5461.15553369 = kJ/kmol
Energy             = -195048.197167 = W
MolecularWeight    = 107.21523 = 
ZFactor            = 0.00636013674592 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25 * 
n-HEPTANE          = 0.25 * 
n-OCTANE           = 0.25 * 
n-NONANE           = 0.25 * 

>> /mixer1.In1
Port: /mixer1.In1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 20.0 * C
P                  = 110.0 * kPa
MoleFlow           = 262.995671094 = kgmole/h
MassFlow           = 27736.0251379 = kg/h
VolumeFlow         = 40.0 * m3/hr
StdLiqVolumeFlow   = 39.8209875719 = m3/hr
H                  = -7695.14880688 = kJ/kmol
Energy             = -562164.117954 = W
MolecularWeight    = 105.4619075 = 
ZFactor            = 0.0070514509137 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25 * 
n-HEPTANE          = 0.375 * 
n-OCTANE           = 0.125 * 
n-NONANE           = 0.25 * 

>> /mixer1.In2
Port: /mixer1.In2 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 40.0 * C
P                  = 105.0 * kPa
MoleFlow           = 578.09149451 = kgmole/h
MassFlow           = 61340.0562348 = kg/h
VolumeFlow         = 90.0163711586 = m3/hr
StdLiqVolumeFlow   = 87.969703424 = m3/hr
H                  = -3090.37230239 = kJ/kmol
Energy             = -496254.984134 = W
MolecularWeight    = 106.107868421 = 
ZFactor            = 0.00646438754586 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.263157894737 * 
n-HEPTANE          = 0.315789473684 * 
n-OCTANE           = 0.157894736842 * 
n-NONANE           = 0.263157894737 * 

>> /mixer1.Out
Port: /mixer1.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 33.3474736277 = C
P                  = 100.0 = kPa
MoleFlow           = 969.663161192 = kgmole/h
MassFlow           = 102861.386312 = kg/h
VolumeFlow         = 150.0 * m3/hr
StdLiqVolumeFlow   = 147.523770666 = m3/hr
H                  = -4653.65959842 = kJ/kmol
Energy             = -1253467.29926 = W
MolecularWeight    = 106.079503098 = 
ZFactor            = 0.00624629762905 = 
METHANE            = 0.0 = 
ETHANE             = 0.0 = 
PROPANE            = 0.0 = 
n-HEXANE           = 0.257844442624 = 
n-HEPTANE          = 0.323125180877 = 
n-OCTANE           = 0.161185933874 = 
n-NONANE           = 0.257844442624 = 

>> 
>> 
>> #Solve for vol in Out and composition in In2
>> /mixer1.In2.T = 
>> /mixer1.Out.VolumeFlow = 
>> cd /mixer1.In2.Fraction
/mixer1.In2.Fraction
>> /mixer1.In2.Fraction = None
>> cd /mixer1
/mixer1
>> cd /mixer1.Out.Fraction
/mixer1.Out.Fraction
>> /mixer1.Out.Fraction = 0.0 0.0 0.0 0.25784 0.32313 0.16119 0.25784
>> cd /mixer1
/mixer1
>> /mixer1.In2.VolumeFlow = 90.016371
>> /mixer1.Out.T = 33.347474
>> /mixer1.In0
Port: /mixer1.In0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 30.0 * C
P                  = 100.0 * kPa
MoleFlow           = 128.575995587 = kgmole/h
MassFlow           = 13785.3049394 = kg/h
VolumeFlow         = 20.0 * m3/hr
StdLiqVolumeFlow   = 19.7330796697 = m3/hr
H                  = -5461.15553369 = kJ/kmol
Energy             = -195048.197167 = W
MolecularWeight    = 107.21523 = 
ZFactor            = 0.00636013674592 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25 * 
n-HEPTANE          = 0.25 * 
n-OCTANE           = 0.25 * 
n-NONANE           = 0.25 * 

>> /mixer1.In1
Port: /mixer1.In1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 20.0 * C
P                  = 110.0 * kPa
MoleFlow           = 262.995671094 = kgmole/h
MassFlow           = 27736.0251379 = kg/h
VolumeFlow         = 40.0 * m3/hr
StdLiqVolumeFlow   = 39.8209875719 = m3/hr
H                  = -7695.14880688 = kJ/kmol
Energy             = -562164.117954 = W
MolecularWeight    = 105.4619075 = 
ZFactor            = 0.0070514509137 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25 * 
n-HEPTANE          = 0.375 * 
n-OCTANE           = 0.125 * 
n-NONANE           = 0.25 * 

>> /mixer1.In2
Port: /mixer1.In2 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 40.00005035 = C
P                  = 105.0 * kPa
MoleFlow           = 578.091506218 = kgmole/h
MassFlow           = 61340.052356 = kg/h
VolumeFlow         = 90.016371 * m3/hr
StdLiqVolumeFlow   = 87.9696991087 = m3/hr
H                  = -3090.36547139 = kJ/kmol
Energy             = -496253.897256 = W
MolecularWeight    = 106.107859562 = 
ZFactor            = 0.00646438616925 = 
METHANE            = 0.0 = 
ETHANE             = 0.0 = 
PROPANE            = 0.0 = 
n-HEXANE           = 0.263150442782 = 
n-HEPTANE          = 0.3157975572 = 
n-OCTANE           = 0.157901557235 = 
n-NONANE           = 0.263150442782 = 

>> /mixer1.Out
Port: /mixer1.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 33.347474 * C
P                  = 100.0 = kPa
MoleFlow           = 969.6631729 = kgmole/h
MassFlow           = 102861.382433 = kg/h
VolumeFlow         = 149.999995533 = m3/hr
StdLiqVolumeFlow   = 147.52376635 = m3/hr
H                  = -4653.65550706 = kJ/kmol
Energy             = -1253466.21238 = W
MolecularWeight    = 106.079497817 = 
ZFactor            = 0.00624629723566 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25784 * 
n-HEPTANE          = 0.32313 * 
n-OCTANE           = 0.16119 * 
n-NONANE           = 0.25784 * 

>> 
>> 
>> #Solve for vol in In1 and composition in In2
>> /mixer1.In1.VolumeFlow = 
>> /mixer1.Out.VolumeFlow = 150
>> /mixer1.In0
Port: /mixer1.In0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 30.0 * C
P                  = 100.0 * kPa
MoleFlow           = 128.575995587 = kgmole/h
MassFlow           = 13785.3049394 = kg/h
VolumeFlow         = 20.0 * m3/hr
StdLiqVolumeFlow   = 19.7330796697 = m3/hr
H                  = -5461.15553369 = kJ/kmol
Energy             = -195048.197167 = W
MolecularWeight    = 107.21523 = 
ZFactor            = 0.00636013674592 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25 * 
n-HEPTANE          = 0.25 * 
n-OCTANE           = 0.25 * 
n-NONANE           = 0.25 * 

>> /mixer1.In1
Port: /mixer1.In1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 20.0 * C
P                  = 110.0 * kPa
MoleFlow           = 262.995700424 = kgmole/h
MassFlow           = 27736.028231 = kg/h
VolumeFlow         = 40.0000044609 = m3/hr
StdLiqVolumeFlow   = 39.8209920128 = m3/hr
H                  = -7695.14880688 = kJ/kmol
Energy             = -562164.180648 = W
MolecularWeight    = 105.4619075 = 
ZFactor            = 0.0070514509137 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25 * 
n-HEPTANE          = 0.375 * 
n-OCTANE           = 0.125 * 
n-NONANE           = 0.25 * 

>> /mixer1.In2
Port: /mixer1.In2 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 40.0000510081 = C
P                  = 105.0 * kPa
MoleFlow           = 578.091505762 = kgmole/h
MassFlow           = 61340.0523258 = kg/h
VolumeFlow         = 90.016371 * m3/hr
StdLiqVolumeFlow   = 87.9696990606 = m3/hr
H                  = -3090.36531584 = kJ/kmol
Energy             = -496253.871887 = W
MolecularWeight    = 106.107859594 = 
ZFactor            = 0.0064643861619 = 
METHANE            = 0.0 = 
ETHANE             = 0.0 = 
PROPANE            = 0.0 = 
n-HEXANE           = 0.263150443184 = 
n-HEPTANE          = 0.315797554563 = 
n-OCTANE           = 0.157901559068 = 
n-NONANE           = 0.263150443184 = 

>> /mixer1.Out
Port: /mixer1.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 33.347474 * C
P                  = 100.0 = kPa
MoleFlow           = 969.663201774 = kgmole/h
MassFlow           = 102861.385496 = kg/h
VolumeFlow         = 150.0 * m3/hr
StdLiqVolumeFlow   = 147.523770743 = m3/hr
H                  = -4653.65550706 = kJ/kmol
Energy             = -1253466.2497 = W
MolecularWeight    = 106.079497817 = 
ZFactor            = 0.00624629723566 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25784 * 
n-HEPTANE          = 0.32313 * 
n-OCTANE           = 0.16119 * 
n-NONANE           = 0.25784 * 

>> 
>> 
>> #Solve for vol in In0 and composition in In2
>> /mixer1.In0.VolumeFlow = 
>> /mixer1.In1.VolumeFlow = 40
>> /mixer1.In0
Port: /mixer1.In0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 30.0 * C
P                  = 100.0 * kPa
MoleFlow           = 128.576024486 = kgmole/h
MassFlow           = 13785.3080378 = kg/h
VolumeFlow         = 20.0000044952 = m3/hr
StdLiqVolumeFlow   = 19.7330841049 = m3/hr
H                  = -5461.15553369 = kJ/kmol
Energy             = -195048.241006 = W
MolecularWeight    = 107.21523 = 
ZFactor            = 0.00636013674592 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25 * 
n-HEPTANE          = 0.25 * 
n-OCTANE           = 0.25 * 
n-NONANE           = 0.25 * 

>> /mixer1.In1
Port: /mixer1.In1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 20.0 * C
P                  = 110.0 * kPa
MoleFlow           = 262.995671094 = kgmole/h
MassFlow           = 27736.0251379 = kg/h
VolumeFlow         = 40.0 * m3/hr
StdLiqVolumeFlow   = 39.8209875719 = m3/hr
H                  = -7695.14880688 = kJ/kmol
Energy             = -562164.117954 = W
MolecularWeight    = 105.4619075 = 
ZFactor            = 0.0070514509137 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25 * 
n-HEPTANE          = 0.375 * 
n-OCTANE           = 0.125 * 
n-NONANE           = 0.25 * 

>> /mixer1.In2
Port: /mixer1.In2 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 40.0000505195 = C
P                  = 105.0 * kPa
MoleFlow           = 578.091506193 = kgmole/h
MassFlow           = 61340.0523206 = kg/h
VolumeFlow         = 90.016371 * m3/hr
StdLiqVolumeFlow   = 87.9696990663 = m3/hr
H                  = -3090.36543095 = kJ/kmol
Energy             = -496253.890741 = W
MolecularWeight    = 106.107859506 = 
ZFactor            = 0.00646438616355 = 
METHANE            = 0.0 = 
ETHANE             = 0.0 = 
PROPANE            = 0.0 = 
n-HEXANE           = 0.263150443175 = 
n-HEPTANE          = 0.315797560856 = 
n-OCTANE           = 0.157901552795 = 
n-NONANE           = 0.263150443175 = 

>> /mixer1.Out
Port: /mixer1.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 33.347474 * C
P                  = 100.0 = kPa
MoleFlow           = 969.663201774 = kgmole/h
MassFlow           = 102861.385496 = kg/h
VolumeFlow         = 150.0 * m3/hr
StdLiqVolumeFlow   = 147.523770743 = m3/hr
H                  = -4653.65550706 = kJ/kmol
Energy             = -1253466.2497 = W
MolecularWeight    = 106.079497817 = 
ZFactor            = 0.00624629723566 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25784 * 
n-HEPTANE          = 0.32313 * 
n-OCTANE           = 0.16119 * 
n-NONANE           = 0.25784 * 

>> 
>> 
>> 
>> #Solve for vol in In0 and composition in In1
>> /mixer1.In1.VolumeFlow = 
>> /mixer1.In1.Fraction = None
>> /mixer1.In2.Fraction = 0.0 0.0 0.0 0.26316 0.31579 0.15789 0.26316
>> /mixer1.In1.T = 
>> /mixer1.In2.T = 40
>> /mixer1.In0.VolumeFlow = 20
>> /mixer1.In0.VolumeFlow = 
>> /mixer1.In1.VolumeFlow = 40
>> /mixer1.In0
Port: /mixer1.In0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 30.0 * C
P                  = 100.0 * kPa
MoleFlow           = 128.576016894 = kgmole/h
MassFlow           = 13785.3072238 = kg/h
VolumeFlow         = 20.0000033143 = m3/hr
StdLiqVolumeFlow   = 19.7330829397 = m3/hr
H                  = -5461.15553369 = kJ/kmol
Energy             = -195048.229489 = W
MolecularWeight    = 107.21523 = 
ZFactor            = 0.00636013674592 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25 * 
n-HEPTANE          = 0.25 * 
n-OCTANE           = 0.25 * 
n-NONANE           = 0.25 * 

>> /mixer1.In1
Port: /mixer1.In1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 20.0000696436 = C
P                  = 110.0 * kPa
MoleFlow           = 262.995530437 = kgmole/h
MassFlow           = 27736.026406 = kg/h
VolumeFlow         = 40.0 * m3/hr
StdLiqVolumeFlow   = 39.8209851028 = m3/hr
H                  = -7695.13715228 = kJ/kmol
Energy             = -562162.965874 = W
MolecularWeight    = 105.461968726 = 
ZFactor            = 0.00705145330962 = 
METHANE            = 0.0 = 
ETHANE             = 0.0 = 
PROPANE            = 0.0 = 
n-HEXANE           = 0.249978985686 = 
n-HEPTANE          = 0.375016649315 = 
n-OCTANE           = 0.125025379313 = 
n-NONANE           = 0.249978985686 = 

>> /mixer1.In2
Port: /mixer1.In2 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 40.0 * C
P                  = 105.0 * kPa
MoleFlow           = 578.091654443 = kgmole/h
MassFlow           = 61340.0518664 = kg/h
VolumeFlow         = 90.016371 * m3/hr
StdLiqVolumeFlow   = 87.9697027005 = m3/hr
H                  = -3090.37188461 = kJ/kmol
Energy             = -496255.054338 = W
MolecularWeight    = 106.107831509 = 
ZFactor            = 0.00646438541927 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.26316 * 
n-HEPTANE          = 0.31579 * 
n-OCTANE           = 0.15789 * 
n-NONANE           = 0.26316 * 

>> /mixer1.Out
Port: /mixer1.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 33.347474 * C
P                  = 100.0 = kPa
MoleFlow           = 969.663201774 = kgmole/h
MassFlow           = 102861.385496 = kg/h
VolumeFlow         = 150.0 * m3/hr
StdLiqVolumeFlow   = 147.523770743 = m3/hr
H                  = -4653.65550706 = kJ/kmol
Energy             = -1253466.2497 = W
MolecularWeight    = 106.079497817 = 
ZFactor            = 0.00624629723566 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25784 * 
n-HEPTANE          = 0.32313 * 
n-OCTANE           = 0.16119 * 
n-NONANE           = 0.25784 * 

>> 
>> 
>> #Solve for vol in In2 and composition in In1
>> /mixer1.In2.VolumeFlow = 
>> /mixer1.In0.VolumeFlow = 20
>> /mixer1.In0
Port: /mixer1.In0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 30.0 * C
P                  = 100.0 * kPa
MoleFlow           = 128.575995587 = kgmole/h
MassFlow           = 13785.3049394 = kg/h
VolumeFlow         = 20.0 * m3/hr
StdLiqVolumeFlow   = 19.7330796697 = m3/hr
H                  = -5461.15553369 = kJ/kmol
Energy             = -195048.197167 = W
MolecularWeight    = 107.21523 = 
ZFactor            = 0.00636013674592 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25 * 
n-HEPTANE          = 0.25 * 
n-OCTANE           = 0.25 * 
n-NONANE           = 0.25 * 

>> /mixer1.In1
Port: /mixer1.In1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 20.0000688107 = C
P                  = 110.0 * kPa
MoleFlow           = 262.995530449 = kgmole/h
MassFlow           = 27736.0264309 = kg/h
VolumeFlow         = 40.0 * m3/hr
StdLiqVolumeFlow   = 39.8209851324 = m3/hr
H                  = -7695.13734413 = kJ/kmol
Energy             = -562162.979917 = W
MolecularWeight    = 105.461968816 = 
ZFactor            = 0.0070514533301 = 
METHANE            = 0.0 = 
ETHANE             = 0.0 = 
PROPANE            = 0.0 = 
n-HEXANE           = 0.249978984621 = 
n-HEPTANE          = 0.375016643982 = 
n-OCTANE           = 0.125025386777 = 
n-NONANE           = 0.249978984621 = 

>> /mixer1.In2
Port: /mixer1.In2 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 40.0 * C
P                  = 105.0 * kPa
MoleFlow           = 578.091675737 = kgmole/h
MassFlow           = 61340.0541259 = kg/h
VolumeFlow         = 90.0163743158 = m3/hr
StdLiqVolumeFlow   = 87.9697059409 = m3/hr
H                  = -3090.37188461 = kJ/kmol
Energy             = -496255.072618 = W
MolecularWeight    = 106.107831509 = 
ZFactor            = 0.00646438541927 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.26316 * 
n-HEPTANE          = 0.31579 * 
n-OCTANE           = 0.15789 * 
n-NONANE           = 0.26316 * 

>> /mixer1.Out
Port: /mixer1.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 33.347474 * C
P                  = 100.0 = kPa
MoleFlow           = 969.663201774 = kgmole/h
MassFlow           = 102861.385496 = kg/h
VolumeFlow         = 150.0 * m3/hr
StdLiqVolumeFlow   = 147.523770743 = m3/hr
H                  = -4653.65550706 = kJ/kmol
Energy             = -1253466.2497 = W
MolecularWeight    = 106.079497817 = 
ZFactor            = 0.00624629723566 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25784 * 
n-HEPTANE          = 0.32313 * 
n-OCTANE           = 0.16119 * 
n-NONANE           = 0.25784 * 

>> 
>> 
>> #Now change specs to std vol flow
>> /mixer1.Out.VolumeFlow = 
>> /mixer1.Out.StdLiqVolumeFlow = 150
>> /mixer1.In0
Port: /mixer1.In0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 30.0 * C
P                  = 100.0 * kPa
MoleFlow           = 128.575995587 = kgmole/h
MassFlow           = 13785.3049394 = kg/h
VolumeFlow         = 20.0 * m3/hr
StdLiqVolumeFlow   = 19.7330796697 = m3/hr
H                  = -5461.15553369 = kJ/kmol
Energy             = -195048.197167 = W
MolecularWeight    = 107.21523 = 
ZFactor            = 0.00636013674592 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25 * 
n-HEPTANE          = 0.25 * 
n-OCTANE           = 0.25 * 
n-NONANE           = 0.25 * 

>> /mixer1.In1
Port: /mixer1.In1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 19.5786869917 = C
P                  = 110.0 * kPa
MoleFlow           = 263.096524989 = kgmole/h
MassFlow           = 27746.2815812 = kg/h
VolumeFlow         = 40.0 * m3/hr
StdLiqVolumeFlow   = 39.8358101011 = m3/hr
H                  = -7790.07995085 = kJ/kmol
Energy             = -569317.490127 = W
MolecularWeight    = 105.46046392 = 
ZFactor            = 0.00705873649752 = 
METHANE            = 0.0 = 
ETHANE             = 0.0 = 
PROPANE            = 0.0 = 
n-HEXANE           = 0.249654930458 = 
n-HEPTANE          = 0.375447986982 = 
n-OCTANE           = 0.125242152101 = 
n-NONANE           = 0.249654930458 = 

>> /mixer1.In2
Port: /mixer1.In2 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 40.0 * C
P                  = 105.0 * kPa
MoleFlow           = 594.26675913 = kgmole/h
MassFlow           = 63056.3571492 = kg/h
VolumeFlow         = 92.5350446624 = m3/hr
StdLiqVolumeFlow   = 90.4311102292 = m3/hr
H                  = -3090.37188461 = kJ/kmol
Energy             = -510140.35677 = W
MolecularWeight    = 106.107831509 = 
ZFactor            = 0.00646438541927 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.26316 * 
n-HEPTANE          = 0.31579 * 
n-OCTANE           = 0.15789 * 
n-NONANE           = 0.26316 * 

>> /mixer1.Out
Port: /mixer1.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 33.347474 * C
P                  = 100.0 = kPa
MoleFlow           = 985.939279707 = kgmole/h
MassFlow           = 104587.94367 = kg/h
VolumeFlow         = 152.517793483 = m3/hr
StdLiqVolumeFlow   = 150.0 * m3/hr
H                  = -4653.65550706 = kJ/kmol
Energy             = -1274506.04406 = W
MolecularWeight    = 106.079497817 = 
ZFactor            = 0.00624629723566 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25784 * 
n-HEPTANE          = 0.32313 * 
n-OCTANE           = 0.16119 * 
n-NONANE           = 0.25784 * 

>> 
>> 
>> 
>> /mixer1.In1.VolumeFlow = 
>> /mixer1.In1.StdLiqVolumeFlow = 40
>> /mixer1.In0
Port: /mixer1.In0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 30.0 * C
P                  = 100.0 * kPa
MoleFlow           = 128.575995587 = kgmole/h
MassFlow           = 13785.3049394 = kg/h
VolumeFlow         = 20.0 * m3/hr
StdLiqVolumeFlow   = 19.7330796697 = m3/hr
H                  = -5461.15553369 = kJ/kmol
Energy             = -195048.197167 = W
MolecularWeight    = 107.21523 = 
ZFactor            = 0.00636013674592 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25 * 
n-HEPTANE          = 0.25 * 
n-OCTANE           = 0.25 * 
n-NONANE           = 0.25 * 

>> /mixer1.In1
Port: /mixer1.In1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 19.6643778291 = C
P                  = 110.0 * kPa
MoleFlow           = 264.175496583 = kgmole/h
MassFlow           = 27860.7689172 = kg/h
VolumeFlow         = 40.1679051392 = m3/hr
StdLiqVolumeFlow   = 40.0 * m3/hr
H                  = -7770.88494009 = kJ/kmol
Energy             = -570243.71887 = W
MolecularWeight    = 105.463107963 = 
ZFactor            = 0.00705740749767 = 
METHANE            = 0.0 = 
ETHANE             = 0.0 = 
PROPANE            = 0.0 = 
n-HEXANE           = 0.249710089194 = 
n-HEPTANE          = 0.375204325953 = 
n-OCTANE           = 0.125375495659 = 
n-NONANE           = 0.249710089194 = 

>> /mixer1.In2
Port: /mixer1.In2 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 40.0 * C
P                  = 105.0 * kPa
MoleFlow           = 593.187787537 = kgmole/h
MassFlow           = 62941.8698132 = kg/h
VolumeFlow         = 92.3670347863 = m3/hr
StdLiqVolumeFlow   = 90.2669203303 = m3/hr
H                  = -3090.37188461 = kJ/kmol
Energy             = -509214.128027 = W
MolecularWeight    = 106.107831509 = 
ZFactor            = 0.00646438541927 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.26316 * 
n-HEPTANE          = 0.31579 * 
n-OCTANE           = 0.15789 * 
n-NONANE           = 0.26316 * 

>> /mixer1.Out
Port: /mixer1.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 33.347474 * C
P                  = 100.0 = kPa
MoleFlow           = 985.939279707 = kgmole/h
MassFlow           = 104587.94367 = kg/h
VolumeFlow         = 152.517793483 = m3/hr
StdLiqVolumeFlow   = 150.0 * m3/hr
H                  = -4653.65550706 = kJ/kmol
Energy             = -1274506.04406 = W
MolecularWeight    = 106.079497817 = 
ZFactor            = 0.00624629723566 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25784 * 
n-HEPTANE          = 0.32313 * 
n-OCTANE           = 0.16119 * 
n-NONANE           = 0.25784 * 

>> 
>> 
>> /mixer1.In0.VolumeFlow = 
>> /mixer1.In0.StdLiqVolumeFlow = 20
>> /mixer1.In0
Port: /mixer1.In0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 30.0 * C
P                  = 100.0 * kPa
MoleFlow           = 130.315184188 = kgmole/h
MassFlow           = 13971.7724452 = kg/h
VolumeFlow         = 20.2705308393 = m3/hr
StdLiqVolumeFlow   = 20.0 * m3/hr
H                  = -5461.15553369 = kJ/kmol
Energy             = -197686.524792 = W
MolecularWeight    = 107.21523 = 
ZFactor            = 0.00636013674592 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25 * 
n-HEPTANE          = 0.25 * 
n-OCTANE           = 0.25 * 
n-NONANE           = 0.25 * 

>> /mixer1.In1
Port: /mixer1.In1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 19.7333370302 = C
P                  = 110.0 * kPa
MoleFlow           = 264.19037115 = kgmole/h
MassFlow           = 27860.4212504 = kg/h
VolumeFlow         = 40.1703486417 = m3/hr
StdLiqVolumeFlow   = 40.0 * m3/hr
H                  = -7755.01433707 = kJ/kmol
Energy             = -569111.143328 = W
MolecularWeight    = 105.45585416 = 
ZFactor            = 0.00705571945702 = 
METHANE            = 0.0 = 
ETHANE             = 0.0 = 
PROPANE            = 0.0 = 
n-HEXANE           = 0.249797479902 = 
n-HEPTANE          = 0.375634082174 = 
n-OCTANE           = 0.124770958021 = 
n-NONANE           = 0.249797479902 = 

>> /mixer1.In2
Port: /mixer1.In2 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 40.0 * C
P                  = 105.0 * kPa
MoleFlow           = 591.43372437 = kgmole/h
MassFlow           = 62755.7499742 = kg/h
VolumeFlow         = 92.0939043932 = m3/hr
StdLiqVolumeFlow   = 90.0 = m3/hr
H                  = -3090.37188461 = kJ/kmol
Energy             = -507708.375945 = W
MolecularWeight    = 106.107831509 = 
ZFactor            = 0.00646438541927 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.26316 * 
n-HEPTANE          = 0.31579 * 
n-OCTANE           = 0.15789 * 
n-NONANE           = 0.26316 * 

>> /mixer1.Out
Port: /mixer1.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 0.0 = 
T                  = 33.347474 * C
P                  = 100.0 = kPa
MoleFlow           = 985.939279707 = kgmole/h
MassFlow           = 104587.94367 = kg/h
VolumeFlow         = 152.517793483 = m3/hr
StdLiqVolumeFlow   = 150.0 * m3/hr
H                  = -4653.65550706 = kJ/kmol
Energy             = -1274506.04406 = W
MolecularWeight    = 106.079497817 = 
ZFactor            = 0.00624629723566 = 
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25784 * 
n-HEPTANE          = 0.32313 * 
n-OCTANE           = 0.16119 * 
n-NONANE           = 0.25784 * 

>> 
>> 
>> #Deleting temperatures should still be able to balance moles
>> /mixer1.Out.T = 
>> /mixer1.In2.T = 
>> /mixer1.In0.T = 
>> /mixer1.In0
Port: /mixer1.In0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = 100.0 * kPa
MoleFlow           = 130.315184188 = kgmole/h
MassFlow           = 13971.7724452 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 20.0 * m3/hr
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25 * 
n-HEPTANE          = 0.25 * 
n-OCTANE           = 0.25 * 
n-NONANE           = 0.25 * 

>> /mixer1.In1
Port: /mixer1.In1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = 110.0 * kPa
MoleFlow           = 264.19037115 = kgmole/h
MassFlow           = 27860.4212504 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 40.0 * m3/hr
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
METHANE            = 0.0 = 
ETHANE             = 0.0 = 
PROPANE            = 0.0 = 
n-HEXANE           = 0.249797479902 = 
n-HEPTANE          = 0.375634082174 = 
n-OCTANE           = 0.124770958021 = 
n-NONANE           = 0.249797479902 = 

>> /mixer1.In2
Port: /mixer1.In2 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = 105.0 * kPa
MoleFlow           = 591.43372437 = kgmole/h
MassFlow           = 62755.7499742 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 90.0 = m3/hr
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.26316 * 
n-HEPTANE          = 0.31579 * 
n-OCTANE           = 0.15789 * 
n-NONANE           = 0.26316 * 

>> /mixer1.Out
Port: /mixer1.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = 100.0 = kPa
MoleFlow           = 985.939279707 = kgmole/h
MassFlow           = 104587.94367 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 150.0 * m3/hr
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25784 * 
n-HEPTANE          = 0.32313 * 
n-OCTANE           = 0.16119 * 
n-NONANE           = 0.25784 * 

>> 
>> 
>> #Changing specs should work
>> /mixer1.In0.StdLiqVolumeFlow = 
>> /mixer1.In2.StdLiqVolumeFlow = 90
>> /mixer1.Out.StdLiqVolumeFlow = 
>> /mixer1.In0.StdLiqVolumeFlow = 20
>> /mixer1.In0
Port: /mixer1.In0 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = 100.0 * kPa
MoleFlow           = 130.315184188 = kgmole/h
MassFlow           = 13971.7724452 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 20.0 * m3/hr
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25 * 
n-HEPTANE          = 0.25 * 
n-OCTANE           = 0.25 * 
n-NONANE           = 0.25 * 

>> /mixer1.In1
Port: /mixer1.In1 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = 110.0 * kPa
MoleFlow           = 264.19037115 = kgmole/h
MassFlow           = 27860.4212504 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 40.0 * m3/hr
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
METHANE            = 0.0 = 
ETHANE             = 0.0 = 
PROPANE            = 0.0 = 
n-HEXANE           = 0.249797479902 = 
n-HEPTANE          = 0.375634082174 = 
n-OCTANE           = 0.124770958021 = 
n-NONANE           = 0.249797479902 = 

>> /mixer1.In2
Port: /mixer1.In2 + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = 105.0 * kPa
MoleFlow           = 591.43372437 = kgmole/h
MassFlow           = 62755.7499742 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 90.0 * m3/hr
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.26316 * 
n-HEPTANE          = 0.31579 * 
n-OCTANE           = 0.15789 * 
n-NONANE           = 0.26316 * 

>> /mixer1.Out
Port: /mixer1.Out + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = None
P                  = 100.0 = kPa
MoleFlow           = 985.939279707 = kgmole/h
MassFlow           = 104587.94367 = kg/h
VolumeFlow         = None
StdLiqVolumeFlow   = 150.0 = m3/hr
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
METHANE            = 0.0 * 
ETHANE             = 0.0 * 
PROPANE            = 0.0 * 
n-HEXANE           = 0.25784 * 
n-HEPTANE          = 0.32313 * 
n-OCTANE           = 0.16119 * 
n-NONANE           = 0.25784 * 

>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> clear
>> read setthermo.tst
Processing setthermo.tst
>> #Test the creation of the thermo cases and preserving compounds
>> 
>> $thermo1 = VirtualMaterials.RK
>>  . -> $thermo1
Thermo case attached to a unit operation. / to /thermo1
>> /thermo1 + METHANE ETHANE PROPANE ISOBUTANE
METHANE ETHANE PROPANE ISOBUTANE 
>> 
>> $thermo2 = VirtualMaterials.RK
>> $thermo2 + ISOBUTANE PROPANE METHANE ETHANE
ISOBUTANE PROPANE METHANE ETHANE 
>> 
>> $thermo3 = VirtualMaterials.Advanced_Peng-Robinson
>> $thermo3 + PROPANE ISOBUTANE n-BUTANE ISOPENTANE n-PENTANE n-OCTANE
PROPANE ISOBUTANE n-BUTANE ISOPENTANE n-PENTANE n-OCTANE 
>> 
>> $thermo4 = VirtualMaterials.RK
>> 
>> thermo5 = VirtualMaterials.RK
The usage of thermo5 = VirtualMaterials.RK is obsolete and will be deprecated. Use $thermoname = opTypeDesc instead
>> $thermo5 + NITROGEN CARBON_DIOXIDE HYDROGEN_SULFIDE
NITROGEN CARBON DIOXIDE HYDROGEN SULFIDE 
>> 
>> /s = Stream.Stream_Material()
>> /s.In.T = 20
>> /s.In.P = 101
>> /s.In.MoleFlow = 10
>> /s.In.Fraction = 1 2 3 4
>> /s.In
Port: /s.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = 20.0 * C
P                  = 101.0 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow is invalid
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
NITROGEN           = None
CARBON DIOXIDE     = None
HYDROGEN SULFIDE   = None

>> 
>> /sep = Flash.SimpleFlash()
>> /sep.In -> /s.Out
>> copy /
Copied / to the clipboard
>> paste /
Pasting /
Pasted / as /RootClone
>> 
>> 
>> /RootClone -> $thermo2
Thermo case attached to a unit operation. /RootClone to /RootClone.thermo2
>> /RootClone.s.In
Port: /RootClone.s.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = 20.0 * C
P                  = 101.0 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow is invalid
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
ISOBUTANE          = None
PROPANE            = None
METHANE            = None
ETHANE             = None

>> 
>> 
>> 
>> /RootClone -> $thermo3
Thermo case attached to a unit operation. /RootClone to /RootClone.thermo3
>> /RootClone.s.In
Port: /RootClone.s.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = 20.0 * C
P                  = 101.0 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow is invalid
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
PROPANE            = None
ISOBUTANE          = None
n-BUTANE           = None
ISOPENTANE         = None
n-PENTANE          = None
n-OCTANE           = None

>> 
>> 
>> 
>> /RootClone -> $thermo1
Thermo case attached to a unit operation. /RootClone to /RootClone.thermo1
>> /RootClone.s.In
Port: /RootClone.s.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = 20.0 * C
P                  = 101.0 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow is invalid
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
METHANE            = None
ETHANE             = None
PROPANE            = None
ISOBUTANE          = None

>> 
>> 
>> 
>> /RootClone -> $thermo5
Thermo case attached to a unit operation. /RootClone to /thermo5
>> /RootClone.s.In
Port: /RootClone.s.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = 20.0 * C
P                  = 101.0 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow is invalid
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
NITROGEN           = None
CARBON DIOXIDE     = None
HYDROGEN SULFIDE   = None

>> 
>> /RootClone.s.In.Fraction = 1 2 3
>> /RootClone.s.In
Port: /RootClone.s.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 20.0 * C
P                  = 101.0 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 363.796866667 = kg/h
VolumeFlow         = 240.059149239 = m3/hr
StdLiqVolumeFlow   = 0.538360879629 = m3/hr
H                  = 9262.4516174 = kJ/kmol
Energy             = 25729.0322706 = W
MolecularWeight    = 36.3796866667 = 
ZFactor            = 0.994762364513 = 
NITROGEN           = 0.166666666667 * 
CARBON DIOXIDE     = 0.333333333333 * 
HYDROGEN SULFIDE   = 0.5 * 

>> 
>> /RootClone -> $thermo4
Thermo case attached to a unit operation. /RootClone to /RootClone.thermo4
>> /RootClone.s.In
Port: /RootClone.s.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = 20.0 * C
P                  = 101.0 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None

>> 
>> 
>> /RootClone -> $thermo2
Thermo case attached to a unit operation. /RootClone to /RootClone.thermo2
>> /RootClone.s.In
Port: /RootClone.s.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = 20.0 * C
P                  = 101.0 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
ISOBUTANE          = None
PROPANE            = None
METHANE            = None
ETHANE             = None

>> 
>> /RootClone.s.In.Fraction = 1 2 3 4
>> /RootClone.s.In
Port: /RootClone.s.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 20.0 * C
P                  = 101.0 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 314.71698 = kg/h
VolumeFlow         = 239.377175014 = m3/hr
StdLiqVolumeFlow   = 0.773005523 = m3/hr
H                  = 11931.8968684 = kJ/kmol
Energy             = 33144.1579677 = W
MolecularWeight    = 31.471698 = 
ZFactor            = 0.991936384774 = 
ISOBUTANE          = 0.1 * 
PROPANE            = 0.2 * 
METHANE            = 0.3 * 
ETHANE             = 0.4 * 

>> 
>> 
>> /RootClone ->
Thermo case disconnected from unit operation. /RootClone from /RootClone.thermo2
>> /RootClone.s.In
Port: /RootClone.s.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = 1.0 = 
T                  = 20.0 * C
P                  = 101.0 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = 363.796866667 = kg/h
VolumeFlow         = 240.059149239 = m3/hr
StdLiqVolumeFlow   = 0.538360879629 = m3/hr
H                  = 9262.4516174 = kJ/kmol
Energy             = 25729.0322706 = W
MolecularWeight    = 36.3796866667 = 
ZFactor            = 0.994762364513 = 
NITROGEN           = 0.166666666667 * 
CARBON DIOXIDE     = 0.333333333333 * 
HYDROGEN SULFIDE   = 0.5 * 

>> 
>> 
>> /RootClone -> $thermo2
Thermo case attached to a unit operation. /RootClone to /RootClone.thermo2
>> /RootClone.s.In
Port: /RootClone.s.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = 20.0 * C
P                  = 101.0 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
ISOBUTANE          = None
PROPANE            = None
METHANE            = None
ETHANE             = None

>> 
>> 
>> copy /s /sep
Copied /s /sep to the clipboard
>> paste /RootClone
Pasting /s /sep
Pasted /s /sep as /RootClone.sClone /RootClone.sepClone
>> /RootClone.sClone.In
Port: /RootClone.sClone.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = 20.0 * C
P                  = 101.0 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow is invalid
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
ISOBUTANE          = None
PROPANE            = None
METHANE            = None
ETHANE             = None

>> 
>> 
>> 
>> copy /
Copied / to the clipboard
>> paste /RootClone
Pasting /
Pasted / as /RootClone.RootClone
>> /RootClone.RootClone.s.In
Port: /RootClone.RootClone.s.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = 20.0 * C
P                  = 101.0 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow is invalid
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
NITROGEN           = None
CARBON DIOXIDE     = None
HYDROGEN SULFIDE   = None

>> /RootClone.RootClone.RootClone.s.In
Port: /RootClone.RootClone.RootClone.s.In + sim.solver.Ports.Port_Material
Connected to: None
VapFrac            = None
T                  = 20.0 * C
P                  = 101.0 * kPa
MoleFlow           = 10.0 * kgmole/h
MassFlow           = None
VolumeFlow         = None
StdLiqVolumeFlow   = None
H                  = None
Energy             = None
MolecularWeight    = None
ZFactor            = None
ISOBUTANE          = None
PROPANE            = None
METHANE            = None
ETHANE             = None

>> 
>> 
>> 
>> 
>> #Finish with a clear to check for memory leaks
>> clear

GARBAGE:

GARBAGE OBJECTS:
